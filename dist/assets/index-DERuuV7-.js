var ux=Object.defineProperty;var dx=(e,t,n)=>t in e?ux(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ar=(e,t,n)=>dx(e,typeof t!="symbol"?t+"":t,n);function hx(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(i,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var fx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xp={exports:{}},kl={},vp={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ta=Symbol.for("react.element"),px=Symbol.for("react.portal"),mx=Symbol.for("react.fragment"),gx=Symbol.for("react.strict_mode"),xx=Symbol.for("react.profiler"),vx=Symbol.for("react.provider"),yx=Symbol.for("react.context"),_x=Symbol.for("react.forward_ref"),wx=Symbol.for("react.suspense"),bx=Symbol.for("react.memo"),Lx=Symbol.for("react.lazy"),Th=Symbol.iterator;function Nx(e){return e===null||typeof e!="object"?null:(e=Th&&e[Th]||e["@@iterator"],typeof e=="function"?e:null)}var yp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_p=Object.assign,wp={};function ui(e,t,n){this.props=e,this.context=t,this.refs=wp,this.updater=n||yp}ui.prototype.isReactComponent={};ui.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ui.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bp(){}bp.prototype=ui.prototype;function Ku(e,t,n){this.props=e,this.context=t,this.refs=wp,this.updater=n||yp}var Qu=Ku.prototype=new bp;Qu.constructor=Ku;_p(Qu,ui.prototype);Qu.isPureReactComponent=!0;var Mh=Array.isArray,Lp=Object.prototype.hasOwnProperty,Yu={current:null},Np={key:!0,ref:!0,__self:!0,__source:!0};function kp(e,t,n){var i,s={},a=null,c=null;if(t!=null)for(i in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(a=""+t.key),t)Lp.call(t,i)&&!Np.hasOwnProperty(i)&&(s[i]=t[i]);var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){for(var f=Array(d),p=0;p<d;p++)f[p]=arguments[p+2];s.children=f}if(e&&e.defaultProps)for(i in d=e.defaultProps,d)s[i]===void 0&&(s[i]=d[i]);return{$$typeof:Ta,type:e,key:a,ref:c,props:s,_owner:Yu.current}}function kx(e,t){return{$$typeof:Ta,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ta}function Cx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ih=/\/+/g;function pc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cx(""+e.key):t.toString(36)}function Do(e,t,n,i,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Ta:case px:c=!0}}if(c)return c=e,s=s(c),e=i===""?"."+pc(c,0):i,Mh(s)?(n="",e!=null&&(n=e.replace(Ih,"$&/")+"/"),Do(s,t,n,"",function(p){return p})):s!=null&&(Xu(s)&&(s=kx(s,n+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(Ih,"$&/")+"/")+e)),t.push(s)),1;if(c=0,i=i===""?".":i+":",Mh(e))for(var d=0;d<e.length;d++){a=e[d];var f=i+pc(a,d);c+=Do(a,t,n,f,s)}else if(f=Nx(e),typeof f=="function")for(e=f.call(e),d=0;!(a=e.next()).done;)a=a.value,f=i+pc(a,d++),c+=Do(a,t,n,f,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function mo(e,t,n){if(e==null)return e;var i=[],s=0;return Do(e,i,"","",function(a){return t.call(n,a,s++)}),i}function jx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},zo={transition:null},Sx={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:zo,ReactCurrentOwner:Yu};function Cp(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:mo,forEach:function(e,t,n){mo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return mo(e,function(){t++}),t},toArray:function(e){return mo(e,function(t){return t})||[]},only:function(e){if(!Xu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=ui;ye.Fragment=mx;ye.Profiler=xx;ye.PureComponent=Ku;ye.StrictMode=gx;ye.Suspense=wx;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sx;ye.act=Cp;ye.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=_p({},e.props),s=e.key,a=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,c=Yu.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(f in t)Lp.call(t,f)&&!Np.hasOwnProperty(f)&&(i[f]=t[f]===void 0&&d!==void 0?d[f]:t[f])}var f=arguments.length-2;if(f===1)i.children=n;else if(1<f){d=Array(f);for(var p=0;p<f;p++)d[p]=arguments[p+2];i.children=d}return{$$typeof:Ta,type:e.type,key:s,ref:a,props:i,_owner:c}};ye.createContext=function(e){return e={$$typeof:yx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vx,_context:e},e.Consumer=e};ye.createElement=kp;ye.createFactory=function(e){var t=kp.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:_x,render:e}};ye.isValidElement=Xu;ye.lazy=function(e){return{$$typeof:Lx,_payload:{_status:-1,_result:e},_init:jx}};ye.memo=function(e,t){return{$$typeof:bx,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=zo.transition;zo.transition={};try{e()}finally{zo.transition=t}};ye.unstable_act=Cp;ye.useCallback=function(e,t){return gt.current.useCallback(e,t)};ye.useContext=function(e){return gt.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};ye.useEffect=function(e,t){return gt.current.useEffect(e,t)};ye.useId=function(){return gt.current.useId()};ye.useImperativeHandle=function(e,t,n){return gt.current.useImperativeHandle(e,t,n)};ye.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return gt.current.useMemo(e,t)};ye.useReducer=function(e,t,n){return gt.current.useReducer(e,t,n)};ye.useRef=function(e){return gt.current.useRef(e)};ye.useState=function(e){return gt.current.useState(e)};ye.useSyncExternalStore=function(e,t,n){return gt.current.useSyncExternalStore(e,t,n)};ye.useTransition=function(){return gt.current.useTransition()};ye.version="18.3.1";vp.exports=ye;var x=vp.exports;const Cl=gp(x),Ex=hx({__proto__:null,default:Cl},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px=x,Tx=Symbol.for("react.element"),Mx=Symbol.for("react.fragment"),Ix=Object.prototype.hasOwnProperty,Rx=Px.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ox={key:!0,ref:!0,__self:!0,__source:!0};function jp(e,t,n){var i,s={},a=null,c=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(c=t.ref);for(i in t)Ix.call(t,i)&&!Ox.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:Tx,type:e,key:a,ref:c,props:s,_owner:Rx.current}}kl.Fragment=Mx;kl.jsx=jp;kl.jsxs=jp;xp.exports=kl;var l=xp.exports,Vc={},Sp={exports:{}},Dt={},Ep={exports:{}},Pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,ie){var F=R.length;R.push(ie);e:for(;0<F;){var J=F-1>>>1,le=R[J];if(0<s(le,ie))R[J]=ie,R[F]=le,F=J;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var ie=R[0],F=R.pop();if(F!==ie){R[0]=F;e:for(var J=0,le=R.length,we=le>>>1;J<we;){var fe=2*(J+1)-1,ue=R[fe],K=fe+1,B=R[K];if(0>s(ue,F))K<le&&0>s(B,ue)?(R[J]=B,R[K]=F,J=K):(R[J]=ue,R[fe]=F,J=fe);else if(K<le&&0>s(B,F))R[J]=B,R[K]=F,J=K;else break e}}return ie}function s(R,ie){var F=R.sortIndex-ie.sortIndex;return F!==0?F:R.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var f=[],p=[],g=1,v=null,C=3,S=!1,_=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(R){for(var ie=n(p);ie!==null;){if(ie.callback===null)i(p);else if(ie.startTime<=R)i(p),ie.sortIndex=ie.expirationTime,t(f,ie);else break;ie=n(p)}}function E(R){if(y=!1,j(R),!_)if(n(f)!==null)_=!0,G(T);else{var ie=n(p);ie!==null&&ce(E,ie.startTime-R)}}function T(R,ie){_=!1,y&&(y=!1,w(A),A=-1),S=!0;var F=C;try{for(j(ie),v=n(f);v!==null&&(!(v.expirationTime>ie)||R&&!se());){var J=v.callback;if(typeof J=="function"){v.callback=null,C=v.priorityLevel;var le=J(v.expirationTime<=ie);ie=e.unstable_now(),typeof le=="function"?v.callback=le:v===n(f)&&i(f),j(ie)}else i(f);v=n(f)}if(v!==null)var we=!0;else{var fe=n(p);fe!==null&&ce(E,fe.startTime-ie),we=!1}return we}finally{v=null,C=F,S=!1}}var I=!1,z=null,A=-1,Q=5,Z=-1;function se(){return!(e.unstable_now()-Z<Q)}function ne(){if(z!==null){var R=e.unstable_now();Z=R;var ie=!0;try{ie=z(!0,R)}finally{ie?$():(I=!1,z=null)}}else I=!1}var $;if(typeof b=="function")$=function(){b(ne)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,X=q.port2;q.port1.onmessage=ne,$=function(){X.postMessage(null)}}else $=function(){k(ne,0)};function G(R){z=R,I||(I=!0,$())}function ce(R,ie){A=k(function(){R(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){_||S||(_=!0,G(T))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(R){switch(C){case 1:case 2:case 3:var ie=3;break;default:ie=C}var F=C;C=ie;try{return R()}finally{C=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,ie){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=C;C=R;try{return ie()}finally{C=F}},e.unstable_scheduleCallback=function(R,ie,F){var J=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?J+F:J):F=J,R){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=F+le,R={id:g++,callback:ie,priorityLevel:R,startTime:F,expirationTime:le,sortIndex:-1},F>J?(R.sortIndex=F,t(p,R),n(f)===null&&R===n(p)&&(y?(w(A),A=-1):y=!0,ce(E,F-J))):(R.sortIndex=le,t(f,R),_||S||(_=!0,G(T))),R},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(R){var ie=C;return function(){var F=C;C=ie;try{return R.apply(this,arguments)}finally{C=F}}}})(Pp);Ep.exports=Pp;var Dx=Ep.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx=x,Ot=Dx;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tp=new Set,ha={};function us(e,t){ti(e,t),ti(e+"Capture",t)}function ti(e,t){for(ha[e]=t,e=0;e<t.length;e++)Tp.add(t[e])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$c=Object.prototype.hasOwnProperty,Ax=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rh={},Oh={};function Bx(e){return $c.call(Oh,e)?!0:$c.call(Rh,e)?!1:Ax.test(e)?Oh[e]=!0:(Rh[e]=!0,!1)}function Fx(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ux(e,t,n,i){if(t===null||typeof t>"u"||Fx(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xt(e,t,n,i,s,a,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=c}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){it[e]=new xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];it[t]=new xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){it[e]=new xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){it[e]=new xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){it[e]=new xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){it[e]=new xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){it[e]=new xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){it[e]=new xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){it[e]=new xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ju=/[\-:]([a-z])/g;function ed(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ju,ed);it[t]=new xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ju,ed);it[t]=new xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ju,ed);it[t]=new xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){it[e]=new xt(e,1,!1,e.toLowerCase(),null,!1,!1)});it.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){it[e]=new xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function td(e,t,n,i){var s=it.hasOwnProperty(t)?it[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ux(t,n,s,i)&&(n=null),i||s===null?Bx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,i=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Vn=zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,go=Symbol.for("react.element"),zs=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),nd=Symbol.for("react.strict_mode"),Gc=Symbol.for("react.profiler"),Mp=Symbol.for("react.provider"),Ip=Symbol.for("react.context"),rd=Symbol.for("react.forward_ref"),qc=Symbol.for("react.suspense"),Kc=Symbol.for("react.suspense_list"),sd=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),Rp=Symbol.for("react.offscreen"),Dh=Symbol.iterator;function Ui(e){return e===null||typeof e!="object"?null:(e=Dh&&e[Dh]||e["@@iterator"],typeof e=="function"?e:null)}var Fe=Object.assign,mc;function Ji(e){if(mc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);mc=t&&t[1]||""}return`
`+mc+e}var gc=!1;function xc(e,t){if(!e||gc)return"";gc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var i=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){i=p}e.call(t.prototype)}else{try{throw Error()}catch(p){i=p}e()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),a=i.stack.split(`
`),c=s.length-1,d=a.length-1;1<=c&&0<=d&&s[c]!==a[d];)d--;for(;1<=c&&0<=d;c--,d--)if(s[c]!==a[d]){if(c!==1||d!==1)do if(c--,d--,0>d||s[c]!==a[d]){var f=`
`+s[c].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=c&&0<=d);break}}}finally{gc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ji(e):""}function Hx(e){switch(e.tag){case 5:return Ji(e.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 2:case 15:return e=xc(e.type,!1),e;case 11:return e=xc(e.type.render,!1),e;case 1:return e=xc(e.type,!0),e;default:return""}}function Qc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case As:return"Fragment";case zs:return"Portal";case Gc:return"Profiler";case nd:return"StrictMode";case qc:return"Suspense";case Kc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ip:return(e.displayName||"Context")+".Consumer";case Mp:return(e._context.displayName||"Context")+".Provider";case rd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sd:return t=e.displayName||null,t!==null?t:Qc(e.type)||"Memo";case cr:t=e._payload,e=e._init;try{return Qc(e(t))}catch{}}return null}function Zx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qc(t);case 8:return t===nd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Op(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wx(e){var t=Op(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(c){i=""+c,a.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xo(e){e._valueTracker||(e._valueTracker=Wx(e))}function Dp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Op(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yc(e,t){var n=t.checked;return Fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zh(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=kr(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zp(e,t){t=t.checked,t!=null&&td(e,"checked",t,!1)}function Xc(e,t){zp(e,t);var n=kr(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Jc(e,t.type,kr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ah(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Jc(e,t,n){(t!=="number"||Yo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ea=Array.isArray;function Ks(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+kr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function eu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return Fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(V(92));if(ea(n)){if(1<n.length)throw Error(V(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kr(n)}}function Ap(e,t){var n=kr(t.value),i=kr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Fh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vo,Fp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vo=vo||document.createElement("div"),vo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vx=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(e){Vx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ra[t]=ra[e]})});function Up(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ra.hasOwnProperty(e)&&ra[e]?(""+t).trim():t+"px"}function Hp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Up(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}var $x=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nu(e,t){if(t){if($x[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function ru(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var su=null;function id(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var iu=null,Qs=null,Ys=null;function Uh(e){if(e=Ra(e)){if(typeof iu!="function")throw Error(V(280));var t=e.stateNode;t&&(t=Tl(t),iu(e.stateNode,e.type,t))}}function Zp(e){Qs?Ys?Ys.push(e):Ys=[e]:Qs=e}function Wp(){if(Qs){var e=Qs,t=Ys;if(Ys=Qs=null,Uh(e),t)for(e=0;e<t.length;e++)Uh(t[e])}}function Vp(e,t){return e(t)}function $p(){}var vc=!1;function Gp(e,t,n){if(vc)return e(t,n);vc=!0;try{return Vp(e,t,n)}finally{vc=!1,(Qs!==null||Ys!==null)&&($p(),Wp())}}function pa(e,t){var n=e.stateNode;if(n===null)return null;var i=Tl(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(V(231,t,typeof n));return n}var au=!1;if(Un)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){au=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{au=!1}function Gx(e,t,n,i,s,a,c,d,f){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(g){this.onError(g)}}var sa=!1,Xo=null,Jo=!1,ou=null,qx={onError:function(e){sa=!0,Xo=e}};function Kx(e,t,n,i,s,a,c,d,f){sa=!1,Xo=null,Gx.apply(qx,arguments)}function Qx(e,t,n,i,s,a,c,d,f){if(Kx.apply(this,arguments),sa){if(sa){var p=Xo;sa=!1,Xo=null}else throw Error(V(198));Jo||(Jo=!0,ou=p)}}function ds(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Hh(e){if(ds(e)!==e)throw Error(V(188))}function Yx(e){var t=e.alternate;if(!t){if(t=ds(e),t===null)throw Error(V(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Hh(s),e;if(a===i)return Hh(s),t;a=a.sibling}throw Error(V(188))}if(n.return!==i.return)n=s,i=a;else{for(var c=!1,d=s.child;d;){if(d===n){c=!0,n=s,i=a;break}if(d===i){c=!0,i=s,n=a;break}d=d.sibling}if(!c){for(d=a.child;d;){if(d===n){c=!0,n=a,i=s;break}if(d===i){c=!0,i=a,n=s;break}d=d.sibling}if(!c)throw Error(V(189))}}if(n.alternate!==i)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?e:t}function Kp(e){return e=Yx(e),e!==null?Qp(e):null}function Qp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Qp(e);if(t!==null)return t;e=e.sibling}return null}var Yp=Ot.unstable_scheduleCallback,Zh=Ot.unstable_cancelCallback,Xx=Ot.unstable_shouldYield,Jx=Ot.unstable_requestPaint,Ze=Ot.unstable_now,ev=Ot.unstable_getCurrentPriorityLevel,ad=Ot.unstable_ImmediatePriority,Xp=Ot.unstable_UserBlockingPriority,el=Ot.unstable_NormalPriority,tv=Ot.unstable_LowPriority,Jp=Ot.unstable_IdlePriority,jl=null,yn=null;function nv(e){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(jl,e,void 0,(e.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:iv,rv=Math.log,sv=Math.LN2;function iv(e){return e>>>=0,e===0?32:31-(rv(e)/sv|0)|0}var yo=64,_o=4194304;function ta(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tl(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes,c=n&268435455;if(c!==0){var d=c&~s;d!==0?i=ta(d):(a&=c,a!==0&&(i=ta(a)))}else c=n&~s,c!==0?i=ta(c):a!==0&&(i=ta(a));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-sn(t),s=1<<n,i|=e[n],t&=~s;return i}function av(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ov(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-sn(a),d=1<<c,f=s[c];f===-1?(!(d&n)||d&i)&&(s[c]=av(d,t)):f<=t&&(e.expiredLanes|=d),a&=~d}}function lu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function em(){var e=yo;return yo<<=1,!(yo&4194240)&&(yo=64),e}function yc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ma(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sn(t),e[t]=n}function lv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-sn(n),a=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~a}}function od(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-sn(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var Ne=0;function tm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nm,ld,rm,sm,im,cu=!1,wo=[],gr=null,xr=null,vr=null,ma=new Map,ga=new Map,dr=[],cv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wh(e,t){switch(e){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":ma.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ga.delete(t.pointerId)}}function Zi(e,t,n,i,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Ra(t),t!==null&&ld(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function uv(e,t,n,i,s){switch(t){case"focusin":return gr=Zi(gr,e,t,n,i,s),!0;case"dragenter":return xr=Zi(xr,e,t,n,i,s),!0;case"mouseover":return vr=Zi(vr,e,t,n,i,s),!0;case"pointerover":var a=s.pointerId;return ma.set(a,Zi(ma.get(a)||null,e,t,n,i,s)),!0;case"gotpointercapture":return a=s.pointerId,ga.set(a,Zi(ga.get(a)||null,e,t,n,i,s)),!0}return!1}function am(e){var t=Yr(e.target);if(t!==null){var n=ds(t);if(n!==null){if(t=n.tag,t===13){if(t=qp(n),t!==null){e.blockedOn=t,im(e.priority,function(){rm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ao(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=uu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);su=i,n.target.dispatchEvent(i),su=null}else return t=Ra(n),t!==null&&ld(t),e.blockedOn=n,!1;t.shift()}return!0}function Vh(e,t,n){Ao(e)&&n.delete(t)}function dv(){cu=!1,gr!==null&&Ao(gr)&&(gr=null),xr!==null&&Ao(xr)&&(xr=null),vr!==null&&Ao(vr)&&(vr=null),ma.forEach(Vh),ga.forEach(Vh)}function Wi(e,t){e.blockedOn===t&&(e.blockedOn=null,cu||(cu=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,dv)))}function xa(e){function t(s){return Wi(s,e)}if(0<wo.length){Wi(wo[0],e);for(var n=1;n<wo.length;n++){var i=wo[n];i.blockedOn===e&&(i.blockedOn=null)}}for(gr!==null&&Wi(gr,e),xr!==null&&Wi(xr,e),vr!==null&&Wi(vr,e),ma.forEach(t),ga.forEach(t),n=0;n<dr.length;n++)i=dr[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)am(n),n.blockedOn===null&&dr.shift()}var Xs=Vn.ReactCurrentBatchConfig,nl=!0;function hv(e,t,n,i){var s=Ne,a=Xs.transition;Xs.transition=null;try{Ne=1,cd(e,t,n,i)}finally{Ne=s,Xs.transition=a}}function fv(e,t,n,i){var s=Ne,a=Xs.transition;Xs.transition=null;try{Ne=4,cd(e,t,n,i)}finally{Ne=s,Xs.transition=a}}function cd(e,t,n,i){if(nl){var s=uu(e,t,n,i);if(s===null)Ec(e,t,i,rl,n),Wh(e,i);else if(uv(s,e,t,n,i))i.stopPropagation();else if(Wh(e,i),t&4&&-1<cv.indexOf(e)){for(;s!==null;){var a=Ra(s);if(a!==null&&nm(a),a=uu(e,t,n,i),a===null&&Ec(e,t,i,rl,n),a===s)break;s=a}s!==null&&i.stopPropagation()}else Ec(e,t,i,null,n)}}var rl=null;function uu(e,t,n,i){if(rl=null,e=id(i),e=Yr(e),e!==null)if(t=ds(e),t===null)e=null;else if(n=t.tag,n===13){if(e=qp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rl=e,null}function om(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ev()){case ad:return 1;case Xp:return 4;case el:case tv:return 16;case Jp:return 536870912;default:return 16}default:return 16}}var fr=null,ud=null,Bo=null;function lm(){if(Bo)return Bo;var e,t=ud,n=t.length,i,s="value"in fr?fr.value:fr.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var c=n-e;for(i=1;i<=c&&t[n-i]===s[a-i];i++);return Bo=s.slice(e,1<i?1-i:void 0)}function Fo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bo(){return!0}function $h(){return!1}function zt(e){function t(n,i,s,a,c){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=c,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?bo:$h,this.isPropagationStopped=$h,this}return Fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),t}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dd=zt(di),Ia=Fe({},di,{view:0,detail:0}),pv=zt(Ia),_c,wc,Vi,Sl=Fe({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vi&&(Vi&&e.type==="mousemove"?(_c=e.screenX-Vi.screenX,wc=e.screenY-Vi.screenY):wc=_c=0,Vi=e),_c)},movementY:function(e){return"movementY"in e?e.movementY:wc}}),Gh=zt(Sl),mv=Fe({},Sl,{dataTransfer:0}),gv=zt(mv),xv=Fe({},Ia,{relatedTarget:0}),bc=zt(xv),vv=Fe({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),yv=zt(vv),_v=Fe({},di,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wv=zt(_v),bv=Fe({},di,{data:0}),qh=zt(bv),Lv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kv[e])?!!t[e]:!1}function hd(){return Cv}var jv=Fe({},Ia,{key:function(e){if(e.key){var t=Lv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hd,charCode:function(e){return e.type==="keypress"?Fo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sv=zt(jv),Ev=Fe({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kh=zt(Ev),Pv=Fe({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hd}),Tv=zt(Pv),Mv=Fe({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iv=zt(Mv),Rv=Fe({},Sl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ov=zt(Rv),Dv=[9,13,27,32],fd=Un&&"CompositionEvent"in window,ia=null;Un&&"documentMode"in document&&(ia=document.documentMode);var zv=Un&&"TextEvent"in window&&!ia,cm=Un&&(!fd||ia&&8<ia&&11>=ia),Qh=" ",Yh=!1;function um(e,t){switch(e){case"keyup":return Dv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bs=!1;function Av(e,t){switch(e){case"compositionend":return dm(t);case"keypress":return t.which!==32?null:(Yh=!0,Qh);case"textInput":return e=t.data,e===Qh&&Yh?null:e;default:return null}}function Bv(e,t){if(Bs)return e==="compositionend"||!fd&&um(e,t)?(e=lm(),Bo=ud=fr=null,Bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cm&&t.locale!=="ko"?null:t.data;default:return null}}var Fv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fv[e.type]:t==="textarea"}function hm(e,t,n,i){Zp(i),t=sl(t,"onChange"),0<t.length&&(n=new dd("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var aa=null,va=null;function Uv(e){Lm(e,0)}function El(e){var t=Hs(e);if(Dp(t))return e}function Hv(e,t){if(e==="change")return t}var fm=!1;if(Un){var Lc;if(Un){var Nc="oninput"in document;if(!Nc){var Jh=document.createElement("div");Jh.setAttribute("oninput","return;"),Nc=typeof Jh.oninput=="function"}Lc=Nc}else Lc=!1;fm=Lc&&(!document.documentMode||9<document.documentMode)}function ef(){aa&&(aa.detachEvent("onpropertychange",pm),va=aa=null)}function pm(e){if(e.propertyName==="value"&&El(va)){var t=[];hm(t,va,e,id(e)),Gp(Uv,t)}}function Zv(e,t,n){e==="focusin"?(ef(),aa=t,va=n,aa.attachEvent("onpropertychange",pm)):e==="focusout"&&ef()}function Wv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(va)}function Vv(e,t){if(e==="click")return El(t)}function $v(e,t){if(e==="input"||e==="change")return El(t)}function Gv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var on=typeof Object.is=="function"?Object.is:Gv;function ya(e,t){if(on(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!$c.call(t,s)||!on(e[s],t[s]))return!1}return!0}function tf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nf(e,t){var n=tf(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tf(n)}}function mm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gm(){for(var e=window,t=Yo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Yo(e.document)}return t}function pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qv(e){var t=gm(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&mm(n.ownerDocument.documentElement,n)){if(i!==null&&pd(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!e.extend&&a>i&&(s=i,i=a,a=s),s=nf(n,a);var c=nf(n,i);s&&c&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kv=Un&&"documentMode"in document&&11>=document.documentMode,Fs=null,du=null,oa=null,hu=!1;function rf(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hu||Fs==null||Fs!==Yo(i)||(i=Fs,"selectionStart"in i&&pd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),oa&&ya(oa,i)||(oa=i,i=sl(du,"onSelect"),0<i.length&&(t=new dd("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Fs)))}function Lo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Us={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},kc={},xm={};Un&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Pl(e){if(kc[e])return kc[e];if(!Us[e])return e;var t=Us[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xm)return kc[e]=t[n];return e}var vm=Pl("animationend"),ym=Pl("animationiteration"),_m=Pl("animationstart"),wm=Pl("transitionend"),bm=new Map,sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){bm.set(e,t),us(t,[e])}for(var Cc=0;Cc<sf.length;Cc++){var jc=sf[Cc],Qv=jc.toLowerCase(),Yv=jc[0].toUpperCase()+jc.slice(1);jr(Qv,"on"+Yv)}jr(vm,"onAnimationEnd");jr(ym,"onAnimationIteration");jr(_m,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(wm,"onTransitionEnd");ti("onMouseEnter",["mouseout","mouseover"]);ti("onMouseLeave",["mouseout","mouseover"]);ti("onPointerEnter",["pointerout","pointerover"]);ti("onPointerLeave",["pointerout","pointerover"]);us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));us("onBeforeInput",["compositionend","keypress","textInput","paste"]);us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xv=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function af(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,Qx(i,t,void 0,e),e.currentTarget=null}function Lm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var c=i.length-1;0<=c;c--){var d=i[c],f=d.instance,p=d.currentTarget;if(d=d.listener,f!==a&&s.isPropagationStopped())break e;af(s,d,p),a=f}else for(c=0;c<i.length;c++){if(d=i[c],f=d.instance,p=d.currentTarget,d=d.listener,f!==a&&s.isPropagationStopped())break e;af(s,d,p),a=f}}}if(Jo)throw e=ou,Jo=!1,ou=null,e}function Te(e,t){var n=t[xu];n===void 0&&(n=t[xu]=new Set);var i=e+"__bubble";n.has(i)||(Nm(t,e,2,!1),n.add(i))}function Sc(e,t,n){var i=0;t&&(i|=4),Nm(n,e,i,t)}var No="_reactListening"+Math.random().toString(36).slice(2);function _a(e){if(!e[No]){e[No]=!0,Tp.forEach(function(n){n!=="selectionchange"&&(Xv.has(n)||Sc(n,!1,e),Sc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[No]||(t[No]=!0,Sc("selectionchange",!1,t))}}function Nm(e,t,n,i){switch(om(t)){case 1:var s=hv;break;case 4:s=fv;break;default:s=cd}n=s.bind(null,t,n,e),s=void 0,!au||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ec(e,t,n,i,s){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var d=i.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(c===4)for(c=i.return;c!==null;){var f=c.tag;if((f===3||f===4)&&(f=c.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;c=c.return}for(;d!==null;){if(c=Yr(d),c===null)return;if(f=c.tag,f===5||f===6){i=a=c;continue e}d=d.parentNode}}i=i.return}Gp(function(){var p=a,g=id(n),v=[];e:{var C=bm.get(e);if(C!==void 0){var S=dd,_=e;switch(e){case"keypress":if(Fo(n)===0)break e;case"keydown":case"keyup":S=Sv;break;case"focusin":_="focus",S=bc;break;case"focusout":_="blur",S=bc;break;case"beforeblur":case"afterblur":S=bc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=gv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Tv;break;case vm:case ym:case _m:S=yv;break;case wm:S=Iv;break;case"scroll":S=pv;break;case"wheel":S=Ov;break;case"copy":case"cut":case"paste":S=wv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Kh}var y=(t&4)!==0,k=!y&&e==="scroll",w=y?C!==null?C+"Capture":null:C;y=[];for(var b=p,j;b!==null;){j=b;var E=j.stateNode;if(j.tag===5&&E!==null&&(j=E,w!==null&&(E=pa(b,w),E!=null&&y.push(wa(b,E,j)))),k)break;b=b.return}0<y.length&&(C=new S(C,_,null,n,g),v.push({event:C,listeners:y}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",C&&n!==su&&(_=n.relatedTarget||n.fromElement)&&(Yr(_)||_[Hn]))break e;if((S||C)&&(C=g.window===g?g:(C=g.ownerDocument)?C.defaultView||C.parentWindow:window,S?(_=n.relatedTarget||n.toElement,S=p,_=_?Yr(_):null,_!==null&&(k=ds(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(S=null,_=p),S!==_)){if(y=Gh,E="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(y=Kh,E="onPointerLeave",w="onPointerEnter",b="pointer"),k=S==null?C:Hs(S),j=_==null?C:Hs(_),C=new y(E,b+"leave",S,n,g),C.target=k,C.relatedTarget=j,E=null,Yr(g)===p&&(y=new y(w,b+"enter",_,n,g),y.target=j,y.relatedTarget=k,E=y),k=E,S&&_)t:{for(y=S,w=_,b=0,j=y;j;j=Os(j))b++;for(j=0,E=w;E;E=Os(E))j++;for(;0<b-j;)y=Os(y),b--;for(;0<j-b;)w=Os(w),j--;for(;b--;){if(y===w||w!==null&&y===w.alternate)break t;y=Os(y),w=Os(w)}y=null}else y=null;S!==null&&of(v,C,S,y,!1),_!==null&&k!==null&&of(v,k,_,y,!0)}}e:{if(C=p?Hs(p):window,S=C.nodeName&&C.nodeName.toLowerCase(),S==="select"||S==="input"&&C.type==="file")var T=Hv;else if(Xh(C))if(fm)T=$v;else{T=Wv;var I=Zv}else(S=C.nodeName)&&S.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(T=Vv);if(T&&(T=T(e,p))){hm(v,T,n,g);break e}I&&I(e,C,p),e==="focusout"&&(I=C._wrapperState)&&I.controlled&&C.type==="number"&&Jc(C,"number",C.value)}switch(I=p?Hs(p):window,e){case"focusin":(Xh(I)||I.contentEditable==="true")&&(Fs=I,du=p,oa=null);break;case"focusout":oa=du=Fs=null;break;case"mousedown":hu=!0;break;case"contextmenu":case"mouseup":case"dragend":hu=!1,rf(v,n,g);break;case"selectionchange":if(Kv)break;case"keydown":case"keyup":rf(v,n,g)}var z;if(fd)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Bs?um(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(cm&&n.locale!=="ko"&&(Bs||A!=="onCompositionStart"?A==="onCompositionEnd"&&Bs&&(z=lm()):(fr=g,ud="value"in fr?fr.value:fr.textContent,Bs=!0)),I=sl(p,A),0<I.length&&(A=new qh(A,e,null,n,g),v.push({event:A,listeners:I}),z?A.data=z:(z=dm(n),z!==null&&(A.data=z)))),(z=zv?Av(e,n):Bv(e,n))&&(p=sl(p,"onBeforeInput"),0<p.length&&(g=new qh("onBeforeInput","beforeinput",null,n,g),v.push({event:g,listeners:p}),g.data=z))}Lm(v,t)})}function wa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sl(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=pa(e,n),a!=null&&i.unshift(wa(e,a,s)),a=pa(e,t),a!=null&&i.push(wa(e,a,s))),e=e.return}return i}function Os(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function of(e,t,n,i,s){for(var a=t._reactName,c=[];n!==null&&n!==i;){var d=n,f=d.alternate,p=d.stateNode;if(f!==null&&f===i)break;d.tag===5&&p!==null&&(d=p,s?(f=pa(n,a),f!=null&&c.unshift(wa(n,f,d))):s||(f=pa(n,a),f!=null&&c.push(wa(n,f,d)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var Jv=/\r\n?/g,ey=/\u0000|\uFFFD/g;function lf(e){return(typeof e=="string"?e:""+e).replace(Jv,`
`).replace(ey,"")}function ko(e,t,n){if(t=lf(t),lf(e)!==t&&n)throw Error(V(425))}function il(){}var fu=null,pu=null;function mu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gu=typeof setTimeout=="function"?setTimeout:void 0,ty=typeof clearTimeout=="function"?clearTimeout:void 0,cf=typeof Promise=="function"?Promise:void 0,ny=typeof queueMicrotask=="function"?queueMicrotask:typeof cf<"u"?function(e){return cf.resolve(null).then(e).catch(ry)}:gu;function ry(e){setTimeout(function(){throw e})}function Pc(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){e.removeChild(s),xa(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);xa(t)}function yr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),xn="__reactFiber$"+hi,ba="__reactProps$"+hi,Hn="__reactContainer$"+hi,xu="__reactEvents$"+hi,sy="__reactListeners$"+hi,iy="__reactHandles$"+hi;function Yr(e){var t=e[xn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Hn]||n[xn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=uf(e);e!==null;){if(n=e[xn])return n;e=uf(e)}return t}e=n,n=e.parentNode}return null}function Ra(e){return e=e[xn]||e[Hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function Tl(e){return e[ba]||null}var vu=[],Zs=-1;function Sr(e){return{current:e}}function Me(e){0>Zs||(e.current=vu[Zs],vu[Zs]=null,Zs--)}function Ee(e,t){Zs++,vu[Zs]=e.current,e.current=t}var Cr={},dt=Sr(Cr),kt=Sr(!1),ss=Cr;function ni(e,t){var n=e.type.contextTypes;if(!n)return Cr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(e){return e=e.childContextTypes,e!=null}function al(){Me(kt),Me(dt)}function df(e,t,n){if(dt.current!==Cr)throw Error(V(168));Ee(dt,t),Ee(kt,n)}function km(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(V(108,Zx(e)||"Unknown",s));return Fe({},n,i)}function ol(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,ss=dt.current,Ee(dt,e),Ee(kt,kt.current),!0}function hf(e,t,n){var i=e.stateNode;if(!i)throw Error(V(169));n?(e=km(e,t,ss),i.__reactInternalMemoizedMergedChildContext=e,Me(kt),Me(dt),Ee(dt,e)):Me(kt),Ee(kt,n)}var zn=null,Ml=!1,Tc=!1;function Cm(e){zn===null?zn=[e]:zn.push(e)}function ay(e){Ml=!0,Cm(e)}function Er(){if(!Tc&&zn!==null){Tc=!0;var e=0,t=Ne;try{var n=zn;for(Ne=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}zn=null,Ml=!1}catch(s){throw zn!==null&&(zn=zn.slice(e+1)),Yp(ad,Er),s}finally{Ne=t,Tc=!1}}return null}var Ws=[],Vs=0,ll=null,cl=0,Wt=[],Vt=0,is=null,An=1,Bn="";function Kr(e,t){Ws[Vs++]=cl,Ws[Vs++]=ll,ll=e,cl=t}function jm(e,t,n){Wt[Vt++]=An,Wt[Vt++]=Bn,Wt[Vt++]=is,is=e;var i=An;e=Bn;var s=32-sn(i)-1;i&=~(1<<s),n+=1;var a=32-sn(t)+s;if(30<a){var c=s-s%5;a=(i&(1<<c)-1).toString(32),i>>=c,s-=c,An=1<<32-sn(t)+s|n<<s|i,Bn=a+e}else An=1<<a|n<<s|i,Bn=e}function md(e){e.return!==null&&(Kr(e,1),jm(e,1,0))}function gd(e){for(;e===ll;)ll=Ws[--Vs],Ws[Vs]=null,cl=Ws[--Vs],Ws[Vs]=null;for(;e===is;)is=Wt[--Vt],Wt[Vt]=null,Bn=Wt[--Vt],Wt[Vt]=null,An=Wt[--Vt],Wt[Vt]=null}var Rt=null,It=null,De=!1,nn=null;function Sm(e,t){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ff(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,It=yr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=is!==null?{id:An,overflow:Bn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rt=e,It=null,!0):!1;default:return!1}}function yu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _u(e){if(De){var t=It;if(t){var n=t;if(!ff(e,t)){if(yu(e))throw Error(V(418));t=yr(n.nextSibling);var i=Rt;t&&ff(e,t)?Sm(i,n):(e.flags=e.flags&-4097|2,De=!1,Rt=e)}}else{if(yu(e))throw Error(V(418));e.flags=e.flags&-4097|2,De=!1,Rt=e}}}function pf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function Co(e){if(e!==Rt)return!1;if(!De)return pf(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mu(e.type,e.memoizedProps)),t&&(t=It)){if(yu(e))throw Em(),Error(V(418));for(;t;)Sm(e,t),t=yr(t.nextSibling)}if(pf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){It=yr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}It=null}}else It=Rt?yr(e.stateNode.nextSibling):null;return!0}function Em(){for(var e=It;e;)e=yr(e.nextSibling)}function ri(){It=Rt=null,De=!1}function xd(e){nn===null?nn=[e]:nn.push(e)}var oy=Vn.ReactCurrentBatchConfig;function $i(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var i=n.stateNode}if(!i)throw Error(V(147,e));var s=i,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(c){var d=s.refs;c===null?delete d[a]:d[a]=c},t._stringRef=a,t)}if(typeof e!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,e))}return e}function jo(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mf(e){var t=e._init;return t(e._payload)}function Pm(e){function t(w,b){if(e){var j=w.deletions;j===null?(w.deletions=[b],w.flags|=16):j.push(b)}}function n(w,b){if(!e)return null;for(;b!==null;)t(w,b),b=b.sibling;return null}function i(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(w,b){return w=Lr(w,b),w.index=0,w.sibling=null,w}function a(w,b,j){return w.index=j,e?(j=w.alternate,j!==null?(j=j.index,j<b?(w.flags|=2,b):j):(w.flags|=2,b)):(w.flags|=1048576,b)}function c(w){return e&&w.alternate===null&&(w.flags|=2),w}function d(w,b,j,E){return b===null||b.tag!==6?(b=Ac(j,w.mode,E),b.return=w,b):(b=s(b,j),b.return=w,b)}function f(w,b,j,E){var T=j.type;return T===As?g(w,b,j.props.children,E,j.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===cr&&mf(T)===b.type)?(E=s(b,j.props),E.ref=$i(w,b,j),E.return=w,E):(E=Go(j.type,j.key,j.props,null,w.mode,E),E.ref=$i(w,b,j),E.return=w,E)}function p(w,b,j,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Bc(j,w.mode,E),b.return=w,b):(b=s(b,j.children||[]),b.return=w,b)}function g(w,b,j,E,T){return b===null||b.tag!==7?(b=ns(j,w.mode,E,T),b.return=w,b):(b=s(b,j),b.return=w,b)}function v(w,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ac(""+b,w.mode,j),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case go:return j=Go(b.type,b.key,b.props,null,w.mode,j),j.ref=$i(w,null,b),j.return=w,j;case zs:return b=Bc(b,w.mode,j),b.return=w,b;case cr:var E=b._init;return v(w,E(b._payload),j)}if(ea(b)||Ui(b))return b=ns(b,w.mode,j,null),b.return=w,b;jo(w,b)}return null}function C(w,b,j,E){var T=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return T!==null?null:d(w,b,""+j,E);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case go:return j.key===T?f(w,b,j,E):null;case zs:return j.key===T?p(w,b,j,E):null;case cr:return T=j._init,C(w,b,T(j._payload),E)}if(ea(j)||Ui(j))return T!==null?null:g(w,b,j,E,null);jo(w,j)}return null}function S(w,b,j,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return w=w.get(j)||null,d(b,w,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case go:return w=w.get(E.key===null?j:E.key)||null,f(b,w,E,T);case zs:return w=w.get(E.key===null?j:E.key)||null,p(b,w,E,T);case cr:var I=E._init;return S(w,b,j,I(E._payload),T)}if(ea(E)||Ui(E))return w=w.get(j)||null,g(b,w,E,T,null);jo(b,E)}return null}function _(w,b,j,E){for(var T=null,I=null,z=b,A=b=0,Q=null;z!==null&&A<j.length;A++){z.index>A?(Q=z,z=null):Q=z.sibling;var Z=C(w,z,j[A],E);if(Z===null){z===null&&(z=Q);break}e&&z&&Z.alternate===null&&t(w,z),b=a(Z,b,A),I===null?T=Z:I.sibling=Z,I=Z,z=Q}if(A===j.length)return n(w,z),De&&Kr(w,A),T;if(z===null){for(;A<j.length;A++)z=v(w,j[A],E),z!==null&&(b=a(z,b,A),I===null?T=z:I.sibling=z,I=z);return De&&Kr(w,A),T}for(z=i(w,z);A<j.length;A++)Q=S(z,w,A,j[A],E),Q!==null&&(e&&Q.alternate!==null&&z.delete(Q.key===null?A:Q.key),b=a(Q,b,A),I===null?T=Q:I.sibling=Q,I=Q);return e&&z.forEach(function(se){return t(w,se)}),De&&Kr(w,A),T}function y(w,b,j,E){var T=Ui(j);if(typeof T!="function")throw Error(V(150));if(j=T.call(j),j==null)throw Error(V(151));for(var I=T=null,z=b,A=b=0,Q=null,Z=j.next();z!==null&&!Z.done;A++,Z=j.next()){z.index>A?(Q=z,z=null):Q=z.sibling;var se=C(w,z,Z.value,E);if(se===null){z===null&&(z=Q);break}e&&z&&se.alternate===null&&t(w,z),b=a(se,b,A),I===null?T=se:I.sibling=se,I=se,z=Q}if(Z.done)return n(w,z),De&&Kr(w,A),T;if(z===null){for(;!Z.done;A++,Z=j.next())Z=v(w,Z.value,E),Z!==null&&(b=a(Z,b,A),I===null?T=Z:I.sibling=Z,I=Z);return De&&Kr(w,A),T}for(z=i(w,z);!Z.done;A++,Z=j.next())Z=S(z,w,A,Z.value,E),Z!==null&&(e&&Z.alternate!==null&&z.delete(Z.key===null?A:Z.key),b=a(Z,b,A),I===null?T=Z:I.sibling=Z,I=Z);return e&&z.forEach(function(ne){return t(w,ne)}),De&&Kr(w,A),T}function k(w,b,j,E){if(typeof j=="object"&&j!==null&&j.type===As&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case go:e:{for(var T=j.key,I=b;I!==null;){if(I.key===T){if(T=j.type,T===As){if(I.tag===7){n(w,I.sibling),b=s(I,j.props.children),b.return=w,w=b;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===cr&&mf(T)===I.type){n(w,I.sibling),b=s(I,j.props),b.ref=$i(w,I,j),b.return=w,w=b;break e}n(w,I);break}else t(w,I);I=I.sibling}j.type===As?(b=ns(j.props.children,w.mode,E,j.key),b.return=w,w=b):(E=Go(j.type,j.key,j.props,null,w.mode,E),E.ref=$i(w,b,j),E.return=w,w=E)}return c(w);case zs:e:{for(I=j.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){n(w,b.sibling),b=s(b,j.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else t(w,b);b=b.sibling}b=Bc(j,w.mode,E),b.return=w,w=b}return c(w);case cr:return I=j._init,k(w,b,I(j._payload),E)}if(ea(j))return _(w,b,j,E);if(Ui(j))return y(w,b,j,E);jo(w,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,b!==null&&b.tag===6?(n(w,b.sibling),b=s(b,j),b.return=w,w=b):(n(w,b),b=Ac(j,w.mode,E),b.return=w,w=b),c(w)):n(w,b)}return k}var si=Pm(!0),Tm=Pm(!1),ul=Sr(null),dl=null,$s=null,vd=null;function yd(){vd=$s=dl=null}function _d(e){var t=ul.current;Me(ul),e._currentValue=t}function wu(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Js(e,t){dl=e,vd=$s=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function qt(e){var t=e._currentValue;if(vd!==e)if(e={context:e,memoizedValue:t,next:null},$s===null){if(dl===null)throw Error(V(308));$s=e,dl.dependencies={lanes:0,firstContext:e}}else $s=$s.next=e;return t}var Xr=null;function wd(e){Xr===null?Xr=[e]:Xr.push(e)}function Mm(e,t,n,i){var s=t.interleaved;return s===null?(n.next=n,wd(t)):(n.next=s.next,s.next=n),t.interleaved=n,Zn(e,i)}function Zn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ur=!1;function bd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Im(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _r(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Zn(e,n)}return s=i.interleaved,s===null?(t.next=t,wd(i)):(t.next=s.next,s.next=t),i.interleaved=t,Zn(e,n)}function Uo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,od(e,n)}}function gf(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=c:a=a.next=c,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hl(e,t,n,i){var s=e.updateQueue;ur=!1;var a=s.firstBaseUpdate,c=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var f=d,p=f.next;f.next=null,c===null?a=p:c.next=p,c=f;var g=e.alternate;g!==null&&(g=g.updateQueue,d=g.lastBaseUpdate,d!==c&&(d===null?g.firstBaseUpdate=p:d.next=p,g.lastBaseUpdate=f))}if(a!==null){var v=s.baseState;c=0,g=p=f=null,d=a;do{var C=d.lane,S=d.eventTime;if((i&C)===C){g!==null&&(g=g.next={eventTime:S,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var _=e,y=d;switch(C=t,S=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){v=_.call(S,v,C);break e}v=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,C=typeof _=="function"?_.call(S,v,C):_,C==null)break e;v=Fe({},v,C);break e;case 2:ur=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,C=s.effects,C===null?s.effects=[d]:C.push(d))}else S={eventTime:S,lane:C,tag:d.tag,payload:d.payload,callback:d.callback,next:null},g===null?(p=g=S,f=v):g=g.next=S,c|=C;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;C=d,d=C.next,C.next=null,s.lastBaseUpdate=C,s.shared.pending=null}}while(!0);if(g===null&&(f=v),s.baseState=f,s.firstBaseUpdate=p,s.lastBaseUpdate=g,t=s.shared.interleaved,t!==null){s=t;do c|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);os|=c,e.lanes=c,e.memoizedState=v}}function xf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(V(191,s));s.call(i)}}}var Oa={},_n=Sr(Oa),La=Sr(Oa),Na=Sr(Oa);function Jr(e){if(e===Oa)throw Error(V(174));return e}function Ld(e,t){switch(Ee(Na,t),Ee(La,e),Ee(_n,Oa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=tu(t,e)}Me(_n),Ee(_n,t)}function ii(){Me(_n),Me(La),Me(Na)}function Rm(e){Jr(Na.current);var t=Jr(_n.current),n=tu(t,e.type);t!==n&&(Ee(La,e),Ee(_n,n))}function Nd(e){La.current===e&&(Me(_n),Me(La))}var ze=Sr(0);function fl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mc=[];function kd(){for(var e=0;e<Mc.length;e++)Mc[e]._workInProgressVersionPrimary=null;Mc.length=0}var Ho=Vn.ReactCurrentDispatcher,Ic=Vn.ReactCurrentBatchConfig,as=0,Ae=null,qe=null,Ye=null,pl=!1,la=!1,ka=0,ly=0;function ot(){throw Error(V(321))}function Cd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!on(e[n],t[n]))return!1;return!0}function jd(e,t,n,i,s,a){if(as=a,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ho.current=e===null||e.memoizedState===null?hy:fy,e=n(i,s),la){a=0;do{if(la=!1,ka=0,25<=a)throw Error(V(301));a+=1,Ye=qe=null,t.updateQueue=null,Ho.current=py,e=n(i,s)}while(la)}if(Ho.current=ml,t=qe!==null&&qe.next!==null,as=0,Ye=qe=Ae=null,pl=!1,t)throw Error(V(300));return e}function Sd(){var e=ka!==0;return ka=0,e}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ae.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Kt(){if(qe===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=Ye===null?Ae.memoizedState:Ye.next;if(t!==null)Ye=t,qe=e;else{if(e===null)throw Error(V(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ye===null?Ae.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Ca(e,t){return typeof t=="function"?t(e):t}function Rc(e){var t=Kt(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var i=qe,s=i.baseQueue,a=n.pending;if(a!==null){if(s!==null){var c=s.next;s.next=a.next,a.next=c}i.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,i=i.baseState;var d=c=null,f=null,p=a;do{var g=p.lane;if((as&g)===g)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:e(i,p.action);else{var v={lane:g,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(d=f=v,c=i):f=f.next=v,Ae.lanes|=g,os|=g}p=p.next}while(p!==null&&p!==a);f===null?c=i:f.next=d,on(i,t.memoizedState)||(Nt=!0),t.memoizedState=i,t.baseState=c,t.baseQueue=f,n.lastRenderedState=i}if(e=n.interleaved,e!==null){s=e;do a=s.lane,Ae.lanes|=a,os|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oc(e){var t=Kt(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var c=s=s.next;do a=e(a,c.action),c=c.next;while(c!==s);on(a,t.memoizedState)||(Nt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Om(){}function Dm(e,t){var n=Ae,i=Kt(),s=t(),a=!on(i.memoizedState,s);if(a&&(i.memoizedState=s,Nt=!0),i=i.queue,Ed(Bm.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,ja(9,Am.bind(null,n,i,s,t),void 0,null),Xe===null)throw Error(V(349));as&30||zm(n,t,s)}return s}function zm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Am(e,t,n,i){t.value=n,t.getSnapshot=i,Fm(t)&&Um(e)}function Bm(e,t,n){return n(function(){Fm(t)&&Um(e)})}function Fm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!on(e,n)}catch{return!0}}function Um(e){var t=Zn(e,1);t!==null&&an(t,e,1,-1)}function vf(e){var t=gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t.queue=e,e=e.dispatch=dy.bind(null,Ae,e),[t.memoizedState,e]}function ja(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Hm(){return Kt().memoizedState}function Zo(e,t,n,i){var s=gn();Ae.flags|=e,s.memoizedState=ja(1|t,n,void 0,i===void 0?null:i)}function Il(e,t,n,i){var s=Kt();i=i===void 0?null:i;var a=void 0;if(qe!==null){var c=qe.memoizedState;if(a=c.destroy,i!==null&&Cd(i,c.deps)){s.memoizedState=ja(t,n,a,i);return}}Ae.flags|=e,s.memoizedState=ja(1|t,n,a,i)}function yf(e,t){return Zo(8390656,8,e,t)}function Ed(e,t){return Il(2048,8,e,t)}function Zm(e,t){return Il(4,2,e,t)}function Wm(e,t){return Il(4,4,e,t)}function Vm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $m(e,t,n){return n=n!=null?n.concat([e]):null,Il(4,4,Vm.bind(null,t,e),n)}function Pd(){}function Gm(e,t){var n=Kt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Cd(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function qm(e,t){var n=Kt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Cd(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Km(e,t,n){return as&21?(on(n,t)||(n=em(),Ae.lanes|=n,os|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=n)}function cy(e,t){var n=Ne;Ne=n!==0&&4>n?n:4,e(!0);var i=Ic.transition;Ic.transition={};try{e(!1),t()}finally{Ne=n,Ic.transition=i}}function Qm(){return Kt().memoizedState}function uy(e,t,n){var i=br(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ym(e))Xm(t,n);else if(n=Mm(e,t,n,i),n!==null){var s=mt();an(n,e,i,s),Jm(n,t,i)}}function dy(e,t,n){var i=br(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ym(e))Xm(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var c=t.lastRenderedState,d=a(c,n);if(s.hasEagerState=!0,s.eagerState=d,on(d,c)){var f=t.interleaved;f===null?(s.next=s,wd(t)):(s.next=f.next,f.next=s),t.interleaved=s;return}}catch{}finally{}n=Mm(e,t,s,i),n!==null&&(s=mt(),an(n,e,i,s),Jm(n,t,i))}}function Ym(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function Xm(e,t){la=pl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jm(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,od(e,n)}}var ml={readContext:qt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},hy={readContext:qt,useCallback:function(e,t){return gn().memoizedState=[e,t===void 0?null:t],e},useContext:qt,useEffect:yf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zo(4194308,4,Vm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zo(4,2,e,t)},useMemo:function(e,t){var n=gn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=gn();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=uy.bind(null,Ae,e),[i.memoizedState,e]},useRef:function(e){var t=gn();return e={current:e},t.memoizedState=e},useState:vf,useDebugValue:Pd,useDeferredValue:function(e){return gn().memoizedState=e},useTransition:function(){var e=vf(!1),t=e[0];return e=cy.bind(null,e[1]),gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Ae,s=gn();if(De){if(n===void 0)throw Error(V(407));n=n()}else{if(n=t(),Xe===null)throw Error(V(349));as&30||zm(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,yf(Bm.bind(null,i,a,e),[e]),i.flags|=2048,ja(9,Am.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=gn(),t=Xe.identifierPrefix;if(De){var n=Bn,i=An;n=(i&~(1<<32-sn(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=ka++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ly++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fy={readContext:qt,useCallback:Gm,useContext:qt,useEffect:Ed,useImperativeHandle:$m,useInsertionEffect:Zm,useLayoutEffect:Wm,useMemo:qm,useReducer:Rc,useRef:Hm,useState:function(){return Rc(Ca)},useDebugValue:Pd,useDeferredValue:function(e){var t=Kt();return Km(t,qe.memoizedState,e)},useTransition:function(){var e=Rc(Ca)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:Om,useSyncExternalStore:Dm,useId:Qm,unstable_isNewReconciler:!1},py={readContext:qt,useCallback:Gm,useContext:qt,useEffect:Ed,useImperativeHandle:$m,useInsertionEffect:Zm,useLayoutEffect:Wm,useMemo:qm,useReducer:Oc,useRef:Hm,useState:function(){return Oc(Ca)},useDebugValue:Pd,useDeferredValue:function(e){var t=Kt();return qe===null?t.memoizedState=e:Km(t,qe.memoizedState,e)},useTransition:function(){var e=Oc(Ca)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:Om,useSyncExternalStore:Dm,useId:Qm,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=Fe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bu(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Fe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Rl={isMounted:function(e){return(e=e._reactInternals)?ds(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=mt(),s=br(e),a=Fn(i,s);a.payload=t,n!=null&&(a.callback=n),t=_r(e,a,s),t!==null&&(an(t,e,s,i),Uo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=mt(),s=br(e),a=Fn(i,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=_r(e,a,s),t!==null&&(an(t,e,s,i),Uo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mt(),i=br(e),s=Fn(n,i);s.tag=2,t!=null&&(s.callback=t),t=_r(e,s,i),t!==null&&(an(t,e,i,n),Uo(t,e,i))}};function _f(e,t,n,i,s,a,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,c):t.prototype&&t.prototype.isPureReactComponent?!ya(n,i)||!ya(s,a):!0}function eg(e,t,n){var i=!1,s=Cr,a=t.contextType;return typeof a=="object"&&a!==null?a=qt(a):(s=Ct(t)?ss:dt.current,i=t.contextTypes,a=(i=i!=null)?ni(e,s):Cr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Rl,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function wf(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Rl.enqueueReplaceState(t,t.state,null)}function Lu(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},bd(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=qt(a):(a=Ct(t)?ss:dt.current,s.context=ni(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(bu(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Rl.enqueueReplaceState(s,s.state,null),hl(e,n,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ai(e,t){try{var n="",i=t;do n+=Hx(i),i=i.return;while(i);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Dc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Nu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var my=typeof WeakMap=="function"?WeakMap:Map;function tg(e,t,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){xl||(xl=!0,Ru=i),Nu(e,t)},n}function ng(e,t,n){n=Fn(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){Nu(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Nu(e,t),typeof i!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),n}function bf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new my;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=Ey.bind(null,e,t,n),t.then(e,e))}function Lf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nf(e,t,n,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fn(-1,1),t.tag=2,_r(n,t,1))),n.lanes|=1),e)}var gy=Vn.ReactCurrentOwner,Nt=!1;function pt(e,t,n,i){t.child=e===null?Tm(t,null,n,i):si(t,e.child,n,i)}function kf(e,t,n,i,s){n=n.render;var a=t.ref;return Js(t,s),i=jd(e,t,n,i,a,s),n=Sd(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wn(e,t,s)):(De&&n&&md(t),t.flags|=1,pt(e,t,i,s),t.child)}function Cf(e,t,n,i,s){if(e===null){var a=n.type;return typeof a=="function"&&!Ad(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,rg(e,t,a,i,s)):(e=Go(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var c=a.memoizedProps;if(n=n.compare,n=n!==null?n:ya,n(c,i)&&e.ref===t.ref)return Wn(e,t,s)}return t.flags|=1,e=Lr(a,i),e.ref=t.ref,e.return=t,t.child=e}function rg(e,t,n,i,s){if(e!==null){var a=e.memoizedProps;if(ya(a,i)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=i=a,(e.lanes&s)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Wn(e,t,s)}return ku(e,t,n,i,s)}function sg(e,t,n){var i=t.pendingProps,s=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(qs,Mt),Mt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(qs,Mt),Mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:n,Ee(qs,Mt),Mt|=i}else a!==null?(i=a.baseLanes|n,t.memoizedState=null):i=n,Ee(qs,Mt),Mt|=i;return pt(e,t,s,n),t.child}function ig(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ku(e,t,n,i,s){var a=Ct(n)?ss:dt.current;return a=ni(t,a),Js(t,s),n=jd(e,t,n,i,a,s),i=Sd(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wn(e,t,s)):(De&&i&&md(t),t.flags|=1,pt(e,t,n,s),t.child)}function jf(e,t,n,i,s){if(Ct(n)){var a=!0;ol(t)}else a=!1;if(Js(t,s),t.stateNode===null)Wo(e,t),eg(t,n,i),Lu(t,n,i,s),i=!0;else if(e===null){var c=t.stateNode,d=t.memoizedProps;c.props=d;var f=c.context,p=n.contextType;typeof p=="object"&&p!==null?p=qt(p):(p=Ct(n)?ss:dt.current,p=ni(t,p));var g=n.getDerivedStateFromProps,v=typeof g=="function"||typeof c.getSnapshotBeforeUpdate=="function";v||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==i||f!==p)&&wf(t,c,i,p),ur=!1;var C=t.memoizedState;c.state=C,hl(t,i,c,s),f=t.memoizedState,d!==i||C!==f||kt.current||ur?(typeof g=="function"&&(bu(t,n,g,i),f=t.memoizedState),(d=ur||_f(t,n,d,i,C,f,p))?(v||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=f),c.props=i,c.state=f,c.context=p,i=d):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{c=t.stateNode,Im(e,t),d=t.memoizedProps,p=t.type===t.elementType?d:en(t.type,d),c.props=p,v=t.pendingProps,C=c.context,f=n.contextType,typeof f=="object"&&f!==null?f=qt(f):(f=Ct(n)?ss:dt.current,f=ni(t,f));var S=n.getDerivedStateFromProps;(g=typeof S=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==v||C!==f)&&wf(t,c,i,f),ur=!1,C=t.memoizedState,c.state=C,hl(t,i,c,s);var _=t.memoizedState;d!==v||C!==_||kt.current||ur?(typeof S=="function"&&(bu(t,n,S,i),_=t.memoizedState),(p=ur||_f(t,n,p,i,C,_,f)||!1)?(g||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(i,_,f),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(i,_,f)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=_),c.props=i,c.state=_,c.context=f,i=p):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),i=!1)}return Cu(e,t,n,i,a,s)}function Cu(e,t,n,i,s,a){ig(e,t);var c=(t.flags&128)!==0;if(!i&&!c)return s&&hf(t,n,!1),Wn(e,t,a);i=t.stateNode,gy.current=t;var d=c&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&c?(t.child=si(t,e.child,null,a),t.child=si(t,null,d,a)):pt(e,t,d,a),t.memoizedState=i.state,s&&hf(t,n,!0),t.child}function ag(e){var t=e.stateNode;t.pendingContext?df(e,t.pendingContext,t.pendingContext!==t.context):t.context&&df(e,t.context,!1),Ld(e,t.containerInfo)}function Sf(e,t,n,i,s){return ri(),xd(s),t.flags|=256,pt(e,t,n,i),t.child}var ju={dehydrated:null,treeContext:null,retryLane:0};function Su(e){return{baseLanes:e,cachePool:null,transitions:null}}function og(e,t,n){var i=t.pendingProps,s=ze.current,a=!1,c=(t.flags&128)!==0,d;if((d=c)||(d=e!==null&&e.memoizedState===null?!1:(s&2)!==0),d?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ee(ze,s&1),e===null)return _u(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=c):a=zl(c,i,0,null),e=ns(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Su(n),t.memoizedState=ju,e):Td(t,c));if(s=e.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return xy(e,t,c,i,d,s,n);if(a){a=i.fallback,c=t.mode,s=e.child,d=s.sibling;var f={mode:"hidden",children:i.children};return!(c&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=f,t.deletions=null):(i=Lr(s,f),i.subtreeFlags=s.subtreeFlags&14680064),d!==null?a=Lr(d,a):(a=ns(a,c,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=e.child.memoizedState,c=c===null?Su(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=ju,i}return a=e.child,e=a.sibling,i=Lr(a,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Td(e,t){return t=zl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function So(e,t,n,i){return i!==null&&xd(i),si(t,e.child,null,n),e=Td(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xy(e,t,n,i,s,a,c){if(n)return t.flags&256?(t.flags&=-257,i=Dc(Error(V(422))),So(e,t,c,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=zl({mode:"visible",children:i.children},s,0,null),a=ns(a,s,c,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,t.mode&1&&si(t,e.child,null,c),t.child.memoizedState=Su(c),t.memoizedState=ju,a);if(!(t.mode&1))return So(e,t,c,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var d=i.dgst;return i=d,a=Error(V(419)),i=Dc(a,i,void 0),So(e,t,c,i)}if(d=(c&e.childLanes)!==0,Nt||d){if(i=Xe,i!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|c)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Zn(e,s),an(i,e,s,-1))}return zd(),i=Dc(Error(V(421))),So(e,t,c,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Py.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,It=yr(s.nextSibling),Rt=t,De=!0,nn=null,e!==null&&(Wt[Vt++]=An,Wt[Vt++]=Bn,Wt[Vt++]=is,An=e.id,Bn=e.overflow,is=t),t=Td(t,i.children),t.flags|=4096,t)}function Ef(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),wu(e.return,t,n)}function zc(e,t,n,i,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=s)}function lg(e,t,n){var i=t.pendingProps,s=i.revealOrder,a=i.tail;if(pt(e,t,i.children,n),i=ze.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ef(e,n,t);else if(e.tag===19)Ef(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ee(ze,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&fl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),zc(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&fl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}zc(t,!0,n,null,a);break;case"together":zc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),os|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,n=Lr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Lr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function vy(e,t,n){switch(t.tag){case 3:ag(t),ri();break;case 5:Rm(t);break;case 1:Ct(t.type)&&ol(t);break;case 4:Ld(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Ee(ul,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ee(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?og(e,t,n):(Ee(ze,ze.current&1),e=Wn(e,t,n),e!==null?e.sibling:null);Ee(ze,ze.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return lg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(ze,ze.current),i)break;return null;case 22:case 23:return t.lanes=0,sg(e,t,n)}return Wn(e,t,n)}var cg,Eu,ug,dg;cg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Eu=function(){};ug=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Jr(_n.current);var a=null;switch(n){case"input":s=Yc(e,s),i=Yc(e,i),a=[];break;case"select":s=Fe({},s,{value:void 0}),i=Fe({},i,{value:void 0}),a=[];break;case"textarea":s=eu(e,s),i=eu(e,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=il)}nu(n,i);var c;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var d=s[p];for(c in d)d.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(ha.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in i){var f=i[p];if(d=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&f!==d&&(f!=null||d!=null))if(p==="style")if(d){for(c in d)!d.hasOwnProperty(c)||f&&f.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in f)f.hasOwnProperty(c)&&d[c]!==f[c]&&(n||(n={}),n[c]=f[c])}else n||(a||(a=[]),a.push(p,n)),n=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,d=d?d.__html:void 0,f!=null&&d!==f&&(a=a||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(ha.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&Te("scroll",e),a||d===f||(a=[])):(a=a||[]).push(p,f))}n&&(a=a||[]).push("style",n);var p=a;(t.updateQueue=p)&&(t.flags|=4)}};dg=function(e,t,n,i){n!==i&&(t.flags|=4)};function Gi(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function yy(e,t,n){var i=t.pendingProps;switch(gd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return Ct(t.type)&&al(),lt(t),null;case 3:return i=t.stateNode,ii(),Me(kt),Me(dt),kd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Co(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(zu(nn),nn=null))),Eu(e,t),lt(t),null;case 5:Nd(t);var s=Jr(Na.current);if(n=t.type,e!==null&&t.stateNode!=null)ug(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(V(166));return lt(t),null}if(e=Jr(_n.current),Co(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[xn]=t,i[ba]=a,e=(t.mode&1)!==0,n){case"dialog":Te("cancel",i),Te("close",i);break;case"iframe":case"object":case"embed":Te("load",i);break;case"video":case"audio":for(s=0;s<na.length;s++)Te(na[s],i);break;case"source":Te("error",i);break;case"img":case"image":case"link":Te("error",i),Te("load",i);break;case"details":Te("toggle",i);break;case"input":zh(i,a),Te("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Te("invalid",i);break;case"textarea":Bh(i,a),Te("invalid",i)}nu(n,a),s=null;for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];c==="children"?typeof d=="string"?i.textContent!==d&&(a.suppressHydrationWarning!==!0&&ko(i.textContent,d,e),s=["children",d]):typeof d=="number"&&i.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&ko(i.textContent,d,e),s=["children",""+d]):ha.hasOwnProperty(c)&&d!=null&&c==="onScroll"&&Te("scroll",i)}switch(n){case"input":xo(i),Ah(i,a,!0);break;case"textarea":xo(i),Fh(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=il)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=c.createElement(n,{is:i.is}):(e=c.createElement(n),n==="select"&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,n),e[xn]=t,e[ba]=i,cg(e,t,!1,!1),t.stateNode=e;e:{switch(c=ru(n,i),n){case"dialog":Te("cancel",e),Te("close",e),s=i;break;case"iframe":case"object":case"embed":Te("load",e),s=i;break;case"video":case"audio":for(s=0;s<na.length;s++)Te(na[s],e);s=i;break;case"source":Te("error",e),s=i;break;case"img":case"image":case"link":Te("error",e),Te("load",e),s=i;break;case"details":Te("toggle",e),s=i;break;case"input":zh(e,i),s=Yc(e,i),Te("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=Fe({},i,{value:void 0}),Te("invalid",e);break;case"textarea":Bh(e,i),s=eu(e,i),Te("invalid",e);break;default:s=i}nu(n,s),d=s;for(a in d)if(d.hasOwnProperty(a)){var f=d[a];a==="style"?Hp(e,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Fp(e,f)):a==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&fa(e,f):typeof f=="number"&&fa(e,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ha.hasOwnProperty(a)?f!=null&&a==="onScroll"&&Te("scroll",e):f!=null&&td(e,a,f,c))}switch(n){case"input":xo(e),Ah(e,i,!1);break;case"textarea":xo(e),Fh(e);break;case"option":i.value!=null&&e.setAttribute("value",""+kr(i.value));break;case"select":e.multiple=!!i.multiple,a=i.value,a!=null?Ks(e,!!i.multiple,a,!1):i.defaultValue!=null&&Ks(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=il)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)dg(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(V(166));if(n=Jr(Na.current),Jr(_n.current),Co(t)){if(i=t.stateNode,n=t.memoizedProps,i[xn]=t,(a=i.nodeValue!==n)&&(e=Rt,e!==null))switch(e.tag){case 3:ko(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ko(i.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[xn]=t,t.stateNode=i}return lt(t),null;case 13:if(Me(ze),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&It!==null&&t.mode&1&&!(t.flags&128))Em(),ri(),t.flags|=98560,a=!1;else if(a=Co(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(V(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(V(317));a[xn]=t}else ri(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),a=!1}else nn!==null&&(zu(nn),nn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?Ke===0&&(Ke=3):zd())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return ii(),Eu(e,t),e===null&&_a(t.stateNode.containerInfo),lt(t),null;case 10:return _d(t.type._context),lt(t),null;case 17:return Ct(t.type)&&al(),lt(t),null;case 19:if(Me(ze),a=t.memoizedState,a===null)return lt(t),null;if(i=(t.flags&128)!==0,c=a.rendering,c===null)if(i)Gi(a,!1);else{if(Ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=fl(e),c!==null){for(t.flags|=128,Gi(a,!1),i=c.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)a=n,e=i,a.flags&=14680066,c=a.alternate,c===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ee(ze,ze.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ze()>oi&&(t.flags|=128,i=!0,Gi(a,!1),t.lanes=4194304)}else{if(!i)if(e=fl(c),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Gi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!De)return lt(t),null}else 2*Ze()-a.renderingStartTime>oi&&n!==1073741824&&(t.flags|=128,i=!0,Gi(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(n=a.last,n!==null?n.sibling=c:t.child=c,a.last=c)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,n=ze.current,Ee(ze,i?n&1|2:n&1),t):(lt(t),null);case 22:case 23:return Dd(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Mt&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function _y(e,t){switch(gd(t),t.tag){case 1:return Ct(t.type)&&al(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ii(),Me(kt),Me(dt),kd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Nd(t),null;case 13:if(Me(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(ze),null;case 4:return ii(),null;case 10:return _d(t.type._context),null;case 22:case 23:return Dd(),null;case 24:return null;default:return null}}var Eo=!1,ct=!1,wy=typeof WeakSet=="function"?WeakSet:Set,re=null;function Gs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ue(e,t,i)}else n.current=null}function Pu(e,t,n){try{n()}catch(i){Ue(e,t,i)}}var Pf=!1;function by(e,t){if(fu=nl,e=gm(),pd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var c=0,d=-1,f=-1,p=0,g=0,v=e,C=null;t:for(;;){for(var S;v!==n||s!==0&&v.nodeType!==3||(d=c+s),v!==a||i!==0&&v.nodeType!==3||(f=c+i),v.nodeType===3&&(c+=v.nodeValue.length),(S=v.firstChild)!==null;)C=v,v=S;for(;;){if(v===e)break t;if(C===n&&++p===s&&(d=c),C===a&&++g===i&&(f=c),(S=v.nextSibling)!==null)break;v=C,C=v.parentNode}v=S}n=d===-1||f===-1?null:{start:d,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(pu={focusedElem:e,selectionRange:n},nl=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,k=_.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?y:en(t.type,y),k);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(E){Ue(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return _=Pf,Pf=!1,_}function ca(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Pu(t,n,a)}s=s.next}while(s!==i)}}function Ol(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Tu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hg(e){var t=e.alternate;t!==null&&(e.alternate=null,hg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xn],delete t[ba],delete t[xu],delete t[sy],delete t[iy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fg(e){return e.tag===5||e.tag===3||e.tag===4}function Tf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=il));else if(i!==4&&(e=e.child,e!==null))for(Mu(e,t,n),e=e.sibling;e!==null;)Mu(e,t,n),e=e.sibling}function Iu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Iu(e,t,n),e=e.sibling;e!==null;)Iu(e,t,n),e=e.sibling}var rt=null,tn=!1;function or(e,t,n){for(n=n.child;n!==null;)pg(e,t,n),n=n.sibling}function pg(e,t,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(jl,n)}catch{}switch(n.tag){case 5:ct||Gs(n,t);case 6:var i=rt,s=tn;rt=null,or(e,t,n),rt=i,tn=s,rt!==null&&(tn?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(tn?(e=rt,n=n.stateNode,e.nodeType===8?Pc(e.parentNode,n):e.nodeType===1&&Pc(e,n),xa(e)):Pc(rt,n.stateNode));break;case 4:i=rt,s=tn,rt=n.stateNode.containerInfo,tn=!0,or(e,t,n),rt=i,tn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,c=a.destroy;a=a.tag,c!==void 0&&(a&2||a&4)&&Pu(n,t,c),s=s.next}while(s!==i)}or(e,t,n);break;case 1:if(!ct&&(Gs(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(d){Ue(n,t,d)}or(e,t,n);break;case 21:or(e,t,n);break;case 22:n.mode&1?(ct=(i=ct)||n.memoizedState!==null,or(e,t,n),ct=i):or(e,t,n);break;default:or(e,t,n)}}function Mf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wy),t.forEach(function(i){var s=Ty.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Jt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var a=e,c=t,d=c;e:for(;d!==null;){switch(d.tag){case 5:rt=d.stateNode,tn=!1;break e;case 3:rt=d.stateNode.containerInfo,tn=!0;break e;case 4:rt=d.stateNode.containerInfo,tn=!0;break e}d=d.return}if(rt===null)throw Error(V(160));pg(a,c,s),rt=null,tn=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(p){Ue(s,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mg(t,e),t=t.sibling}function mg(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),pn(e),i&4){try{ca(3,e,e.return),Ol(3,e)}catch(y){Ue(e,e.return,y)}try{ca(5,e,e.return)}catch(y){Ue(e,e.return,y)}}break;case 1:Jt(t,e),pn(e),i&512&&n!==null&&Gs(n,n.return);break;case 5:if(Jt(t,e),pn(e),i&512&&n!==null&&Gs(n,n.return),e.flags&32){var s=e.stateNode;try{fa(s,"")}catch(y){Ue(e,e.return,y)}}if(i&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,c=n!==null?n.memoizedProps:a,d=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&zp(s,a),ru(d,c);var p=ru(d,a);for(c=0;c<f.length;c+=2){var g=f[c],v=f[c+1];g==="style"?Hp(s,v):g==="dangerouslySetInnerHTML"?Fp(s,v):g==="children"?fa(s,v):td(s,g,v,p)}switch(d){case"input":Xc(s,a);break;case"textarea":Ap(s,a);break;case"select":var C=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var S=a.value;S!=null?Ks(s,!!a.multiple,S,!1):C!==!!a.multiple&&(a.defaultValue!=null?Ks(s,!!a.multiple,a.defaultValue,!0):Ks(s,!!a.multiple,a.multiple?[]:"",!1))}s[ba]=a}catch(y){Ue(e,e.return,y)}}break;case 6:if(Jt(t,e),pn(e),i&4){if(e.stateNode===null)throw Error(V(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(y){Ue(e,e.return,y)}}break;case 3:if(Jt(t,e),pn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{xa(t.containerInfo)}catch(y){Ue(e,e.return,y)}break;case 4:Jt(t,e),pn(e);break;case 13:Jt(t,e),pn(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Rd=Ze())),i&4&&Mf(e);break;case 22:if(g=n!==null&&n.memoizedState!==null,e.mode&1?(ct=(p=ct)||g,Jt(t,e),ct=p):Jt(t,e),pn(e),i&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!g&&e.mode&1)for(re=e,g=e.child;g!==null;){for(v=re=g;re!==null;){switch(C=re,S=C.child,C.tag){case 0:case 11:case 14:case 15:ca(4,C,C.return);break;case 1:Gs(C,C.return);var _=C.stateNode;if(typeof _.componentWillUnmount=="function"){i=C,n=C.return;try{t=i,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(y){Ue(i,n,y)}}break;case 5:Gs(C,C.return);break;case 22:if(C.memoizedState!==null){Rf(v);continue}}S!==null?(S.return=C,re=S):Rf(v)}g=g.sibling}e:for(g=null,v=e;;){if(v.tag===5){if(g===null){g=v;try{s=v.stateNode,p?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=v.stateNode,f=v.memoizedProps.style,c=f!=null&&f.hasOwnProperty("display")?f.display:null,d.style.display=Up("display",c))}catch(y){Ue(e,e.return,y)}}}else if(v.tag===6){if(g===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(y){Ue(e,e.return,y)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;g===v&&(g=null),v=v.return}g===v&&(g=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Jt(t,e),pn(e),i&4&&Mf(e);break;case 21:break;default:Jt(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(fg(n)){var i=n;break e}n=n.return}throw Error(V(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(fa(s,""),i.flags&=-33);var a=Tf(e);Iu(e,a,s);break;case 3:case 4:var c=i.stateNode.containerInfo,d=Tf(e);Mu(e,d,c);break;default:throw Error(V(161))}}catch(f){Ue(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ly(e,t,n){re=e,gg(e)}function gg(e,t,n){for(var i=(e.mode&1)!==0;re!==null;){var s=re,a=s.child;if(s.tag===22&&i){var c=s.memoizedState!==null||Eo;if(!c){var d=s.alternate,f=d!==null&&d.memoizedState!==null||ct;d=Eo;var p=ct;if(Eo=c,(ct=f)&&!p)for(re=s;re!==null;)c=re,f=c.child,c.tag===22&&c.memoizedState!==null?Of(s):f!==null?(f.return=c,re=f):Of(s);for(;a!==null;)re=a,gg(a),a=a.sibling;re=s,Eo=d,ct=p}If(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,re=a):If(e)}}function If(e){for(;re!==null;){var t=re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ct||Ol(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ct)if(n===null)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&xf(t,a,i);break;case 3:var c=t.updateQueue;if(c!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xf(t,c,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var g=p.memoizedState;if(g!==null){var v=g.dehydrated;v!==null&&xa(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}ct||t.flags&512&&Tu(t)}catch(C){Ue(t,t.return,C)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function Rf(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function Of(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ol(4,t)}catch(f){Ue(t,n,f)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(f){Ue(t,s,f)}}var a=t.return;try{Tu(t)}catch(f){Ue(t,a,f)}break;case 5:var c=t.return;try{Tu(t)}catch(f){Ue(t,c,f)}}}catch(f){Ue(t,t.return,f)}if(t===e){re=null;break}var d=t.sibling;if(d!==null){d.return=t.return,re=d;break}re=t.return}}var Ny=Math.ceil,gl=Vn.ReactCurrentDispatcher,Md=Vn.ReactCurrentOwner,Gt=Vn.ReactCurrentBatchConfig,Le=0,Xe=null,$e=null,st=0,Mt=0,qs=Sr(0),Ke=0,Sa=null,os=0,Dl=0,Id=0,ua=null,Lt=null,Rd=0,oi=1/0,Dn=null,xl=!1,Ru=null,wr=null,Po=!1,pr=null,vl=0,da=0,Ou=null,Vo=-1,$o=0;function mt(){return Le&6?Ze():Vo!==-1?Vo:Vo=Ze()}function br(e){return e.mode&1?Le&2&&st!==0?st&-st:oy.transition!==null?($o===0&&($o=em()),$o):(e=Ne,e!==0||(e=window.event,e=e===void 0?16:om(e.type)),e):1}function an(e,t,n,i){if(50<da)throw da=0,Ou=null,Error(V(185));Ma(e,n,i),(!(Le&2)||e!==Xe)&&(e===Xe&&(!(Le&2)&&(Dl|=n),Ke===4&&hr(e,st)),jt(e,i),n===1&&Le===0&&!(t.mode&1)&&(oi=Ze()+500,Ml&&Er()))}function jt(e,t){var n=e.callbackNode;ov(e,t);var i=tl(e,e===Xe?st:0);if(i===0)n!==null&&Zh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Zh(n),t===1)e.tag===0?ay(Df.bind(null,e)):Cm(Df.bind(null,e)),ny(function(){!(Le&6)&&Er()}),n=null;else{switch(tm(i)){case 1:n=ad;break;case 4:n=Xp;break;case 16:n=el;break;case 536870912:n=Jp;break;default:n=el}n=Ng(n,xg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xg(e,t){if(Vo=-1,$o=0,Le&6)throw Error(V(327));var n=e.callbackNode;if(ei()&&e.callbackNode!==n)return null;var i=tl(e,e===Xe?st:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=yl(e,i);else{t=i;var s=Le;Le|=2;var a=yg();(Xe!==e||st!==t)&&(Dn=null,oi=Ze()+500,ts(e,t));do try{jy();break}catch(d){vg(e,d)}while(!0);yd(),gl.current=a,Le=s,$e!==null?t=0:(Xe=null,st=0,t=Ke)}if(t!==0){if(t===2&&(s=lu(e),s!==0&&(i=s,t=Du(e,s))),t===1)throw n=Sa,ts(e,0),hr(e,i),jt(e,Ze()),n;if(t===6)hr(e,i);else{if(s=e.current.alternate,!(i&30)&&!ky(s)&&(t=yl(e,i),t===2&&(a=lu(e),a!==0&&(i=a,t=Du(e,a))),t===1))throw n=Sa,ts(e,0),hr(e,i),jt(e,Ze()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(V(345));case 2:Qr(e,Lt,Dn);break;case 3:if(hr(e,i),(i&130023424)===i&&(t=Rd+500-Ze(),10<t)){if(tl(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){mt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=gu(Qr.bind(null,e,Lt,Dn),t);break}Qr(e,Lt,Dn);break;case 4:if(hr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var c=31-sn(i);a=1<<c,c=t[c],c>s&&(s=c),i&=~a}if(i=s,i=Ze()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ny(i/1960))-i,10<i){e.timeoutHandle=gu(Qr.bind(null,e,Lt,Dn),i);break}Qr(e,Lt,Dn);break;case 5:Qr(e,Lt,Dn);break;default:throw Error(V(329))}}}return jt(e,Ze()),e.callbackNode===n?xg.bind(null,e):null}function Du(e,t){var n=ua;return e.current.memoizedState.isDehydrated&&(ts(e,t).flags|=256),e=yl(e,t),e!==2&&(t=Lt,Lt=n,t!==null&&zu(t)),e}function zu(e){Lt===null?Lt=e:Lt.push.apply(Lt,e)}function ky(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],a=s.getSnapshot;s=s.value;try{if(!on(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hr(e,t){for(t&=~Id,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),i=1<<n;e[n]=-1,t&=~i}}function Df(e){if(Le&6)throw Error(V(327));ei();var t=tl(e,0);if(!(t&1))return jt(e,Ze()),null;var n=yl(e,t);if(e.tag!==0&&n===2){var i=lu(e);i!==0&&(t=i,n=Du(e,i))}if(n===1)throw n=Sa,ts(e,0),hr(e,t),jt(e,Ze()),n;if(n===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qr(e,Lt,Dn),jt(e,Ze()),null}function Od(e,t){var n=Le;Le|=1;try{return e(t)}finally{Le=n,Le===0&&(oi=Ze()+500,Ml&&Er())}}function ls(e){pr!==null&&pr.tag===0&&!(Le&6)&&ei();var t=Le;Le|=1;var n=Gt.transition,i=Ne;try{if(Gt.transition=null,Ne=1,e)return e()}finally{Ne=i,Gt.transition=n,Le=t,!(Le&6)&&Er()}}function Dd(){Mt=qs.current,Me(qs)}function ts(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ty(n)),$e!==null)for(n=$e.return;n!==null;){var i=n;switch(gd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&al();break;case 3:ii(),Me(kt),Me(dt),kd();break;case 5:Nd(i);break;case 4:ii();break;case 13:Me(ze);break;case 19:Me(ze);break;case 10:_d(i.type._context);break;case 22:case 23:Dd()}n=n.return}if(Xe=e,$e=e=Lr(e.current,null),st=Mt=t,Ke=0,Sa=null,Id=Dl=os=0,Lt=ua=null,Xr!==null){for(t=0;t<Xr.length;t++)if(n=Xr[t],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,a=n.pending;if(a!==null){var c=a.next;a.next=s,i.next=c}n.pending=i}Xr=null}return e}function vg(e,t){do{var n=$e;try{if(yd(),Ho.current=ml,pl){for(var i=Ae.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}pl=!1}if(as=0,Ye=qe=Ae=null,la=!1,ka=0,Md.current=null,n===null||n.return===null){Ke=1,Sa=t,$e=null;break}e:{var a=e,c=n.return,d=n,f=t;if(t=st,d.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,g=d,v=g.tag;if(!(g.mode&1)&&(v===0||v===11||v===15)){var C=g.alternate;C?(g.updateQueue=C.updateQueue,g.memoizedState=C.memoizedState,g.lanes=C.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=Lf(c);if(S!==null){S.flags&=-257,Nf(S,c,d,a,t),S.mode&1&&bf(a,p,t),t=S,f=p;var _=t.updateQueue;if(_===null){var y=new Set;y.add(f),t.updateQueue=y}else _.add(f);break e}else{if(!(t&1)){bf(a,p,t),zd();break e}f=Error(V(426))}}else if(De&&d.mode&1){var k=Lf(c);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Nf(k,c,d,a,t),xd(ai(f,d));break e}}a=f=ai(f,d),Ke!==4&&(Ke=2),ua===null?ua=[a]:ua.push(a),a=c;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=tg(a,f,t);gf(a,w);break e;case 1:d=f;var b=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(wr===null||!wr.has(j)))){a.flags|=65536,t&=-t,a.lanes|=t;var E=ng(a,d,t);gf(a,E);break e}}a=a.return}while(a!==null)}wg(n)}catch(T){t=T,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function yg(){var e=gl.current;return gl.current=ml,e===null?ml:e}function zd(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Xe===null||!(os&268435455)&&!(Dl&268435455)||hr(Xe,st)}function yl(e,t){var n=Le;Le|=2;var i=yg();(Xe!==e||st!==t)&&(Dn=null,ts(e,t));do try{Cy();break}catch(s){vg(e,s)}while(!0);if(yd(),Le=n,gl.current=i,$e!==null)throw Error(V(261));return Xe=null,st=0,Ke}function Cy(){for(;$e!==null;)_g($e)}function jy(){for(;$e!==null&&!Xx();)_g($e)}function _g(e){var t=Lg(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,t===null?wg(e):$e=t,Md.current=null}function wg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_y(n,t),n!==null){n.flags&=32767,$e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,$e=null;return}}else if(n=yy(n,t,Mt),n!==null){$e=n;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);Ke===0&&(Ke=5)}function Qr(e,t,n){var i=Ne,s=Gt.transition;try{Gt.transition=null,Ne=1,Sy(e,t,n,i)}finally{Gt.transition=s,Ne=i}return null}function Sy(e,t,n,i){do ei();while(pr!==null);if(Le&6)throw Error(V(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(lv(e,a),e===Xe&&($e=Xe=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Po||(Po=!0,Ng(el,function(){return ei(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Gt.transition,Gt.transition=null;var c=Ne;Ne=1;var d=Le;Le|=4,Md.current=null,by(e,n),mg(n,e),qv(pu),nl=!!fu,pu=fu=null,e.current=n,Ly(n),Jx(),Le=d,Ne=c,Gt.transition=a}else e.current=n;if(Po&&(Po=!1,pr=e,vl=s),a=e.pendingLanes,a===0&&(wr=null),nv(n.stateNode),jt(e,Ze()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(xl)throw xl=!1,e=Ru,Ru=null,e;return vl&1&&e.tag!==0&&ei(),a=e.pendingLanes,a&1?e===Ou?da++:(da=0,Ou=e):da=0,Er(),null}function ei(){if(pr!==null){var e=tm(vl),t=Gt.transition,n=Ne;try{if(Gt.transition=null,Ne=16>e?16:e,pr===null)var i=!1;else{if(e=pr,pr=null,vl=0,Le&6)throw Error(V(331));var s=Le;for(Le|=4,re=e.current;re!==null;){var a=re,c=a.child;if(re.flags&16){var d=a.deletions;if(d!==null){for(var f=0;f<d.length;f++){var p=d[f];for(re=p;re!==null;){var g=re;switch(g.tag){case 0:case 11:case 15:ca(8,g,a)}var v=g.child;if(v!==null)v.return=g,re=v;else for(;re!==null;){g=re;var C=g.sibling,S=g.return;if(hg(g),g===p){re=null;break}if(C!==null){C.return=S,re=C;break}re=S}}}var _=a.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}re=a}}if(a.subtreeFlags&2064&&c!==null)c.return=a,re=c;else e:for(;re!==null;){if(a=re,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ca(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,re=w;break e}re=a.return}}var b=e.current;for(re=b;re!==null;){c=re;var j=c.child;if(c.subtreeFlags&2064&&j!==null)j.return=c,re=j;else e:for(c=b;re!==null;){if(d=re,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Ol(9,d)}}catch(T){Ue(d,d.return,T)}if(d===c){re=null;break e}var E=d.sibling;if(E!==null){E.return=d.return,re=E;break e}re=d.return}}if(Le=s,Er(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(jl,e)}catch{}i=!0}return i}finally{Ne=n,Gt.transition=t}}return!1}function zf(e,t,n){t=ai(n,t),t=tg(e,t,1),e=_r(e,t,1),t=mt(),e!==null&&(Ma(e,1,t),jt(e,t))}function Ue(e,t,n){if(e.tag===3)zf(e,e,n);else for(;t!==null;){if(t.tag===3){zf(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wr===null||!wr.has(i))){e=ai(n,e),e=ng(t,e,1),t=_r(t,e,1),e=mt(),t!==null&&(Ma(t,1,e),jt(t,e));break}}t=t.return}}function Ey(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=mt(),e.pingedLanes|=e.suspendedLanes&n,Xe===e&&(st&n)===n&&(Ke===4||Ke===3&&(st&130023424)===st&&500>Ze()-Rd?ts(e,0):Id|=n),jt(e,t)}function bg(e,t){t===0&&(e.mode&1?(t=_o,_o<<=1,!(_o&130023424)&&(_o=4194304)):t=1);var n=mt();e=Zn(e,t),e!==null&&(Ma(e,t,n),jt(e,n))}function Py(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bg(e,n)}function Ty(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(V(314))}i!==null&&i.delete(t),bg(e,n)}var Lg;Lg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)Nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nt=!1,vy(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,De&&t.flags&1048576&&jm(t,cl,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wo(e,t),e=t.pendingProps;var s=ni(t,dt.current);Js(t,n),s=jd(null,t,i,e,s,n);var a=Sd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(i)?(a=!0,ol(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bd(t),s.updater=Rl,t.stateNode=s,s._reactInternals=t,Lu(t,i,e,n),t=Cu(null,t,i,!0,a,n)):(t.tag=0,De&&a&&md(t),pt(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=Iy(i),e=en(i,e),s){case 0:t=ku(null,t,i,e,n);break e;case 1:t=jf(null,t,i,e,n);break e;case 11:t=kf(null,t,i,e,n);break e;case 14:t=Cf(null,t,i,en(i.type,e),n);break e}throw Error(V(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:en(i,s),ku(e,t,i,s,n);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:en(i,s),jf(e,t,i,s,n);case 3:e:{if(ag(t),e===null)throw Error(V(387));i=t.pendingProps,a=t.memoizedState,s=a.element,Im(e,t),hl(t,i,null,n);var c=t.memoizedState;if(i=c.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=ai(Error(V(423)),t),t=Sf(e,t,i,n,s);break e}else if(i!==s){s=ai(Error(V(424)),t),t=Sf(e,t,i,n,s);break e}else for(It=yr(t.stateNode.containerInfo.firstChild),Rt=t,De=!0,nn=null,n=Tm(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ri(),i===s){t=Wn(e,t,n);break e}pt(e,t,i,n)}t=t.child}return t;case 5:return Rm(t),e===null&&_u(t),i=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,c=s.children,mu(i,s)?c=null:a!==null&&mu(i,a)&&(t.flags|=32),ig(e,t),pt(e,t,c,n),t.child;case 6:return e===null&&_u(t),null;case 13:return og(e,t,n);case 4:return Ld(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=si(t,null,i,n):pt(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:en(i,s),kf(e,t,i,s,n);case 7:return pt(e,t,t.pendingProps,n),t.child;case 8:return pt(e,t,t.pendingProps.children,n),t.child;case 12:return pt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,c=s.value,Ee(ul,i._currentValue),i._currentValue=c,a!==null)if(on(a.value,c)){if(a.children===s.children&&!kt.current){t=Wn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var d=a.dependencies;if(d!==null){c=a.child;for(var f=d.firstContext;f!==null;){if(f.context===i){if(a.tag===1){f=Fn(-1,n&-n),f.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var g=p.pending;g===null?f.next=f:(f.next=g.next,g.next=f),p.pending=f}}a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),wu(a.return,n,t),d.lanes|=n;break}f=f.next}}else if(a.tag===10)c=a.type===t.type?null:a.child;else if(a.tag===18){if(c=a.return,c===null)throw Error(V(341));c.lanes|=n,d=c.alternate,d!==null&&(d.lanes|=n),wu(c,n,t),c=a.sibling}else c=a.child;if(c!==null)c.return=a;else for(c=a;c!==null;){if(c===t){c=null;break}if(a=c.sibling,a!==null){a.return=c.return,c=a;break}c=c.return}a=c}pt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Js(t,n),s=qt(s),i=i(s),t.flags|=1,pt(e,t,i,n),t.child;case 14:return i=t.type,s=en(i,t.pendingProps),s=en(i.type,s),Cf(e,t,i,s,n);case 15:return rg(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:en(i,s),Wo(e,t),t.tag=1,Ct(i)?(e=!0,ol(t)):e=!1,Js(t,n),eg(t,i,s),Lu(t,i,s,n),Cu(null,t,i,!0,e,n);case 19:return lg(e,t,n);case 22:return sg(e,t,n)}throw Error(V(156,t.tag))};function Ng(e,t){return Yp(e,t)}function My(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,t,n,i){return new My(e,t,n,i)}function Ad(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Iy(e){if(typeof e=="function")return Ad(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rd)return 11;if(e===sd)return 14}return 2}function Lr(e,t){var n=e.alternate;return n===null?(n=$t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Go(e,t,n,i,s,a){var c=2;if(i=e,typeof e=="function")Ad(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case As:return ns(n.children,s,a,t);case nd:c=8,s|=8;break;case Gc:return e=$t(12,n,t,s|2),e.elementType=Gc,e.lanes=a,e;case qc:return e=$t(13,n,t,s),e.elementType=qc,e.lanes=a,e;case Kc:return e=$t(19,n,t,s),e.elementType=Kc,e.lanes=a,e;case Rp:return zl(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mp:c=10;break e;case Ip:c=9;break e;case rd:c=11;break e;case sd:c=14;break e;case cr:c=16,i=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=$t(c,n,t,s),t.elementType=e,t.type=i,t.lanes=a,t}function ns(e,t,n,i){return e=$t(7,e,i,t),e.lanes=n,e}function zl(e,t,n,i){return e=$t(22,e,i,t),e.elementType=Rp,e.lanes=n,e.stateNode={isHidden:!1},e}function Ac(e,t,n){return e=$t(6,e,null,t),e.lanes=n,e}function Bc(e,t,n){return t=$t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ry(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yc(0),this.expirationTimes=yc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yc(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bd(e,t,n,i,s,a,c,d,f){return e=new Ry(e,t,n,d,f),t===1?(t=1,a===!0&&(t|=8)):t=0,a=$t(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(a),e}function Oy(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function kg(e){if(!e)return Cr;e=e._reactInternals;e:{if(ds(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var n=e.type;if(Ct(n))return km(e,n,t)}return t}function Cg(e,t,n,i,s,a,c,d,f){return e=Bd(n,i,!0,e,s,a,c,d,f),e.context=kg(null),n=e.current,i=mt(),s=br(n),a=Fn(i,s),a.callback=t??null,_r(n,a,s),e.current.lanes=s,Ma(e,s,i),jt(e,i),e}function Al(e,t,n,i){var s=t.current,a=mt(),c=br(s);return n=kg(n),t.context===null?t.context=n:t.pendingContext=n,t=Fn(a,c),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=_r(s,t,c),e!==null&&(an(e,s,c,a),Uo(e,s,c)),c}function _l(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Af(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fd(e,t){Af(e,t),(e=e.alternate)&&Af(e,t)}function Dy(){return null}var jg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ud(e){this._internalRoot=e}Bl.prototype.render=Ud.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));Al(e,t,null,null)};Bl.prototype.unmount=Ud.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ls(function(){Al(null,e,null,null)}),t[Hn]=null}};function Bl(e){this._internalRoot=e}Bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=sm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<dr.length&&t!==0&&t<dr[n].priority;n++);dr.splice(n,0,e),n===0&&am(e)}};function Hd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bf(){}function zy(e,t,n,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var p=_l(c);a.call(p)}}var c=Cg(t,i,e,0,null,!1,!1,"",Bf);return e._reactRootContainer=c,e[Hn]=c.current,_a(e.nodeType===8?e.parentNode:e),ls(),c}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var d=i;i=function(){var p=_l(f);d.call(p)}}var f=Bd(e,0,!1,null,null,!1,!1,"",Bf);return e._reactRootContainer=f,e[Hn]=f.current,_a(e.nodeType===8?e.parentNode:e),ls(function(){Al(t,f,n,i)}),f}function Ul(e,t,n,i,s){var a=n._reactRootContainer;if(a){var c=a;if(typeof s=="function"){var d=s;s=function(){var f=_l(c);d.call(f)}}Al(t,c,e,s)}else c=zy(n,t,e,s,i);return _l(c)}nm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ta(t.pendingLanes);n!==0&&(od(t,n|1),jt(t,Ze()),!(Le&6)&&(oi=Ze()+500,Er()))}break;case 13:ls(function(){var i=Zn(e,1);if(i!==null){var s=mt();an(i,e,1,s)}}),Fd(e,1)}};ld=function(e){if(e.tag===13){var t=Zn(e,134217728);if(t!==null){var n=mt();an(t,e,134217728,n)}Fd(e,134217728)}};rm=function(e){if(e.tag===13){var t=br(e),n=Zn(e,t);if(n!==null){var i=mt();an(n,e,t,i)}Fd(e,t)}};sm=function(){return Ne};im=function(e,t){var n=Ne;try{return Ne=e,t()}finally{Ne=n}};iu=function(e,t,n){switch(t){case"input":if(Xc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=Tl(i);if(!s)throw Error(V(90));Dp(i),Xc(i,s)}}}break;case"textarea":Ap(e,n);break;case"select":t=n.value,t!=null&&Ks(e,!!n.multiple,t,!1)}};Vp=Od;$p=ls;var Ay={usingClientEntryPoint:!1,Events:[Ra,Hs,Tl,Zp,Wp,Od]},qi={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},By={bundleType:qi.bundleType,version:qi.version,rendererPackageName:qi.rendererPackageName,rendererConfig:qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kp(e),e===null?null:e.stateNode},findFiberByHostInstance:qi.findFiberByHostInstance||Dy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var To=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!To.isDisabled&&To.supportsFiber)try{jl=To.inject(By),yn=To}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ay;Dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hd(t))throw Error(V(200));return Oy(e,t,null,n)};Dt.createRoot=function(e,t){if(!Hd(e))throw Error(V(299));var n=!1,i="",s=jg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Bd(e,1,!1,null,null,n,!1,i,s),e[Hn]=t.current,_a(e.nodeType===8?e.parentNode:e),new Ud(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=Kp(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return ls(e)};Dt.hydrate=function(e,t,n){if(!Fl(t))throw Error(V(200));return Ul(null,e,t,!0,n)};Dt.hydrateRoot=function(e,t,n){if(!Hd(e))throw Error(V(405));var i=n!=null&&n.hydratedSources||null,s=!1,a="",c=jg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),t=Cg(t,null,e,1,n??null,s,!1,a,c),e[Hn]=t.current,_a(e),i)for(e=0;e<i.length;e++)n=i[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Bl(t)};Dt.render=function(e,t,n){if(!Fl(t))throw Error(V(200));return Ul(null,e,t,!1,n)};Dt.unmountComponentAtNode=function(e){if(!Fl(e))throw Error(V(40));return e._reactRootContainer?(ls(function(){Ul(null,null,e,!1,function(){e._reactRootContainer=null,e[Hn]=null})}),!0):!1};Dt.unstable_batchedUpdates=Od;Dt.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Fl(n))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return Ul(e,t,n,!1,i)};Dt.version="18.3.1-next-f1338f8080-20240426";function Sg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sg)}catch(e){console.error(e)}}Sg(),Sp.exports=Dt;var Fy=Sp.exports,Ff=Fy;Vc.createRoot=Ff.createRoot,Vc.hydrateRoot=Ff.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ea.apply(this,arguments)}var mr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(mr||(mr={}));const Uf="popstate";function Uy(e){e===void 0&&(e={});function t(i,s){let{pathname:a,search:c,hash:d}=i.location;return Au("",{pathname:a,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:wl(s)}return Zy(t,n,null,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hy(){return Math.random().toString(36).substr(2,8)}function Hf(e,t){return{usr:e.state,key:e.key,idx:t}}function Au(e,t,n,i){return n===void 0&&(n=null),Ea({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?fi(t):t,{state:n,key:t&&t.key||i||Hy()})}function wl(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function fi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Zy(e,t,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,c=s.history,d=mr.Pop,f=null,p=g();p==null&&(p=0,c.replaceState(Ea({},c.state,{idx:p}),""));function g(){return(c.state||{idx:null}).idx}function v(){d=mr.Pop;let k=g(),w=k==null?null:k-p;p=k,f&&f({action:d,location:y.location,delta:w})}function C(k,w){d=mr.Push;let b=Au(y.location,k,w);p=g()+1;let j=Hf(b,p),E=y.createHref(b);try{c.pushState(j,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(E)}a&&f&&f({action:d,location:y.location,delta:1})}function S(k,w){d=mr.Replace;let b=Au(y.location,k,w);p=g();let j=Hf(b,p),E=y.createHref(b);c.replaceState(j,"",E),a&&f&&f({action:d,location:y.location,delta:0})}function _(k){let w=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof k=="string"?k:wl(k);return b=b.replace(/ $/,"%20"),Be(w,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,w)}let y={get action(){return d},get location(){return e(s,c)},listen(k){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Uf,v),f=k,()=>{s.removeEventListener(Uf,v),f=null}},createHref(k){return t(s,k)},createURL:_,encodeLocation(k){let w=_(k);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:C,replace:S,go(k){return c.go(k)}};return y}var Zf;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Zf||(Zf={}));function Wy(e,t,n){return n===void 0&&(n="/"),Vy(e,t,n)}function Vy(e,t,n,i){let s=typeof t=="string"?fi(t):t,a=li(s.pathname||"/",n);if(a==null)return null;let c=Eg(e);$y(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let p=r_(a);d=t_(c[f],p)}return d}function Eg(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(a,c,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Be(f.relativePath.startsWith(i),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(i.length));let p=Nr([i,f.relativePath]),g=n.concat(f);a.children&&a.children.length>0&&(Be(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Eg(a.children,t,g,p)),!(a.path==null&&!a.index)&&t.push({path:p,score:Jy(p,a.index),routesMeta:g})};return e.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,c);else for(let f of Pg(a.path))s(a,c,f)}),t}function Pg(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let c=Pg(i.join("/")),d=[];return d.push(...c.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...c),d.map(f=>e.startsWith("/")&&f===""?"/":f)}function $y(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:e_(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Gy=/^:[\w-]+$/,qy=3,Ky=2,Qy=1,Yy=10,Xy=-2,Wf=e=>e==="*";function Jy(e,t){let n=e.split("/"),i=n.length;return n.some(Wf)&&(i+=Xy),t&&(i+=Ky),n.filter(s=>!Wf(s)).reduce((s,a)=>s+(Gy.test(a)?qy:a===""?Qy:Yy),i)}function e_(e,t){return e.length===t.length&&e.slice(0,-1).every((i,s)=>i===t[s])?e[e.length-1]-t[t.length-1]:0}function t_(e,t,n){let{routesMeta:i}=e,s={},a="/",c=[];for(let d=0;d<i.length;++d){let f=i[d],p=d===i.length-1,g=a==="/"?t:t.slice(a.length)||"/",v=Bu({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),C=f.route;if(!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:Nr([a,v.pathname]),pathnameBase:l_(Nr([a,v.pathnameBase])),route:C}),v.pathnameBase!=="/"&&(a=Nr([a,v.pathnameBase]))}return c}function Bu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=n_(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((p,g,v)=>{let{paramName:C,isOptional:S}=g;if(C==="*"){let y=d[v]||"";c=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const _=d[v];return S&&!_?p[C]=void 0:p[C]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:e}}function n_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Zd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function r_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function li(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const s_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i_=e=>s_.test(e);function a_(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:s=""}=typeof e=="string"?fi(e):e,a;if(n)if(i_(n))a=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Zd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?a=Vf(n.substring(1),"/"):a=Vf(n,t)}else a=t;return{pathname:a,search:c_(i),hash:u_(s)}}function Vf(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Fc(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Wd(e,t){let n=o_(e);return t?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Vd(e,t,n,i){i===void 0&&(i=!1);let s;typeof e=="string"?s=fi(e):(s=Ea({},e),Be(!s.pathname||!s.pathname.includes("?"),Fc("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),Fc("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),Fc("#","search","hash",s)));let a=e===""||s.pathname==="",c=a?"/":s.pathname,d;if(c==null)d=n;else{let v=t.length-1;if(!i&&c.startsWith("..")){let C=c.split("/");for(;C[0]==="..";)C.shift(),v-=1;s.pathname=C.join("/")}d=v>=0?t[v]:"/"}let f=a_(s,d),p=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}const Nr=e=>e.join("/").replace(/\/\/+/g,"/"),l_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),c_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,u_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function d_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Tg=["post","put","patch","delete"];new Set(Tg);const h_=["get",...Tg];new Set(h_);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pa(){return Pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pa.apply(this,arguments)}const Hl=x.createContext(null),Mg=x.createContext(null),$n=x.createContext(null),Zl=x.createContext(null),wn=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Ig=x.createContext(null);function f_(e,t){let{relative:n}=t===void 0?{}:t;pi()||Be(!1);let{basename:i,navigator:s}=x.useContext($n),{hash:a,pathname:c,search:d}=Wl(e,{relative:n}),f=c;return i!=="/"&&(f=c==="/"?i:Nr([i,c])),s.createHref({pathname:f,search:d,hash:a})}function pi(){return x.useContext(Zl)!=null}function Gn(){return pi()||Be(!1),x.useContext(Zl).location}function Rg(e){x.useContext($n).static||x.useLayoutEffect(e)}function Pr(){let{isDataRoute:e}=x.useContext(wn);return e?E_():p_()}function p_(){pi()||Be(!1);let e=x.useContext(Hl),{basename:t,future:n,navigator:i}=x.useContext($n),{matches:s}=x.useContext(wn),{pathname:a}=Gn(),c=JSON.stringify(Wd(s,n.v7_relativeSplatPath)),d=x.useRef(!1);return Rg(()=>{d.current=!0}),x.useCallback(function(p,g){if(g===void 0&&(g={}),!d.current)return;if(typeof p=="number"){i.go(p);return}let v=Vd(p,JSON.parse(c),a,g.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Nr([t,v.pathname])),(g.replace?i.replace:i.push)(v,g.state,g)},[t,i,c,a,e])}const m_=x.createContext(null);function g_(e){let t=x.useContext(wn).outlet;return t&&x.createElement(m_.Provider,{value:e},t)}function x_(){let{matches:e}=x.useContext(wn),t=e[e.length-1];return t?t.params:{}}function Wl(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=x.useContext($n),{matches:s}=x.useContext(wn),{pathname:a}=Gn(),c=JSON.stringify(Wd(s,i.v7_relativeSplatPath));return x.useMemo(()=>Vd(e,JSON.parse(c),a,n==="path"),[e,c,a,n])}function v_(e,t){return y_(e,t)}function y_(e,t,n,i){pi()||Be(!1);let{navigator:s}=x.useContext($n),{matches:a}=x.useContext(wn),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let p=Gn(),g;if(t){var v;let k=typeof t=="string"?fi(t):t;f==="/"||(v=k.pathname)!=null&&v.startsWith(f)||Be(!1),g=k}else g=p;let C=g.pathname||"/",S=C;if(f!=="/"){let k=f.replace(/^\//,"").split("/");S="/"+C.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=Wy(e,{pathname:S}),y=N_(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:Nr([f,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:Nr([f,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,i);return t&&y?x.createElement(Zl.Provider,{value:{location:Pa({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:mr.Pop}},y):y}function __(){let e=S_(),t=d_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:s},n):null,null)}const w_=x.createElement(__,null);class b_ extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(wn.Provider,{value:this.props.routeContext},x.createElement(Ig.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L_(e){let{routeContext:t,match:n,children:i}=e,s=x.useContext(Hl);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(wn.Provider,{value:t},i)}function N_(e,t,n,i){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=i)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let c=e,d=(s=n)==null?void 0:s.errors;if(d!=null){let g=c.findIndex(v=>v.route.id&&(d==null?void 0:d[v.route.id])!==void 0);g>=0||Be(!1),c=c.slice(0,Math.min(c.length,g+1))}let f=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let g=0;g<c.length;g++){let v=c[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=g),v.route.id){let{loaderData:C,errors:S}=n,_=v.route.loader&&C[v.route.id]===void 0&&(!S||S[v.route.id]===void 0);if(v.route.lazy||_){f=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((g,v,C)=>{let S,_=!1,y=null,k=null;n&&(S=d&&v.route.id?d[v.route.id]:void 0,y=v.route.errorElement||w_,f&&(p<0&&C===0?(P_("route-fallback"),_=!0,k=null):p===C&&(_=!0,k=v.route.hydrateFallbackElement||null)));let w=t.concat(c.slice(0,C+1)),b=()=>{let j;return S?j=y:_?j=k:v.route.Component?j=x.createElement(v.route.Component,null):v.route.element?j=v.route.element:j=g,x.createElement(L_,{match:v,routeContext:{outlet:g,matches:w,isDataRoute:n!=null},children:j})};return n&&(v.route.ErrorBoundary||v.route.errorElement||C===0)?x.createElement(b_,{location:n.location,revalidation:n.revalidation,component:y,error:S,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}var Og=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Og||{}),Dg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Dg||{});function k_(e){let t=x.useContext(Hl);return t||Be(!1),t}function C_(e){let t=x.useContext(Mg);return t||Be(!1),t}function j_(e){let t=x.useContext(wn);return t||Be(!1),t}function zg(e){let t=j_(),n=t.matches[t.matches.length-1];return n.route.id||Be(!1),n.route.id}function S_(){var e;let t=x.useContext(Ig),n=C_(),i=zg();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function E_(){let{router:e}=k_(Og.UseNavigateStable),t=zg(Dg.UseNavigateStable),n=x.useRef(!1);return Rg(()=>{n.current=!0}),x.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Pa({fromRouteId:t},a)))},[e,t])}const $f={};function P_(e,t,n){$f[e]||($f[e]=!0)}function T_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Fu(e){let{to:t,replace:n,state:i,relative:s}=e;pi()||Be(!1);let{future:a,static:c}=x.useContext($n),{matches:d}=x.useContext(wn),{pathname:f}=Gn(),p=Pr(),g=Vd(t,Wd(d,a.v7_relativeSplatPath),f,s==="path"),v=JSON.stringify(g);return x.useEffect(()=>p(JSON.parse(v),{replace:n,state:i,relative:s}),[p,v,s,n,i]),null}function Ag(e){return g_(e.context)}function ft(e){Be(!1)}function M_(e){let{basename:t="/",children:n=null,location:i,navigationType:s=mr.Pop,navigator:a,static:c=!1,future:d}=e;pi()&&Be(!1);let f=t.replace(/^\/*/,"/"),p=x.useMemo(()=>({basename:f,navigator:a,static:c,future:Pa({v7_relativeSplatPath:!1},d)}),[f,d,a,c]);typeof i=="string"&&(i=fi(i));let{pathname:g="/",search:v="",hash:C="",state:S=null,key:_="default"}=i,y=x.useMemo(()=>{let k=li(g,f);return k==null?null:{location:{pathname:k,search:v,hash:C,state:S,key:_},navigationType:s}},[f,g,v,C,S,_,s]);return y==null?null:x.createElement($n.Provider,{value:p},x.createElement(Zl.Provider,{children:n,value:y}))}function I_(e){let{children:t,location:n}=e;return v_(Uu(t),n)}new Promise(()=>{});function Uu(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(i,s)=>{if(!x.isValidElement(i))return;let a=[...t,s];if(i.type===x.Fragment){n.push.apply(n,Uu(i.props.children,a));return}i.type!==ft&&Be(!1),!i.props.index||!i.props.children||Be(!1);let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Uu(i.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bl.apply(this,arguments)}function Bg(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,a;for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function R_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function O_(e,t){return e.button===0&&(!t||t==="_self")&&!R_(e)}const D_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],z_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],A_="6";try{window.__reactRouterVersion=A_}catch{}const B_=x.createContext({isTransitioning:!1}),F_="startTransition",Gf=Ex[F_];function U_(e){let{basename:t,children:n,future:i,window:s}=e,a=x.useRef();a.current==null&&(a.current=Uy({window:s,v5Compat:!0}));let c=a.current,[d,f]=x.useState({action:c.action,location:c.location}),{v7_startTransition:p}=i||{},g=x.useCallback(v=>{p&&Gf?Gf(()=>f(v)):f(v)},[f,p]);return x.useLayoutEffect(()=>c.listen(g),[c,g]),x.useEffect(()=>T_(i),[i]),x.createElement(M_,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:c,future:i})}const H_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W_=x.forwardRef(function(t,n){let{onClick:i,relative:s,reloadDocument:a,replace:c,state:d,target:f,to:p,preventScrollReset:g,viewTransition:v}=t,C=Bg(t,D_),{basename:S}=x.useContext($n),_,y=!1;if(typeof p=="string"&&Z_.test(p)&&(_=p,H_))try{let j=new URL(window.location.href),E=p.startsWith("//")?new URL(j.protocol+p):new URL(p),T=li(E.pathname,S);E.origin===j.origin&&T!=null?p=T+E.search+E.hash:y=!0}catch{}let k=f_(p,{relative:s}),w=$_(p,{replace:c,state:d,target:f,preventScrollReset:g,relative:s,viewTransition:v});function b(j){i&&i(j),j.defaultPrevented||w(j)}return x.createElement("a",bl({},C,{href:_||k,onClick:y||a?i:b,ref:n,target:f}))}),qf=x.forwardRef(function(t,n){let{"aria-current":i="page",caseSensitive:s=!1,className:a="",end:c=!1,style:d,to:f,viewTransition:p,children:g}=t,v=Bg(t,z_),C=Wl(f,{relative:v.relative}),S=Gn(),_=x.useContext(Mg),{navigator:y,basename:k}=x.useContext($n),w=_!=null&&G_(C)&&p===!0,b=y.encodeLocation?y.encodeLocation(C).pathname:C.pathname,j=S.pathname,E=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;s||(j=j.toLowerCase(),E=E?E.toLowerCase():null,b=b.toLowerCase()),E&&k&&(E=li(E,k)||E);const T=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let I=j===b||!c&&j.startsWith(b)&&j.charAt(T)==="/",z=E!=null&&(E===b||!c&&E.startsWith(b)&&E.charAt(b.length)==="/"),A={isActive:I,isPending:z,isTransitioning:w},Q=I?i:void 0,Z;typeof a=="function"?Z=a(A):Z=[a,I?"active":null,z?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let se=typeof d=="function"?d(A):d;return x.createElement(W_,bl({},v,{"aria-current":Q,className:Z,ref:n,style:se,to:f,viewTransition:p}),typeof g=="function"?g(A):g)});var Hu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Hu||(Hu={}));var Kf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Kf||(Kf={}));function V_(e){let t=x.useContext(Hl);return t||Be(!1),t}function $_(e,t){let{target:n,replace:i,state:s,preventScrollReset:a,relative:c,viewTransition:d}=t===void 0?{}:t,f=Pr(),p=Gn(),g=Wl(e,{relative:c});return x.useCallback(v=>{if(O_(v,n)){v.preventDefault();let C=i!==void 0?i:wl(p)===wl(g);f(e,{replace:C,state:s,preventScrollReset:a,relative:c,viewTransition:d})}},[p,f,g,i,s,n,e,a,c,d])}function G_(e,t){t===void 0&&(t={});let n=x.useContext(B_);n==null&&Be(!1);let{basename:i}=V_(Hu.useViewTransitionState),s=Wl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=li(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=li(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Bu(s.pathname,c)!=null||Bu(s.pathname,a)!=null}class q_{constructor(t){this.authRepo=t}async login(t,n){var i,s;try{return{success:!0,user:(await this.authRepo.login(t,n)).user}}catch(a){return{success:!1,error:((s=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:s.error)||(a==null?void 0:a.message)||"Error al iniciar sesin"}}}async logout(){try{await this.authRepo.logout()}catch{}}async getCurrentUser(){try{return await this.authRepo.getMe()}catch{return null}}}class K_{constructor(t){this.userRepo=t}async getAll(){return this.userRepo.getAll()}async getById(t){return this.userRepo.getById(t)}async create(t){return this.userRepo.create(t)}async update(t,n){return this.userRepo.update(t,n)}async updateState(t,n,i){return this.userRepo.updateState(t,n,i)}async resetPassword(t){return this.userRepo.resetPassword(t)}}class Q_{constructor(t){this.categoryRepo=t}async getAll(){return this.categoryRepo.getAll()}async getById(t){return this.categoryRepo.getById(t)}async create(t){return this.categoryRepo.create(t)}async update(t,n){return this.categoryRepo.update(t,n)}async updateState(t,n){return this.categoryRepo.updateState(t,n)}async delete(t){return this.categoryRepo.delete(t)}}class Y_{constructor(t){this.productRepo=t}async getAll(t){return this.productRepo.getAll(t)}async getById(t){return this.productRepo.getById(t)}async create(t){return this.productRepo.create(t)}async update(t,n){return this.productRepo.update(t,n)}async updateState(t,n){return this.productRepo.updateState(t,n)}async delete(t){return this.productRepo.delete(t)}}class X_{constructor(t){this.supplierRepo=t}async getAll(){return this.supplierRepo.getAll()}async getById(t){return this.supplierRepo.getById(t)}async create(t){return this.supplierRepo.create(t)}async update(t,n){return this.supplierRepo.update(t,n)}async updateState(t,n,i){return this.supplierRepo.update(t,{state:n})}async delete(t){return this.supplierRepo.delete(t)}}class J_{constructor(t){this.psRepo=t}async getAll(){return this.psRepo.getAll()}async getById(t){return this.psRepo.getById(t)}async create(t){return this.psRepo.create(t)}async update(t,n){return this.psRepo.update(t,n)}async updateState(t,n){return this.psRepo.update(t,{state:n})}async delete(t){return this.psRepo.delete(t)}}class ew{constructor(t){this.branchRepo=t}async getAll(){return this.branchRepo.getAll()}async getById(t){return this.branchRepo.getById(t)}async create(t){return this.branchRepo.create(t)}async update(t,n){return this.branchRepo.update(t,n)}async updateState(t,n){return this.branchRepo.updateState(t,n)}}class tw{constructor(t){this.repository=t}async getAll(){return this.repository.getAll()}}class nw{constructor(t){this.brandRepo=t}async getAll(){return this.brandRepo.getAll()}async getById(t){return this.brandRepo.getById(t)}async create(t){return this.brandRepo.create(t)}async update(t,n){return this.brandRepo.update(t,n)}async updateState(t,n){return this.brandRepo.updateState(t,n)}}class rw{constructor(t){this.repository=t}async getByBranch(t){return this.repository.getByBranch(t)}async getByBranchPaginated(t,n){return this.repository.getByBranchPaginated(t,n)}async setStock(t,n,i){return this.repository.setStock(t,n,i)}}class sw{constructor(t){this.presentationRepo=t}async getAll(){return this.presentationRepo.getAll()}async getById(t){return this.presentationRepo.getById(t)}async create(t){return this.presentationRepo.create(t)}async update(t,n){return this.presentationRepo.update(t,n)}async updateState(t,n){return this.presentationRepo.updateState(t,n)}async delete(t){return this.presentationRepo.delete(t)}}class iw{constructor(t){this.colorRepo=t}async getAll(){return this.colorRepo.getAll()}async getById(t){return this.colorRepo.getById(t)}async create(t){return this.colorRepo.create(t)}async update(t,n){return this.colorRepo.update(t,n)}async updateState(t,n){return this.colorRepo.updateState(t,n)}async delete(t){return this.colorRepo.delete(t)}}class aw{constructor(t){this.repository=t}async listPaginated(){return this.repository.getAll()}async getById(t){return this.repository.getById(t)}async create(t){return this.repository.create(t)}async update(t,n){return this.repository.update(t,n)}async updateArea(t,n){return this.repository.updateArea(t,{areaId:n})}async softDelete(t){return this.repository.softDelete(t)}}function Qf(e){return e.map(([t,n])=>({lat:t,lng:n}))}function Ki(e){return e.map(t=>[t.lat,t.lng])}function ow(e){return e.length>=3}function Fg(e){const t=["#4285F4","#34A853","#FBBC04","#EA4335","#9C27B0","#FF6D00","#00BCD4","#E91E63","#795548","#607D8B","#8BC34A","#FF5722","#673AB7","#009688","#FFC107","#3F51B5","#CDDC39","#00796B","#C2185B","#1976D2"];return t[e%t.length]}const Ug=e=>e.reduce((t,n)=>(n.id&&(t[n.id]=n.name),t),{}),Hg=(e,t)=>t==null?"Sin rea":e[t]||`rea #${t}`;class lw{constructor(t){ar(this,"cache",null);ar(this,"cacheTime",0);ar(this,"cacheDuration",5*60*1e3);this.repository=t}async listPaginated(t=1,n=10){return this.repository.getAll(t,n)}async getAllCached(){const t=Date.now();if(this.cache&&t-this.cacheTime<this.cacheDuration)return this.cache;try{const n=await this.repository.getAll(1,100);return this.cache=n.data,this.cacheTime=t,this.cache}catch(n){console.warn("Backend de reas fall, usando fallback mock",n);const i=[{id:1,name:"Zona Norte",state:!0},{id:2,name:"Zona Sur",state:!0},{id:3,name:"Zona Este",state:!0},{id:4,name:"Zona Oeste",state:!0},{id:5,name:"Centro",state:!0}];return this.cache=i,this.cacheTime=t,i}}async getAreaMap(){const t=await this.getAllCached();return Ug(t)}clearCache(){this.cache=null,this.cacheTime=0}}function Zg(e,t){return function(){return e.apply(t,arguments)}}const{toString:cw}=Object.prototype,{getPrototypeOf:$d}=Object,{iterator:Vl,toStringTag:Wg}=Symbol,$l=(e=>t=>{const n=cw.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ln=e=>(e=e.toLowerCase(),t=>$l(t)===e),Gl=e=>t=>typeof t===e,{isArray:mi}=Array,ci=Gl("undefined");function Da(e){return e!==null&&!ci(e)&&e.constructor!==null&&!ci(e.constructor)&&St(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Vg=ln("ArrayBuffer");function uw(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Vg(e.buffer),t}const dw=Gl("string"),St=Gl("function"),$g=Gl("number"),za=e=>e!==null&&typeof e=="object",hw=e=>e===!0||e===!1,qo=e=>{if($l(e)!=="object")return!1;const t=$d(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Wg in e)&&!(Vl in e)},fw=e=>{if(!za(e)||Da(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},pw=ln("Date"),mw=ln("File"),gw=ln("Blob"),xw=ln("FileList"),vw=e=>za(e)&&St(e.pipe),yw=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||St(e.append)&&((t=$l(e))==="formdata"||t==="object"&&St(e.toString)&&e.toString()==="[object FormData]"))},_w=ln("URLSearchParams"),[ww,bw,Lw,Nw]=["ReadableStream","Request","Response","Headers"].map(ln),kw=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Aa(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,s;if(typeof e!="object"&&(e=[e]),mi(e))for(i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else{if(Da(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),c=a.length;let d;for(i=0;i<c;i++)d=a[i],t.call(null,e[d],d,e)}}function Gg(e,t){if(Da(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,s;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const es=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qg=e=>!ci(e)&&e!==es;function Zu(){const{caseless:e,skipUndefined:t}=qg(this)&&this||{},n={},i=(s,a)=>{const c=e&&Gg(n,a)||a;qo(n[c])&&qo(s)?n[c]=Zu(n[c],s):qo(s)?n[c]=Zu({},s):mi(s)?n[c]=s.slice():(!t||!ci(s))&&(n[c]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Aa(arguments[s],i);return n}const Cw=(e,t,n,{allOwnKeys:i}={})=>(Aa(t,(s,a)=>{n&&St(s)?e[a]=Zg(s,n):e[a]=s},{allOwnKeys:i}),e),jw=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Sw=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Ew=(e,t,n,i)=>{let s,a,c;const d={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)c=s[a],(!i||i(c,e,t))&&!d[c]&&(t[c]=e[c],d[c]=!0);e=n!==!1&&$d(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Pw=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},Tw=e=>{if(!e)return null;if(mi(e))return e;let t=e.length;if(!$g(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Mw=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&$d(Uint8Array)),Iw=(e,t)=>{const i=(e&&e[Vl]).call(e);let s;for(;(s=i.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},Rw=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},Ow=ln("HTMLFormElement"),Dw=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),Yf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),zw=ln("RegExp"),Kg=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Aa(n,(s,a)=>{let c;(c=t(s,a,e))!==!1&&(i[a]=c||s)}),Object.defineProperties(e,i)},Aw=e=>{Kg(e,(t,n)=>{if(St(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(St(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Bw=(e,t)=>{const n={},i=s=>{s.forEach(a=>{n[a]=!0})};return mi(e)?i(e):i(String(e).split(t)),n},Fw=()=>{},Uw=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Hw(e){return!!(e&&St(e.append)&&e[Wg]==="FormData"&&e[Vl])}const Zw=e=>{const t=new Array(10),n=(i,s)=>{if(za(i)){if(t.indexOf(i)>=0)return;if(Da(i))return i;if(!("toJSON"in i)){t[s]=i;const a=mi(i)?[]:{};return Aa(i,(c,d)=>{const f=n(c,s+1);!ci(f)&&(a[d]=f)}),t[s]=void 0,a}}return i};return n(e,0)},Ww=ln("AsyncFunction"),Vw=e=>e&&(za(e)||St(e))&&St(e.then)&&St(e.catch),Qg=((e,t)=>e?setImmediate:t?((n,i)=>(es.addEventListener("message",({source:s,data:a})=>{s===es&&a===n&&i.length&&i.shift()()},!1),s=>{i.push(s),es.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",St(es.postMessage)),$w=typeof queueMicrotask<"u"?queueMicrotask.bind(es):typeof process<"u"&&process.nextTick||Qg,Gw=e=>e!=null&&St(e[Vl]),D={isArray:mi,isArrayBuffer:Vg,isBuffer:Da,isFormData:yw,isArrayBufferView:uw,isString:dw,isNumber:$g,isBoolean:hw,isObject:za,isPlainObject:qo,isEmptyObject:fw,isReadableStream:ww,isRequest:bw,isResponse:Lw,isHeaders:Nw,isUndefined:ci,isDate:pw,isFile:mw,isBlob:gw,isRegExp:zw,isFunction:St,isStream:vw,isURLSearchParams:_w,isTypedArray:Mw,isFileList:xw,forEach:Aa,merge:Zu,extend:Cw,trim:kw,stripBOM:jw,inherits:Sw,toFlatObject:Ew,kindOf:$l,kindOfTest:ln,endsWith:Pw,toArray:Tw,forEachEntry:Iw,matchAll:Rw,isHTMLForm:Ow,hasOwnProperty:Yf,hasOwnProp:Yf,reduceDescriptors:Kg,freezeMethods:Aw,toObjectSet:Bw,toCamelCase:Dw,noop:Fw,toFiniteNumber:Uw,findKey:Gg,global:es,isContextDefined:qg,isSpecCompliantForm:Hw,toJSONObject:Zw,isAsyncFn:Ww,isThenable:Vw,setImmediate:Qg,asap:$w,isIterable:Gw};function xe(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}D.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const Yg=xe.prototype,Xg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Xg[e]={value:e}});Object.defineProperties(xe,Xg);Object.defineProperty(Yg,"isAxiosError",{value:!0});xe.from=(e,t,n,i,s,a)=>{const c=Object.create(Yg);D.toFlatObject(e,c,function(g){return g!==Error.prototype},p=>p!=="isAxiosError");const d=e&&e.message?e.message:"Error",f=t==null&&e?e.code:t;return xe.call(c,d,f,n,i,s),e&&c.cause==null&&Object.defineProperty(c,"cause",{value:e,configurable:!0}),c.name=e&&e.name||"Error",a&&Object.assign(c,a),c};const qw=null;function Wu(e){return D.isPlainObject(e)||D.isArray(e)}function Jg(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function Xf(e,t,n){return e?e.concat(t).map(function(s,a){return s=Jg(s),!n&&a?"["+s+"]":s}).join(n?".":""):t}function Kw(e){return D.isArray(e)&&!e.some(Wu)}const Qw=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function ql(e,t,n){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,k){return!D.isUndefined(k[y])});const i=n.metaTokens,s=n.visitor||g,a=n.dots,c=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(s))throw new TypeError("visitor must be a function");function p(_){if(_===null)return"";if(D.isDate(_))return _.toISOString();if(D.isBoolean(_))return _.toString();if(!f&&D.isBlob(_))throw new xe("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(_)||D.isTypedArray(_)?f&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function g(_,y,k){let w=_;if(_&&!k&&typeof _=="object"){if(D.endsWith(y,"{}"))y=i?y:y.slice(0,-2),_=JSON.stringify(_);else if(D.isArray(_)&&Kw(_)||(D.isFileList(_)||D.endsWith(y,"[]"))&&(w=D.toArray(_)))return y=Jg(y),w.forEach(function(j,E){!(D.isUndefined(j)||j===null)&&t.append(c===!0?Xf([y],E,a):c===null?y:y+"[]",p(j))}),!1}return Wu(_)?!0:(t.append(Xf(k,y,a),p(_)),!1)}const v=[],C=Object.assign(Qw,{defaultVisitor:g,convertValue:p,isVisitable:Wu});function S(_,y){if(!D.isUndefined(_)){if(v.indexOf(_)!==-1)throw Error("Circular reference detected in "+y.join("."));v.push(_),D.forEach(_,function(w,b){(!(D.isUndefined(w)||w===null)&&s.call(t,w,D.isString(b)?b.trim():b,y,C))===!0&&S(w,y?y.concat(b):[b])}),v.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return S(e),t}function Jf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Gd(e,t){this._pairs=[],e&&ql(e,this,t)}const e0=Gd.prototype;e0.append=function(t,n){this._pairs.push([t,n])};e0.toString=function(t){const n=t?function(i){return t.call(this,i,Jf)}:Jf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Yw(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function t0(e,t,n){if(!t)return e;const i=n&&n.encode||Yw;D.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(t,n):a=D.isURLSearchParams(t)?t.toString():new Gd(t,n).toString(i),a){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class ep{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(i){i!==null&&t(i)})}}const n0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xw=typeof URLSearchParams<"u"?URLSearchParams:Gd,Jw=typeof FormData<"u"?FormData:null,eb=typeof Blob<"u"?Blob:null,tb={isBrowser:!0,classes:{URLSearchParams:Xw,FormData:Jw,Blob:eb},protocols:["http","https","file","blob","url","data"]},qd=typeof window<"u"&&typeof document<"u",Vu=typeof navigator=="object"&&navigator||void 0,nb=qd&&(!Vu||["ReactNative","NativeScript","NS"].indexOf(Vu.product)<0),rb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sb=qd&&window.location.href||"http://localhost",ib=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qd,hasStandardBrowserEnv:nb,hasStandardBrowserWebWorkerEnv:rb,navigator:Vu,origin:sb},Symbol.toStringTag,{value:"Module"})),ut={...ib,...tb};function ab(e,t){return ql(e,new ut.classes.URLSearchParams,{visitor:function(n,i,s,a){return ut.isNode&&D.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function ob(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function lb(e){const t={},n=Object.keys(e);let i;const s=n.length;let a;for(i=0;i<s;i++)a=n[i],t[a]=e[a];return t}function r0(e){function t(n,i,s,a){let c=n[a++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),f=a>=n.length;return c=!c&&D.isArray(s)?s.length:c,f?(D.hasOwnProp(s,c)?s[c]=[s[c],i]:s[c]=i,!d):((!s[c]||!D.isObject(s[c]))&&(s[c]=[]),t(n,i,s[c],a)&&D.isArray(s[c])&&(s[c]=lb(s[c])),!d)}if(D.isFormData(e)&&D.isFunction(e.entries)){const n={};return D.forEachEntry(e,(i,s)=>{t(ob(i),s,n,0)}),n}return null}function cb(e,t,n){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Ba={transitional:n0,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,a=D.isObject(t);if(a&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return s?JSON.stringify(r0(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return ab(t,this.formSerializer).toString();if((d=D.isFileList(t))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return ql(d?{"files[]":t}:t,f&&new f,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),cb(t)):t}],transformResponse:[function(t){const n=this.transitional||Ba.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(i&&!this.responseType||s)){const c=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?xe.from(d,xe.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ut.classes.FormData,Blob:ut.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{Ba.headers[e]={}});const ub=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),db=e=>{const t={};let n,i,s;return e&&e.split(`
`).forEach(function(c){s=c.indexOf(":"),n=c.substring(0,s).trim().toLowerCase(),i=c.substring(s+1).trim(),!(!n||t[n]&&ub[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},tp=Symbol("internals");function Qi(e){return e&&String(e).trim().toLowerCase()}function Ko(e){return e===!1||e==null?e:D.isArray(e)?e.map(Ko):String(e)}function hb(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const fb=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Uc(e,t,n,i,s){if(D.isFunction(i))return i.call(this,t,n);if(s&&(t=n),!!D.isString(t)){if(D.isString(i))return t.indexOf(i)!==-1;if(D.isRegExp(i))return i.test(t)}}function pb(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function mb(e,t){const n=D.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(s,a,c){return this[i].call(this,t,s,a,c)},configurable:!0})})}let Et=class{constructor(t){t&&this.set(t)}set(t,n,i){const s=this;function a(d,f,p){const g=Qi(f);if(!g)throw new Error("header name must be a non-empty string");const v=D.findKey(s,g);(!v||s[v]===void 0||p===!0||p===void 0&&s[v]!==!1)&&(s[v||f]=Ko(d))}const c=(d,f)=>D.forEach(d,(p,g)=>a(p,g,f));if(D.isPlainObject(t)||t instanceof this.constructor)c(t,n);else if(D.isString(t)&&(t=t.trim())&&!fb(t))c(db(t),n);else if(D.isObject(t)&&D.isIterable(t)){let d={},f,p;for(const g of t){if(!D.isArray(g))throw TypeError("Object iterator must return a key-value pair");d[p=g[0]]=(f=d[p])?D.isArray(f)?[...f,g[1]]:[f,g[1]]:g[1]}c(d,n)}else t!=null&&a(n,t,i);return this}get(t,n){if(t=Qi(t),t){const i=D.findKey(this,t);if(i){const s=this[i];if(!n)return s;if(n===!0)return hb(s);if(D.isFunction(n))return n.call(this,s,i);if(D.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Qi(t),t){const i=D.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||Uc(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let s=!1;function a(c){if(c=Qi(c),c){const d=D.findKey(i,c);d&&(!n||Uc(i,i[d],d,n))&&(delete i[d],s=!0)}}return D.isArray(t)?t.forEach(a):a(t),s}clear(t){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const a=n[i];(!t||Uc(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const n=this,i={};return D.forEach(this,(s,a)=>{const c=D.findKey(i,a);if(c){n[c]=Ko(s),delete n[a];return}const d=t?pb(a):String(a).trim();d!==a&&delete n[a],n[d]=Ko(s),i[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return D.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=t&&D.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[tp]=this[tp]={accessors:{}}).accessors,s=this.prototype;function a(c){const d=Qi(c);i[d]||(mb(s,c),i[d]=!0)}return D.isArray(t)?t.forEach(a):a(t),this}};Et.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(Et.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});D.freezeMethods(Et);function Hc(e,t){const n=this||Ba,i=t||n,s=Et.from(i.headers);let a=i.data;return D.forEach(e,function(d){a=d.call(n,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function s0(e){return!!(e&&e.__CANCEL__)}function gi(e,t,n){xe.call(this,e??"canceled",xe.ERR_CANCELED,t,n),this.name="CanceledError"}D.inherits(gi,xe,{__CANCEL__:!0});function i0(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new xe("Request failed with status code "+n.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function gb(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function xb(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s=0,a=0,c;return t=t!==void 0?t:1e3,function(f){const p=Date.now(),g=i[a];c||(c=p),n[s]=f,i[s]=p;let v=a,C=0;for(;v!==s;)C+=n[v++],v=v%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),p-c<t)return;const S=g&&p-g;return S?Math.round(C*1e3/S):void 0}}function vb(e,t){let n=0,i=1e3/t,s,a;const c=(p,g=Date.now())=>{n=g,s=null,a&&(clearTimeout(a),a=null),e(...p)};return[(...p)=>{const g=Date.now(),v=g-n;v>=i?c(p,g):(s=p,a||(a=setTimeout(()=>{a=null,c(s)},i-v)))},()=>s&&c(s)]}const Ll=(e,t,n=3)=>{let i=0;const s=xb(50,250);return vb(a=>{const c=a.loaded,d=a.lengthComputable?a.total:void 0,f=c-i,p=s(f),g=c<=d;i=c;const v={loaded:c,total:d,progress:d?c/d:void 0,bytes:f,rate:p||void 0,estimated:p&&d&&g?(d-c)/p:void 0,event:a,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(v)},n)},np=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},rp=e=>(...t)=>D.asap(()=>e(...t)),yb=ut.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ut.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ut.origin),ut.navigator&&/(msie|trident)/i.test(ut.navigator.userAgent)):()=>!0,_b=ut.hasStandardBrowserEnv?{write(e,t,n,i,s,a,c){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(t)}`];D.isNumber(n)&&d.push(`expires=${new Date(n).toUTCString()}`),D.isString(i)&&d.push(`path=${i}`),D.isString(s)&&d.push(`domain=${s}`),a===!0&&d.push("secure"),D.isString(c)&&d.push(`SameSite=${c}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function wb(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function bb(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function a0(e,t,n){let i=!wb(t);return e&&(i||n==!1)?bb(e,t):t}const sp=e=>e instanceof Et?{...e}:e;function cs(e,t){t=t||{};const n={};function i(p,g,v,C){return D.isPlainObject(p)&&D.isPlainObject(g)?D.merge.call({caseless:C},p,g):D.isPlainObject(g)?D.merge({},g):D.isArray(g)?g.slice():g}function s(p,g,v,C){if(D.isUndefined(g)){if(!D.isUndefined(p))return i(void 0,p,v,C)}else return i(p,g,v,C)}function a(p,g){if(!D.isUndefined(g))return i(void 0,g)}function c(p,g){if(D.isUndefined(g)){if(!D.isUndefined(p))return i(void 0,p)}else return i(void 0,g)}function d(p,g,v){if(v in t)return i(p,g);if(v in e)return i(void 0,p)}const f={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(p,g,v)=>s(sp(p),sp(g),v,!0)};return D.forEach(Object.keys({...e,...t}),function(g){const v=f[g]||s,C=v(e[g],t[g],g);D.isUndefined(C)&&v!==d||(n[g]=C)}),n}const o0=e=>{const t=cs({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:c,auth:d}=t;if(t.headers=c=Et.from(c),t.url=t0(a0(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),D.isFormData(n)){if(ut.hasStandardBrowserEnv||ut.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(D.isFunction(n.getHeaders)){const f=n.getHeaders(),p=["content-type","content-length"];Object.entries(f).forEach(([g,v])=>{p.includes(g.toLowerCase())&&c.set(g,v)})}}if(ut.hasStandardBrowserEnv&&(i&&D.isFunction(i)&&(i=i(t)),i||i!==!1&&yb(t.url))){const f=s&&a&&_b.read(a);f&&c.set(s,f)}return t},Lb=typeof XMLHttpRequest<"u",Nb=Lb&&function(e){return new Promise(function(n,i){const s=o0(e);let a=s.data;const c=Et.from(s.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:p}=s,g,v,C,S,_;function y(){S&&S(),_&&_(),s.cancelToken&&s.cancelToken.unsubscribe(g),s.signal&&s.signal.removeEventListener("abort",g)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function w(){if(!k)return;const j=Et.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),T={data:!d||d==="text"||d==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:j,config:e,request:k};i0(function(z){n(z),y()},function(z){i(z),y()},T),k=null}"onloadend"in k?k.onloadend=w:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(w)},k.onabort=function(){k&&(i(new xe("Request aborted",xe.ECONNABORTED,e,k)),k=null)},k.onerror=function(E){const T=E&&E.message?E.message:"Network Error",I=new xe(T,xe.ERR_NETWORK,e,k);I.event=E||null,i(I),k=null},k.ontimeout=function(){let E=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||n0;s.timeoutErrorMessage&&(E=s.timeoutErrorMessage),i(new xe(E,T.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,e,k)),k=null},a===void 0&&c.setContentType(null),"setRequestHeader"in k&&D.forEach(c.toJSON(),function(E,T){k.setRequestHeader(T,E)}),D.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),d&&d!=="json"&&(k.responseType=s.responseType),p&&([C,_]=Ll(p,!0),k.addEventListener("progress",C)),f&&k.upload&&([v,S]=Ll(f),k.upload.addEventListener("progress",v),k.upload.addEventListener("loadend",S)),(s.cancelToken||s.signal)&&(g=j=>{k&&(i(!j||j.type?new gi(null,e,k):j),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(g),s.signal&&(s.signal.aborted?g():s.signal.addEventListener("abort",g)));const b=gb(s.url);if(b&&ut.protocols.indexOf(b)===-1){i(new xe("Unsupported protocol "+b+":",xe.ERR_BAD_REQUEST,e));return}k.send(a||null)})},kb=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,s;const a=function(p){if(!s){s=!0,d();const g=p instanceof Error?p:this.reason;i.abort(g instanceof xe?g:new gi(g instanceof Error?g.message:g))}};let c=t&&setTimeout(()=>{c=null,a(new xe(`timeout ${t} of ms exceeded`,xe.ETIMEDOUT))},t);const d=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),e=null)};e.forEach(p=>p.addEventListener("abort",a));const{signal:f}=i;return f.unsubscribe=()=>D.asap(d),f}},Cb=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,s;for(;i<n;)s=i+t,yield e.slice(i,s),i=s},jb=async function*(e,t){for await(const n of Sb(e))yield*Cb(n,t)},Sb=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},ip=(e,t,n,i)=>{const s=jb(e,t);let a=0,c,d=f=>{c||(c=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:p,value:g}=await s.next();if(p){d(),f.close();return}let v=g.byteLength;if(n){let C=a+=v;n(C)}f.enqueue(new Uint8Array(g))}catch(p){throw d(p),p}},cancel(f){return d(f),s.return()}},{highWaterMark:2})},ap=64*1024,{isFunction:Mo}=D,Eb=(({Request:e,Response:t})=>({Request:e,Response:t}))(D.global),{ReadableStream:op,TextEncoder:lp}=D.global,cp=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Pb=e=>{e=D.merge.call({skipUndefined:!0},Eb,e);const{fetch:t,Request:n,Response:i}=e,s=t?Mo(t):typeof fetch=="function",a=Mo(n),c=Mo(i);if(!s)return!1;const d=s&&Mo(op),f=s&&(typeof lp=="function"?(_=>y=>_.encode(y))(new lp):async _=>new Uint8Array(await new n(_).arrayBuffer())),p=a&&d&&cp(()=>{let _=!1;const y=new n(ut.origin,{body:new op,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!y}),g=c&&d&&cp(()=>D.isReadableStream(new i("").body)),v={stream:g&&(_=>_.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!v[_]&&(v[_]=(y,k)=>{let w=y&&y[_];if(w)return w.call(y);throw new xe(`Response type '${_}' is not supported`,xe.ERR_NOT_SUPPORT,k)})});const C=async _=>{if(_==null)return 0;if(D.isBlob(_))return _.size;if(D.isSpecCompliantForm(_))return(await new n(ut.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(D.isArrayBufferView(_)||D.isArrayBuffer(_))return _.byteLength;if(D.isURLSearchParams(_)&&(_=_+""),D.isString(_))return(await f(_)).byteLength},S=async(_,y)=>{const k=D.toFiniteNumber(_.getContentLength());return k??C(y)};return async _=>{let{url:y,method:k,data:w,signal:b,cancelToken:j,timeout:E,onDownloadProgress:T,onUploadProgress:I,responseType:z,headers:A,withCredentials:Q="same-origin",fetchOptions:Z}=o0(_),se=t||fetch;z=z?(z+"").toLowerCase():"text";let ne=kb([b,j&&j.toAbortSignal()],E),$=null;const q=ne&&ne.unsubscribe&&(()=>{ne.unsubscribe()});let X;try{if(I&&p&&k!=="get"&&k!=="head"&&(X=await S(A,w))!==0){let J=new n(y,{method:"POST",body:w,duplex:"half"}),le;if(D.isFormData(w)&&(le=J.headers.get("content-type"))&&A.setContentType(le),J.body){const[we,fe]=np(X,Ll(rp(I)));w=ip(J.body,ap,we,fe)}}D.isString(Q)||(Q=Q?"include":"omit");const G=a&&"credentials"in n.prototype,ce={...Z,signal:ne,method:k.toUpperCase(),headers:A.normalize().toJSON(),body:w,duplex:"half",credentials:G?Q:void 0};$=a&&new n(y,ce);let R=await(a?se($,Z):se(y,ce));const ie=g&&(z==="stream"||z==="response");if(g&&(T||ie&&q)){const J={};["status","statusText","headers"].forEach(ue=>{J[ue]=R[ue]});const le=D.toFiniteNumber(R.headers.get("content-length")),[we,fe]=T&&np(le,Ll(rp(T),!0))||[];R=new i(ip(R.body,ap,we,()=>{fe&&fe(),q&&q()}),J)}z=z||"text";let F=await v[D.findKey(v,z)||"text"](R,_);return!ie&&q&&q(),await new Promise((J,le)=>{i0(J,le,{data:F,headers:Et.from(R.headers),status:R.status,statusText:R.statusText,config:_,request:$})})}catch(G){throw q&&q(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,_,$),{cause:G.cause||G}):xe.from(G,G&&G.code,_,$)}}},Tb=new Map,l0=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:s}=t,a=[i,s,n];let c=a.length,d=c,f,p,g=Tb;for(;d--;)f=a[d],p=g.get(f),p===void 0&&g.set(f,p=d?new Map:Pb(t)),g=p;return p};l0();const Kd={http:qw,xhr:Nb,fetch:{get:l0}};D.forEach(Kd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const up=e=>`- ${e}`,Mb=e=>D.isFunction(e)||e===null||e===!1;function Ib(e,t){e=D.isArray(e)?e:[e];const{length:n}=e;let i,s;const a={};for(let c=0;c<n;c++){i=e[c];let d;if(s=i,!Mb(i)&&(s=Kd[(d=String(i)).toLowerCase()],s===void 0))throw new xe(`Unknown adapter '${d}'`);if(s&&(D.isFunction(s)||(s=s.get(t))))break;a[d||"#"+c]=s}if(!s){const c=Object.entries(a).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let d=n?c.length>1?`since :
`+c.map(up).join(`
`):" "+up(c[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s}const c0={getAdapter:Ib,adapters:Kd};function Zc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gi(null,e)}function dp(e){return Zc(e),e.headers=Et.from(e.headers),e.data=Hc.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),c0.getAdapter(e.adapter||Ba.adapter,e)(e).then(function(i){return Zc(e),i.data=Hc.call(e,e.transformResponse,i),i.headers=Et.from(i.headers),i},function(i){return s0(i)||(Zc(e),i&&i.response&&(i.response.data=Hc.call(e,e.transformResponse,i.response),i.response.headers=Et.from(i.response.headers))),Promise.reject(i)})}const u0="1.13.2",Kl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Kl[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const hp={};Kl.transitional=function(t,n,i){function s(a,c){return"[Axios v"+u0+"] Transitional option '"+a+"'"+c+(i?". "+i:"")}return(a,c,d)=>{if(t===!1)throw new xe(s(c," has been removed"+(n?" in "+n:"")),xe.ERR_DEPRECATED);return n&&!hp[c]&&(hp[c]=!0,console.warn(s(c," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,c,d):!0}};Kl.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function Rb(e,t,n){if(typeof e!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const a=i[s],c=t[a];if(c){const d=e[a],f=d===void 0||c(d,a,e);if(f!==!0)throw new xe("option "+a+" must be "+f,xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xe("Unknown option "+a,xe.ERR_BAD_OPTION)}}const Qo={assertOptions:Rb,validators:Kl},mn=Qo.validators;let rs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ep,response:new ep}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=cs(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:a}=n;i!==void 0&&Qo.assertOptions(i,{silentJSONParsing:mn.transitional(mn.boolean),forcedJSONParsing:mn.transitional(mn.boolean),clarifyTimeoutError:mn.transitional(mn.boolean)},!1),s!=null&&(D.isFunction(s)?n.paramsSerializer={serialize:s}:Qo.assertOptions(s,{encode:mn.function,serialize:mn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Qo.assertOptions(n,{baseUrl:mn.spelling("baseURL"),withXsrfToken:mn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=a&&D.merge(a.common,a[n.method]);a&&D.forEach(["delete","get","head","post","put","patch","common"],_=>{delete a[_]}),n.headers=Et.concat(c,a);const d=[];let f=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(f=f&&y.synchronous,d.unshift(y.fulfilled,y.rejected))});const p=[];this.interceptors.response.forEach(function(y){p.push(y.fulfilled,y.rejected)});let g,v=0,C;if(!f){const _=[dp.bind(this),void 0];for(_.unshift(...d),_.push(...p),C=_.length,g=Promise.resolve(n);v<C;)g=g.then(_[v++],_[v++]);return g}C=d.length;let S=n;for(;v<C;){const _=d[v++],y=d[v++];try{S=_(S)}catch(k){y.call(this,k);break}}try{g=dp.call(this,S)}catch(_){return Promise.reject(_)}for(v=0,C=p.length;v<C;)g=g.then(p[v++],p[v++]);return g}getUri(t){t=cs(this.defaults,t);const n=a0(t.baseURL,t.url,t.allowAbsoluteUrls);return t0(n,t.params,t.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(t){rs.prototype[t]=function(n,i){return this.request(cs(i||{},{method:t,url:n,data:(i||{}).data}))}});D.forEach(["post","put","patch"],function(t){function n(i){return function(a,c,d){return this.request(cs(d||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}rs.prototype[t]=n(),rs.prototype[t+"Form"]=n(!0)});let Ob=class d0{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const c=new Promise(d=>{i.subscribe(d),a=d}).then(s);return c.cancel=function(){i.unsubscribe(a)},c},t(function(a,c,d){i.reason||(i.reason=new gi(a,c,d),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new d0(function(s){t=s}),cancel:t}}};function Db(e){return function(n){return e.apply(null,n)}}function zb(e){return D.isObject(e)&&e.isAxiosError===!0}const $u={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries($u).forEach(([e,t])=>{$u[t]=e});function h0(e){const t=new rs(e),n=Zg(rs.prototype.request,t);return D.extend(n,rs.prototype,t,{allOwnKeys:!0}),D.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return h0(cs(e,s))},n}const He=h0(Ba);He.Axios=rs;He.CanceledError=gi;He.CancelToken=Ob;He.isCancel=s0;He.VERSION=u0;He.toFormData=ql;He.AxiosError=xe;He.Cancel=He.CanceledError;He.all=function(t){return Promise.all(t)};He.spread=Db;He.isAxiosError=zb;He.mergeConfig=cs;He.AxiosHeaders=Et;He.formToJSON=e=>r0(D.isHTMLForm(e)?new FormData(e):e);He.getAdapter=c0.getAdapter;He.HttpStatusCode=$u;He.default=He;const{Axios:SL,AxiosError:EL,CanceledError:PL,isCancel:TL,CancelToken:ML,VERSION:IL,all:RL,Cancel:OL,isAxiosError:DL,spread:zL,toFormData:AL,AxiosHeaders:BL,HttpStatusCode:FL,formToJSON:UL,getAdapter:HL,mergeConfig:ZL}=He,Ab={apiBaseUrl:"http://localhost:3000"},Y=He.create({baseURL:Ab.apiBaseUrl});Y.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token"),n=localStorage.getItem("auth_token_expires_at");if(n&&Number(n)<=Date.now()){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token_expires_at");try{window.location.href="/login"}catch{}throw new He.Cancel("Token expired")}return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));Y.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&console.warn("Sesin expirada o invlida"),Promise.reject(e)});class Bb{async login(t,n){const i=await Y.post("/login",{userName:t,password:n}),{token:s,user:a}=i.data,c=typeof s=="string"?s:s.accessToken,d=typeof s=="string"?void 0:s.expiresIn;if(c&&localStorage.setItem("auth_token",c),localStorage.setItem("auth_user",JSON.stringify(a)),d){const f=Date.now()+d*1e3;localStorage.setItem("auth_token_expires_at",String(f))}return{user:a}}async logout(){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token_expires_at")}async getMe(){const t=localStorage.getItem("auth_user");if(!t)throw new Error("No hay sesin activa");return JSON.parse(t)}}class Fb{constructor(){ar(this,"basePath","/users")}async getAll(){return(await Y.get(this.basePath)).data}async getById(t){return(await Y.get(`${this.basePath}/${t}`)).data}async create(t){return(await Y.post(this.basePath,t)).data}async update(t,n){const i={...n};return i.username!==void 0&&(i.userName=i.username,delete i.username),(await Y.patch(`${this.basePath}/${t}`,i)).data}async updateState(t,n,i){await Y.patch(`${this.basePath}/${t}/state`,{state:n,user_id:i})}async resetPassword(t){await Y.post(`${this.basePath}/${t}/reset-password`)}}class Ub{async getAll(){return(await Y.get("/categories")).data}async getById(t){return(await Y.get(`/categories/${t}`)).data}async create(t){return(await Y.post("/categories",t)).data}async update(t,n){return(await Y.patch(`/categories/${t}`,n)).data}async updateState(t,n){await Y.patch(`/categories/${t}/state`,{user_id:n})}async delete(t){await Y.delete(`/categories/${t}`)}}class Hb{async getAll(t){const n=new URLSearchParams;t!=null&&t.categoryId&&n.append("categoryId",String(t.categoryId)),t!=null&&t.brandId&&n.append("brandId",String(t.brandId)),(t==null?void 0:t.state)!==void 0&&n.append("state",String(t.state)),t!=null&&t.page&&n.append("page",String(t.page)),t!=null&&t.limit&&n.append("limit",String(t.limit));const i=n.toString(),s=i?`/products?${i}`:"/products";return(await Y.get(s)).data}async getById(t){return(await Y.get(`/products/${t}`)).data}async create(t){if(t.imageFile){const i=fp(t);return(await Y.post("/products",i,{headers:{"Content-Type":"multipart/form-data"}})).data}return(await Y.post("/products",t)).data}async update(t,n){if(n.imageFile){const s=fp(n);return(await Y.patch(`/products/${t}`,s,{headers:{"Content-Type":"multipart/form-data"}})).data}return(await Y.patch(`/products/${t}`,n)).data}async updateState(t,n){await Y.patch(`/products/${t}/state`,{user_id:n})}async delete(t){await Y.delete(`/products/${t}`)}}function fp(e){const t=new FormData;return e.name&&t.append("name",e.name),e.categoryId!==void 0&&t.append("categoryId",String(e.categoryId)),e.brandId!==void 0&&t.append("brandId",String(e.brandId)),e.userId!==void 0&&t.append("userId",String(e.userId)),e.barcode!==void 0&&t.append("barcode",e.barcode===null?"":e.barcode),e.internalCode!==void 0&&t.append("internalCode",e.internalCode===null?"":e.internalCode),e.presentationId!==void 0&&t.append("presentationId",e.presentationId===null?"":String(e.presentationId)),e.colorId!==void 0&&t.append("colorId",e.colorId===null?"":String(e.colorId)),e.salePrice&&t.append("salePrice",JSON.stringify(e.salePrice)),e.imageFile&&t.append("image",e.imageFile),t}class Zb{async getAll(){return(await Y.get("/suppliers")).data}async getById(t){return(await Y.get(`/suppliers/${t}`)).data}async create(t){return(await Y.post("/suppliers",{...t,user_id:t.userId})).data.supplier}async update(t,n){return(await Y.put(`/suppliers/${t}`,{...n,user_id:n.userId})).data.supplier}async updateState(t,n,i){await Y.patch(`/suppliers/${t}/state`,{state:n,user_id:i})}async delete(t){await Y.delete(`/suppliers/${t}`)}}class Wb{async getAll(){return(await Y.get("/product-suppliers")).data}async getById(t){return(await Y.get(`/product-suppliers/${t}`)).data}async create(t){return(await Y.post("/product-suppliers",t)).data.productSupplier}async update(t,n){return(await Y.put(`/product-suppliers/${t}`,n)).data.productSupplier}async delete(t){await Y.delete(`/product-suppliers/${t}`)}}class Vb{constructor(){ar(this,"basePath","/branches")}async getAll(){return(await Y.get(this.basePath)).data}async getById(t){return(await Y.get(`${this.basePath}/${t}`)).data}async create(t){return(await Y.post(this.basePath,t)).data}async update(t,n){return(await Y.put(`${this.basePath}/${t}`,n)).data}async updateState(t,n){return await Y.patch(`${this.basePath}/${t}/state`,{state:n}),this.getById(t)}}class $b{async getAll(){return(await Y.get("/countries")).data}}class Gb{async getAll(){return(await Y.get("/brands")).data}async getById(t){return(await Y.get(`/brands/${t}`)).data}async create(t){return(await Y.post("/brands",t)).data}async update(t,n){return(await Y.patch(`/brands/${t}`,n)).data}async updateState(t,n){await Y.patch(`/brands/${t}/state`,{user_id:n})}}class qb{async getByBranch(t){return(await Y.get(`/branches/${t}/products?limit=100`)).data.data.map(i=>({productId:i.id,branchId:i.branch.branchId,hasStock:i.branch.hasStock,stockQty:i.branch.stockQty,productName:i.name,productBarcode:i.barcode,productSalePrice:i.salePrice}))}async getByBranchPaginated(t,n){const i=new URLSearchParams;n!=null&&n.search&&i.append("search",n.search),n!=null&&n.page&&i.append("page",String(n.page)),n!=null&&n.limit&&i.append("limit",String(n.limit)),(n==null?void 0:n.onlyAvailable)!==void 0&&i.append("onlyAvailable",String(n.onlyAvailable)),n!=null&&n.categoryId&&i.append("categoryId",String(n.categoryId)),n!=null&&n.brandId&&i.append("brandId",String(n.brandId));const s=i.toString(),a=s?`/branches/${t}/products?${s}`:`/branches/${t}/products`;return(await Y.get(a)).data}async setStock(t,n,i){return(await Y.put(`/products/${t}/branches/${n}/stock`,{has_stock:i.hasStock,stock_qty:i.stockQty})).data}}class Kb{async getAll(){return(await Y.get("/presentations")).data}async getById(t){return(await Y.get(`/presentations/${t}`)).data}async create(t){return(await Y.post("/presentations",t)).data}async update(t,n){return(await Y.patch(`/presentations/${t}`,n)).data}async updateState(t,n){await Y.patch(`/presentations/${t}/state`,{user_id:n})}async delete(t){await Y.delete(`/presentations/${t}`)}}class Qb{async getAll(){return(await Y.get("/colors")).data}async getById(t){return(await Y.get(`/colors/${t}`)).data}async create(t){return(await Y.post("/colors",t)).data}async update(t,n){return(await Y.patch(`/colors/${t}`,n)).data}async updateState(t,n){await Y.patch(`/colors/${t}/state`,{user_id:n})}async delete(t){await Y.delete(`/colors/${t}`)}}class Yb{async getAll(){return(await Y.get("/clients")).data}async getById(t){return(await Y.get(`/clients/${t}`)).data}async create(t){if(t.imageFile){const s=this.createFormData(t);return(await Y.post("/clients",s,{headers:{"Content-Type":"multipart/form-data"}})).data}const n=this.createJsonPayload(t);return(await Y.post("/clients",n)).data}async update(t,n){if(n.imageFile){const a=this.createFormData(n);return(await Y.patch(`/clients/${t}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}const i=this.createJsonPayload(n);return(await Y.patch(`/clients/${t}`,i)).data}async updateArea(t,n){return(await Y.patch(`/clients/${t}/area`,n)).data}async softDelete(t){await Y.delete(`/clients/${t}`)}createFormData(t){const n=new FormData;return t.fullName&&n.append("fullName",t.fullName),t.nitCi&&n.append("nitCi",t.nitCi),t.businessName&&n.append("businessName",t.businessName),t.phone&&n.append("phone",t.phone),t.businessType&&n.append("businessType",t.businessType),t.clientType&&n.append("clientType",t.clientType),t.position&&n.append("position",JSON.stringify(t.position)),t.areaId!==void 0&&n.append("areaId",t.areaId===null?"":String(t.areaId)),t.address&&n.append("address",t.address),t.imageFile&&n.append("image",t.imageFile),n}createJsonPayload(t){return{fullName:t.fullName,nitCi:t.nitCi,businessName:t.businessName,phone:t.phone,businessType:t.businessType,clientType:t.clientType,position:t.position,areaId:t.areaId,address:t.address}}}class f0{async getAll(t=1,n=100){const i=await Y.get("/areas",{params:{page:t,size:n}});return Array.isArray(i.data)?{data:i.data,total:i.data.length,page:1,size:i.data.length}:i.data}async getById(t){return(await Y.get(`/areas/${t}`)).data}async create(t,n){return(await Y.post("/areas",{name:t,area:n})).data}async update(t,n){return(await Y.patch(`/areas/${t}`,n)).data}async delete(t){await Y.delete(`/areas/${t}`)}}const Xb=new Bb,Jb=new Fb,e1=new Ub,t1=new Hb,n1=new Zb,r1=new Wb,s1=new Vb,i1=new $b,a1=new Yb,o1=new f0,l1=new Gb,c1=new qb,u1=new Kb,d1=new Qb,oe={auth:new q_(Xb),users:new K_(Jb),categories:new Q_(e1),products:new Y_(t1),suppliers:new X_(n1),productSuppliers:new J_(r1),branches:new ew(s1),countries:new tw(i1),clients:new aw(a1),areas:new lw(o1),brands:new nw(l1),productBranches:new rw(c1),presentations:new sw(u1),colors:new iw(d1)},p0=x.createContext(void 0),h1=({children:e})=>{const[t,n]=x.useState(null),[i,s]=x.useState(null),[a,c]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const S=await oe.auth.getCurrentUser();n(S)}catch{n(null)}finally{c(!1)}})()},[]);const d=x.useCallback(async(C,S)=>{c(!0),s(null);try{const _=await oe.auth.login(C,S);return _.success&&_.user?(n(_.user),!0):(s(_.error||"Error al iniciar sesin"),n(null),!1)}catch(_){return s((_==null?void 0:_.message)||"Error al iniciar sesin"),n(null),!1}finally{c(!1)}},[]),f=x.useCallback(async()=>{await oe.auth.logout(),n(null),s(null)},[]),p=x.useCallback(async()=>{const C=await oe.auth.getCurrentUser();return n(C),C},[]),g=!!t,v=x.useMemo(()=>({isLoading:a,isAuthenticated:g,user:t,error:i,login:d,logout:f,refreshProfile:p}),[a,g,t,i,d,f,p]);return l.jsx(p0.Provider,{value:v,children:e})},qn=()=>{const e=x.useContext(p0);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},f1=()=>{const{isAuthenticated:e,isLoading:t}=qn();return t?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsxs("svg",{className:"animate-spin h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e?l.jsx(Ag,{}):l.jsx(Fu,{to:"/login",replace:!0})},p1={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"},m1={success:l.jsx("svg",{className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:l.jsx("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),warning:l.jsx("svg",{className:"h-5 w-5 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),info:l.jsx("svg",{className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})},g1=({toast:e,onDismiss:t})=>{const[n,i]=x.useState(!1);return x.useEffect(()=>{requestAnimationFrame(()=>i(!0));const s=e.duration??4e3,a=setTimeout(()=>{i(!1),setTimeout(()=>t(e.id),300)},s);return()=>clearTimeout(a)},[e,t]),l.jsxs("div",{className:`
        flex items-start gap-3 rounded-lg border px-4 py-3 shadow-lg
        transition-all duration-300 ease-out
        ${p1[e.type]}
        ${n?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
      `,children:[l.jsx("div",{className:"flex-shrink-0",children:m1[e.type]}),l.jsx("p",{className:"flex-1 text-sm font-medium",children:e.message}),l.jsx("button",{onClick:()=>{i(!1),setTimeout(()=>t(e.id),300)},className:"flex-shrink-0 rounded p-1 hover:bg-black/5 transition-colors",children:l.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},xi=({toasts:e,onDismiss:t})=>e.length===0?null:l.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 max-w-sm",children:e.map(n=>l.jsx(g1,{toast:n,onDismiss:t},n.id))});function Kn(){const[e,t]=x.useState([]),n=x.useCallback((f,p,g)=>{const v=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;t(C=>[...C,{id:v,type:f,message:p,duration:g}])},[]),i=x.useCallback(f=>{t(p=>p.filter(g=>g.id!==f))},[]),s=x.useCallback((f,p)=>n("success",f,p),[n]),a=x.useCallback((f,p)=>n("error",f,p),[n]),c=x.useCallback((f,p)=>n("warning",f,p),[n]),d=x.useCallback((f,p)=>n("info",f,p),[n]);return x.useMemo(()=>({toasts:e,dismissToast:i,success:s,error:a,warning:c,info:d}),[e,i,s,a,c,d])}const x1=({user:e,onViewProfile:t,onChangePassword:n,onLogout:i})=>{const[s,a]=x.useState(!1),c=x.useRef(null),d=Pr(),f=Kn();x.useEffect(()=>{const C=S=>{c.current&&S.target instanceof Node&&(c.current.contains(S.target)||a(!1))};return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[]);const p=()=>{if(a(!1),t)return t();d("/profile")},g=()=>{if(a(!1),n)return n();d("/change-password")},v=async()=>{a(!1);try{await i()}catch{f.error("Error cerrando sesin")}};return l.jsxs("div",{ref:c,className:"relative",children:[l.jsx("button",{onClick:()=>a(C=>!C),className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-700 font-bold border border-brand-200 focus:outline-none","aria-haspopup":!0,"aria-expanded":s,children:e!=null&&e.names?e.names.charAt(0):"S"}),s&&l.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-xl bg-white border border-white/10 shadow-lg z-50",children:l.jsxs("div",{className:"py-2",children:[l.jsx("button",{onClick:p,className:"w-full text-left px-4 py-2 text-sm hover:bg-lead-100",children:" Ver mis datos"}),l.jsx("button",{onClick:g,className:"w-full text-left px-4 py-2 text-sm hover:bg-lead-100",children:" Cambiar contrasea"}),l.jsx("div",{className:"border-t border-lead-200 my-1"}),l.jsx("button",{onClick:v,className:"w-full text-left px-4 py-2 text-sm hover:bg-lead-100 text-rose-600",children:" Cerrar Sesin"})]})})]})},v1=({userId:e,onClose:t})=>{const[n,i]=x.useState(""),[s,a]=x.useState(""),[c,d]=x.useState(!1),f=Kn(),p=async g=>{if(g.preventDefault(),!n||n!==s)return f.error("Las contraseas no coinciden");d(!0);try{await Y.patch(`/users/${e}/password`,{password:n}),f.success("Contrasea actualizada"),t()}catch(v){f.error((v==null?void 0:v.message)||"Error actualizando contrasea")}finally{d(!1)}};return l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Nueva contrasea"}),l.jsx("input",{value:n,onChange:g=>i(g.target.value),type:"password",className:"mt-1 block w-full rounded-lg border px-3 py-2"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium",children:"Confirmar contrasea"}),l.jsx("input",{value:s,onChange:g=>a(g.target.value),type:"password",className:"mt-1 block w-full rounded-lg border px-3 py-2"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded border",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 rounded bg-accent-500 text-white",children:c?"Guardando...":"Guardar"})]})]})},y1=({children:e})=>{var v,C;const{user:t,logout:n}=qn(),i=Gn(),s=Pr(),[a,c]=x.useState(!1),[d,f]=x.useState(!1);Kn();const p=[{label:"Clientes",to:"/clients",icon:""},{label:"reas",to:"/areas",icon:""},{label:"Productos",to:"/products",icon:""},{label:"Inventario",to:"/inventory",icon:""},{label:"Proveedores",to:"/suppliers",icon:""},{label:"Usuarios",to:"/users",icon:""}],g=async()=>{await n(),s("/login")};return l.jsxs("div",{className:"flex min-h-screen bg-lead-200 text-lead-800 font-sans",children:[l.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 flex flex-col bg-gradient-to-b from-brand-900 via-brand-800 to-brand-900 text-white shadow-2xl transition-all duration-300 ease-in-out ${a?"w-64":"w-20"}`,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[l.jsxs("div",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`cursor-pointer flex items-center gap-3 border-b border-white/10 px-4 py-8 transition-all duration-300 ${a?"justify-start":"justify-center"}`,children:[l.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-accent-500 to-accent-600 text-xl font-bold text-white shadow-lg shadow-accent-500/20 ring-1 ring-white/10",children:t!=null&&t.names?t.names.charAt(0):"A"}),l.jsxs("div",{className:`leading-tight overflow-hidden transition-all duration-300 ${a?"opacity-100 w-auto":"opacity-0 w-0"}`,children:[l.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.2em] text-brand-200 font-bold whitespace-nowrap",children:"Administrador"}),l.jsx("p",{className:"text-base font-bold text-white truncate max-w-[140px]",children:t?`${((v=t.names)==null?void 0:v.split(" ")[0])||t.names} ${t.lastName||""}`.trim():"Usuario"})]})]}),l.jsx("nav",{className:"flex-1 space-y-2 px-3 py-8 text-sm font-medium overflow-y-auto overflow-x-hidden",children:p.map(S=>l.jsx("div",{children:S.subItems?l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:`flex items-center rounded-xl px-3 py-3.5 text-xs font-bold uppercase tracking-wider text-lead-200 transition-all duration-200 ${a?"justify-start":"justify-center"}`,children:[!a&&l.jsx("span",{className:"text-lg",title:S.label,children:S.icon}),l.jsx("span",{className:`transition-all duration-300 ${a?"opacity-100":"opacity-0 hidden"}`,children:S.label})]}),S.subItems.map(_=>l.jsxs(qf,{to:_.to,className:({isActive:y})=>`flex items-center rounded-xl px-3 py-3 text-xs font-bold uppercase tracking-wider transition-all duration-200 ${y||i.pathname.startsWith(_.to)?"bg-accent-500 text-white shadow-lg shadow-accent-500/25 translate-x-1":"text-lead-200 hover:bg-white/10 hover:text-white hover:translate-x-1"} ${a?"pl-8":"justify-center"}`,children:[l.jsx("span",{className:`truncate ${a?"opacity-100":"opacity-0 w-0 hidden"}`,children:_.label}),!a&&l.jsx("span",{className:"text-xs",title:_.label,children:""})]},_.to))]}):S.disabled?l.jsxs("div",{className:`flex items-center gap-3 rounded-xl px-3 py-3.5 text-xs font-bold uppercase tracking-wider text-white/30 cursor-not-allowed ${a?"justify-start":"justify-center"}`,children:[!a&&l.jsx("span",{className:"text-lg",title:S.label,children:""}),l.jsx("span",{className:`truncate ${a?"opacity-100":"opacity-0 w-0 hidden"}`,children:S.label})]}):l.jsxs(qf,{to:S.to,className:({isActive:_})=>`flex items-center gap-3 rounded-xl px-3 py-3.5 text-xs font-bold uppercase tracking-wider transition-all duration-200 ${_||i.pathname.startsWith(S.to)?"bg-accent-500 text-white shadow-lg shadow-accent-500/25 translate-x-1":"text-lead-200 hover:bg-white/10 hover:text-white hover:translate-x-1"} ${a?"justify-start":"justify-center"}`,children:[l.jsx("span",{className:"text-lg shrink-0",title:S.label,children:S.icon}),l.jsx("span",{className:`truncate ${a?"opacity-100":"opacity-0 w-0 hidden"}`,children:S.label})]})},S.label))}),l.jsx("div",{className:`border-t border-white/10 px-4 py-6 transition-all duration-300 ${a?"opacity-100":"opacity-0"}`,children:l.jsx("p",{className:"text-[0.6rem] uppercase tracking-[0.3em] text-brand-400/60 text-center whitespace-nowrap",children:"SICME ELECTRIK v1.0"})})]}),l.jsxs("div",{className:`flex flex-1 flex-col relative z-10 transition-all duration-300 ${a?"ml-64":"ml-20"}`,children:[l.jsxs("header",{className:"sticky top-0 z-40 flex items-center justify-between bg-lead-100 px-6 py-4 shadow-sm lg:px-10 border-b border-lead-300",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-brand-600 font-bold mb-0.5",children:"Panel General"}),l.jsx("h1",{className:"text-xl font-bold text-lead-900",children:(t==null?void 0:t.role)==="super_admin"?"Super Administrador":"Administracin"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[t?l.jsxs("div",{className:"leading-tight text-right hidden sm:block",children:[l.jsx("p",{className:"text-sm font-bold text-lead-700",children:t.names}),l.jsx("p",{className:"text-[0.65rem] uppercase tracking-wider text-lead-400 font-semibold",children:(C=t.role)==null?void 0:C.replace(/_/g," ")})]}):null,l.jsx("div",{className:"hidden md:block",children:l.jsx(Cl.Suspense,{fallback:l.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-700 font-bold border border-brand-200",children:t!=null&&t.names?t.names.charAt(0):"S"}),children:l.jsx(x1,{user:t??null,onViewProfile:()=>s("/profile"),onChangePassword:()=>f(!0),onLogout:g})})}),l.jsx("div",{className:"block md:hidden",children:l.jsx("button",{onClick:g,className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-700 font-bold border border-brand-200",children:t!=null&&t.names?t.names.charAt(0):"S"})})]})]}),d&&t&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm",children:l.jsxs("div",{className:"mx-4 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsx("div",{className:"bg-brand-600 px-6 py-4",children:l.jsx("h2",{className:"text-lg font-semibold text-white",children:"Cambiar contrasea"})}),l.jsx("div",{className:"px-6 py-6",children:l.jsx(v1,{userId:t.id,onClose:()=>f(!1)})})]})}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-8 bg-lead-200",children:e})]})]})},_1=()=>{const e=Pr(),t=Gn(),{login:n,isAuthenticated:i,isLoading:s,error:a,user:c}=qn(),[d,f]=x.useState(""),[p,g]=x.useState(""),[v,C]=x.useState(!1),[S,_]=x.useState(null);x.useEffect(()=>{var k;if(i&&c){const w=(c.role==="admin","/dashboard"),b=((k=t.state)==null?void 0:k.from)||w;e(b,{replace:!0})}},[i,c,t.state,e]);const y=async k=>{k.preventDefault(),C(!0),_(null);try{await n(d.trim(),p)||_("Credenciales invlidas")}catch(w){const b=w instanceof Error?w.message:"Credenciales invlidas";_(b)}finally{C(!1)}};return s&&!v&&!i?l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-brand-900",children:l.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-white/20 border-t-accent-400"})}):l.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-gradient-to-br from-brand-600 via-brand-800 to-brand-900 px-6 py-16 text-white sm:px-10",children:[l.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 20% 20%, rgba(255,255,255,0.1), transparent 60%), radial-gradient(circle at 80% 10%, rgba(255,255,255,0.08), transparent 55%)"}}),l.jsx("div",{className:"absolute -bottom-32 -left-32 h-72 w-72 rounded-full bg-accent-500/30 blur-3xl"}),l.jsx("div",{className:"absolute -top-40 -right-28 h-96 w-96 rounded-full bg-brand-400/20 blur-3xl"}),l.jsxs("div",{className:"relative w-full max-w-sm space-y-10",children:[l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsx("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-xl border border-white/20 bg-white/10 backdrop-blur-sm text-white",children:l.jsx("span",{className:"text-xl font-semibold",children:"S"})}),l.jsx("div",{className:"text-lg font-semibold tracking-widest text-brand-100",children:"SICME"}),l.jsx("div",{className:"text-2xl font-bold tracking-[0.3em] text-accent-400",children:"ELECTRIK"})]}),l.jsxs("div",{className:"space-y-6 rounded-[2rem] bg-brand-900/40 px-8 py-10 shadow-2xl border border-white/10 backdrop-blur-xl",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wide text-white",children:"Iniciar sesin"}),l.jsx("p",{className:"text-sm text-brand-100/80 mt-1",children:"Accede con tu usuario y contrasea."})]}),(S||a)&&l.jsx("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm font-medium text-red-200",children:S||a}),l.jsxs("form",{className:"space-y-5",onSubmit:y,children:[l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-brand-200",htmlFor:"username",children:"Usuario"}),l.jsx("input",{id:"username",className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder-white/30 focus:border-accent-400 focus:bg-white/10 focus:outline-none focus:ring-1 focus:ring-accent-400 transition-all",value:d,onChange:k=>f(k.target.value),autoComplete:"username",placeholder:"tu.usuario",required:!0})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-brand-200",htmlFor:"password",children:"Contrasea"}),l.jsx("input",{id:"password",type:"password",className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder-white/30 focus:border-accent-400 focus:bg-white/10 focus:outline-none focus:ring-1 focus:ring-accent-400 transition-all",value:p,onChange:k=>g(k.target.value),autoComplete:"current-password",placeholder:"",required:!0})]}),l.jsx("button",{className:"w-full rounded-xl bg-accent-500 py-3.5 text-sm font-bold uppercase tracking-wide text-white shadow-lg shadow-accent-500/20 hover:bg-accent-400 hover:shadow-accent-500/40 focus:outline-none focus:ring-2 focus:ring-accent-400 focus:ring-offset-2 focus:ring-offset-brand-900 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform active:scale-[0.98]",type:"submit",disabled:v,children:v?"Validando...":"Ingresar"})]}),l.jsx("p",{className:"text-center text-[0.7rem] text-white/50",children:"Sistema de Gestin de Inventario"})]})]})]})},w1=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),[c,d]=x.useState(1),[f,p]=x.useState(!0),g=x.useCallback(async j=>{i(!0),a(null);try{const E=await oe.products.getAll({...j,page:1,limit:10});t(E.data),d(1),p(E.page<E.totalPages)}catch(E){a((E==null?void 0:E.message)||"Error al cargar productos")}finally{i(!1)}},[]),v=x.useCallback(async j=>{if(n||!f)return;i(!0),a(null);const E=c+1;try{const T=await oe.products.getAll({...j,page:E,limit:10});t(I=>[...I,...T.data]),d(E),p(E<T.totalPages)}catch(T){a((T==null?void 0:T.message)||"Error al cargar ms productos")}finally{i(!1)}},[c,f,n]),C=x.useCallback(()=>{t([]),d(1),p(!0)},[]),S=x.useCallback(async j=>{a(null);try{return await oe.products.getById(j)}catch(E){return a((E==null?void 0:E.message)||"Error al cargar producto"),null}},[]),_=x.useCallback(async j=>{i(!0),a(null);try{const E=await oe.products.create(j);return t(T=>[E,...T]),E}catch(E){return a((E==null?void 0:E.message)||"Error al crear producto"),null}finally{i(!1)}},[]),y=x.useCallback(async(j,E)=>{i(!0),a(null);try{const T=await oe.products.update(j,E);return t(I=>I.map(z=>z.id===j?T:z)),T}catch(T){return a((T==null?void 0:T.message)||"Error al actualizar producto"),null}finally{i(!1)}},[]),k=x.useCallback(async(j,E)=>{i(!0),a(null);try{return await oe.products.updateState(j,E),t(T=>{const I=T.find(z=>z.id===j);return I?I.state?T.filter(z=>z.id!==j):T.map(z=>z.id===j?{...z,state:!0}:z):T}),!0}catch(T){return a((T==null?void 0:T.message)||"Error al actualizar estado"),!1}},[]),w=x.useCallback(async j=>{i(!0),a(null);try{return await oe.products.delete(j),t(E=>E.filter(T=>T.id!==j)),!0}catch(E){return a((E==null?void 0:E.message)||"Error al eliminar producto"),!1}finally{i(!1)}},[]),b=x.useCallback(()=>{a(null)},[]);return{products:e,isLoading:n,error:s,page:c,hasMore:f,fetchProducts:g,loadMoreProducts:v,resetProducts:C,fetchProductById:S,createProduct:_,updateProduct:y,updateProductState:k,deleteProduct:w,clearError:b}},m0=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>{const _=new Map;return e.forEach(y=>_.set(y.id,y.name)),_},[e]),d=x.useCallback(()=>{a(null)},[]),f=x.useCallback(async()=>{i(!0),a(null);try{const _=await oe.categories.getAll();t(_)}catch(_){a((_==null?void 0:_.message)||"Error al cargar categoras")}finally{i(!1)}},[]),p=x.useCallback(async _=>{a(null);try{return await oe.categories.getById(_)}catch(y){return a((y==null?void 0:y.message)||"Error al cargar categora"),null}},[]),g=x.useCallback(async _=>{i(!0),a(null);try{const y=await oe.categories.create(_);return t(k=>[...k,y]),y}catch(y){return a((y==null?void 0:y.message)||"Error al crear categora"),null}finally{i(!1)}},[]),v=x.useCallback(async(_,y)=>{i(!0),a(null);try{const k=await oe.categories.update(_,y);return t(w=>w.map(b=>b.id===_?k:b)),k}catch(k){return a((k==null?void 0:k.message)||"Error al actualizar categora"),null}finally{i(!1)}},[]),C=x.useCallback(async(_,y)=>{i(!0),a(null);try{return await oe.categories.updateState(_,y),t(k=>{const w=k.find(b=>b.id===_);return w?w.state?k.filter(b=>b.id!==_):k.map(b=>b.id===_?{...b,state:!0}:b):k}),!0}catch(k){return a((k==null?void 0:k.message)||"Error al actualizar estado"),!1}finally{i(!1)}},[]),S=x.useCallback(async _=>{i(!0),a(null);try{return await oe.categories.delete(_),t(y=>y.filter(k=>k.id!==_)),!0}catch(y){return a((y==null?void 0:y.message)||"Error al eliminar categora"),!1}finally{i(!1)}},[]);return{categories:e,categoryMap:c,isLoading:n,error:s,fetchCategories:f,fetchCategoryById:p,createCategory:g,updateCategory:v,updateCategoryState:C,deleteCategory:S,clearError:d}},g0=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=new Map(e.map(S=>[S.id,S.name])),d=x.useCallback(async()=>{i(!0),a(null);try{const S=await oe.brands.getAll();t(S)}catch(S){a((S==null?void 0:S.message)||"Error al cargar marcas")}finally{i(!1)}},[]),f=x.useCallback(async S=>{a(null);try{return await oe.brands.getById(S)}catch(_){return a((_==null?void 0:_.message)||"Error al cargar marca"),null}},[]),p=x.useCallback(async S=>{i(!0),a(null);try{const _=await oe.brands.create(S);return t(y=>[_,...y]),_}catch(_){return a((_==null?void 0:_.message)||"Error al crear marca"),null}finally{i(!1)}},[]),g=x.useCallback(async(S,_)=>{i(!0),a(null);try{const y=await oe.brands.update(S,_);return t(k=>k.map(w=>w.id===S?y:w)),y}catch(y){return a((y==null?void 0:y.message)||"Error al actualizar marca"),null}finally{i(!1)}},[]),v=x.useCallback(async(S,_)=>{i(!0),a(null);try{return await oe.brands.updateState(S,_),t(y=>{const k=y.find(w=>w.id===S);return k?k.state?y.filter(w=>w.id!==S):y.map(w=>w.id===S?{...w,state:!0}:w):y}),!0}catch(y){return a((y==null?void 0:y.message)||"Error al actualizar estado"),!1}finally{i(!1)}},[]),C=x.useCallback(()=>{a(null)},[]);return{brands:e,brandMap:c,isLoading:n,error:s,fetchBrands:d,fetchBrandById:f,createBrand:p,updateBrand:g,updateBrandState:v,clearError:C}},b1=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>{const _=new Map;return e.forEach(y=>_.set(y.id,y.name)),_},[e]),d=x.useCallback(()=>{a(null)},[]),f=x.useCallback(async()=>{i(!0),a(null);try{const _=await oe.presentations.getAll();t(_)}catch(_){a((_==null?void 0:_.message)||"Error al cargar presentaciones")}finally{i(!1)}},[]),p=x.useCallback(async _=>{a(null);try{return await oe.presentations.getById(_)}catch(y){return a((y==null?void 0:y.message)||"Error al cargar presentacin"),null}},[]),g=x.useCallback(async _=>{i(!0),a(null);try{const y=await oe.presentations.create(_);return t(k=>[...k,y]),y}catch(y){return a((y==null?void 0:y.message)||"Error al crear presentacin"),null}finally{i(!1)}},[]),v=x.useCallback(async(_,y)=>{i(!0),a(null);try{const k=await oe.presentations.update(_,y);return t(w=>w.map(b=>b.id===_?k:b)),k}catch(k){return a((k==null?void 0:k.message)||"Error al actualizar presentacin"),null}finally{i(!1)}},[]),C=x.useCallback(async(_,y)=>{i(!0),a(null);try{return await oe.presentations.updateState(_,y),t(k=>{const w=k.find(b=>b.id===_);return w?w.state?k.filter(b=>b.id!==_):k.map(b=>b.id===_?{...b,state:!0}:b):k}),!0}catch(k){return a((k==null?void 0:k.message)||"Error al actualizar estado"),!1}finally{i(!1)}},[]),S=x.useCallback(async _=>{i(!0),a(null);try{return await oe.presentations.delete(_),t(y=>y.filter(k=>k.id!==_)),!0}catch(y){return a((y==null?void 0:y.message)||"Error al eliminar presentacin"),!1}finally{i(!1)}},[]);return{presentations:e,presentationMap:c,isLoading:n,error:s,fetchPresentations:f,fetchPresentationById:p,createPresentation:g,updatePresentation:v,updatePresentationState:C,deletePresentation:S,clearError:d}},L1=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>{const _=new Map;return e.forEach(y=>_.set(y.id,y.name)),_},[e]),d=x.useCallback(()=>{a(null)},[]),f=x.useCallback(async()=>{i(!0),a(null);try{const _=await oe.colors.getAll();t(_)}catch(_){a((_==null?void 0:_.message)||"Error al cargar colores")}finally{i(!1)}},[]),p=x.useCallback(async _=>{a(null);try{return await oe.colors.getById(_)}catch(y){return a((y==null?void 0:y.message)||"Error al cargar color"),null}},[]),g=x.useCallback(async _=>{i(!0),a(null);try{const y=await oe.colors.create(_);return t(k=>[...k,y]),y}catch(y){return a((y==null?void 0:y.message)||"Error al crear color"),null}finally{i(!1)}},[]),v=x.useCallback(async(_,y)=>{i(!0),a(null);try{const k=await oe.colors.update(_,y);return t(w=>w.map(b=>b.id===_?k:b)),k}catch(k){return a((k==null?void 0:k.message)||"Error al actualizar color"),null}finally{i(!1)}},[]),C=x.useCallback(async(_,y)=>{i(!0),a(null);try{return await oe.colors.updateState(_,y),t(k=>{const w=k.find(b=>b.id===_);return w?w.state?k.filter(b=>b.id!==_):k.map(b=>b.id===_?{...b,state:!0}:b):k}),!0}catch(k){return a((k==null?void 0:k.message)||"Error al actualizar estado"),!1}finally{i(!1)}},[]),S=x.useCallback(async _=>{i(!0),a(null);try{return await oe.colors.delete(_),t(y=>y.filter(k=>k.id!==_)),!0}catch(y){return a((y==null?void 0:y.message)||"Error al eliminar color"),!1}finally{i(!1)}},[]);return{colors:e,colorMap:c,isLoading:n,error:s,fetchColors:f,fetchColorById:p,createColor:g,updateColor:v,updateColorState:C,deleteColor:S,clearError:d}},N1=({products:e,categoryMap:t,brandMap:n,onEdit:i,onDeactivate:s,onView:a,busyId:c})=>{const d=e.length===0,f=p=>c!=null&&c===p;return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Categora"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Marca"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Mayorista"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Minorista"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Regular"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:d?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:8,children:"No hay productos para mostrar."})}):e.map(p=>{var g,v,C;return l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:p.id}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("div",{className:"flex items-center gap-3",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-lead-800",children:p.name}),p.presentationName&&l.jsx("p",{className:"text-xs text-lead-500",children:p.presentationName})]})})}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:p.categoryName||t.get(p.categoryId)||""}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:p.brandName||n.get(p.brandId)||""}),l.jsx("td",{className:"px-4 py-3 text-lead-600 text-xs",children:(g=p.salePrice)!=null&&g.mayorista?Number(p.salePrice.mayorista).toFixed(2):""}),l.jsx("td",{className:"px-4 py-3 text-lead-600 text-xs",children:(v=p.salePrice)!=null&&v.minorista?Number(p.salePrice.minorista).toFixed(2):""}),l.jsx("td",{className:"px-4 py-3 text-lead-600 text-xs",children:(C=p.salePrice)!=null&&C.regular?Number(p.salePrice.regular).toFixed(2):""}),l.jsx("td",{className:"px-4 py-3 text-center align-middle",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>a&&a(p),className:"rounded bg-lead-200 px-3 py-1.5 font-medium text-lead-800 transition hover:bg-lead-300 disabled:opacity-50",children:"Ver"}),l.jsx("button",{type:"button",onClick:()=>i(p),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:f(p.id),children:"Editar"}),l.jsx("button",{type:"button",onClick:()=>s(p),className:"rounded px-3 py-1.5 font-medium transition disabled:opacity-50 bg-accent-100 text-accent-700 hover:bg-accent-200",disabled:f(p.id),children:"Eliminar"})]})})]},p.id)})})]})})},k1=({open:e,mode:t,initialData:n,categories:i,brands:s,presentations:a,colors:c,submitting:d,onClose:f,onSubmit:p})=>{const[g,v]=x.useState(""),[C,S]=x.useState(""),[_,y]=x.useState(""),[k,w]=x.useState(0),[b,j]=x.useState(0),[E,T]=x.useState(0),[I,z]=x.useState(0),[A,Q]=x.useState(""),[Z,se]=x.useState(""),[ne,$]=x.useState(""),[q,X]=x.useState({}),[G,ce]=x.useState(null),[R,ie]=x.useState(null);x.useEffect(()=>{var B,pe,Se;e&&(t==="edit"&&n?(v(n.name||""),S(n.barcode||""),y(n.internalCode||""),w(n.presentationId||0),j(n.colorId||0),T(n.categoryId||0),z(n.brandId||0),Q(String(((B=n.salePrice)==null?void 0:B.mayorista)||"")),se(String(((pe=n.salePrice)==null?void 0:pe.minorista)||"")),$(String(((Se=n.salePrice)==null?void 0:Se.regular)||"")),ce(null),ie(null)):(v(""),S(""),y(""),w(0),j(0),T(i.length>0?i[0].id:0),z(s.length>0?s[0].id:0),Q(""),se(""),$(""),ce(null),ie(null)),X({}))},[e,t,n,i,s]);const F=()=>{const B={};return g.trim()||(B.name="El nombre es requerido"),E||(B.categoryId="La categora es requerida"),I||(B.brandId="La marca es requerida"),!A&&!Z&&!ne&&(B.prices="Al menos un precio es requerido"),X(B),Object.keys(B).length===0};function J(B){if(!B)return"";let pe=B.replace(",",".");pe=pe.replace(/[^0-9.]/g,"");const Se=pe.split(".");if(Se.length===1)return Se[0];const Je=Se.shift()||"",et=Se.join("").slice(0,2);return Je+"."+et}const le=B=>pe=>{const Se=J(pe.target.value);B(Se)},we=B=>{if(B.preventDefault(),!F())return;const pe={};A&&(pe.mayorista=Math.round(parseFloat(A)*100)/100),Z&&(pe.minorista=Math.round(parseFloat(Z)*100)/100),ne&&(pe.regular=Math.round(parseFloat(ne)*100)/100),p({name:g.trim(),barcode:C.trim()||null,internalCode:_.trim()||null,presentationId:k||null,colorId:b||null,salePrice:pe,imageFile:G||void 0,categoryId:E,brandId:I})},fe=B=>{var Se;const pe=((Se=B.target.files)==null?void 0:Se[0])||null;if(ce(pe),pe){const Je=URL.createObjectURL(pe);ie(Je)}else ie(null)},ue=a.filter(B=>B.state),K=c.filter(B=>B.state);return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:l.jsxs("div",{className:"mx-4 my-10 w-full max-w-2xl overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[l.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nuevo Producto":"Editar Producto"}),l.jsx("button",{onClick:f,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:d,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("form",{onSubmit:we,className:"space-y-5 px-6 py-6 max-h-[70vh] overflow-y-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre del Producto *"}),l.jsx("input",{type:"text",id:"name",value:g,onChange:B=>v(B.target.value),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${q.name?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Ej: Cable HDMI 2m",disabled:d}),q.name&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.name})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-lead-700",children:"Categora *"}),l.jsxs("select",{id:"categoryId",value:E,onChange:B=>T(Number(B.target.value)),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${q.categoryId?"border-red-500":"border-lead-300 bg-white"}`,disabled:d,children:[l.jsx("option",{value:0,children:"Seleccione..."}),i.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]}),q.categoryId&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.categoryId})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"brandId",className:"block text-sm font-medium text-lead-700",children:"Marca *"}),l.jsxs("select",{id:"brandId",value:I,onChange:B=>z(Number(B.target.value)),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${q.brandId?"border-red-500":"border-lead-300 bg-white"}`,disabled:d,children:[l.jsx("option",{value:0,children:"Seleccione..."}),s.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]}),q.brandId&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.brandId})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"barcode",className:"block text-sm font-medium text-lead-700",children:"Cdigo de Barras"}),l.jsx("input",{type:"text",id:"barcode",value:C,onChange:B=>S(B.target.value),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"Ej: 123456789012",disabled:d})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"internalCode",className:"block text-sm font-medium text-lead-700",children:"Cdigo Interno"}),l.jsx("input",{type:"text",id:"internalCode",value:_,onChange:B=>y(B.target.value),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"Ej: CAB-HDMI-2M",disabled:d})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"presentationId",className:"block text-sm font-medium text-lead-700",children:"Presentacin"}),l.jsxs("select",{id:"presentationId",value:k,onChange:B=>w(Number(B.target.value)),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:d,children:[l.jsx("option",{value:0,children:"Sin presentacin"}),ue.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"colorId",className:"block text-sm font-medium text-lead-700",children:"Color"}),l.jsxs("select",{id:"colorId",value:b,onChange:B=>j(Number(B.target.value)),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:d,children:[l.jsx("option",{value:0,children:"Sin color"}),K.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-lead-700 mb-2",children:"Precios de Venta *"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"priceMayorista",className:"block text-xs text-lead-500",children:"Mayorista (Bs.)"}),l.jsx("input",{type:"text",inputMode:"decimal",id:"priceMayorista",value:A,onChange:le(Q),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0.00",pattern:"^\\d*(\\.\\d{0,2})?$",min:0,disabled:d})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"priceMinorista",className:"block text-xs text-lead-500",children:"Minorista (Bs.)"}),l.jsx("input",{type:"text",inputMode:"decimal",id:"priceMinorista",value:Z,onChange:le(se),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0.00",pattern:"^\\d*(\\.\\d{0,2})?$",min:0,disabled:d})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"priceRegular",className:"block text-xs text-lead-500",children:"Regular (Bs.)"}),l.jsx("input",{type:"text",inputMode:"decimal",id:"priceRegular",value:ne,onChange:le($),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0.00",pattern:"^\\d*(\\.\\d{0,2})?$",min:0,disabled:d})]})]}),q.prices&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:q.prices})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-lead-700",children:"Imagen (archivo)"}),l.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:fe,className:`mt-1 block w-full text-sm text-lead-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-lg file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-brand-50 file:text-brand-700\r
                hover:file:bg-brand-100`,disabled:d}),G&&l.jsxs("p",{className:"mt-1 text-xs text-lead-600",children:["Archivo seleccionado: ",G.name]}),R&&l.jsx("img",{src:R,alt:"preview",className:"mt-2 max-h-40 object-contain"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[l.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:f,disabled:d,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:d,children:d?"Guardando...":"Guardar"})]})]})]})}):null},C1=({product:e,onClose:t})=>{var i,s,a;return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden bg-black/60 backdrop-blur-sm p-4 md:p-0",children:l.jsxs("div",{className:"relative w-full max-w-3xl transform rounded-3xl bg-white shadow-2xl transition-all",children:[l.jsxs("div",{className:"relative h-56 w-full overflow-hidden rounded-t-3xl bg-gray-100",children:[l.jsx("button",{onClick:t,className:"absolute right-4 top-4 z-10 rounded-full bg-black/20 p-2 text-white hover:bg-black/40 transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.pathImage?l.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-100",children:l.jsx("img",{src:`http://localhost:3000${e.pathImage}`,alt:e.name,className:"max-h-full max-w-full object-contain",onError:c=>{c.target.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}})}):l.jsx("div",{className:"flex h-full w-full items-center justify-center bg-brand-100",children:l.jsx("div",{className:"mx-auto w-full max-w-2xl rounded-lg bg-white/80 p-6 text-center",children:l.jsx("div",{className:"text-5xl font-bold text-brand-600",children:e.name.charAt(0)})})})]}),l.jsxs("div",{className:"px-8 pb-8 pt-8",children:[l.jsxs("div",{className:"mb-2 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:e.name}),l.jsx("p",{className:"text-lg text-brand-600 font-medium",children:e.brandName||e.categoryName||""}),l.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[l.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800",children:e.presentationName||"Sin presentacin"}),l.jsx("span",{className:"inline-flex items-center rounded-full bg-purple-100 px-3 py-1 text-xs font-medium text-purple-800",children:e.colorName||"Sin color"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4 rounded-2xl bg-gray-50 p-5",children:[l.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500",children:"Informacin"}),l.jsxs("div",{className:"space-y-3 text-sm text-gray-800",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M12 15h4.01M12 21h4.01M12 18h4.01M12 9h4.01M12 6h4.01M12 3h4.01"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Cdigo de Barras"}),l.jsx("p",{className:"font-medium text-gray-900",children:e.barcode||""})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Cdigo Interno"}),l.jsx("p",{className:"font-medium text-gray-900",children:e.internalCode||""})]})]})]})]}),l.jsxs("div",{className:"space-y-4 rounded-2xl bg-gray-50 p-5",children:[l.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500",children:"Precios"}),l.jsxs("div",{className:"space-y-3 text-sm text-gray-800",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[l.jsxs("div",{className:"rounded-lg bg-white p-2 shadow-sm",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Mayorista"}),l.jsx("p",{className:"font-bold text-brand-600",children:(i=e.salePrice)!=null&&i.mayorista?Number(e.salePrice.mayorista).toFixed(2):""})]}),l.jsxs("div",{className:"rounded-lg bg-white p-2 shadow-sm",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Minorista"}),l.jsx("p",{className:"font-bold text-brand-600",children:(s=e.salePrice)!=null&&s.minorista?Number(e.salePrice.minorista).toFixed(2):""})]}),l.jsxs("div",{className:"rounded-lg bg-white p-2 shadow-sm",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Regular"}),l.jsx("p",{className:"font-bold text-brand-600",children:(a=e.salePrice)!=null&&a.regular?Number(e.salePrice.regular).toFixed(2):""})]})]}),l.jsxs("div",{className:"pt-2",children:[e.createdAt&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Creado: ",new Date(e.createdAt).toLocaleString()]}),e.updatedAt&&l.jsxs("p",{className:"text-xs text-gray-500",children:["ltima actualizacin: ",new Date(e.updatedAt).toLocaleString()]})]})]})]})]})]})]})}):null},j1=({brands:e,onEdit:t,onDelete:n,busyBrandId:i=null})=>{const s=e.length===0,a=c=>i!=null&&i===c;return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:s?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:3,children:"No hay marcas para mostrar."})}):e.map(c=>l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsxs("td",{className:"px-4 py-3 font-medium text-brand-900",children:["#",c.id]}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:c.name}),l.jsx("td",{className:"px-4 py-3 text-center align-middle",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>t(c),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:a(c.id),children:"Editar"}),l.jsx("button",{type:"button",onClick:()=>n(c),className:`rounded px-3 py-1.5 font-medium transition disabled:opacity-50 ${c.state?"bg-accent-100 text-accent-700 hover:bg-accent-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:a(c.id),children:c.state?"Desactivar":"Activar"})]})})]},c.id))})]})})},S1=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,d]=x.useState(""),[f,p]=x.useState("");x.useEffect(()=>{e&&(d(t==="edit"&&n?n.name:""),p(""))},[e,t,n]);const g=v=>{if(v.preventDefault(),!c.trim()){p("El nombre es requerido");return}a({name:c.trim()})};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:l.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[l.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nueva Marca":"Editar Marca"}),l.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("form",{onSubmit:g,className:"space-y-5 px-6 py-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre de la Marca"}),l.jsx("input",{type:"text",id:"name",value:c,onChange:v=>{d(v.target.value),f&&p("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${f?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Ej: Samsung, LG, Sony...",disabled:i}),f&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[l.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},E1=({categories:e,onEdit:t,onDeactivate:n,busyId:i})=>{if(!e.length)return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Descripcin"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-lead-500",children:"No hay categoras registradas."})})})]})});const s=a=>i!=null&&i===a;return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Descripcin"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:e.map(a=>l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:a.id}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:a.name}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:a.description??""}),l.jsx("td",{className:"px-4 py-3 text-center align-middle",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>t(a),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:s(a.id),children:"Editar"}),l.jsx("button",{type:"button",onClick:()=>n(a),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:s(a.id)||!a.state,children:"Eliminar"})]})})]},a.id))})]})})},P1=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,d]=x.useState(""),[f,p]=x.useState(""),[g,v]=x.useState("");x.useEffect(()=>{e&&(t==="edit"&&n?(d(n.name??""),p(n.description??"")):(d(""),p("")),v(""))},[e,t,n]);const C=S=>{if(S.preventDefault(),!c.trim()){v("El nombre es requerido");return}a({name:c.trim(),description:f.trim()||void 0})};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:l.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[l.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nueva Categora":"Editar Categora"}),l.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("form",{onSubmit:C,className:"space-y-5 px-6 py-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre de la Categora"}),l.jsx("input",{type:"text",id:"name",value:c,onChange:S=>{d(S.target.value),g&&v("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Ej: Electrnica, Cables, Audio...",disabled:i}),g&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:g})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-lead-700",children:"Descripcin"}),l.jsx("textarea",{id:"description",value:f,onChange:S=>p(S.target.value),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 resize-none",rows:3,placeholder:"Descripcin de la categora (opcional)",disabled:i})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[l.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},T1=({presentations:e,onEdit:t,onDeactivate:n,busyId:i})=>{if(!e.length)return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-lead-500",children:"No hay presentaciones registradas."})})})]})});const s=a=>i!=null&&i===a;return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:e.map(a=>l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:a.id}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:a.name}),l.jsx("td",{className:"px-4 py-3 text-center align-middle",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>t(a),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:s(a.id),children:"Editar"}),l.jsx("button",{type:"button",onClick:()=>n(a),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:s(a.id)||!a.state,children:"Eliminar"})]})})]},a.id))})]})})},M1=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,d]=x.useState(""),[f,p]=x.useState("");x.useEffect(()=>{e&&(d(t==="edit"&&n?n.name??"":""),p(""))},[e,t,n]);const g=v=>{if(v.preventDefault(),!c.trim()){p("El nombre es requerido");return}a({name:c.trim()})};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:l.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[l.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nueva Presentacin":"Editar Presentacin"}),l.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("form",{onSubmit:g,className:"space-y-5 px-6 py-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre de la Presentacin"}),l.jsx("input",{type:"text",id:"name",value:c,onChange:v=>{d(v.target.value),f&&p("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${f?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Ej: Caja, Unidad, Paquete...",disabled:i}),f&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[l.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},I1=({colors:e,onEdit:t,onDeactivate:n,busyId:i})=>{if(!e.length)return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-lead-500",children:"No hay colores registrados."})})})]})});const s=a=>i!=null&&i===a;return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:e.map(a=>l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:a.id}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:a.name}),l.jsx("td",{className:"px-4 py-3 text-center align-middle",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>t(a),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:s(a.id),children:"Editar"}),l.jsx("button",{type:"button",onClick:()=>n(a),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:s(a.id)||!a.state,children:"Eliminar"})]})})]},a.id))})]})})},R1=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,d]=x.useState(""),[f,p]=x.useState("");x.useEffect(()=>{e&&(d(t==="edit"&&n?n.name??"":""),p(""))},[e,t,n]);const g=v=>{if(v.preventDefault(),!c.trim()){p("El nombre es requerido");return}a({name:c.trim()})};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:l.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[l.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nuevo Color":"Editar Color"}),l.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("form",{onSubmit:g,className:"space-y-5 px-6 py-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre del Color"}),l.jsx("input",{type:"text",id:"name",value:c,onChange:v=>{d(v.target.value),f&&p("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${f?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Ej: Rojo, Azul, Negro...",disabled:i}),f&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[l.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},vn=({open:e=!0,title:t,message:n,description:i,confirmLabel:s="Confirmar",cancelLabel:a="Cancelar",onConfirm:c,onCancel:d,disabled:f=!1})=>{if(!e)return null;const p=n||i;return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm",children:l.jsxs("div",{className:"mx-4 w-full max-w-sm overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsx("div",{className:"bg-brand-600 px-6 py-4",children:l.jsx("h2",{className:"text-lg font-semibold text-white",children:t})}),l.jsxs("div",{className:"px-6 py-6",children:[p?l.jsx("p",{className:"text-sm text-lead-600 leading-relaxed",children:p}):null,l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:d,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors",disabled:f,children:a}),l.jsx("button",{type:"button",onClick:c,className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-60 transition-all",disabled:f,children:s})]})]})]})})},rn=()=>l.jsx("div",{className:"flex items-center justify-center py-10",children:l.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-t-2 border-brand-600"})}),O1=()=>{const{products:e,isLoading:t,error:n,fetchProducts:i,createProduct:s,updateProduct:a,updateProductState:c,clearError:d}=w1(),{categories:f,categoryMap:p,isLoading:g,error:v,fetchCategories:C,createCategory:S,updateCategory:_,updateCategoryState:y,clearError:k}=m0(),{brands:w,brandMap:b,isLoading:j,error:E,fetchBrands:T,createBrand:I,updateBrand:z,updateBrandState:A,clearError:Q}=g0(),{presentations:Z,isLoading:se,error:ne,fetchPresentations:$,createPresentation:q,updatePresentation:X,updatePresentationState:G,clearError:ce}=b1(),{colors:R,isLoading:ie,error:F,fetchColors:J,createColor:le,updateColor:we,updateColorState:fe,clearError:ue}=L1(),K=qn(),B=Kn(),[pe,Se]=x.useState("products"),[Je,vt]=x.useState(""),[et,At]=x.useState("all"),[bn,W]=x.useState(!1),[ke,We]=x.useState("create"),[Ie,yt]=x.useState(null),[Qn,Ln]=x.useState(!1),[Yn,cn]=x.useState(!1),[Tr,Nn]=x.useState(!1),[Qt,kn]=x.useState(null),[hs,fs]=x.useState(null),[ps,Mr]=x.useState(!1),[vi,Ir]=x.useState(null),[Rr,un]=x.useState(!1),[ms,dn]=x.useState("create"),[Or,Xn]=x.useState(null),[Dr,zr]=x.useState(!1),[gs,Ar]=x.useState(!1),[xs,Br]=x.useState(!1),[Cn,te]=x.useState(null),[je,_t]=x.useState(null),[Fr,Pt]=x.useState(!1),[Fa,Ua]=x.useState("create"),[wt,ae]=x.useState(null),[yi,_i]=x.useState(!1),[Ha,vs]=x.useState(!1),[ys,wi]=x.useState(!1),[Yt,_s]=x.useState(null),[Ql,Za]=x.useState(null),[Yl,Ur]=x.useState(!1),[bi,Wa]=x.useState("create"),[Jn,ws]=x.useState(null),[Va,$a]=x.useState(!1),[Xl,Li]=x.useState(!1),[bs,er]=x.useState(!1),[Hr,Ls]=x.useState(null),[Zr,be]=x.useState(null),[Pe,hn]=x.useState(!1),[jn,Sn]=x.useState("create"),[Wr,he]=x.useState(null),[Re,Ns]=x.useState(!1),[ks,at]=x.useState(!1),[Ga,Vr]=x.useState(!1),[Bt,Oe]=x.useState(null),[En,tr]=x.useState(null),nr=x.useCallback(async()=>{await Promise.all([i(),C(),T(),$(),J()])},[i,C,T,$,J]);x.useEffect(()=>{nr()},[nr]),x.useEffect(()=>{n&&(B.error(n),d())},[n,B,d]),x.useEffect(()=>{v&&(B.error(`Error cargando categoras: ${v}`),k())},[v,B,k]),x.useEffect(()=>{E&&(B.error(`Error cargando marcas: ${E}`),Q())},[E,B,Q]),x.useEffect(()=>{ne&&(B.error(`Error cargando presentaciones: ${ne}`),ce())},[ne,B,ce]),x.useEffect(()=>{F&&(B.error(`Error cargando colores: ${F}`),ue())},[F,B,ue]);const Cs=x.useMemo(()=>{const H=Je.trim().toLowerCase();return e.filter(ge=>{const tt=H.length===0||ge.name.toLowerCase().includes(H)||(ge.barcode??"").toLowerCase().includes(H)||(ge.internalCode??"").toLowerCase().includes(H),Oi=et==="all"||ge.categoryId===et;return tt&&Oi})},[e,Je,et]),rr=x.useMemo(()=>{const H=e.length,ge=w.length,tt=f.length,Oi=Z.length,Ut=R.length;return{cards:[{label:"Total Productos",value:H,accent:"from-brand-900 to-brand-600"}],breakdown:[{label:"Marcas",value:ge},{label:"Categoras",value:tt},{label:"Presentaciones",value:Oi},{label:"Colores",value:Ut}]}},[e,w,f,Z,R]),Ni=()=>{We("create"),yt(null),W(!0)},ki=H=>{We("edit"),yt(H),W(!0)},js=H=>{Ir(H),Mr(!0)},Ci=()=>{Ir(null),Mr(!1)},ji=()=>{Qn||(W(!1),yt(null))},Ss=async H=>{if(K.user){Ln(!0);try{ke==="create"?await s({name:H.name,barcode:H.barcode,internalCode:H.internalCode,presentationId:H.presentationId,colorId:H.colorId,salePrice:H.salePrice,imageFile:H.imageFile,categoryId:H.categoryId,brandId:H.brandId,userId:K.user.id})&&(B.success("Producto creado correctamente"),W(!1)):Ie&&await a(Ie.id,{name:H.name,barcode:H.barcode,internalCode:H.internalCode,presentationId:H.presentationId,colorId:H.colorId,salePrice:H.salePrice,imageFile:H.imageFile,categoryId:H.categoryId,brandId:H.brandId})&&(B.success("Producto actualizado correctamente"),W(!1),yt(null))}catch(ge){const tt=ge instanceof Error?ge.message:"No se pudo guardar el producto";B.error(tt)}finally{Ln(!1)}}},qa=H=>{kn(H),cn(!0)},Si=()=>{Tr||(cn(!1),kn(null))},Jl=async()=>{if(!(!Qt||!K.user)){Nn(!0),fs(Qt.id);try{await c(Qt.id,K.user.id)&&B.success(`Producto "${Qt.name}" eliminado correctamente`),cn(!1),kn(null)}catch(H){const ge=H instanceof Error?H.message:"Accin no completada";B.error(ge)}finally{Nn(!1),fs(null)}}},me=()=>{dn("create"),Xn(null),un(!0)},Ft=H=>{dn("edit"),Xn(H),un(!0)},Ce=()=>{Dr||(un(!1),Xn(null))},Ka=async H=>{if(K.user){zr(!0);try{ms==="create"?await I({name:H.name,userId:K.user.id})&&(B.success("Marca creada correctamente"),un(!1)):Or&&await z(Or.id,{name:H.name})&&(B.success("Marca actualizada correctamente"),un(!1),Xn(null))}catch(ge){const tt=ge instanceof Error?ge.message:"No se pudo guardar la marca";B.error(tt)}finally{zr(!1)}}},Ei=H=>{te(H),Ar(!0)},Pi=()=>{xs||(Ar(!1),te(null))},Ti=async()=>{if(!(!Cn||!K.user)){Br(!0),_t(Cn.id);try{await A(Cn.id,K.user.id)&&B.success(`Marca "${Cn.name}" eliminada correctamente`),Ar(!1),te(null)}catch(H){const ge=H instanceof Error?H.message:"Accin no completada";B.error(ge)}finally{Br(!1),_t(null)}}},Pn=()=>{Ua("create"),ae(null),Pt(!0)},Mi=H=>{Ua("edit"),ae(H),Pt(!0)},$r=()=>{yi||(Pt(!1),ae(null))},Ge=async H=>{if(K.user){_i(!0);try{Fa==="create"?await S({name:H.name,description:H.description,userId:K.user.id})&&(B.success("Categora creada correctamente"),Pt(!1)):wt&&await _(wt.id,{name:H.name,description:H.description,user_id:K.user.id})&&(B.success("Categora actualizada correctamente"),Pt(!1),ae(null))}catch(ge){const tt=ge instanceof Error?ge.message:"No se pudo guardar la categora";B.error(tt)}finally{_i(!1)}}},Tn=H=>{_s(H),vs(!0)},Qa=()=>{ys||(vs(!1),_s(null))},Ya=async()=>{if(!(!Yt||!K.user)){wi(!0),Za(Yt.id);try{await y(Yt.id,K.user.id)&&B.success(`Categora "${Yt.name}" eliminada correctamente`),vs(!1),_s(null)}catch(H){const ge=H instanceof Error?H.message:"Accin no completada";B.error(ge)}finally{wi(!1),Za(null)}}},ec=()=>{Wa("create"),ws(null),Ur(!0)},Xa=H=>{Wa("edit"),ws(H),Ur(!0)},Ii=()=>{Va||(Ur(!1),ws(null))},tc=async H=>{if(K.user){$a(!0);try{bi==="create"?await q({name:H.name,userId:K.user.id})&&(B.success("Presentacin creada correctamente"),Ur(!1)):Jn&&await X(Jn.id,{name:H.name,user_id:K.user.id})&&(B.success("Presentacin actualizada correctamente"),Ur(!1),ws(null))}catch(ge){const tt=ge instanceof Error?ge.message:"No se pudo guardar la presentacin";B.error(tt)}finally{$a(!1)}}},Ja=H=>{Ls(H),Li(!0)},_e=()=>{bs||(Li(!1),Ls(null))},nc=async()=>{if(!(!Hr||!K.user)){er(!0),be(Hr.id);try{await G(Hr.id,K.user.id)&&B.success(`Presentacin "${Hr.name}" eliminada correctamente`),Li(!1),Ls(null)}catch(H){const ge=H instanceof Error?H.message:"Accin no completada";B.error(ge)}finally{er(!1),be(null)}}},Tt=()=>{Sn("create"),he(null),hn(!0)},Gr=H=>{Sn("edit"),he(H),hn(!0)},eo=()=>{Re||(hn(!1),he(null))},rc=async H=>{if(K.user){Ns(!0);try{jn==="create"?await le({name:H.name,userId:K.user.id})&&(B.success("Color creado correctamente"),hn(!1)):Wr&&await we(Wr.id,{name:H.name,user_id:K.user.id})&&(B.success("Color actualizado correctamente"),hn(!1),he(null))}catch(ge){const tt=ge instanceof Error?ge.message:"No se pudo guardar el color";B.error(tt)}finally{Ns(!1)}}},Ri=H=>{Oe(H),at(!0)},sc=()=>{Ga||(at(!1),Oe(null))},to=async()=>{if(!(!Bt||!K.user)){Vr(!0),tr(Bt.id);try{await fe(Bt.id,K.user.id)&&B.success(`Color "${Bt.name}" eliminado correctamente`),at(!1),Oe(null)}catch(H){const ge=H instanceof Error?H.message:"Accin no completada";B.error(ge)}finally{Vr(!1),tr(null)}}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),l.jsxs("div",{className:"relative space-y-10 px-6 py-8 lg:px-10 lg:py-12",children:[l.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[l.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),l.jsxs("div",{className:"grid gap-10 px-8 py-10 md:px-12 lg:grid-cols-[2fr,1.2fr]",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Panel de Productos"}),l.jsx("h2",{className:"text-3xl font-semibold leading-tight md:text-4xl",children:"Gestiona tu catlogo de productos, marcas y categoras"}),l.jsxs("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:[l.jsx("div",{className:"flex flex-col gap-3 md:flex-row",children:l.jsx("input",{className:"input-plain flex-1",placeholder:"Buscar por nombre, cdigo de barras o cdigo interno",value:Je,onChange:H=>vt(H.target.value)})}),pe==="products"&&l.jsx("div",{className:"flex flex-wrap gap-3",children:l.jsxs("select",{className:"rounded-full px-4 py-2 text-sm font-semibold bg-white/10 text-white/90 border border-white/20 focus:outline-none",value:et,onChange:H=>At(H.target.value==="all"?"all":Number(H.target.value)),children:[l.jsx("option",{value:"all",className:"text-lead-900",children:"Todas las categoras"}),f.filter(H=>H.state).map(H=>l.jsx("option",{value:H.id,className:"text-lead-900",children:H.name},H.id))]})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-white/10 blur-xl"}),l.jsxs("div",{className:"relative space-y-5 rounded-[2rem] border border-white/20 bg-white/10 px-7 py-8 backdrop-blur",children:[l.jsx("div",{className:"grid grid-cols-2 gap-4",children:rr.cards.map(H=>l.jsxs("div",{className:`rounded-2xl bg-gradient-to-br ${H.accent} px-4 py-5 shadow-lg`,children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:H.label}),l.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:H.value})]},H.label))}),l.jsxs("div",{className:"space-y-2 rounded-xl border border-white/20 bg-white/10 p-4 text-sm text-white/80",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Catlogo"}),rr.breakdown.map(H=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:H.label}),l.jsx("span",{className:"font-semibold text-white",children:H.value})]},H.label))]})]})]})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${pe==="products"?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>Se("products"),children:"Productos"}),l.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${pe==="brands"?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>Se("brands"),children:"Marcas"}),l.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${pe==="categories"?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>Se("categories"),children:"Categoras"}),l.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${pe==="presentations"?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>Se("presentations"),children:"Presentaciones"}),l.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${pe==="colors"?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>Se("colors"),children:"Colores"})]}),l.jsxs("section",{className:"grid gap-8 xl:grid-cols-[1fr]",children:[pe==="products"&&l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de productos"}),l.jsxs("p",{className:"text-sm text-lead-500",children:[Cs.length," producto(s) coinciden con el filtro."]})]}),l.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",onClick:Ni,children:"Crear producto"})]}),t?l.jsx(rn,{}):l.jsx(N1,{products:Cs,categoryMap:p,brandMap:b,onEdit:ki,onDeactivate:qa,onView:js,busyId:hs})]}),pe==="brands"&&l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de marcas"}),l.jsxs("p",{className:"text-sm text-lead-500",children:[w.length," marca(s) registradas."]})]}),l.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:me,children:"Crear marca"})]}),j?l.jsx(rn,{}):l.jsx(j1,{brands:w,onEdit:Ft,onDelete:Ei,busyBrandId:je})]}),pe==="categories"&&l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de categoras"}),l.jsxs("p",{className:"text-sm text-lead-500",children:[f.length," categora(s) registradas."]})]}),l.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:Pn,children:"Crear categora"})]}),g?l.jsx(rn,{}):l.jsx(E1,{categories:f,onEdit:Mi,onDeactivate:Tn,busyId:Ql})]}),pe==="presentations"&&l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de presentaciones"}),l.jsxs("p",{className:"text-sm text-lead-500",children:[Z.length," presentacin(es) registradas."]})]}),l.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:ec,children:"Crear presentacin"})]}),se?l.jsx(rn,{}):l.jsx(T1,{presentations:Z,onEdit:Xa,onDeactivate:Ja,busyId:Zr})]}),pe==="colors"&&l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de colores"}),l.jsxs("p",{className:"text-sm text-lead-500",children:[R.length," color(es) registrados."]})]}),l.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:Tt,children:"Crear color"})]}),ie?l.jsx(rn,{}):l.jsx(I1,{colors:R,onEdit:Gr,onDeactivate:Ri,busyId:En})]})]})]})]}),l.jsx(k1,{open:bn,mode:ke,initialData:Ie,categories:f,brands:w,presentations:Z,colors:R,submitting:Qn,onClose:ji,onSubmit:Ss}),ps&&l.jsx(C1,{product:vi,onClose:Ci}),l.jsx(S1,{open:Rr,mode:ms,initialData:Or,submitting:Dr,onClose:Ce,onSubmit:Ka}),l.jsx(P1,{open:Fr,mode:Fa,initialData:wt,submitting:yi,onClose:$r,onSubmit:Ge}),l.jsx(M1,{open:Yl,mode:bi,initialData:Jn,submitting:Va,onClose:Ii,onSubmit:tc}),l.jsx(R1,{open:Pe,mode:jn,initialData:Wr,submitting:Re,onClose:eo,onSubmit:rc}),l.jsx(vn,{open:Yn,title:"Eliminar producto",confirmLabel:"Eliminar",onConfirm:Jl,onCancel:Si,disabled:Tr}),l.jsx(vn,{open:gs,title:"Eliminar marca",confirmLabel:"Eliminar",onConfirm:Ti,onCancel:Pi,disabled:xs}),l.jsx(vn,{open:Ha,title:"Eliminar categora",confirmLabel:"Eliminar",onConfirm:Ya,onCancel:Qa,disabled:ys}),l.jsx(vn,{open:Xl,title:"Eliminar presentacin",confirmLabel:"Eliminar",onConfirm:nc,onCancel:_e,disabled:bs}),l.jsx(vn,{open:ks,title:"Eliminar color",confirmLabel:"Eliminar",onConfirm:to,onCancel:sc,disabled:Ga}),l.jsx(xi,{toasts:B.toasts,onDismiss:B.dismissToast})]})},D1=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useCallback(async()=>{i(!0),a(null);try{const C=await oe.suppliers.getAll();t(C)}catch(C){a((C==null?void 0:C.message)||"Error al cargar proveedores")}finally{i(!1)}},[]),d=x.useCallback(async C=>{a(null);try{return await oe.suppliers.getById(C)}catch(S){return a((S==null?void 0:S.message)||"Error al cargar proveedor"),null}},[]),f=x.useCallback(async(C,S)=>{i(!0),a(null);try{const _=await oe.suppliers.create({...C,userId:S});return t(y=>[...y,_]),_}catch(_){return a((_==null?void 0:_.message)||"Error al crear proveedor"),null}finally{i(!1)}},[]),p=x.useCallback(async(C,S,_)=>{i(!0),a(null);try{const y=await oe.suppliers.update(C,{...S,userId:_});return t(k=>k.map(w=>w.id===C?y:w)),y}catch(y){return a((y==null?void 0:y.message)||"Error al actualizar proveedor"),null}finally{i(!1)}},[]),g=x.useCallback(async(C,S,_)=>{i(!0),a(null);try{return await oe.suppliers.updateState(C,S),t(y=>y.map(k=>k.id===C?{...k,state:S}:k)),!0}catch(y){return a((y==null?void 0:y.message)||"Error al actualizar estado"),!1}finally{i(!1)}},[]),v=x.useCallback(async C=>{i(!0),a(null);try{return await oe.suppliers.delete(C),t(S=>S.filter(_=>_.id!==C)),!0}catch(S){return a((S==null?void 0:S.message)||"Error al eliminar proveedor"),!1}finally{i(!1)}},[]);return{suppliers:e,isLoading:n,error:s,fetchSuppliers:c,fetchSupplierById:d,createSupplier:f,updateSupplier:p,updateSupplierState:g,deleteSupplier:v}},z1=()=>{const[e,t]=x.useState([]),[n,i]=x.useState({}),[s,a]=x.useState(!1),[c,d]=x.useState(null),f=x.useCallback(async()=>{a(!0),d(null);try{const p=await oe.countries.getAll();t(p);const g={};p.forEach(v=>{g[v.id]=v.name}),i(g)}catch(p){d((p==null?void 0:p.message)||"Error al cargar pases")}finally{a(!1)}},[]);return{countries:e,countryMap:n,isLoading:s,error:c,fetchCountries:f}},A1=({suppliers:e,countryMap:t,onEdit:n,onDeactivate:i,busyId:s})=>{const a=e.length===0,c=d=>s!=null&&s===d;return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"NIT"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Telfono"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Pas"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Direccin"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Contacto"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:a?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:8,children:"No hay proveedores para mostrar."})}):e.map(d=>l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:d.id}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:d.nit??""}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:d.name}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:d.phone??""}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:l.jsx("span",{className:"inline-flex items-center rounded-full bg-brand-50 px-2.5 py-0.5 text-xs font-medium text-brand-700",children:t[d.countryId]||"Desconocido"})}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:d.address??""}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:d.contactName??""}),l.jsx("td",{className:"px-4 py-3 text-center align-middle",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>n(d),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:c(d.id),children:"Editar"}),l.jsx("button",{type:"button",onClick:()=>i(d),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:c(d.id)||!d.state,children:"Eliminar"})]})})]},d.id))})]})})},B1=({supplier:e,countries:t,onClose:n,onSave:i,saving:s})=>{const a=!!(e!=null&&e.id),[c,d]=x.useState(""),[f,p]=x.useState(""),[g,v]=x.useState(""),[C,S]=x.useState(""),[_,y]=x.useState(""),[k,w]=x.useState(""),[b,j]=x.useState({});x.useEffect(()=>{e?(d(e.nit??""),p(e.name??""),v(e.contactName??""),S(e.phone??""),y(e.address??""),w(e.countryId?String(e.countryId):"")):(d(""),p(""),v(""),S(""),y(""),w("")),j({})},[e]);const E=()=>{const A={};return c.trim()||(A.nit="El NIT es obligatorio"),f.trim()||(A.name="El nombre es obligatorio"),k||(A.countryId="El pas es obligatorio"),j(A),Object.keys(A).length===0},T=A=>{A.preventDefault(),E()&&i({...a?{id:e.id}:{},nit:c.trim(),name:f.trim(),contactName:g.trim()||void 0,phone:C.trim()||void 0,address:_.trim()||void 0,countryId:Number(k),state:(e==null?void 0:e.state)??!0})},I=a?"Editar Proveedor":"Nuevo Proveedor",z=a?"Guardar cambios":"Crear";return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:l.jsxs("div",{className:"mx-4 my-10 w-full max-w-lg overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[l.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:I}),l.jsx("button",{type:"button",onClick:n,className:"text-brand-100 hover:text-white transition-colors",disabled:s,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("form",{onSubmit:T,className:"space-y-5 px-6 py-6",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"nit",className:"block text-sm font-medium text-lead-700",children:"NIT *"}),l.jsx("input",{type:"text",id:"nit",value:c,onChange:A=>d(A.target.value),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${b.nit?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Ej: 123456789",disabled:s}),b.nit?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:b.nit}):null]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre *"}),l.jsx("input",{type:"text",id:"name",value:f,onChange:A=>p(A.target.value),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${b.name?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Ej: Distribuidora XYZ",disabled:s}),b.name?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:b.name}):null]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"countryId",className:"block text-sm font-medium text-lead-700",children:"Pas *"}),l.jsxs("select",{id:"countryId",value:k,onChange:A=>w(A.target.value),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${b.countryId?"border-red-500":"border-lead-300 bg-white"}`,disabled:s,children:[l.jsx("option",{value:"",children:"Seleccionar pas"}),t.map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))]}),b.countryId?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:b.countryId}):null]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-lead-700",children:"Telfono"}),l.jsx("input",{type:"tel",id:"phone",value:C,onChange:A=>S(A.target.value),className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"Ej: +591 70000000",disabled:s})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"contactName",className:"block text-sm font-medium text-lead-700",children:"Contacto"}),l.jsx("input",{type:"text",id:"contactName",value:g,onChange:A=>v(A.target.value),className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"Nombre del contacto",disabled:s})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-lead-700",children:"Direccin"}),l.jsx("textarea",{id:"address",value:_,onChange:A=>y(A.target.value),className:"mt-1 block w-full resize-none rounded-lg border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",rows:2,placeholder:"Direccin del proveedor",disabled:s})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[l.jsx("button",{type:"button",onClick:n,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors",disabled:s,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded-lg bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-60 transition-all",disabled:s,children:s?"Guardando...":z})]})]})]})})},F1=({message:e})=>l.jsx("div",{className:"rounded border border-red-200 bg-red-50 p-2 text-sm text-red-600",children:e}),U1=()=>{var X;const{suppliers:e,isLoading:t,error:n,fetchSuppliers:i,createSupplier:s,updateSupplier:a,updateSupplierState:c}=D1(),{countries:d,countryMap:f,fetchCountries:p}=z1(),v=(X=qn().user)==null?void 0:X.id,[C,S]=x.useState(!1),[_,y]=x.useState(null),[k,w]=x.useState(null),[b,j]=x.useState(!1),[E,T]=x.useState(null),[I,z]=x.useState("");x.useEffect(()=>{i(),p()},[i,p]);const A=x.useMemo(()=>{let G=e;if(I.trim()){const ce=I.toLowerCase();G=G.filter(R=>R.name.toLowerCase().includes(ce)||(R.contactName??"").toLowerCase().includes(ce)||(R.phone??"").toLowerCase().includes(ce)||(R.nit??"").toLowerCase().includes(ce))}return G},[e,I]),Q=()=>{y(null),S(!0)},Z=G=>{y(G),S(!0)},se=()=>{S(!1),y(null)},ne=async G=>{j(!0);try{if(G.id){const{userId:ce,...R}=G;await a(G.id,R,v)}else await s(G,v);se()}finally{j(!1)}},$=G=>w(G),q=async()=>{if(k){T(k.id);try{await c(k.id,!1,v)}finally{T(null),w(null)}}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),l.jsxs("div",{className:"relative space-y-10 px-6 py-8 lg:px-10 lg:py-12",children:[l.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[l.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),l.jsx("div",{className:"grid gap-10 px-8 py-10 md:px-12 lg:grid-cols-[2fr,1.2fr]",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Panel de Proveedores"}),l.jsx("h2",{className:"text-3xl font-semibold leading-tight md:text-4xl",children:"Gestin de proveedores y suministros"}),l.jsx("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:l.jsx("div",{className:"flex flex-col gap-3 md:flex-row",children:l.jsx("input",{className:"input-plain flex-1",placeholder:"Buscar por nombre, contacto, telfono o NIT",value:I,onChange:G=>z(G.target.value)})})})]})})]}),l.jsx("section",{className:"grid gap-8 xl:grid-cols-[1fr]",children:l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de proveedores"}),l.jsxs("p",{className:"text-sm text-lead-500",children:[A.length," proveedor(es) coinciden con el filtro."]})]}),l.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md",onClick:Q,children:"Crear proveedor"})]}),t&&l.jsx(rn,{}),n&&l.jsx(F1,{message:n}),!t&&!n&&l.jsx(A1,{suppliers:A,countryMap:f,onEdit:Z,onDeactivate:$,busyId:E})]})})]})]}),C&&l.jsx(B1,{supplier:_,countries:d,onClose:se,onSave:ne,saving:b}),k&&l.jsx(vn,{open:!!k,title:"Desactivar proveedor",description:`Est seguro de desactivar al proveedor "${k.name}"?`,confirmLabel:"Desactivar",onConfirm:q,onCancel:()=>w(null)})]})},H1=()=>{const[e,t]=x.useState([]),[n,i]=x.useState({page:1,limit:50,total:0,totalPages:0}),[s,a]=x.useState(!1),[c,d]=x.useState(null),f=x.useCallback(async(v,C)=>{a(!0),d(null);try{const S=await oe.productBranches.getByBranchPaginated(v,C);t(S.data),i({page:S.page,limit:S.limit,total:S.total,totalPages:S.totalPages})}catch(S){d((S==null?void 0:S.message)||"Error al cargar inventario")}finally{a(!1)}},[]),p=x.useCallback(async(v,C,S)=>{a(!0),d(null);try{const _=await oe.productBranches.setStock(v,C,S);return t(y=>y.map(k=>k.id===v?{...k,branch:{...k.branch,hasStock:_.hasStock,stockQty:_.stockQty}}:k)),_}catch(_){return d((_==null?void 0:_.message)||"Error al actualizar stock"),null}finally{a(!1)}},[]),g=x.useCallback(()=>{d(null)},[]);return{inventory:e,pagination:n,isLoading:s,error:c,fetchInventory:f,setStock:p,clearError:g}};function Z1(e){return new Map(e.map(t=>[t.id,t.name]))}function x0(e,t){return t==null?"Sin sucursal":e.get(t)??`Sucursal #${t}`}function Yi(e){var t,n;if(e instanceof Error){const i=e;return(n=(t=i.response)==null?void 0:t.data)!=null&&n.message?i.response.data.message:e.message}return typeof e=="string"?e:"Error desconocido"}const Qd=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>Z1(e),[e]),d=x.useCallback(_=>x0(c,_),[c]),f=x.useCallback(()=>a(null),[]),p=x.useCallback(async()=>{i(!0),a(null);try{const _=await oe.branches.getAll();t(_)}catch(_){const y=Yi(_);a({message:y,code:"FETCH_ERROR"})}finally{i(!1)}},[]),g=x.useCallback(async _=>{a(null);try{return await oe.branches.getById(_)}catch(y){const k=Yi(y);return a({message:k,code:"FETCH_BY_ID_ERROR"}),null}},[]),v=x.useCallback(async _=>{i(!0),a(null);try{const y=await oe.branches.create(_);return t(k=>[...k,y]),y}catch(y){const k=Yi(y);return a({message:k,code:"CREATE_ERROR"}),null}finally{i(!1)}},[]),C=x.useCallback(async(_,y)=>{i(!0),a(null);try{const k=await oe.branches.update(_,y);return t(w=>w.map(b=>b.id===_?k:b)),k}catch(k){const w=Yi(k);return a({message:w,code:"UPDATE_ERROR"}),null}finally{i(!1)}},[]),S=x.useCallback(async(_,y)=>{i(!0),a(null);try{const k=await oe.branches.updateState(_,y);return t(y?w=>w.map(b=>b.id===_?k:b):w=>w.filter(b=>b.id!==_)),!0}catch(k){const w=Yi(k);return a({message:w,code:"UPDATE_STATE_ERROR"}),!1}finally{i(!1)}},[]);return{branches:e,branchMap:c,isLoading:n,error:s,getBranchNameById:d,fetchBranches:p,fetchBranchById:g,createBranch:v,updateBranch:C,updateBranchState:S,clearError:f}},W1=()=>{const{inventory:e,pagination:t,isLoading:n,error:i,fetchInventory:s,setStock:a,clearError:c}=H1(),{branches:d,fetchBranches:f,isLoading:p}=Qd(),{categories:g,fetchCategories:v}=m0(),{brands:C,fetchBrands:S}=g0(),_=qn(),y=Kn(),[k,w]=x.useState(null),[b,j]=x.useState(""),[E,T]=x.useState(""),[I,z]=x.useState("available"),[A,Q]=x.useState("all"),[Z,se]=x.useState("all"),[ne,$]=x.useState(1),[q,X]=x.useState(10),[G,ce]=x.useState({open:!1,item:null}),[R,ie]=x.useState(!1),[F,J]=x.useState(""),[le,we]=x.useState(!1);x.useEffect(()=>{f(),v(),S()},[f,v,S]),x.useEffect(()=>{var W;if(d.length>0&&k===null){const ke=(W=_.user)==null?void 0:W.branchId;ke&&d.find(We=>We.id===ke)?w(ke):w(d[0].id)}},[d,k,_.user]),x.useEffect(()=>{const W=setTimeout(()=>{j(E),$(1)},300);return()=>clearTimeout(W)},[E]);const fe=x.useMemo(()=>({search:b||void 0,page:ne,limit:q,onlyAvailable:I==="available",categoryId:A!=="all"?A:void 0,brandId:Z!=="all"?Z:void 0}),[b,ne,q,I,A,Z]);x.useEffect(()=>{k&&s(k,fe)},[k,fe,s]),x.useEffect(()=>{i&&(y.error(i),c())},[i,y,c]);const ue=x.useMemo(()=>{const W=e.filter(Ie=>Ie.branch.hasStock&&(Ie.branch.stockQty??0)>0).length,ke=e.filter(Ie=>Ie.branch.hasStock&&(Ie.branch.stockQty??0)>0&&(Ie.branch.stockQty??0)<=5).length,We=e.filter(Ie=>!Ie.branch.hasStock||(Ie.branch.stockQty??0)===0).length;return{total:t.total,withStock:W,lowStock:ke,noStock:We,currentPageItems:e.length}},[e,t.total]),K=W=>{w(Number(W.target.value)),$(1)},B=W=>{W>=1&&W<=t.totalPages&&$(W)},pe=W=>{X(Number(W.target.value)),$(1)},Se=W=>{var ke;ce({open:!0,item:W}),ie(W.branch.hasStock),J(((ke=W.branch.stockQty)==null?void 0:ke.toString())??"")},Je=()=>{ce({open:!1,item:null})},vt=async W=>{if(W.preventDefault(),!(!G.item||!k)){we(!0);try{const ke=await a(G.item.id,k,{hasStock:R,stockQty:F?parseInt(F,10):null});ke&&(y.success(ke.deleted?"Producto marcado como no disponible en esta sucursal":"Stock actualizado correctamente"),Je())}catch(ke){y.error((ke==null?void 0:ke.message)||"Error al actualizar stock")}finally{we(!1)}}},et=W=>{if(!W)return"";const ke=Object.entries(W);if(ke.length===0)return"";const[,We]=ke[0];return`Bs. ${We.toFixed(2)}`},At=d.find(W=>W.id===k),bn=x.useMemo(()=>{const W=[];let We=Math.max(1,ne-Math.floor(2.5)),Ie=Math.min(t.totalPages,We+5-1);Ie-We+1<5&&(We=Math.max(1,Ie-5+1));for(let yt=We;yt<=Ie;yt++)W.push(yt);return W},[ne,t.totalPages]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),l.jsxs("div",{className:"relative space-y-10 px-6 py-8 lg:px-10 lg:py-12",children:[l.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[l.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),l.jsxs("div",{className:"grid gap-10 px-8 py-10 md:px-12 lg:grid-cols-[2fr,1.2fr]",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Control de Stock"}),l.jsx("h2",{className:"text-3xl font-semibold leading-tight md:text-4xl",children:"Inventario por Sucursal"}),l.jsxs("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:[l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs uppercase tracking-wide text-white/70 mb-1",children:"Sucursal"}),l.jsx("select",{className:"w-full rounded-lg px-4 py-2.5 text-sm font-medium bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-white/30",value:k??"",onChange:K,disabled:p,children:d.map(W=>l.jsx("option",{value:W.id,className:"text-lead-900",children:W.name},W.id))})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs uppercase tracking-wide text-white/70 mb-1",children:"Buscar"}),l.jsx("input",{className:"input-plain w-full",placeholder:"Nombre, cdigo de barras o cdigo interno...",value:E,onChange:W=>T(W.target.value)})]})]}),l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs uppercase tracking-wide text-white/70 mb-1",children:"Categora"}),l.jsxs("select",{className:"w-full rounded-lg px-4 py-2.5 text-sm font-medium bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-white/30",value:A,onChange:W=>{Q(W.target.value==="all"?"all":Number(W.target.value)),$(1)},children:[l.jsx("option",{value:"all",className:"text-lead-900",children:"Todas las categoras"}),g.filter(W=>W.state).map(W=>l.jsx("option",{value:W.id,className:"text-lead-900",children:W.name},W.id))]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs uppercase tracking-wide text-white/70 mb-1",children:"Marca"}),l.jsxs("select",{className:"w-full rounded-lg px-4 py-2.5 text-sm font-medium bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-white/30",value:Z,onChange:W=>{se(W.target.value==="all"?"all":Number(W.target.value)),$(1)},children:[l.jsx("option",{value:"all",className:"text-lead-900",children:"Todas las marcas"}),C.filter(W=>W.state).map(W=>l.jsx("option",{value:W.id,className:"text-lead-900",children:W.name},W.id))]})]})]}),l.jsx("div",{className:"flex flex-wrap gap-3",children:["available","all"].map(W=>l.jsx("button",{type:"button",onClick:()=>{z(W),$(1)},className:`rounded-full px-4 py-2 text-sm font-semibold transition ${I===W?"bg-lead-50 text-brand-700 shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:W==="available"?"En Inventario":"Catlogo Completo"},W))})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-white/10 blur-xl"}),l.jsxs("div",{className:"relative space-y-5 rounded-[2rem] border border-white/20 bg-white/10 px-7 py-8 backdrop-blur",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-brand-900 to-brand-600 px-4 py-5 shadow-lg",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:"Total Productos"}),l.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:ue.total.toLocaleString()})]}),l.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-green-600 to-green-400 px-4 py-5 shadow-lg",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:"En esta pgina"}),l.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:ue.currentPageItems})]})]}),l.jsxs("div",{className:"space-y-2 rounded-xl border border-white/20 bg-white/10 p-4 text-sm text-white/80",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Alertas de Stock (pgina actual)"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Con stock"}),l.jsx("span",{className:"font-semibold text-green-300",children:ue.withStock})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Stock bajo (5)"}),l.jsx("span",{className:`font-semibold ${ue.lowStock>0?"text-amber-300":"text-white"}`,children:ue.lowStock})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Sin stock"}),l.jsx("span",{className:`font-semibold ${ue.noStock>0?"text-red-300":"text-white"}`,children:ue.noStock})]})]})]})]})]})]}),l.jsx("section",{className:"grid gap-8 xl:grid-cols-[1fr]",children:l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-bold text-brand-900",children:["Stock en ",(At==null?void 0:At.name)??"Sucursal"]}),l.jsxs("p",{className:"text-sm text-lead-500",children:["Mostrando ",e.length," de ",t.total.toLocaleString()," productos",t.totalPages>1&&`  Pgina ${t.page} de ${t.totalPages}`]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("label",{className:"text-sm text-lead-600",children:"Mostrar:"}),l.jsxs("select",{className:"rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm focus:border-brand-500 focus:ring-brand-500",value:q,onChange:pe,children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:20,children:"20"}),l.jsx("option",{value:30,children:"30"}),l.jsx("option",{value:40,children:"40"}),l.jsx("option",{value:50,children:"50"})]})]})]}),n||p?l.jsx(rn,{}):e.length===0?l.jsx("div",{className:"rounded-md border bg-white p-6 text-center text-sm text-gray-600 shadow-sm",children:b||A!=="all"||Z!=="all"||I==="available"?"No se encontraron productos con los filtros seleccionados.":"No hay productos en el inventario de esta sucursal."}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Producto"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Categora"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Marca"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Cdigo"}),l.jsx("th",{className:"px-4 py-4 text-center font-semibold",children:"Disponible"}),l.jsx("th",{className:"px-4 py-4 text-center font-semibold",children:"Stock"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Precio"}),l.jsx("th",{className:"w-32 px-4 py-4 text-center font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:e.map(W=>l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:W.name}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:W.category.name}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:W.brand.name}),l.jsx("td",{className:"px-4 py-3 text-lead-600 font-mono text-xs",children:W.barcode||W.internalCode||""}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${W.branch.hasStock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:W.branch.hasStock?"S":"No"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("span",{className:`font-semibold ${!W.branch.stockQty||W.branch.stockQty===0?"text-red-600":W.branch.stockQty<=5?"text-amber-600":"text-green-600"}`,children:W.branch.stockQty??0})}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:et(W.salePrice)}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("button",{type:"button",onClick:()=>Se(W),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200",children:"Editar"})})]},W.id))})]})}),t.totalPages>1&&l.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:[l.jsxs("p",{className:"text-sm text-lead-500",children:["Mostrando ",(t.page-1)*t.limit+1," a ",Math.min(t.page*t.limit,t.total)," de ",t.total.toLocaleString()," productos"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>B(1),disabled:ne===1,className:"rounded px-3 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("button",{type:"button",onClick:()=>B(ne-1),disabled:ne===1,className:"rounded px-3 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),bn.map(W=>l.jsx("button",{type:"button",onClick:()=>B(W),className:`rounded px-3 py-2 text-sm font-medium transition ${W===ne?"bg-brand-600 text-white":"text-lead-700 hover:bg-lead-100"}`,children:W},W)),l.jsx("button",{type:"button",onClick:()=>B(ne+1),disabled:ne===t.totalPages,className:"rounded px-3 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("button",{type:"button",onClick:()=>B(t.totalPages),disabled:ne===t.totalPages,className:"rounded px-3 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]})]})]})})]})]}),G.open&&G.item&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:l.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[l.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:"Editar Stock"}),l.jsx("button",{onClick:Je,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:le,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("form",{onSubmit:vt,className:"space-y-5 px-6 py-6",children:[l.jsxs("div",{className:"rounded-lg bg-brand-50 p-3 border border-brand-100",children:[l.jsx("p",{className:"text-sm font-medium text-brand-900",children:G.item.name}),l.jsxs("div",{className:"flex gap-4 mt-1 text-xs text-brand-600",children:[l.jsx("span",{children:G.item.category.name}),l.jsx("span",{children:""}),l.jsx("span",{children:G.item.brand.name})]}),(G.item.barcode||G.item.internalCode)&&l.jsx("p",{className:"text-xs text-brand-500 font-mono mt-1",children:G.item.barcode||G.item.internalCode})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R,onChange:W=>ie(W.target.checked),className:"h-5 w-5 rounded border-lead-300 text-brand-600 focus:ring-brand-500",disabled:le}),l.jsx("span",{className:"text-sm font-medium text-lead-700",children:"Tiene stock disponible en esta sucursal"})]}),l.jsx("p",{className:"mt-1 ml-8 text-xs text-lead-500",children:R?"El producto est disponible para venta en esta sucursal.":"Desmarcar eliminar el registro de stock para esta sucursal."})]}),R&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stockQty",className:"block text-sm font-medium text-lead-700",children:"Cantidad en Stock"}),l.jsx("input",{type:"number",id:"stockQty",value:F,onChange:W=>J(W.target.value),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0",min:"0",disabled:le})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[l.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:Je,disabled:le,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:le,children:le?"Guardando...":"Guardar"})]})]})]})}),l.jsx(xi,{toasts:y.toasts,onDismiss:y.dismissToast})]})};class V1{constructor(){ar(this,"users",[]);ar(this,"subscribers",new Set)}getUsers(){return this.users}subscribe(t){return this.subscribers.add(t),t(this.users),()=>this.subscribers.delete(t)}notify(){this.subscribers.forEach(t=>t(this.users))}async fetch(){const t=await oe.users.getAll();return this.users=t,this.notify(),this.users}async create(t){const n=await oe.users.create(t);return this.users=[...this.users,n],this.notify(),n}async update(t,n){const i=await oe.users.update(t,n);return this.users=this.users.map(s=>s.id===t?i:s),this.notify(),i}async updateState(t,n,i){return await oe.users.updateState(t,n,i),n?await this.fetch():this.users=this.users.filter(s=>s.id!==t),this.notify(),!0}async resetPassword(t){await oe.users.resetPassword(t)}clear(){this.users=[],this.notify()}}const lr=new V1;function Ds(e){var t,n,i,s;if(e instanceof Error){const a=e;return(n=(t=a.response)==null?void 0:t.data)!=null&&n.message?a.response.data.message:(s=(i=a.response)==null?void 0:i.data)!=null&&s.error?a.response.data.error:e.message}return typeof e=="string"?e:"Error desconocido"}const $1=()=>{const[e,t]=x.useState(lr.getUsers()),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useCallback(()=>a(null),[]),d=x.useCallback(async()=>{i(!0),a(null);try{await lr.fetch()}catch(S){const _=Ds(S);a({message:_,code:"FETCH_ERROR"})}finally{i(!1)}},[]);x.useEffect(()=>{const S=lr.subscribe(t);return()=>S()},[]);const f=x.useCallback(async S=>{a(null);try{return(await lr.fetch()).find(y=>y.id===S)??null}catch(_){const y=Ds(_);return a({message:y,code:"FETCH_BY_ID_ERROR"}),null}},[]),p=x.useCallback(async S=>{i(!0),a(null);try{return await lr.create(S)}catch(_){const y=Ds(_);return a({message:y,code:"CREATE_ERROR"}),null}finally{i(!1)}},[]),g=x.useCallback(async(S,_)=>{i(!0),a(null);try{return await lr.update(S,_)}catch(y){const k=Ds(y);return a({message:k,code:"UPDATE_ERROR"}),null}finally{i(!1)}},[]),v=x.useCallback(async(S,_,y)=>{i(!0),a(null);try{return await lr.updateState(S,_,y)}catch(k){const w=Ds(k);return a({message:w,code:"UPDATE_STATE_ERROR"}),!1}finally{i(!1)}},[d]),C=x.useCallback(async S=>{i(!0),a(null);try{return await lr.resetPassword(S),!0}catch(_){const y=Ds(_);return a({message:y,code:"RESET_PASSWORD_ERROR"}),!1}finally{i(!1)}},[]);return{users:e,isLoading:n,error:s,fetchUsers:d,fetchUserById:f,createUser:p,updateUser:g,updateUserState:v,resetUserPassword:C,clearError:c}};function G1(e){if(!e)return"Sin rol";const t={"super administrador":"Super Administrador",administrador:"Administrador",prevendedor:"Prevendedor",transportista:"Transportista"};return e in t?t[e]:e.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}const q1=({users:e,branchMap:t,onEdit:n,onDeactivate:i,onResetPassword:s,showResetButton:a,busyUserId:c})=>{const d=e.length===0,f=p=>c!=null&&c===p;return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Usuario"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Rol"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Sucursal"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"CI"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:d?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:6,children:"No hay usuarios para mostrar."})}):e.map(p=>{const g=p.role==="super_admin";return l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:p.userName}),l.jsxs("td",{className:"px-4 py-3 text-lead-600",children:[p.names," ",p.lastName," ",p.secondLastName]}),l.jsx("td",{className:"px-4 py-3 capitalize text-lead-600",children:G1(p.role)}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:l.jsx("span",{className:"inline-flex items-center rounded-full bg-brand-50 px-2.5 py-0.5 text-xs font-medium text-brand-700",children:x0(t,p.branchId)})}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:p.ci??""}),l.jsx("td",{className:"px-4 py-3 text-center align-middle",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>n(p),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:f(p.id)||g,children:"Editar"}),l.jsx("button",{type:"button",onClick:()=>i(p),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:f(p.id)||g,children:"Eliminar"}),a&&s?l.jsx("button",{type:"button",onClick:()=>s(p),className:"rounded bg-lead-200 px-3 py-1.5 font-medium text-lead-800 transition hover:bg-lead-300 disabled:opacity-50",disabled:f(p.id)||g,children:"Resetear"}):null]})})]},p.id)})})]})})},Wc=[{value:"administrador",label:"Administrador"},{value:"prevendedor",label:"Prevendedor"},{value:"transportista",label:"Transportista"}],v0="prevendedor",pp={username:"",ciMain:"",ciExt:"",names:"",lastName:"",secondLastName:"",branchId:"",role:v0,password:"",confirmPassword:""},K1=({open:e,mode:t,initialUser:n,submitting:i,branches:s,branchesLoading:a=!1,onClose:c,onSubmit:d})=>{var Q,Z,se,ne;const[f,p]=x.useState(pp),[g,v]=x.useState({}),[C,S]=x.useState(!1),_=qn(),y=((Q=_.user)==null?void 0:Q.role)==="super_admin"||((Z=_.user)==null?void 0:Z.role)==="super administrador",k=((se=_.user)==null?void 0:se.role)==="admin"||((ne=_.user)==null?void 0:ne.role)==="administrador",w=($,q,X,G)=>{const ce=($||"").replace(/\s+/g,"").toLowerCase(),R=(q||"").replace(/\s+/g,"").toLowerCase(),ie=ce.charAt(0)||"",F=R.charAt(0)||"",J=`${X}${G}`.replace(/[^0-9a-zA-Z]/g,"");if(ie&&F)return`${ie}${F}${J}`;const le=ce.slice(0,2);return!le&&!J?"":`${le}${J}`};x.useEffect(()=>{if(e){if(t==="edit"&&n){const $=n.ci??"",[q,X]=$.includes("-")?$.split("-",2):[$,""];p({username:n.userName,ciMain:q,ciExt:X,names:n.names,lastName:n.lastName,secondLastName:n.secondLastName??"",branchId:n.branchId!=null?String(n.branchId):"",role:n.role==="super_admin"||n.role==="super administrador"?v0:n.role,password:"",confirmPassword:""}),S(!0)}else p(pp),S(!1);v({})}},[e,t,n]);const b=t==="create"?"Crear usuario":"Editar usuario",j=t==="create"?"Crear":"Guardar cambios",E=x.useMemo(()=>y?Wc:k?Wc.filter($=>$.value==="prevendedor"||$.value==="transportista"):[],[y,k]),T=E.length?E:Wc,I=$=>{const{name:q,value:X}=$.target;let G=X;(q==="names"||q==="lastName"||q==="secondLastName")&&(G=X.replace(/[^A-Za-z\s]/g,"").toUpperCase()),q==="ciMain"&&(G=X.replace(/\D/g,"").slice(0,7)),q==="ciExt"&&(G=X.replace(/[^0-9a-zA-Z]/g,"").slice(0,2).toUpperCase()),q==="username"&&S(!0),p(ce=>({...ce,[q]:G}))};x.useEffect(()=>{if(t!=="create")return;const $=w(f.lastName,f.secondLastName,f.ciMain,f.ciExt);p(q=>!C||!q.username.trim()||q.username===""||q.username===$?{...q,username:$}:q)},[t,f.lastName,f.secondLastName,f.ciMain,f.ciExt,C]);const z=()=>{const $={};if(t==="create"&&!f.username.trim()&&($.username="El usuario es obligatorio"),f.ciMain.trim()?/^\d{1,7}$/.test(f.ciMain)||($.ciMain="CI invlida (solo hasta 7 dgitos)"):$.ciMain="La cdula (CI) es obligatoria",f.names.trim()?/^[A-Z\s]+$/.test(f.names)||($.names="El nombre slo puede contener letras"):$.names="El nombre es obligatorio",f.lastName.trim()?/^[A-Z\s]+$/.test(f.lastName)||($.lastName="El apellido slo puede contener letras"):$.lastName="El apellido es obligatorio",f.secondLastName.trim()?/^[A-Z\s]+$/.test(f.secondLastName)||($.secondLastName="El segundo apellido slo puede contener letras"):$.secondLastName="El segundo apellido es obligatorio",!f.branchId.trim())$.branchId="La sucursal es obligatoria";else{const q=Number(f.branchId);Number.isNaN(q)&&($.branchId="La sucursal debe ser numrica")}return f.role||($.role="Selecciona un rol"),t==="create"&&!f.password.trim()&&($.password="La contrasea es obligatoria"),t==="create"&&!f.confirmPassword.trim()?$.confirmPassword="Confirma la contrasea":t==="create"&&f.password.trim()!==f.confirmPassword.trim()&&($.confirmPassword="Las contraseas no coinciden"),f.ciExt.trim()&&!/^\d[a-zA-Z]$/.test(f.ciExt.trim())&&($.ciExt="Formato de ext invlido (ej: 1B)"),v($),Object.keys($).length===0},A=$=>{if($.preventDefault(),!z())return;const q=Number(f.branchId),X=f.ciMain.trim(),G=f.ciExt.trim(),ce=G?`${X}-${G}`:X;d({...t==="create"&&{username:f.username.trim()},ci:ce,names:f.names.trim(),lastName:f.lastName.trim(),secondLastName:f.secondLastName.trim()||null,branchId:q,role:f.role,password:f.password.trim()||void 0})};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:l.jsxs("div",{className:"mx-4 my-10 w-full max-w-lg overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[l.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:b}),l.jsx("button",{type:"button",onClick:c,className:"text-brand-100 hover:text-white transition-colors",disabled:i,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("form",{onSubmit:A,className:"space-y-5 px-6 py-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 items-end",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{htmlFor:"ciMain",className:"block text-sm font-medium text-lead-700",children:"Cdula (CI)"}),l.jsx("input",{id:"ciMain",name:"ciMain",value:f.ciMain,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g.ciMain?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"876543",disabled:i})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ciExt",className:"block text-sm font-medium text-lead-700",children:"Ext (opcional)"}),l.jsx("input",{id:"ciExt",name:"ciExt",value:f.ciExt,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g.ciExt?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"1b",disabled:i})]})]}),l.jsxs("div",{className:"mt-1 flex flex-col gap-1",children:[g.ciMain?l.jsx("p",{className:"text-xs text-red-600",children:g.ciMain}):null,g.ciExt?l.jsx("p",{className:"text-xs text-red-600",children:g.ciExt}):null]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"names",className:"block text-sm font-medium text-lead-700",children:"Nombres"}),l.jsx("input",{id:"names",name:"names",value:f.names,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g.names?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Juan Carlos",disabled:i}),g.names?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:g.names}):null]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-lead-700",children:"Primer Apellido"}),l.jsx("input",{id:"lastName",name:"lastName",value:f.lastName,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g.lastName?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Prez",disabled:i}),g.lastName?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:g.lastName}):null]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"secondLastName",className:"block text-sm font-medium text-lead-700",children:"Segundo Apellido"}),l.jsx("input",{id:"secondLastName",name:"secondLastName",value:f.secondLastName,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g.secondLastName?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Fernndez",disabled:i}),g.secondLastName?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:g.secondLastName}):null]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"branchId",className:"block text-sm font-medium text-lead-700",children:"Sucursal"}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{id:"branchId",name:"branchId",value:f.branchId,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 appearance-none ${g.branchId?"border-red-500":"border-lead-300 bg-white"} ${a?"opacity-50":""}`,disabled:i||a,children:[l.jsx("option",{value:"",children:a?"Cargando sucursales...":"Seleccionar sucursal"}),s.map($=>l.jsx("option",{value:String($.id),children:$.name},$.id))]}),l.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 mt-1",children:a?l.jsxs("svg",{className:"h-4 w-4 animate-spin text-lead-400",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l.jsx("svg",{className:"h-4 w-4 text-lead-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),g.branchId?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:g.branchId}):null,!a&&s.length===0&&l.jsx("p",{className:"mt-1 text-xs text-yellow-600",children:"No hay sucursales disponibles"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-lead-700",children:"Rol"}),l.jsx("select",{id:"role",name:"role",value:f.role,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g.role?"border-red-500":"border-lead-300 bg-white"}`,disabled:i,children:T.map($=>l.jsx("option",{value:$.value,children:$.label},$.value))}),g.role?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:g.role}):null]})]}),t==="create"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-lead-700",children:"Usuario"}),l.jsx("input",{id:"username",name:"username",value:f.username,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g.username?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"usuario.unico",disabled:i}),g.username?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:g.username}):null]}),t==="create"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-lead-700",children:"Contrasea"}),l.jsx("input",{id:"password",name:"password",type:"password",value:f.password,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g.password?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"",disabled:i}),g.password?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:g.password}):null]}),t==="create"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-lead-700",children:"Confirmar contrasea"}),l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:f.confirmPassword,onChange:I,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${g.confirmPassword?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"",disabled:i}),g.confirmPassword?l.jsx("p",{className:"mt-1 text-xs text-red-600",children:g.confirmPassword}):null]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[l.jsx("button",{type:"button",onClick:c,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors",disabled:i,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded-lg bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-60 transition-all",disabled:i,children:j})]})]})]})}):null},Q1=({branches:e,onEdit:t,onDelete:n,busyBranchId:i=null})=>{const s=e.length===0,a=c=>i!=null&&i===c;return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"ID"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),l.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:s?l.jsx("tr",{children:l.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:3,children:"No hay sucursales para mostrar."})}):e.map(c=>l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsxs("td",{className:"px-4 py-3 font-medium text-brand-900",children:["#",c.id]}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:c.name}),l.jsx("td",{className:"px-4 py-3 text-center align-middle",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>t(c),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:a(c.id),children:"Editar"}),l.jsx("button",{type:"button",onClick:()=>n(c),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:a(c.id),children:"Eliminar"})]})})]},c.id))})]})})},Y1=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,d]=x.useState(""),[f,p]=x.useState("");x.useEffect(()=>{e&&(d(t==="edit"&&n?n.name:""),p(""))},[e,t,n]);const g=v=>{if(v.preventDefault(),!c.trim()){p("El nombre es requerido");return}a({name:c.trim()})};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:l.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[l.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nueva Sucursal":"Editar Sucursal"}),l.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("form",{onSubmit:g,className:"space-y-5 px-6 py-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre de la Sucursal"}),l.jsx("input",{type:"text",id:"name",value:c,onChange:v=>{d(v.target.value),f&&p("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${f?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Ej: Sucursal Central",disabled:i}),f&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[l.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},X1=[{value:"all",label:"Todos"},{value:"admin",label:"Administradores"},{value:"prevendedor",label:"Prevendedores"},{value:"transportista",label:"Transportistas"}],J1=()=>{var Br,Cn;const{users:e,isLoading:t,error:n,fetchUsers:i,createUser:s,updateUser:a,updateUserState:c,resetUserPassword:d,clearError:f}=$1(),{branches:p,branchMap:g,isLoading:v,error:C,fetchBranches:S,createBranch:_,updateBranch:y,updateBranchState:k}=Qd(),w=Kn(),[b,j]=x.useState(!1),[E,T]=x.useState("create"),[I,z]=x.useState(null),[A,Q]=x.useState(!1),[Z,se]=x.useState(!1),[ne,$]=x.useState(!1),[q,X]=x.useState(null),[G,ce]=x.useState(!1),[R,ie]=x.useState(!1),[F,J]=x.useState(null),[le,we]=x.useState(null),[fe,ue]=x.useState(""),[K,B]=x.useState("all"),[pe,Se]=x.useState("users"),[Je,vt]=x.useState(!1),[et,At]=x.useState("create"),[bn,W]=x.useState(null),[ke,We]=x.useState(!1),[Ie,yt]=x.useState(!1),[Qn,Ln]=x.useState(!1),[Yn,cn]=x.useState(null),Tr=x.useCallback(async()=>{await Promise.all([i(),S()])},[i,S]);x.useEffect(()=>{Tr()},[Tr]),x.useEffect(()=>{n&&(w.error(n.message),f())},[n,w,f]),x.useEffect(()=>{C&&w.error(`Error cargando sucursales: ${C.message}`)},[C,w]);const Nn=qn();((Br=Nn.user)==null?void 0:Br.role)==="admin"||((Cn=Nn.user)==null||Cn.role);const Qt=x.useMemo(()=>{const te=fe.trim().toLowerCase();return e.filter(je=>{const _t=te.length===0||je.userName.toLowerCase().includes(te)||`${je.names} ${je.lastName}`.toLowerCase().includes(te)||(je.secondLastName??"").toLowerCase().includes(te),Fr=K==="all"||je.role===K;return _t&&Fr})},[K,fe,e]),kn=x.useMemo(()=>{const te=e.length,je=e.filter(Pt=>Pt.role==="admin").length,_t=e.filter(Pt=>Pt.role==="prevendedor").length,Fr=e.filter(Pt=>Pt.role==="transportista").length;return{cards:[{label:"Total de usuarios",value:te,accent:"from-brand-900 to-brand-600"},{label:"Admins",value:je,accent:"from-brand-500 to-brand-300"}],roleBreakdown:[{label:"Prevendedores",value:_t},{label:"Transportistas",value:Fr}]}},[e]),hs=()=>{T("create"),z(null),j(!0)},fs=()=>{At("create"),W(null),vt(!0)},ps=te=>{T("edit"),z(te),j(!0)},Mr=te=>{At("edit"),W(te),vt(!0)},vi=()=>{A||(j(!1),z(null))},Ir=()=>{ke||(vt(!1),W(null))},Rr=async te=>{Q(!0);try{E==="create"?await s({username:te.username,ci:te.ci,password:te.password||"",names:te.names,lastName:te.lastName,secondLastName:te.secondLastName??null,role:te.role,branchId:te.branchId})&&(w.success("Usuario creado correctamente"),j(!1),z(null)):I&&await a(I.id,{ci:te.ci,names:te.names,lastName:te.lastName,secondLastName:te.secondLastName??null,role:te.role,branchId:te.branchId,password:te.password})&&(w.success("Usuario actualizado correctamente"),j(!1),z(null))}catch(je){const _t=je instanceof Error?je.message:"No se pudo guardar el usuario";w.error(_t)}finally{Q(!1)}},un=te=>{X(te),se(!0)},ms=te=>{cn(te),yt(!0)},dn=te=>{J(te),ce(!0)},Or=()=>{ne||(se(!1),X(null))},Xn=()=>{Qn||(yt(!1),cn(null))},Dr=async()=>{if(!(!q||!Nn.user)){$(!0),we(q.id);try{await c(q.id,!1,Nn.user.id)&&w.success(`Usuario "${q.userName}" eliminado correctamente`),se(!1),X(null)}catch(te){const je=te instanceof Error?te.message:"Accin no completada";w.error(je)}finally{$(!1),we(null)}}},zr=async()=>{if(Yn){Ln(!0);try{await k(Yn.id,!1)&&w.success(`Sucursal "${Yn.name}" eliminada correctamente`),yt(!1),cn(null)}catch(te){const je=te instanceof Error?te.message:"Accin no completada";w.error(je)}finally{Ln(!1)}}},gs=()=>{R||(ce(!1),J(null))},Ar=async()=>{if(F){ie(!0),we(F.id);try{if(await d(F.id))w.success(`Contrasea reseteada para ${F.userName}`);else throw new Error("No se pudo resetear la contrasea");ce(!1),J(null)}catch(te){const je=te instanceof Error?te.message:"No se pudo resetear la contrasea";w.error(je)}finally{ie(!1),we(null)}}},xs=async te=>{We(!0);try{et==="create"?await _({name:te.name})&&(w.success("Sucursal creada correctamente"),vt(!1)):bn&&await y(bn.id,{name:te.name})&&(w.success("Sucursal actualizada correctamente"),vt(!1),W(null))}catch(je){const _t=je instanceof Error?je.message:"No se pudo guardar la sucursal";w.error(_t)}finally{We(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),l.jsxs("div",{className:"relative space-y-10 px-6 py-8 lg:px-10 lg:py-12",children:[l.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[l.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),l.jsxs("div",{className:"grid gap-10 px-8 py-10 md:px-12 lg:grid-cols-[2fr,1.2fr]",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Panel de Usuarios"}),l.jsx("h2",{className:"text-3xl font-semibold leading-tight md:text-4xl",children:"Gestiona usuarios y accesos centralizados"}),l.jsxs("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:[l.jsx("div",{className:"flex flex-col gap-3 md:flex-row",children:l.jsx("input",{className:"input-plain flex-1",placeholder:"Buscar por nombre, rol o usuario",value:fe,onChange:te=>ue(te.target.value)})}),l.jsx("div",{className:"flex flex-wrap gap-3",children:X1.map(te=>l.jsx("button",{type:"button",onClick:()=>B(te.value),className:`rounded-full px-4 py-2 text-sm font-semibold transition ${K===te.value?"bg-lead-50 text-brand-700 shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:te.label},te.value))})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-white/10 blur-xl"}),l.jsxs("div",{className:"relative space-y-5 rounded-[2rem] border border-white/20 bg-white/10 px-7 py-8 backdrop-blur",children:[l.jsx("div",{className:"grid grid-cols-2 gap-4",children:kn.cards.map(te=>l.jsxs("div",{className:`rounded-2xl bg-gradient-to-br ${te.accent} px-4 py-5 shadow-lg`,children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:te.label}),l.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:te.value})]},te.label))}),l.jsxs("div",{className:"space-y-2 rounded-xl border border-white/20 bg-white/10 p-4 text-sm text-white/80",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Roles operativos"}),kn.roleBreakdown.map(te=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:te.label}),l.jsx("span",{className:"font-semibold text-white",children:te.value})]},te.label))]})]})]})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${pe==="users"?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>Se("users"),children:"Usuarios"}),l.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${pe==="branches"?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>Se("branches"),children:"Sucursales"})]}),l.jsx("section",{className:"grid gap-8 xl:grid-cols-[1fr]",children:pe==="users"?l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de usuarios"}),l.jsxs("p",{className:"text-sm text-lead-500",children:[Qt.length," usuario(s) coinciden con el filtro."]})]}),l.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",onClick:hs,children:"Crear usuario"})]}),t?l.jsx(rn,{}):l.jsx(q1,{users:Qt,branchMap:g,onEdit:ps,onDeactivate:un,onResetPassword:dn,showResetButton:!0,busyUserId:le})]}):l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de sucursales"}),l.jsxs("p",{className:"text-sm text-lead-500",children:[p.length," sucursal(es) registradas."]})]}),l.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:fs,children:"Crear sucursal"})]}),v?l.jsx(rn,{}):l.jsx(Q1,{branches:p,onEdit:Mr,onDelete:ms})]})})]})]}),l.jsx(K1,{open:b,mode:E,initialUser:I,submitting:A,branches:p,branchesLoading:v,onClose:vi,onSubmit:Rr}),l.jsx(Y1,{open:Je,mode:et,initialData:bn,submitting:ke,onClose:Ir,onSubmit:xs}),l.jsx(vn,{open:Z,title:"Eliminar usuario",confirmLabel:"Eliminar",onConfirm:Dr,onCancel:Or,disabled:ne}),l.jsx(vn,{open:G,title:"Resetear contrasea",description:F?`Quieres que resetees la contrase de "${F.userName}"`:"",confirmLabel:"Si",cancelLabel:"No",onConfirm:Ar,onCancel:gs,disabled:R}),l.jsx(vn,{open:Ie,title:"Eliminar sucursal",confirmLabel:"Eliminar",onConfirm:zr,onCancel:Xn,disabled:Qn}),l.jsx(xi,{toasts:w.toasts,onDismiss:w.dismissToast})]})},eL=()=>{var s,a;const{user:e}=qn(),{getBranchNameById:t,branches:n,fetchBranches:i}=Qd();return Cl.useEffect(()=>{(!n||n.length===0)&&i().catch(()=>{})},[n,i]),e?l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"rounded-xl overflow-hidden shadow-lg",children:[l.jsx("div",{className:"px-6 py-8 bg-gradient-to-br from-brand-900 via-accent-600 to-lead-700 text-white",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-white/10 text-3xl font-bold",children:e.names?e.names.charAt(0):"U"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm uppercase tracking-wider text-white/80",children:"Mi cuenta"}),l.jsxs("h3",{className:"text-2xl font-bold",children:[e.names," ",e.lastName]}),l.jsx("p",{className:"mt-1 text-sm text-white/80",children:(s=e.role)==null?void 0:s.replace(/_/g," ")})]})]})}),l.jsx("div",{className:"p-4 bg-white",children:l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"rounded-md border border-lead-100 p-3 text-center",children:[l.jsx("div",{className:"text-sm text-lead-500",children:"Sucursal"}),l.jsx("div",{className:"mt-1 font-semibold text-lead-800",children:t(e.branchId??null)||"-"})]}),l.jsxs("div",{className:"rounded-md border border-lead-100 p-3 text-center",children:[l.jsx("div",{className:"text-sm text-lead-500",children:"Cdula"}),l.jsx("div",{className:"mt-1 font-semibold text-lead-800",children:e.ci})]})]})})]})}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("div",{className:"rounded-xl bg-white shadow-lg border border-lead-100 overflow-hidden",children:[l.jsxs("div",{className:"px-6 py-6 border-b border-lead-100 bg-gradient-to-r from-blue-50 via-accent-50 to-gray-50",children:[l.jsx("h2",{className:"text-lg font-bold text-lead-900",children:"Detalles de la cuenta"}),l.jsx("p",{className:"text-sm text-lead-500",children:"Informacin personal visible en el sistema"})]}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"overflow-hidden rounded-md border border-lead-100",children:l.jsxs("table",{className:"w-full table-auto",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-600",children:[l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-white rounded-tl-md",children:"Detalle"}),l.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-white rounded-tr-md",children:"Valor"})]})}),l.jsxs("tbody",{className:"divide-y divide-lead-100",children:[l.jsxs("tr",{className:"bg-white",children:[l.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700 w-1/3",children:"Usuario"}),l.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.userName})]}),l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Nombres"}),l.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.names})]}),l.jsxs("tr",{className:"bg-white",children:[l.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Primer apellido"}),l.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.lastName})]}),l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Segundo apellido"}),l.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.secondLastName??"-"})]}),l.jsxs("tr",{className:"bg-white",children:[l.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Cdula (CI)"}),l.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.ci})]}),l.jsxs("tr",{className:"bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Rol"}),l.jsx("td",{className:"px-6 py-4 text-lead-600",children:(a=e.role)==null?void 0:a.replace(/_/g," ")})]}),l.jsxs("tr",{className:"bg-white",children:[l.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Sucursal"}),l.jsx("td",{className:"px-6 py-4 text-lead-600",children:t(e.branchId??null)||"-"})]})]})]})})})]})})]})}):l.jsx("div",{className:"p-6",children:"No se encontr el usuario."})};function Xi(e){var t,n;if(e instanceof Error){const i=e;return(n=(t=i.response)==null?void 0:t.data)!=null&&n.message?i.response.data.message:e.message}return typeof e=="string"?e:"Error desconocido"}const Yd=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),[c,d]=x.useState(0),[f,p]=x.useState(1),g=x.useCallback(()=>a(null),[]),v=x.useCallback(async()=>{i(!0),a(null);try{const k=await oe.clients.listPaginated();t(k),d(k.length),p(1)}catch(k){const w=Xi(k);a({message:w,code:"FETCH_ERROR"})}finally{i(!1)}},[]),C=x.useCallback(async k=>{i(!0),a(null);try{return await oe.clients.create(k)}catch(w){const b=Xi(w);return a({message:b,code:"CREATE_ERROR"}),null}finally{i(!1)}},[]),S=x.useCallback(async(k,w)=>{i(!0),a(null);try{const b=await oe.clients.update(k,w);return t(j=>j.map(E=>E.id===k?b:E)),b}catch(b){const j=Xi(b);return a({message:j,code:"UPDATE_ERROR"}),null}finally{i(!1)}},[]),_=x.useCallback(async(k,w)=>{a(null);try{return await oe.clients.updateArea(k,w),t(b=>b.map(j=>j.id===k?{...j,areaId:w}:j)),!0}catch(b){const j=Xi(b);return a({message:j,code:"UPDATE_AREA_ERROR"}),!1}},[]),y=x.useCallback(async k=>{a(null);try{return await oe.clients.softDelete(k),t(w=>w.map(b=>b.id===k?{...b,status:!b.status}:b)),!0}catch(w){const b=Xi(w);return a({message:b,code:"DELETE_ERROR"}),!1}},[]);return{clients:e,isLoading:n,error:s,total:c,currentPage:f,fetchClients:v,createClient:C,updateClient:S,updateClientArea:_,deleteClient:y,clearError:g}};function tL(e){return{x:e.lng,y:e.lat}}function Nl(e){return e.map(tL)}function Gu(e,t){if(t.length<3)return!1;let n=!1;const i=t.length;for(let s=0,a=i-1;s<i;a=s++){const c=t[s].x,d=t[s].y,f=t[a].x,p=t[a].y;d>e.y!=p>e.y&&e.x<(f-c)*(e.y-d)/(p-d)+c&&(n=!n)}return n}function Io(e,t,n){const i=(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y);return Math.abs(i)<1e-10?0:i>0?1:2}function Ro(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function nL(e,t){const{p1:n,p2:i}=e,{p1:s,p2:a}=t,c=Io(n,i,s),d=Io(n,i,a),f=Io(s,a,n),p=Io(s,a,i);return!!(c!==d&&f!==p||c===0&&Ro(n,s,i)||d===0&&Ro(n,a,i)||f===0&&Ro(s,n,a)||p===0&&Ro(s,i,a))}function rL(e,t){if(e.length<3||t.length<3)return!1;for(const n of e)if(Gu(n,t))return!0;for(const n of t)if(Gu(n,e))return!0;for(let n=0;n<e.length;n++){const i={p1:e[n],p2:e[(n+1)%e.length]};for(let s=0;s<t.length;s++){const a={p1:t[s],p2:t[(s+1)%t.length]};if(nL(i,a))return!0}}return!1}function y0(e,t){return rL(Nl(e),Nl(t))}function _0(e,t){const n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function sL(e,t){const{p1:n,p2:i}=t,s=i.x-n.x,a=i.y-n.y,c=s*s+a*a;if(c===0)return n;let d=((e.x-n.x)*s+(e.y-n.y)*a)/c;return d=Math.max(0,Math.min(1,d)),{x:n.x+d*s,y:n.y+d*a}}function w0(e,t){if(t.length<2)return e;let n=t[0],i=1/0;for(let s=0;s<t.length;s++){const a={p1:t[s],p2:t[(s+1)%t.length]},c=sL(e,a),d=_0(e,c);d<i&&(i=d,n=c)}return n}const Oo=new f0;function iL(){const[e,t]=x.useState([]),[n,i]=x.useState(null),[s,a]=x.useState(!1),[c,d]=x.useState(null),f=x.useCallback(async()=>{var y,k;a(!0),d(null);try{const w=await Oo.getAll();t(w.data)}catch(w){d(((k=(y=w==null?void 0:w.response)==null?void 0:y.data)==null?void 0:k.message)||"Error al cargar las reas")}finally{a(!1)}},[]),p=x.useCallback(y=>{i(y)},[]),g=x.useCallback(async(y,k)=>{var w,b;a(!0),d(null);try{const j=await Oo.create(y,k);return t(E=>[...E,j]),j}catch(j){const E=((b=(w=j==null?void 0:j.response)==null?void 0:w.data)==null?void 0:b.message)||"Error al crear el rea";return d(E),null}finally{a(!1)}},[]),v=x.useCallback(async(y,k,w)=>{var b,j;a(!0),d(null);try{const E=await Oo.update(y,{name:k,area:w});return t(T=>T.map(I=>I.id===y?E:I)),i(T=>(T==null?void 0:T.id)===y?E:T),E}catch(E){const T=((j=(b=E==null?void 0:E.response)==null?void 0:b.data)==null?void 0:j.message)||"Error al actualizar el rea";return d(T),null}finally{a(!1)}},[]),C=x.useCallback(async y=>{var k,w;a(!0),d(null);try{return await Oo.delete(y),t(b=>b.filter(j=>j.id!==y)),i(b=>(b==null?void 0:b.id)===y?null:b),!0}catch(b){const j=((w=(k=b==null?void 0:b.response)==null?void 0:k.data)==null?void 0:w.message)||"Error al eliminar el rea";return d(j),!1}finally{a(!1)}},[]),S=x.useCallback(()=>{d(null)},[]),_=x.useCallback((y,k)=>{if(y.length<3)return{overlaps:!1};for(const w of e)if(!(k&&w.id===k)&&!(!w.area||w.area.length<3)&&y0(y,w.area))return{overlaps:!0,overlappingAreaName:w.name};return{overlaps:!1}},[e]);return x.useEffect(()=>{f()},[f]),{areas:e,selectedArea:n,loading:s,error:c,fetchAreas:f,selectArea:p,createArea:g,updateArea:v,deleteArea:C,clearError:S,checkOverlap:_}}const Xd=()=>{const[e,t]=x.useState([]),[n,i]=x.useState({}),[s,a]=x.useState(!1),c=x.useCallback(async()=>{a(!0);try{const d=await oe.areas.getAllCached();t(d),i(Ug(d))}catch(d){console.error("Error cargando reas",d)}finally{a(!1)}},[]);return x.useEffect(()=>{c()},[c]),{areas:e,areaMap:n,isLoading:s,fetchAreas:c}},b0=({areas:e,value:t,onChange:n,disabled:i=!1,required:s=!1,placeholder:a="Seleccionar rea"})=>l.jsxs("select",{value:t??"",onChange:c=>{const d=c.target.value;n(d===""?null:Number(d))},className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:i,required:s,children:[l.jsx("option",{value:"",children:a}),e.map(c=>l.jsx("option",{value:c.id,children:c.name},c.id))]}),aL=({clients:e,areaMap:t,areas:n,onUpdateArea:i,onViewDetails:s,onEdit:a,onDelete:c,isUpdating:d=!1})=>{const f=async(p,g)=>{g!==null&&await i(p,g)};return l.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre completo"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Razn social"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Telfono"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Tipo negocio"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Tipo cliente"}),l.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"rea"}),l.jsx("th",{className:"w-48 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-lead-200",children:e.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-sm text-lead-600",children:"No hay clientes registrados"})}):e.map(p=>l.jsxs("tr",{className:"transition-colors hover:bg-white",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:p.fullName}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:p.businessName}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:p.phone}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:p.businessType}),l.jsx("td",{className:"px-4 py-3 text-lead-600",children:p.clientType}),l.jsx("td",{className:"px-4 py-3 text-sm",children:p.areaId===null?l.jsx("div",{className:"max-w-[200px]",children:l.jsx(b0,{areas:n,value:null,onChange:g=>f(p.id,g),disabled:d,placeholder:"Asignar rea"})}):l.jsx("span",{className:"inline-flex items-center rounded-full bg-brand-50 px-2.5 py-0.5 text-xs font-medium text-brand-700",children:Hg(t,p.areaId)})}),l.jsx("td",{className:"px-4 py-3 text-center align-middle",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>s(p),className:"rounded bg-lead-200 px-3 py-1.5 font-medium text-lead-800 transition hover:bg-lead-300 disabled:opacity-50",title:"Ver detalles",children:"Ver"}),l.jsx("button",{onClick:()=>a(p),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",title:"Editar",children:"Editar"}),l.jsx("button",{onClick:()=>c(p),className:`rounded px-3 py-1.5 font-medium transition disabled:opacity-50 ${p.status?"bg-accent-100 text-accent-700 hover:bg-accent-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,title:p.status?"Desactivar":"Activar",children:p.status?"Eliminar":"Activar"})]})})]},p.id))})]})})},oL=({client:e,areaMap:t,onClose:n})=>e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden bg-black/60 backdrop-blur-sm p-4 md:p-0",children:l.jsxs("div",{className:"relative w-full max-w-3xl transform rounded-3xl bg-white shadow-2xl transition-all",children:[l.jsxs("div",{className:"relative h-56 w-full overflow-hidden rounded-t-3xl bg-gray-100",children:[l.jsx("button",{onClick:n,className:"absolute right-4 top-4 z-10 rounded-full bg-black/20 p-2 text-white hover:bg-black/40 transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.pathImage?l.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-100",children:l.jsx("img",{src:`http://localhost:3000${e.pathImage}`,alt:e.fullName,className:"max-h-full max-w-full object-contain",onError:s=>{s.target.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}})}):l.jsx("div",{className:"flex h-full w-full items-center justify-center bg-brand-100",children:l.jsx("div",{className:"mx-auto w-full max-w-2xl rounded-lg bg-white/80 p-6 text-center",children:l.jsx("div",{className:"text-5xl font-bold text-brand-600",children:e.fullName.charAt(0)})})})]}),l.jsxs("div",{className:"px-8 pb-8 pt-8",children:[l.jsxs("div",{className:"mb-2 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:e.fullName}),l.jsx("p",{className:"text-lg text-brand-600 font-medium",children:e.businessName}),l.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[l.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800",children:e.clientType}),l.jsx("span",{className:"inline-flex items-center rounded-full bg-purple-100 px-3 py-1 text-xs font-medium text-purple-800",children:e.businessType})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4 rounded-2xl bg-gray-50 p-5",children:[l.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500",children:"Informacin de Contacto"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Telfono"}),l.jsx("p",{className:"font-medium text-gray-900",children:e.phone})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:"NIT / CI"}),l.jsx("p",{className:"font-medium text-gray-900",children:e.nitCi})]})]})]})]}),l.jsxs("div",{className:"space-y-4 rounded-2xl bg-gray-50 p-5",children:[l.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500",children:"Ubicacin"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Direccin"}),l.jsx("p",{className:"font-medium text-gray-900",children:e.address||"No registrada"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:"rea Asignada"}),l.jsx("p",{className:"font-medium text-gray-900",children:e.areaId?Hg(t,e.areaId):"Sin asignar"})]})]})]})]})]}),e.position&&l.jsxs("div",{className:"mt-6 rounded-2xl border border-gray-200 bg-gray-50 p-4",children:[l.jsx("p",{className:"mb-2 text-sm font-medium text-gray-600",children:"Coordenadas GPS"}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-800",children:[l.jsxs("span",{className:"rounded bg-white px-3 py-1 shadow-sm",children:["Lat: ",e.position.lat]}),l.jsxs("span",{className:"rounded bg-white px-3 py-1 shadow-sm",children:["Lng: ",e.position.lng]})]})]})]})]})}):null,lL=[{value:"all",label:"Todos"},{value:"Mayorista",label:"Mayorista"},{value:"Minorista",label:"Minorista"},{value:"Regular",label:"Regular"},{value:"Otros",label:"Otros"}],cL=()=>{const e=Pr(),{clients:t,isLoading:n,error:i,fetchClients:s,updateClientArea:a,deleteClient:c,clearError:d}=Yd(),{areas:f,areaMap:p,isLoading:g}=Xd(),v=Kn(),[C,S]=x.useState(1),_=10,[y,k]=x.useState(""),[w,b]=x.useState("all"),[j,E]=x.useState(null),[T,I]=x.useState(null);x.useEffect(()=>{s()},[s]),x.useEffect(()=>{i&&(v.error(i.message),d())},[i,v,d]);const z=async(X,G)=>{await a(X,G)?v.success("rea asignada correctamente"):v.error("No se pudo asignar el rea")},A=X=>{E(X)},Q=X=>{e(`/clients/edit/${X.id}`,{state:{client:X}})},Z=X=>{I(X)},se=async()=>{if(!T)return;await c(T.id)?v.success(`Cliente ${T.status?"desactivado":"activado"} correctamente`):v.error("No se pudo cambiar el estado del cliente"),I(null)},ne=x.useMemo(()=>t.filter(X=>{const G=y.trim().toLowerCase(),ce=G.length===0||X.fullName.toLowerCase().includes(G)||X.businessName.toLowerCase().includes(G)||X.nitCi.includes(G),R=w==="all"||X.clientType===w;return ce&&R}),[t,y,w]),$=Math.ceil(ne.length/_),q=ne.slice((C-1)*_,C*_);return x.useEffect(()=>{S(1)},[y,w]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),l.jsxs("div",{className:"relative space-y-10 px-6 py-8 lg:px-10 lg:py-12",children:[l.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[l.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),l.jsx("div",{className:"grid gap-10 px-8 py-10 md:px-12 lg:grid-cols-[2fr,1.2fr]",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Gestin de Clientes"}),l.jsx("h2",{className:"text-3xl font-semibold leading-tight md:text-4xl",children:"Administra tu cartera de clientes"}),l.jsxs("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:[l.jsx("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:l.jsx("input",{className:"input-plain flex-1",placeholder:"Buscar por nombre, razn social o NIT...",value:y,onChange:X=>k(X.target.value)})}),l.jsx("div",{className:"flex flex-wrap gap-3",children:lL.map(X=>l.jsx("button",{type:"button",onClick:()=>b(X.value),className:`rounded-full px-4 py-2 text-sm font-semibold transition ${w===X.value?"bg-lead-50 text-brand-700 shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:X.label},X.value))})]})]})})]}),l.jsxs("section",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de clientes"}),l.jsxs("p",{className:"text-sm text-lead-500",children:[ne.length," cliente(s) encontrado(s). Pgina ",C," de ",$||1]})]}),l.jsxs("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:()=>e("/clients/new"),children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Nuevo cliente"]})]}),n||g?l.jsx(rn,{}):l.jsxs(l.Fragment,{children:[l.jsx(aL,{clients:q,areaMap:p,areas:f,onUpdateArea:z,onViewDetails:A,onEdit:Q,onDelete:Z}),$>1&&l.jsxs("div",{className:"mt-6 flex items-center justify-between border-t border-lead-100 pt-4",children:[l.jsx("button",{onClick:()=>S(X=>Math.max(1,X-1)),disabled:C===1,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),l.jsxs("span",{className:"text-sm text-lead-600",children:["Pgina ",C," de ",$]}),l.jsx("button",{onClick:()=>S(X=>Math.min($,X+1)),disabled:C===$,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})]})]})]}),l.jsx(oL,{client:j,areaMap:p,onClose:()=>E(null)}),T&&l.jsx(vn,{open:!!T,title:T.status?"Desactivar cliente":"Activar cliente",description:`Est seguro de que desea ${T.status?"desactivar":"activar"} al cliente "${T.fullName}"?`,confirmLabel:T.status?"Desactivar":"Activar",onConfirm:se,onCancel:()=>I(null)}),l.jsx(xi,{toasts:v.toasts,onDismiss:v.dismissToast})]})},uL=[{value:"Mayorista",label:"Mayorista"},{value:"Minorista",label:"Minorista"},{value:"Regular",label:"Regular"},{value:"Otro",label:"Otro"}],dL=[{value:"Ferreteria",label:"Ferretera"},{value:"Tienda",label:"Tienda"},{value:"Institucion",label:"Institucin"},{value:"Otro",label:"Otro"}],L0=({areas:e,onSubmit:t,onCancel:n,isSubmitting:i=!1,initialData:s})=>{const[a,c]=x.useState({fullName:"",nitCi:"",businessName:"",phone:"",businessType:"Ferreteria",clientType:"Regular",lat:"",lng:"",areaId:null,address:""}),[d,f]=x.useState(null),[p,g]=x.useState({});x.useEffect(()=>{var y,k;s&&c({fullName:s.fullName,nitCi:s.nitCi,businessName:s.businessName,phone:s.phone,businessType:s.businessType,clientType:s.clientType,lat:((y=s.position)==null?void 0:y.lat.toString())||"",lng:((k=s.position)==null?void 0:k.lng.toString())||"",areaId:s.areaId,address:s.address||""})},[s]);const v=y=>{const{name:k,value:w}=y.target;c(b=>({...b,[k]:w})),p[k]&&g(b=>({...b,[k]:""}))},C=y=>{var w;const k=(w=y.target.files)==null?void 0:w[0];k&&f(k)},S=()=>{const y={};a.fullName.trim()||(y.fullName="El nombre completo es obligatorio"),a.nitCi.trim()||(y.nitCi="El NIT/CI es obligatorio"),a.businessName.trim()||(y.businessName="La razn social es obligatoria"),a.phone.trim()||(y.phone="El telfono es obligatorio"),a.businessType||(y.businessType="Seleccione un tipo de negocio"),a.clientType||(y.clientType="Seleccione un tipo de cliente");const k=parseFloat(a.lat),w=parseFloat(a.lng);return(!a.lat.trim()||isNaN(k))&&(y.lat="La latitud es obligatoria y debe ser numrica"),(!a.lng.trim()||isNaN(w))&&(y.lng="La longitud es obligatoria y debe ser numrica"),g(y),Object.keys(y).length===0},_=async y=>{if(y.preventDefault(),!S())return;const k={fullName:a.fullName.trim(),nitCi:a.nitCi.trim(),businessName:a.businessName.trim(),phone:a.phone.trim(),businessType:a.businessType,clientType:a.clientType,position:{lat:parseFloat(a.lat),lng:parseFloat(a.lng)},areaId:a.areaId,address:a.address.trim()||void 0,imageFile:d||void 0};if(s){const w={...k,id:s.id};await t(w)}else await t(k)};return l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"fullName",className:"block text-sm font-medium text-lead-700",children:["Nombre completo ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"fullName",name:"fullName",value:a.fullName,onChange:v,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${p.fullName?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),p.fullName&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:p.fullName})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"nitCi",className:"block text-sm font-medium text-lead-700",children:["NIT/CI ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"nitCi",name:"nitCi",value:a.nitCi,onChange:v,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${p.nitCi?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),p.nitCi&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:p.nitCi})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"businessName",className:"block text-sm font-medium text-lead-700",children:["Razn social ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"businessName",name:"businessName",value:a.businessName,onChange:v,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${p.businessName?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),p.businessName&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:p.businessName})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-lead-700",children:["Telfono ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"phone",name:"phone",value:a.phone,onChange:v,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${p.phone?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),p.phone&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:p.phone})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"businessType",className:"block text-sm font-medium text-lead-700",children:["Tipo de negocio ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("select",{id:"businessType",name:"businessType",value:a.businessType,onChange:v,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${p.businessType?"border-red-500":"border-lead-300 bg-white"}`,disabled:i,children:dL.map(y=>l.jsx("option",{value:y.value,children:y.label},y.value))}),p.businessType&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:p.businessType})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"clientType",className:"block text-sm font-medium text-lead-700",children:["Tipo de cliente ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("select",{id:"clientType",name:"clientType",value:a.clientType,onChange:v,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${p.clientType?"border-red-500":"border-lead-300 bg-white"}`,disabled:i,children:uL.map(y=>l.jsx("option",{value:y.value,children:y.label},y.value))}),p.clientType&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:p.clientType})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"lat",className:"block text-sm font-medium text-lead-700",children:["Latitud ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",step:"any",id:"lat",name:"lat",value:a.lat,onChange:v,placeholder:"-17.393",className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${p.lat?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),p.lat&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:p.lat})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"lng",className:"block text-sm font-medium text-lead-700",children:["Longitud ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",step:"any",id:"lng",name:"lng",value:a.lng,onChange:v,placeholder:"-66.157",className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${p.lng?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),p.lng&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:p.lng})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"areaId",className:"block text-sm font-medium text-lead-700",children:"rea (opcional)"}),l.jsx(b0,{areas:e,value:a.areaId,onChange:y=>c(k=>({...k,areaId:y})),disabled:i,placeholder:"Sin asignar"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-lead-700",children:"Direccin (opcional)"}),l.jsx("input",{type:"text",id:"address",name:"address",value:a.address,onChange:v,className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:i})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-lead-700",children:"Imagen (opcional)"}),l.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:C,className:`mt-1 block w-full text-sm text-lead-500\r
              file:mr-4 file:py-2 file:px-4\r
              file:rounded-lg file:border-0\r
              file:text-sm file:font-semibold\r
              file:bg-brand-50 file:text-brand-700\r
              hover:file:bg-brand-100`,disabled:i}),d&&l.jsxs("p",{className:"mt-1 text-xs text-lead-600",children:["Archivo seleccionado: ",d.name]}),(s==null?void 0:s.pathImage)&&!d&&l.jsx("p",{className:"mt-1 text-xs text-lead-500",children:"Imagen actual guardada. Suba una nueva para reemplazarla."})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 border-t border-lead-100 pt-4",children:[l.jsx("button",{type:"button",onClick:n,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors",disabled:i,children:"Cancelar"}),l.jsx("button",{type:"submit",className:"rounded-lg bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-60 transition-all",disabled:i,children:i?"Guardando...":s?"Actualizar cliente":"Crear cliente"})]})]})},hL=()=>{const e=Pr(),{createClient:t}=Yd(),{areas:n,isLoading:i}=Xd(),s=Kn(),[a,c]=x.useState(!1),d=async p=>{c(!0);try{await t(p)?(s.success("Cliente creado correctamente"),setTimeout(()=>{e("/clients")},1e3)):s.error("No se pudo crear el cliente")}catch(g){s.error((g==null?void 0:g.message)||"Error al crear cliente")}finally{c(!1)}},f=()=>{e("/clients")};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative overflow-hidden min-h-screen",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),l.jsxs("div",{className:"relative space-y-6 px-6 py-8 lg:px-10 lg:py-12 max-w-5xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("button",{onClick:f,className:"flex h-10 w-10 items-center justify-center rounded-full bg-white border border-lead-200 text-lead-700 hover:bg-lead-50 transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-lead-900",children:"Nuevo Cliente"}),l.jsx("p",{className:"text-sm text-lead-500",children:"Complete los datos para registrar un nuevo cliente"})]})]}),l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 border-b border-lead-100 pb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-brand-900",children:"Informacin del cliente"}),l.jsx("p",{className:"text-sm text-lead-500",children:"Los campos marcados con * son obligatorios"})]}),i?l.jsxs("div",{className:"py-8 text-center",children:[l.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand-600 border-r-transparent"}),l.jsx("p",{className:"mt-2 text-sm text-lead-600",children:"Cargando reas..."})]}):l.jsx(L0,{areas:n,onSubmit:d,onCancel:f,isSubmitting:a})]})]})]}),l.jsx(xi,{toasts:s.toasts,onDismiss:s.dismissToast})]})},fL=()=>{var w;const{id:e}=x_(),t=Pr(),{clients:n,updateClient:i,fetchClients:s,isLoading:a}=Yd(),{areas:c,isLoading:d}=Xd(),f=Kn(),[p,g]=x.useState(!1),v=Number(e),_=((w=Gn().state)==null?void 0:w.client)??n.find(b=>b.id===v);x.useEffect(()=>{!_&&!a&&s()},[_,a,s]);const y=async b=>{if(v){g(!0);try{await i(v,b)?(f.success("Cliente actualizado correctamente"),setTimeout(()=>{t("/clients")},1e3)):f.error("No se pudo actualizar el cliente")}catch(j){f.error((j==null?void 0:j.message)||"Error al actualizar cliente")}finally{g(!1)}}},k=()=>{t("/clients")};return a||d?l.jsx("div",{className:"flex h-screen items-center justify-center",children:l.jsx(rn,{})}):_?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative overflow-hidden min-h-screen",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),l.jsxs("div",{className:"relative space-y-6 px-6 py-8 lg:px-10 lg:py-12 max-w-5xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("button",{onClick:k,className:"flex h-10 w-10 items-center justify-center rounded-full bg-white border border-lead-200 text-lead-700 hover:bg-lead-50 transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-lead-900",children:"Editar Cliente"}),l.jsx("p",{className:"text-sm text-lead-500",children:"Modifique los datos del cliente"})]})]}),l.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[l.jsxs("div",{className:"mb-6 border-b border-lead-100 pb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-brand-900",children:"Informacin del cliente"}),l.jsx("p",{className:"text-sm text-lead-500",children:"Los campos marcados con * son obligatorios"})]}),l.jsx(L0,{areas:c,onSubmit:y,onCancel:k,isSubmitting:p,initialData:_})]})]})]}),l.jsx(xi,{toasts:f.toasts,onDismiss:f.dismissToast})]}):l.jsxs("div",{className:"flex h-screen flex-col items-center justify-center gap-4",children:[l.jsx("p",{className:"text-lg text-lead-600",children:"Cliente no encontrado"}),l.jsx("button",{onClick:()=>t("/clients"),className:"rounded-lg bg-brand-600 px-4 py-2 text-white hover:bg-brand-700",children:"Volver a la lista"})]})};var qu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(fx,function(n){var i="1.9.4";function s(r){var o,u,h,m;for(u=1,h=arguments.length;u<h;u++){m=arguments[u];for(o in m)r[o]=m[o]}return r}var a=Object.create||function(){function r(){}return function(o){return r.prototype=o,new r}}();function c(r,o){var u=Array.prototype.slice;if(r.bind)return r.bind.apply(r,u.call(arguments,1));var h=u.call(arguments,2);return function(){return r.apply(o,h.length?h.concat(u.call(arguments)):arguments)}}var d=0;function f(r){return"_leaflet_id"in r||(r._leaflet_id=++d),r._leaflet_id}function p(r,o,u){var h,m,N,P;return P=function(){h=!1,m&&(N.apply(u,m),m=!1)},N=function(){h?m=arguments:(r.apply(u,arguments),setTimeout(P,o),h=!0)},N}function g(r,o,u){var h=o[1],m=o[0],N=h-m;return r===h&&u?r:((r-m)%N+N)%N+m}function v(){return!1}function C(r,o){if(o===!1)return r;var u=Math.pow(10,o===void 0?6:o);return Math.round(r*u)/u}function S(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function _(r){return S(r).split(/\s+/)}function y(r,o){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var u in o)r.options[u]=o[u];return r.options}function k(r,o,u){var h=[];for(var m in r)h.push(encodeURIComponent(u?m.toUpperCase():m)+"="+encodeURIComponent(r[m]));return(!o||o.indexOf("?")===-1?"?":"&")+h.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function b(r,o){return r.replace(w,function(u,h){var m=o[h];if(m===void 0)throw new Error("No value provided for variable "+u);return typeof m=="function"&&(m=m(o)),m})}var j=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function E(r,o){for(var u=0;u<r.length;u++)if(r[u]===o)return u;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var z=0;function A(r){var o=+new Date,u=Math.max(0,16-(o-z));return z=o+u,window.setTimeout(r,u)}var Q=window.requestAnimationFrame||I("RequestAnimationFrame")||A,Z=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function se(r,o,u){if(u&&Q===A)r.call(o);else return Q.call(window,c(r,o))}function ne(r){r&&Z.call(window,r)}var $={__proto__:null,extend:s,create:a,bind:c,get lastId(){return d},stamp:f,throttle:p,wrapNum:g,falseFn:v,formatNum:C,trim:S,splitWords:_,setOptions:y,getParamString:k,template:b,isArray:j,indexOf:E,emptyImageUrl:T,requestFn:Q,cancelFn:Z,requestAnimFrame:se,cancelAnimFrame:ne};function q(){}q.extend=function(r){var o=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,h=a(u);h.constructor=o,o.prototype=h;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return r.statics&&s(o,r.statics),r.includes&&(X(r.includes),s.apply(null,[h].concat(r.includes))),s(h,r),delete h.statics,delete h.includes,h.options&&(h.options=u.options?a(u.options):{},s(h.options,r.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,P=h._initHooks.length;N<P;N++)h._initHooks[N].call(this)}},o},q.include=function(r){var o=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=o,this.mergeOptions(r.options)),this},q.mergeOptions=function(r){return s(this.prototype.options,r),this},q.addInitHook=function(r){var o=Array.prototype.slice.call(arguments,1),u=typeof r=="function"?r:function(){this[r].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function X(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=j(r)?r:[r];for(var o=0;o<r.length;o++)r[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(r,o,u){if(typeof r=="object")for(var h in r)this._on(h,r[h],o);else{r=_(r);for(var m=0,N=r.length;m<N;m++)this._on(r[m],o,u)}return this},off:function(r,o,u){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var h in r)this._off(h,r[h],o);else{r=_(r);for(var m=arguments.length===1,N=0,P=r.length;N<P;N++)m?this._off(r[N]):this._off(r[N],o,u)}return this},_on:function(r,o,u,h){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(r,o,u)===!1){u===this&&(u=void 0);var m={fn:o,ctx:u};h&&(m.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(m)}},_off:function(r,o,u){var h,m,N;if(this._events&&(h=this._events[r],!!h)){if(arguments.length===1){if(this._firingCount)for(m=0,N=h.length;m<N;m++)h[m].fn=v;delete this._events[r];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var P=this._listens(r,o,u);if(P!==!1){var M=h[P];this._firingCount&&(M.fn=v,this._events[r]=h=h.slice()),h.splice(P,1)}}},fire:function(r,o,u){if(!this.listens(r,u))return this;var h=s({},o,{type:r,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[r];if(m){this._firingCount=this._firingCount+1||1;for(var N=0,P=m.length;N<P;N++){var M=m[N],O=M.fn;M.once&&this.off(r,O,M.ctx),O.call(M.ctx||this,h)}this._firingCount--}}return u&&this._propagateEvent(h),this},listens:function(r,o,u,h){typeof r!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(h=!!o,m=void 0,u=void 0);var N=this._events&&this._events[r];if(N&&N.length&&this._listens(r,m,u)!==!1)return!0;if(h){for(var P in this._eventParents)if(this._eventParents[P].listens(r,o,u,h))return!0}return!1},_listens:function(r,o,u){if(!this._events)return!1;var h=this._events[r]||[];if(!o)return!!h.length;u===this&&(u=void 0);for(var m=0,N=h.length;m<N;m++)if(h[m].fn===o&&h[m].ctx===u)return m;return!1},once:function(r,o,u){if(typeof r=="object")for(var h in r)this._on(h,r[h],o,!0);else{r=_(r);for(var m=0,N=r.length;m<N;m++)this._on(r[m],o,u,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[f(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[f(r)],this},_propagateEvent:function(r){for(var o in this._eventParents)this._eventParents[o].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var ce=q.extend(G);function R(r,o,u){this.x=u?Math.round(r):r,this.y=u?Math.round(o):o}var ie=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};R.prototype={clone:function(){return new R(this.x,this.y)},add:function(r){return this.clone()._add(F(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(F(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new R(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new R(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ie(this.x),this.y=ie(this.y),this},distanceTo:function(r){r=F(r);var o=r.x-this.x,u=r.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(r){return r=F(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=F(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+C(this.x)+", "+C(this.y)+")"}};function F(r,o,u){return r instanceof R?r:j(r)?new R(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new R(r.x,r.y):new R(r,o,u)}function J(r,o){if(r)for(var u=o?[r,o]:r,h=0,m=u.length;h<m;h++)this.extend(u[h])}J.prototype={extend:function(r){var o,u;if(!r)return this;if(r instanceof R||typeof r[0]=="number"||"x"in r)o=u=F(r);else if(r=le(r),o=r.min,u=r.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(r){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var o,u;return typeof r[0]=="number"||r instanceof R?r=F(r):r=le(r),r instanceof J?(o=r.min,u=r.max):o=u=r,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(r){r=le(r);var o=this.min,u=this.max,h=r.min,m=r.max,N=m.x>=o.x&&h.x<=u.x,P=m.y>=o.y&&h.y<=u.y;return N&&P},overlaps:function(r){r=le(r);var o=this.min,u=this.max,h=r.min,m=r.max,N=m.x>o.x&&h.x<u.x,P=m.y>o.y&&h.y<u.y;return N&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var o=this.min,u=this.max,h=Math.abs(o.x-u.x)*r,m=Math.abs(o.y-u.y)*r;return le(F(o.x-h,o.y-m),F(u.x+h,u.y+m))},equals:function(r){return r?(r=le(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function le(r,o){return!r||r instanceof J?r:new J(r,o)}function we(r,o){if(r)for(var u=o?[r,o]:r,h=0,m=u.length;h<m;h++)this.extend(u[h])}we.prototype={extend:function(r){var o=this._southWest,u=this._northEast,h,m;if(r instanceof ue)h=r,m=r;else if(r instanceof we){if(h=r._southWest,m=r._northEast,!h||!m)return this}else return r?this.extend(K(r)||fe(r)):this;return!o&&!u?(this._southWest=new ue(h.lat,h.lng),this._northEast=new ue(m.lat,m.lng)):(o.lat=Math.min(h.lat,o.lat),o.lng=Math.min(h.lng,o.lng),u.lat=Math.max(m.lat,u.lat),u.lng=Math.max(m.lng,u.lng)),this},pad:function(r){var o=this._southWest,u=this._northEast,h=Math.abs(o.lat-u.lat)*r,m=Math.abs(o.lng-u.lng)*r;return new we(new ue(o.lat-h,o.lng-m),new ue(u.lat+h,u.lng+m))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ue||"lat"in r?r=K(r):r=fe(r);var o=this._southWest,u=this._northEast,h,m;return r instanceof we?(h=r.getSouthWest(),m=r.getNorthEast()):h=m=r,h.lat>=o.lat&&m.lat<=u.lat&&h.lng>=o.lng&&m.lng<=u.lng},intersects:function(r){r=fe(r);var o=this._southWest,u=this._northEast,h=r.getSouthWest(),m=r.getNorthEast(),N=m.lat>=o.lat&&h.lat<=u.lat,P=m.lng>=o.lng&&h.lng<=u.lng;return N&&P},overlaps:function(r){r=fe(r);var o=this._southWest,u=this._northEast,h=r.getSouthWest(),m=r.getNorthEast(),N=m.lat>o.lat&&h.lat<u.lat,P=m.lng>o.lng&&h.lng<u.lng;return N&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,o){return r?(r=fe(r),this._southWest.equals(r.getSouthWest(),o)&&this._northEast.equals(r.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(r,o){return r instanceof we?r:new we(r,o)}function ue(r,o,u){if(isNaN(r)||isNaN(o))throw new Error("Invalid LatLng object: ("+r+", "+o+")");this.lat=+r,this.lng=+o,u!==void 0&&(this.alt=+u)}ue.prototype={equals:function(r,o){if(!r)return!1;r=K(r);var u=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return u<=(o===void 0?1e-9:o)},toString:function(r){return"LatLng("+C(this.lat,r)+", "+C(this.lng,r)+")"},distanceTo:function(r){return pe.distance(this,K(r))},wrap:function(){return pe.wrapLatLng(this)},toBounds:function(r){var o=180*r/40075017,u=o/Math.cos(Math.PI/180*this.lat);return fe([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function K(r,o,u){return r instanceof ue?r:j(r)&&typeof r[0]!="object"?r.length===3?new ue(r[0],r[1],r[2]):r.length===2?new ue(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ue(r.lat,"lng"in r?r.lng:r.lon,r.alt):o===void 0?null:new ue(r,o,u)}var B={latLngToPoint:function(r,o){var u=this.projection.project(r),h=this.scale(o);return this.transformation._transform(u,h)},pointToLatLng:function(r,o){var u=this.scale(o),h=this.transformation.untransform(r,u);return this.projection.unproject(h)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(r),h=this.transformation.transform(o.min,u),m=this.transformation.transform(o.max,u);return new J(h,m)},infinite:!1,wrapLatLng:function(r){var o=this.wrapLng?g(r.lng,this.wrapLng,!0):r.lng,u=this.wrapLat?g(r.lat,this.wrapLat,!0):r.lat,h=r.alt;return new ue(u,o,h)},wrapLatLngBounds:function(r){var o=r.getCenter(),u=this.wrapLatLng(o),h=o.lat-u.lat,m=o.lng-u.lng;if(h===0&&m===0)return r;var N=r.getSouthWest(),P=r.getNorthEast(),M=new ue(N.lat-h,N.lng-m),O=new ue(P.lat-h,P.lng-m);return new we(M,O)}},pe=s({},B,{wrapLng:[-180,180],R:6371e3,distance:function(r,o){var u=Math.PI/180,h=r.lat*u,m=o.lat*u,N=Math.sin((o.lat-r.lat)*u/2),P=Math.sin((o.lng-r.lng)*u/2),M=N*N+Math.cos(h)*Math.cos(m)*P*P,O=2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M));return this.R*O}}),Se=6378137,Je={R:Se,MAX_LATITUDE:85.0511287798,project:function(r){var o=Math.PI/180,u=this.MAX_LATITUDE,h=Math.max(Math.min(u,r.lat),-u),m=Math.sin(h*o);return new R(this.R*r.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(r){var o=180/Math.PI;return new ue((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*o,r.x*o/this.R)},bounds:function(){var r=Se*Math.PI;return new J([-r,-r],[r,r])}()};function vt(r,o,u,h){if(j(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=o,this._c=u,this._d=h}vt.prototype={transform:function(r,o){return this._transform(r.clone(),o)},_transform:function(r,o){return o=o||1,r.x=o*(this._a*r.x+this._b),r.y=o*(this._c*r.y+this._d),r},untransform:function(r,o){return o=o||1,new R((r.x/o-this._b)/this._a,(r.y/o-this._d)/this._c)}};function et(r,o,u,h){return new vt(r,o,u,h)}var At=s({},pe,{code:"EPSG:3857",projection:Je,transformation:function(){var r=.5/(Math.PI*Je.R);return et(r,.5,-r,.5)}()}),bn=s({},At,{code:"EPSG:900913"});function W(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ke(r,o){var u="",h,m,N,P,M,O;for(h=0,N=r.length;h<N;h++){for(M=r[h],m=0,P=M.length;m<P;m++)O=M[m],u+=(m?"L":"M")+O.x+" "+O.y;u+=o?ae.svg?"z":"x":""}return u||"M0 0"}var We=document.documentElement.style,Ie="ActiveXObject"in window,yt=Ie&&!document.addEventListener,Qn="msLaunchUri"in navigator&&!("documentMode"in document),Ln=wt("webkit"),Yn=wt("android"),cn=wt("android 2")||wt("android 3"),Tr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Nn=Yn&&wt("Google")&&Tr<537&&!("AudioNode"in window),Qt=!!window.opera,kn=!Qn&&wt("chrome"),hs=wt("gecko")&&!Ln&&!Qt&&!Ie,fs=!kn&&wt("safari"),ps=wt("phantom"),Mr="OTransition"in We,vi=navigator.platform.indexOf("Win")===0,Ir=Ie&&"transition"in We,Rr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!cn,un="MozPerspective"in We,ms=!window.L_DISABLE_3D&&(Ir||Rr||un)&&!Mr&&!ps,dn=typeof orientation<"u"||wt("mobile"),Or=dn&&Ln,Xn=dn&&Rr,Dr=!window.PointerEvent&&window.MSPointerEvent,zr=!!(window.PointerEvent||Dr),gs="ontouchstart"in window||!!window.TouchEvent,Ar=!window.L_NO_TOUCH&&(gs||zr),xs=dn&&Qt,Br=dn&&hs,Cn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,te=function(){var r=!1;try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return r}(),je=function(){return!!document.createElement("canvas").getContext}(),_t=!!(document.createElementNS&&W("svg").createSVGRect),Fr=!!_t&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Pt=!_t&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var o=r.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Fa=navigator.platform.indexOf("Mac")===0,Ua=navigator.platform.indexOf("Linux")===0;function wt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ae={ie:Ie,ielt9:yt,edge:Qn,webkit:Ln,android:Yn,android23:cn,androidStock:Nn,opera:Qt,chrome:kn,gecko:hs,safari:fs,phantom:ps,opera12:Mr,win:vi,ie3d:Ir,webkit3d:Rr,gecko3d:un,any3d:ms,mobile:dn,mobileWebkit:Or,mobileWebkit3d:Xn,msPointer:Dr,pointer:zr,touch:Ar,touchNative:gs,mobileOpera:xs,mobileGecko:Br,retina:Cn,passiveEvents:te,canvas:je,svg:_t,vml:Pt,inlineSvg:Fr,mac:Fa,linux:Ua},yi=ae.msPointer?"MSPointerDown":"pointerdown",_i=ae.msPointer?"MSPointerMove":"pointermove",Ha=ae.msPointer?"MSPointerUp":"pointerup",vs=ae.msPointer?"MSPointerCancel":"pointercancel",ys={touchstart:yi,touchmove:_i,touchend:Ha,touchcancel:vs},wi={touchstart:ws,touchmove:Jn,touchend:Jn,touchcancel:Jn},Yt={},_s=!1;function Ql(r,o,u){return o==="touchstart"&&Wa(),wi[o]?(u=wi[o].bind(this,u),r.addEventListener(ys[o],u,!1),u):(console.warn("wrong event specified:",o),v)}function Za(r,o,u){if(!ys[o]){console.warn("wrong event specified:",o);return}r.removeEventListener(ys[o],u,!1)}function Yl(r){Yt[r.pointerId]=r}function Ur(r){Yt[r.pointerId]&&(Yt[r.pointerId]=r)}function bi(r){delete Yt[r.pointerId]}function Wa(){_s||(document.addEventListener(yi,Yl,!0),document.addEventListener(_i,Ur,!0),document.addEventListener(Ha,bi,!0),document.addEventListener(vs,bi,!0),_s=!0)}function Jn(r,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in Yt)o.touches.push(Yt[u]);o.changedTouches=[o],r(o)}}function ws(r,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&Ge(o),Jn(r,o)}function Va(r){var o={},u,h;for(h in r)u=r[h],o[h]=u&&u.bind?u.bind(r):u;return r=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var $a=200;function Xl(r,o){r.addEventListener("dblclick",o);var u=0,h;function m(N){if(N.detail!==1){h=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var P=Qa(N);if(!(P.some(function(O){return O instanceof HTMLLabelElement&&O.attributes.for})&&!P.some(function(O){return O instanceof HTMLInputElement||O instanceof HTMLSelectElement}))){var M=Date.now();M-u<=$a?(h++,h===2&&o(Va(N))):h=1,u=M}}}return r.addEventListener("click",m),{dblclick:o,simDblclick:m}}function Li(r,o){r.removeEventListener("dblclick",o.dblclick),r.removeEventListener("click",o.simDblclick)}var bs=Vr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),er=Vr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Hr=er==="webkitTransition"||er==="OTransition"?er+"End":"transitionend";function Ls(r){return typeof r=="string"?document.getElementById(r):r}function Zr(r,o){var u=r.style[o]||r.currentStyle&&r.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(r,null);u=h?h[o]:null}return u==="auto"?null:u}function be(r,o,u){var h=document.createElement(r);return h.className=o||"",u&&u.appendChild(h),h}function Pe(r){var o=r.parentNode;o&&o.removeChild(r)}function hn(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function jn(r){var o=r.parentNode;o&&o.lastChild!==r&&o.appendChild(r)}function Sn(r){var o=r.parentNode;o&&o.firstChild!==r&&o.insertBefore(r,o.firstChild)}function Wr(r,o){if(r.classList!==void 0)return r.classList.contains(o);var u=ks(r);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function he(r,o){if(r.classList!==void 0)for(var u=_(o),h=0,m=u.length;h<m;h++)r.classList.add(u[h]);else if(!Wr(r,o)){var N=ks(r);Ns(r,(N?N+" ":"")+o)}}function Re(r,o){r.classList!==void 0?r.classList.remove(o):Ns(r,S((" "+ks(r)+" ").replace(" "+o+" "," ")))}function Ns(r,o){r.className.baseVal===void 0?r.className=o:r.className.baseVal=o}function ks(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function at(r,o){"opacity"in r.style?r.style.opacity=o:"filter"in r.style&&Ga(r,o)}function Ga(r,o){var u=!1,h="DXImageTransform.Microsoft.Alpha";try{u=r.filters.item(h)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):r.style.filter+=" progid:"+h+"(opacity="+o+")"}function Vr(r){for(var o=document.documentElement.style,u=0;u<r.length;u++)if(r[u]in o)return r[u];return!1}function Bt(r,o,u){var h=o||new R(0,0);r.style[bs]=(ae.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(u?" scale("+u+")":"")}function Oe(r,o){r._leaflet_pos=o,ae.any3d?Bt(r,o):(r.style.left=o.x+"px",r.style.top=o.y+"px")}function En(r){return r._leaflet_pos||new R(0,0)}var tr,nr,Cs;if("onselectstart"in document)tr=function(){me(window,"selectstart",Ge)},nr=function(){Ce(window,"selectstart",Ge)};else{var rr=Vr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);tr=function(){if(rr){var r=document.documentElement.style;Cs=r[rr],r[rr]="none"}},nr=function(){rr&&(document.documentElement.style[rr]=Cs,Cs=void 0)}}function Ni(){me(window,"dragstart",Ge)}function ki(){Ce(window,"dragstart",Ge)}var js,Ci;function ji(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Ss(),js=r,Ci=r.style.outlineStyle,r.style.outlineStyle="none",me(window,"keydown",Ss))}function Ss(){js&&(js.style.outlineStyle=Ci,js=void 0,Ci=void 0,Ce(window,"keydown",Ss))}function qa(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Si(r){var o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}var Jl={__proto__:null,TRANSFORM:bs,TRANSITION:er,TRANSITION_END:Hr,get:Ls,getStyle:Zr,create:be,remove:Pe,empty:hn,toFront:jn,toBack:Sn,hasClass:Wr,addClass:he,removeClass:Re,setClass:Ns,getClass:ks,setOpacity:at,testProp:Vr,setTransform:Bt,setPosition:Oe,getPosition:En,get disableTextSelection(){return tr},get enableTextSelection(){return nr},disableImageDrag:Ni,enableImageDrag:ki,preventOutline:ji,restoreOutline:Ss,getSizedParentNode:qa,getScale:Si};function me(r,o,u,h){if(o&&typeof o=="object")for(var m in o)Pi(r,m,o[m],u);else{o=_(o);for(var N=0,P=o.length;N<P;N++)Pi(r,o[N],u,h)}return this}var Ft="_leaflet_events";function Ce(r,o,u,h){if(arguments.length===1)Ka(r),delete r[Ft];else if(o&&typeof o=="object")for(var m in o)Ti(r,m,o[m],u);else if(o=_(o),arguments.length===2)Ka(r,function(M){return E(o,M)!==-1});else for(var N=0,P=o.length;N<P;N++)Ti(r,o[N],u,h);return this}function Ka(r,o){for(var u in r[Ft]){var h=u.split(/\d/)[0];(!o||o(h))&&Ti(r,h,null,null,u)}}var Ei={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pi(r,o,u,h){var m=o+f(u)+(h?"_"+f(h):"");if(r[Ft]&&r[Ft][m])return this;var N=function(M){return u.call(h||r,M||window.event)},P=N;!ae.touchNative&&ae.pointer&&o.indexOf("touch")===0?N=Ql(r,o,N):ae.touch&&o==="dblclick"?N=Xl(r,N):"addEventListener"in r?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?r.addEventListener(Ei[o]||o,N,ae.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(N=function(M){M=M||window.event,Ii(r,M)&&P(M)},r.addEventListener(Ei[o],N,!1)):r.addEventListener(o,P,!1):r.attachEvent("on"+o,N),r[Ft]=r[Ft]||{},r[Ft][m]=N}function Ti(r,o,u,h,m){m=m||o+f(u)+(h?"_"+f(h):"");var N=r[Ft]&&r[Ft][m];if(!N)return this;!ae.touchNative&&ae.pointer&&o.indexOf("touch")===0?Za(r,o,N):ae.touch&&o==="dblclick"?Li(r,N):"removeEventListener"in r?r.removeEventListener(Ei[o]||o,N,!1):r.detachEvent("on"+o,N),r[Ft][m]=null}function Pn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Mi(r){return Pi(r,"wheel",Pn),this}function $r(r){return me(r,"mousedown touchstart dblclick contextmenu",Pn),r._leaflet_disable_click=!0,this}function Ge(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Tn(r){return Ge(r),Pn(r),this}function Qa(r){if(r.composedPath)return r.composedPath();for(var o=[],u=r.target;u;)o.push(u),u=u.parentNode;return o}function Ya(r,o){if(!o)return new R(r.clientX,r.clientY);var u=Si(o),h=u.boundingClientRect;return new R((r.clientX-h.left)/u.x-o.clientLeft,(r.clientY-h.top)/u.y-o.clientTop)}var ec=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xa(r){return ae.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/ec:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Ii(r,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==r;)u=u.parentNode}catch{return!1}return u!==r}var tc={__proto__:null,on:me,off:Ce,stopPropagation:Pn,disableScrollPropagation:Mi,disableClickPropagation:$r,preventDefault:Ge,stop:Tn,getPropagationPath:Qa,getMousePosition:Ya,getWheelDelta:Xa,isExternalTarget:Ii,addListener:me,removeListener:Ce},Ja=ce.extend({run:function(r,o,u,h){this.stop(),this._el=r,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=En(r),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=se(this._animate,this),this._step()},_step:function(r){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),r):(this._runFrame(1),this._complete())},_runFrame:function(r,o){var u=this._startPos.add(this._offset.multiplyBy(r));o&&u._round(),Oe(this._el,u),this.fire("step")},_complete:function(){ne(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),_e=ce.extend({options:{crs:At,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,o){o=y(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(K(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=er&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,Hr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),r=this._limitCenter(K(r),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var h=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,o,u.zoom):this._tryAnimatedPan(r,u.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(r,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(r,o){return this._loaded?this.setView(this.getCenter(),r,{zoom:o}):(this._zoom=r,this)},zoomIn:function(r,o){return r=r||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,o)},zoomOut:function(r,o){return r=r||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,o)},setZoomAround:function(r,o,u){var h=this.getZoomScale(o),m=this.getSize().divideBy(2),N=r instanceof R?r:this.latLngToContainerPoint(r),P=N.subtract(m).multiplyBy(1-1/h),M=this.containerPointToLatLng(m.add(P));return this.setView(M,o,{zoom:u})},_getBoundsCenterZoom:function(r,o){o=o||{},r=r.getBounds?r.getBounds():fe(r);var u=F(o.paddingTopLeft||o.padding||[0,0]),h=F(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(r,!1,u.add(h));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:r.getCenter(),zoom:m};var N=h.subtract(u).divideBy(2),P=this.project(r.getSouthWest(),m),M=this.project(r.getNorthEast(),m),O=this.unproject(P.add(M).divideBy(2).add(N),m);return{center:O,zoom:m}},fitBounds:function(r,o){if(r=fe(r),!r.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(r,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,o){return this.setView(r,this._zoom,{pan:o})},panBy:function(r,o){if(r=F(r).round(),o=o||{},!r.x&&!r.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ja,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){he(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,o,u){if(u=u||{},u.animate===!1||!ae.any3d)return this.setView(r,o,u);this._stop();var h=this.project(this.getCenter()),m=this.project(r),N=this.getSize(),P=this._zoom;r=K(r),o=o===void 0?P:o;var M=Math.max(N.x,N.y),O=M*this.getZoomScale(P,o),U=m.distanceTo(h)||1,ee=1.42,de=ee*ee;function ve(Ve){var po=Ve?-1:1,ax=Ve?O:M,ox=O*O-M*M+po*de*de*U*U,lx=2*ax*de*U,fc=ox/lx,Ph=Math.sqrt(fc*fc+1)-fc,cx=Ph<1e-9?-18:Math.log(Ph);return cx}function ht(Ve){return(Math.exp(Ve)-Math.exp(-Ve))/2}function Qe(Ve){return(Math.exp(Ve)+Math.exp(-Ve))/2}function Zt(Ve){return ht(Ve)/Qe(Ve)}var bt=ve(0);function Rs(Ve){return M*(Qe(bt)/Qe(bt+ee*Ve))}function nx(Ve){return M*(Qe(bt)*Zt(bt+ee*Ve)-ht(bt))/de}function rx(Ve){return 1-Math.pow(1-Ve,1.5)}var sx=Date.now(),Sh=(ve(1)-bt)/ee,ix=u.duration?1e3*u.duration:1e3*Sh*.8;function Eh(){var Ve=(Date.now()-sx)/ix,po=rx(Ve)*Sh;Ve<=1?(this._flyToFrame=se(Eh,this),this._move(this.unproject(h.add(m.subtract(h).multiplyBy(nx(po)/U)),P),this.getScaleZoom(M/Rs(po),P),{flyTo:!0})):this._move(r,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Eh.call(this),this},flyToBounds:function(r,o){var u=this._getBoundsCenterZoom(r,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(r){return r=fe(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var o=this.options.minZoom;return this.options.minZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var o=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,o){this._enforcingBounds=!0;var u=this.getCenter(),h=this._limitCenter(u,this._zoom,fe(r));return u.equals(h)||this.panTo(h,o),this._enforcingBounds=!1,this},panInside:function(r,o){o=o||{};var u=F(o.paddingTopLeft||o.padding||[0,0]),h=F(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),N=this.project(r),P=this.getPixelBounds(),M=le([P.min.add(u),P.max.subtract(h)]),O=M.getSize();if(!M.contains(N)){this._enforcingBounds=!0;var U=N.subtract(M.getCenter()),ee=M.extend(N).getSize().subtract(O);m.x+=U.x<0?-ee.x:ee.x,m.y+=U.y<0?-ee.y:ee.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),h=o.divideBy(2).round(),m=u.divideBy(2).round(),N=h.subtract(m);return!N.x&&!N.y?this:(r.animate&&r.pan?this.panBy(N):(r.pan&&this._rawPanBy(N),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=c(this._handleGeolocationResponse,this),u=c(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,r):navigator.geolocation.getCurrentPosition(o,u,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var o=r.code,u=r.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var o=r.coords.latitude,u=r.coords.longitude,h=new ue(o,u),m=h.toBounds(r.coords.accuracy*2),N=this._locateOptions;if(N.setView){var P=this.getBoundsZoom(m);this.setView(h,N.maxZoom?Math.min(P,N.maxZoom):P)}var M={latlng:h,bounds:m,timestamp:r.timestamp};for(var O in r.coords)typeof r.coords[O]=="number"&&(M[O]=r.coords[O]);this.fire("locationfound",M)}},addHandler:function(r,o){if(!o)return this;var u=this[r]=new o(this);return this._handlers.push(u),this.options[r]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ne(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Pe(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,o){var u="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),h=be("div",u,o||this._mapPane);return r&&(this._panes[r]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),o=this.unproject(r.getBottomLeft()),u=this.unproject(r.getTopRight());return new we(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,o,u){r=fe(r),u=F(u||[0,0]);var h=this.getZoom()||0,m=this.getMinZoom(),N=this.getMaxZoom(),P=r.getNorthWest(),M=r.getSouthEast(),O=this.getSize().subtract(u),U=le(this.project(M,h),this.project(P,h)).getSize(),ee=ae.any3d?this.options.zoomSnap:1,de=O.x/U.x,ve=O.y/U.y,ht=o?Math.max(de,ve):Math.min(de,ve);return h=this.getScaleZoom(ht,h),ee&&(h=Math.round(h/(ee/100))*(ee/100),h=o?Math.ceil(h/ee)*ee:Math.floor(h/ee)*ee),Math.max(m,Math.min(N,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,o){var u=this._getTopLeftPoint(r,o);return new J(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(r)/u.scale(o)},getScaleZoom:function(r,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var h=u.zoom(r*u.scale(o));return isNaN(h)?1/0:h},project:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(K(r),o)},unproject:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(F(r),o)},layerPointToLatLng:function(r){var o=F(r).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(r){var o=this.project(K(r))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(K(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(fe(r))},distance:function(r,o){return this.options.crs.distance(K(r),K(o))},containerPointToLayerPoint:function(r){return F(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return F(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var o=this.containerPointToLayerPoint(F(r));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(K(r)))},mouseEventToContainerPoint:function(r){return Ya(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var o=this._container=Ls(r);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,he(r,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Zr(r,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Oe(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(he(r.markerPane,"leaflet-zoom-hide"),he(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,o,u){Oe(this._mapPane,new R(0,0));var h=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,u)._move(r,o)._moveEnd(m),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(r,o){return r&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(r,o,u,h){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),h?u&&u.pinch&&this.fire("zoom",u):((m||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ne(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Oe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[f(this._container)]=this;var o=r?Ce:me;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ne(this._resizeRequest),this._resizeRequest=se(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,o){for(var u=[],h,m=o==="mouseout"||o==="mouseover",N=r.target||r.srcElement,P=!1;N;){if(h=this._targets[f(N)],h&&(o==="click"||o==="preclick")&&this._draggableMoved(h)){P=!0;break}if(h&&h.listens(o,!0)&&(m&&!Ii(N,r)||(u.push(h),m))||N===this._container)break;N=N.parentNode}return!u.length&&!P&&!m&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var o=r.target||r.srcElement;if(!(!this._loaded||o._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(o))){var u=r.type;u==="mousedown"&&ji(o),this._fireDOMEvent(r,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,o,u){if(r.type==="click"){var h=s({},r);h.type="preclick",this._fireDOMEvent(h,h.type,u)}var m=this._findEventTargets(r,o);if(u){for(var N=[],P=0;P<u.length;P++)u[P].listens(o,!0)&&N.push(u[P]);m=N.concat(m)}if(m.length){o==="contextmenu"&&Ge(r);var M=m[0],O={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var U=M.getLatLng&&(!M._radius||M._radius<=10);O.containerPoint=U?this.latLngToContainerPoint(M.getLatLng()):this.mouseEventToContainerPoint(r),O.layerPoint=this.containerPointToLayerPoint(O.containerPoint),O.latlng=U?M.getLatLng():this.layerPointToLatLng(O.layerPoint)}for(P=0;P<m.length;P++)if(m[P].fire(o,O,!0),O.originalEvent._stopped||m[P].options.bubblingMouseEvents===!1&&E(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,o=this._handlers.length;r<o;r++)this._handlers[r].disable()},whenReady:function(r,o){return this._loaded?r.call(o||this,{target:this}):this.on("load",r,o),this},_getMapPanePos:function(){return En(this._mapPane)||new R(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,o){var u=r&&o!==void 0?this._getNewPixelOrigin(r,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,o){var u=this.getSize()._divideBy(2);return this.project(r,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,o,u){var h=this._getNewPixelOrigin(u,o);return this.project(r,o)._subtract(h)},_latLngBoundsToNewLayerBounds:function(r,o,u){var h=this._getNewPixelOrigin(u,o);return le([this.project(r.getSouthWest(),o)._subtract(h),this.project(r.getNorthWest(),o)._subtract(h),this.project(r.getSouthEast(),o)._subtract(h),this.project(r.getNorthEast(),o)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,o,u){if(!u)return r;var h=this.project(r,o),m=this.getSize().divideBy(2),N=new J(h.subtract(m),h.add(m)),P=this._getBoundsOffset(N,u,o);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?r:this.unproject(h.add(P),o)},_limitOffset:function(r,o){if(!o)return r;var u=this.getPixelBounds(),h=new J(u.min.add(r),u.max.add(r));return r.add(this._getBoundsOffset(h,o))},_getBoundsOffset:function(r,o,u){var h=le(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),m=h.min.subtract(r.min),N=h.max.subtract(r.max),P=this._rebound(m.x,-N.x),M=this._rebound(m.y,-N.y);return new R(P,M)},_rebound:function(r,o){return r+o>0?Math.round(r-o)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(o))},_limitZoom:function(r){var o=this.getMinZoom(),u=this.getMaxZoom(),h=ae.any3d?this.options.zoomSnap:1;return h&&(r=Math.round(r/h)*h),Math.max(o,Math.min(u,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Re(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,o){var u=this._getCenterOffset(r)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var r=this._proxy=be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(o){var u=bs,h=this._proxy.style[u];Bt(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),h===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),o=this.getZoom();Bt(this._proxy,this.project(r,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(o),m=this._getCenterOffset(r)._divideBy(1-1/h);return u.animate!==!0&&!this.getSize().contains(m)?!1:(se(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(r,o,!0)},this),!0)},_animateZoom:function(r,o,u,h){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=o,he(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:o,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Re(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function nc(r,o){return new _e(r,o)}var Tt=q.extend({options:{position:"topright"},initialize:function(r){y(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var o=this._map;return o&&o.removeControl(this),this.options.position=r,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var o=this._container=this.onAdd(r),u=this.getPosition(),h=r._controlCorners[u];return he(o,"leaflet-control"),u.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Gr=function(r){return new Tt(r)};_e.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},o="leaflet-",u=this._controlContainer=be("div",o+"control-container",this._container);function h(m,N){var P=o+m+" "+o+N;r[m+N]=be("div",P,u)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Pe(this._controlCorners[r]);Pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var eo=Tt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,o,u,h){return u<h?-1:h<u?1:0}},initialize:function(r,o,u){y(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in r)this._addLayer(r[h],h);for(h in o)this._addLayer(o[h],h,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Tt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,o){return this._addLayer(r,o),this._map?this._update():this},addOverlay:function(r,o){return this._addLayer(r,o,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(r));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){he(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(he(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Re(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Re(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",o=this._container=be("div",r),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),$r(o),Mi(o);var h=this._section=be("section",r+"-list");u&&(this._map.on("click",this.collapse,this),me(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=be("a",r+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),me(m,{keydown:function(N){N.keyCode===13&&this._expandSafely()},click:function(N){Ge(N),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=be("div",r+"-base",h),this._separator=be("div",r+"-separator",h),this._overlaysList=be("div",r+"-overlays",h),o.appendChild(h)},_getLayer:function(r){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===r)return this._layers[o]},_addLayer:function(r,o,u){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(c(function(h,m){return this.options.sortFunction(h.layer,m.layer,h.name,m.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;hn(this._baseLayersList),hn(this._overlaysList),this._layerControlInputs=[];var r,o,u,h,m=0;for(u=0;u<this._layers.length;u++)h=this._layers[u],this._addItem(h),o=o||h.overlay,r=r||!h.overlay,m+=h.overlay?0:1;return this.options.hideSingleBase&&(r=r&&m>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=o&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var o=this._getLayer(f(r.target)),u=o.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(r,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(o?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=u,h.firstChild},_addItem:function(r){var o=document.createElement("label"),u=this._map.hasLayer(r.layer),h;r.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=u):h=this._createRadioElement("leaflet-base-layers_"+f(this),u),this._layerControlInputs.push(h),h.layerId=f(r.layer),me(h,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+r.name;var N=document.createElement("span");o.appendChild(N),N.appendChild(h),N.appendChild(m);var P=r.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,o,u,h=[],m=[];this._handlingClick=!0;for(var N=r.length-1;N>=0;N--)o=r[N],u=this._getLayer(o.layerId).layer,o.checked?h.push(u):o.checked||m.push(u);for(N=0;N<m.length;N++)this._map.hasLayer(m[N])&&this._map.removeLayer(m[N]);for(N=0;N<h.length;N++)this._map.hasLayer(h[N])||this._map.addLayer(h[N]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,o,u,h=this._map.getZoom(),m=r.length-1;m>=0;m--)o=r[m],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&h<u.options.minZoom||u.options.maxZoom!==void 0&&h>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,me(r,"click",Ge),this.expand();var o=this;setTimeout(function(){Ce(r,"click",Ge),o._preventClick=!1})}}),rc=function(r,o,u){return new eo(r,o,u)},Ri=Tt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var o="leaflet-control-zoom",u=be("div",o+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,o,u,h,m){var N=be("a",u,h);return N.innerHTML=r,N.href="#",N.title=o,N.setAttribute("role","button"),N.setAttribute("aria-label",o),$r(N),me(N,"click",Tn),me(N,"click",m,this),me(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var r=this._map,o="leaflet-disabled";Re(this._zoomInButton,o),Re(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(he(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(he(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});_e.mergeOptions({zoomControl:!0}),_e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ri,this.addControl(this.zoomControl))});var sc=function(r){return new Ri(r)},to=Tt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var o="leaflet-control-scale",u=be("div",o),h=this.options;return this._addScales(h,o+"-line",u),r.on(h.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),u},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,o,u){r.metric&&(this._mScale=be("div",o,u)),r.imperial&&(this._iScale=be("div",o,u))},_update:function(){var r=this._map,o=r.getSize().y/2,u=r.distance(r.containerPointToLatLng([0,o]),r.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var o=this._getRoundNum(r),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/r)},_updateImperial:function(r){var o=r*3.2808399,u,h,m;o>5280?(u=o/5280,h=this._getRoundNum(u),this._updateScale(this._iScale,h+" mi",h/u)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(r,o,u){r.style.width=Math.round(this.options.maxWidth*u)+"px",r.innerHTML=o},_getRoundNum:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),u=r/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),H=function(r){return new to(r)},ge='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',tt=Tt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?ge+" ":"")+"Leaflet</a>"},initialize:function(r){y(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=be("div","leaflet-control-attribution"),$r(this._container);for(var o in r._layers)r._layers[o].getAttribution&&this.addAttribution(r._layers[o].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var o in this._attributions)this._attributions[o]&&r.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),r.length&&u.push(r.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});_e.mergeOptions({attributionControl:!0}),_e.addInitHook(function(){this.options.attributionControl&&new tt().addTo(this)});var Oi=function(r){return new tt(r)};Tt.Layers=eo,Tt.Zoom=Ri,Tt.Scale=to,Tt.Attribution=tt,Gr.layers=rc,Gr.zoom=sc,Gr.scale=H,Gr.attribution=Oi;var Ut=q.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ut.addTo=function(r,o){return r.addHandler(o,this),this};var k0={Events:G},Jd=ae.touch?"touchstart mousedown":"mousedown",sr=ce.extend({options:{clickTolerance:3},initialize:function(r,o,u,h){y(this,h),this._element=r,this._dragStartTarget=o||r,this._preventOutline=u},enable:function(){this._enabled||(me(this._dragStartTarget,Jd,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sr._dragging===this&&this.finishDrag(!0),Ce(this._dragStartTarget,Jd,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Wr(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){sr._dragging===this&&this.finishDrag();return}if(!(sr._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(sr._dragging=this,this._preventOutline&&ji(this._element),Ni(),tr(),!this._moving)){this.fire("down");var o=r.touches?r.touches[0]:r,u=qa(this._element);this._startPoint=new R(o.clientX,o.clientY),this._startPos=En(this._element),this._parentScale=Si(u);var h=r.type==="mousedown";me(document,h?"mousemove":"touchmove",this._onMove,this),me(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var o=r.touches&&r.touches.length===1?r.touches[0]:r,u=new R(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Ge(r),this._moved||(this.fire("dragstart"),this._moved=!0,he(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),he(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Oe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Re(document.body,"leaflet-dragging"),this._lastTarget&&(Re(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ce(document,"mousemove touchmove",this._onMove,this),Ce(document,"mouseup touchend touchcancel",this._onUp,this),ki(),nr();var o=this._moved&&this._moving;this._moving=!1,sr._dragging=!1,o&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function eh(r,o,u){var h,m=[1,4,2,8],N,P,M,O,U,ee,de,ve;for(N=0,ee=r.length;N<ee;N++)r[N]._code=qr(r[N],o);for(M=0;M<4;M++){for(de=m[M],h=[],N=0,ee=r.length,P=ee-1;N<ee;P=N++)O=r[N],U=r[P],O._code&de?U._code&de||(ve=no(U,O,de,o,u),ve._code=qr(ve,o),h.push(ve)):(U._code&de&&(ve=no(U,O,de,o,u),ve._code=qr(ve,o),h.push(ve)),h.push(O));r=h}return r}function th(r,o){var u,h,m,N,P,M,O,U,ee;if(!r||r.length===0)throw new Error("latlngs not passed");Ht(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var de=K([0,0]),ve=fe(r),ht=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());ht<1700&&(de=ic(r));var Qe=r.length,Zt=[];for(u=0;u<Qe;u++){var bt=K(r[u]);Zt.push(o.project(K([bt.lat-de.lat,bt.lng-de.lng])))}for(M=O=U=0,u=0,h=Qe-1;u<Qe;h=u++)m=Zt[u],N=Zt[h],P=m.y*N.x-N.y*m.x,O+=(m.x+N.x)*P,U+=(m.y+N.y)*P,M+=P*3;M===0?ee=Zt[0]:ee=[O/M,U/M];var Rs=o.unproject(F(ee));return K([Rs.lat+de.lat,Rs.lng+de.lng])}function ic(r){for(var o=0,u=0,h=0,m=0;m<r.length;m++){var N=K(r[m]);o+=N.lat,u+=N.lng,h++}return K([o/h,u/h])}var C0={__proto__:null,clipPolygon:eh,polygonCenter:th,centroid:ic};function nh(r,o){if(!o||!r.length)return r.slice();var u=o*o;return r=E0(r,u),r=S0(r,u),r}function rh(r,o,u){return Math.sqrt(Di(r,o,u,!0))}function j0(r,o,u){return Di(r,o,u)}function S0(r,o){var u=r.length,h=typeof Uint8Array<"u"?Uint8Array:Array,m=new h(u);m[0]=m[u-1]=1,ac(r,m,o,0,u-1);var N,P=[];for(N=0;N<u;N++)m[N]&&P.push(r[N]);return P}function ac(r,o,u,h,m){var N=0,P,M,O;for(M=h+1;M<=m-1;M++)O=Di(r[M],r[h],r[m],!0),O>N&&(P=M,N=O);N>u&&(o[P]=1,ac(r,o,u,h,P),ac(r,o,u,P,m))}function E0(r,o){for(var u=[r[0]],h=1,m=0,N=r.length;h<N;h++)P0(r[h],r[m])>o&&(u.push(r[h]),m=h);return m<N-1&&u.push(r[N-1]),u}var sh;function ih(r,o,u,h,m){var N=h?sh:qr(r,u),P=qr(o,u),M,O,U;for(sh=P;;){if(!(N|P))return[r,o];if(N&P)return!1;M=N||P,O=no(r,o,M,u,m),U=qr(O,u),M===N?(r=O,N=U):(o=O,P=U)}}function no(r,o,u,h,m){var N=o.x-r.x,P=o.y-r.y,M=h.min,O=h.max,U,ee;return u&8?(U=r.x+N*(O.y-r.y)/P,ee=O.y):u&4?(U=r.x+N*(M.y-r.y)/P,ee=M.y):u&2?(U=O.x,ee=r.y+P*(O.x-r.x)/N):u&1&&(U=M.x,ee=r.y+P*(M.x-r.x)/N),new R(U,ee,m)}function qr(r,o){var u=0;return r.x<o.min.x?u|=1:r.x>o.max.x&&(u|=2),r.y<o.min.y?u|=4:r.y>o.max.y&&(u|=8),u}function P0(r,o){var u=o.x-r.x,h=o.y-r.y;return u*u+h*h}function Di(r,o,u,h){var m=o.x,N=o.y,P=u.x-m,M=u.y-N,O=P*P+M*M,U;return O>0&&(U=((r.x-m)*P+(r.y-N)*M)/O,U>1?(m=u.x,N=u.y):U>0&&(m+=P*U,N+=M*U)),P=r.x-m,M=r.y-N,h?P*P+M*M:new R(m,N)}function Ht(r){return!j(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function ah(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ht(r)}function oh(r,o){var u,h,m,N,P,M,O,U;if(!r||r.length===0)throw new Error("latlngs not passed");Ht(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ee=K([0,0]),de=fe(r),ve=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());ve<1700&&(ee=ic(r));var ht=r.length,Qe=[];for(u=0;u<ht;u++){var Zt=K(r[u]);Qe.push(o.project(K([Zt.lat-ee.lat,Zt.lng-ee.lng])))}for(u=0,h=0;u<ht-1;u++)h+=Qe[u].distanceTo(Qe[u+1])/2;if(h===0)U=Qe[0];else for(u=0,N=0;u<ht-1;u++)if(P=Qe[u],M=Qe[u+1],m=P.distanceTo(M),N+=m,N>h){O=(N-h)/m,U=[M.x-O*(M.x-P.x),M.y-O*(M.y-P.y)];break}var bt=o.unproject(F(U));return K([bt.lat+ee.lat,bt.lng+ee.lng])}var T0={__proto__:null,simplify:nh,pointToSegmentDistance:rh,closestPointOnSegment:j0,clipSegment:ih,_getEdgeIntersection:no,_getBitCode:qr,_sqClosestPointOnSegment:Di,isFlat:Ht,_flat:ah,polylineCenter:oh},oc={project:function(r){return new R(r.lng,r.lat)},unproject:function(r){return new ue(r.y,r.x)},bounds:new J([-180,-90],[180,90])},lc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var o=Math.PI/180,u=this.R,h=r.lat*o,m=this.R_MINOR/u,N=Math.sqrt(1-m*m),P=N*Math.sin(h),M=Math.tan(Math.PI/4-h/2)/Math.pow((1-P)/(1+P),N/2);return h=-u*Math.log(Math.max(M,1e-10)),new R(r.lng*o*u,h)},unproject:function(r){for(var o=180/Math.PI,u=this.R,h=this.R_MINOR/u,m=Math.sqrt(1-h*h),N=Math.exp(-r.y/u),P=Math.PI/2-2*Math.atan(N),M=0,O=.1,U;M<15&&Math.abs(O)>1e-7;M++)U=m*Math.sin(P),U=Math.pow((1-U)/(1+U),m/2),O=Math.PI/2-2*Math.atan(N*U)-P,P+=O;return new ue(P*o,r.x*o/u)}},M0={__proto__:null,LonLat:oc,Mercator:lc,SphericalMercator:Je},I0=s({},pe,{code:"EPSG:3395",projection:lc,transformation:function(){var r=.5/(Math.PI*lc.R);return et(r,.5,-r,.5)}()}),lh=s({},pe,{code:"EPSG:4326",projection:oc,transformation:et(1/180,1,-1/180,.5)}),R0=s({},B,{projection:oc,transformation:et(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,o){var u=o.lng-r.lng,h=o.lat-r.lat;return Math.sqrt(u*u+h*h)},infinite:!0});B.Earth=pe,B.EPSG3395=I0,B.EPSG3857=At,B.EPSG900913=bn,B.EPSG4326=lh,B.Simple=R0;var Xt=ce.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[f(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[f(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var o=r.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});_e.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(r);return this._layers[o]?this:(this._layers[o]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var o=f(r);return this._layers[o]?(this._loaded&&r.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return f(r)in this._layers},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},_addLayers:function(r){r=r?j(r)?r:[r]:[];for(var o=0,u=r.length;o<u;o++)this.addLayer(r[o])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[f(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var o=f(r);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,o=-1/0,u=this._getZoomSpan();for(var h in this._zoomBoundLayers){var m=this._zoomBoundLayers[h].options;r=m.minZoom===void 0?r:Math.min(r,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=r===1/0?void 0:r,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Es=Xt.extend({initialize:function(r,o){y(this,o),this._layers={};var u,h;if(r)for(u=0,h=r.length;u<h;u++)this.addLayer(r[u])},addLayer:function(r){var o=this.getLayerId(r);return this._layers[o]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var o=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(r){var o=typeof r=="number"?r:this.getLayerId(r);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var o=Array.prototype.slice.call(arguments,1),u,h;for(u in this._layers)h=this._layers[u],h[r]&&h[r].apply(h,o);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,o){for(var u in this._layers)r.call(o,this._layers[u]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return f(r)}}),O0=function(r,o){return new Es(r,o)},Mn=Es.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Es.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Es.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new we;for(var o in this._layers){var u=this._layers[o];r.extend(u.getBounds?u.getBounds():u.getLatLng())}return r}}),D0=function(r,o){return new Mn(r,o)},Ps=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){y(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,o){var u=this._getIconUrl(r);if(!u){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(h,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(r,o){var u=this.options,h=u[o+"Size"];typeof h=="number"&&(h=[h,h]);var m=F(h),N=F(o==="shadow"&&u.shadowAnchor||u.iconAnchor||m&&m.divideBy(2,!0));r.className="leaflet-marker-"+o+" "+(u.className||""),N&&(r.style.marginLeft=-N.x+"px",r.style.marginTop=-N.y+"px"),m&&(r.style.width=m.x+"px",r.style.height=m.y+"px")},_createImg:function(r,o){return o=o||document.createElement("img"),o.src=r,o},_getIconUrl:function(r){return ae.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function z0(r){return new Ps(r)}var zi=Ps.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof zi.imagePath!="string"&&(zi.imagePath=this._detectIconPath()),(this.options.imagePath||zi.imagePath)+Ps.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var o=function(u,h,m){var N=h.exec(u);return N&&N[m]};return r=o(r,/^url\((['"])?(.+)\1\)$/,2),r&&o(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=be("div","leaflet-default-icon-path",document.body),o=Zr(r,"background-image")||Zr(r,"backgroundImage");if(document.body.removeChild(r),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),ch=Ut.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new sr(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),he(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Re(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var o=this._marker,u=o._map,h=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,N=En(o._icon),P=u.getPixelBounds(),M=u.getPixelOrigin(),O=le(P.min._subtract(M).add(m),P.max._subtract(M).subtract(m));if(!O.contains(N)){var U=F((Math.max(O.max.x,N.x)-O.max.x)/(P.max.x-O.max.x)-(Math.min(O.min.x,N.x)-O.min.x)/(P.min.x-O.min.x),(Math.max(O.max.y,N.y)-O.max.y)/(P.max.y-O.max.y)-(Math.min(O.min.y,N.y)-O.min.y)/(P.min.y-O.min.y)).multiplyBy(h);u.panBy(U,{animate:!1}),this._draggable._newPos._add(U),this._draggable._startPos._add(U),Oe(o._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=se(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(ne(this._panRequest),this._panRequest=se(this._adjustPan.bind(this,r)))},_onDrag:function(r){var o=this._marker,u=o._shadow,h=En(o._icon),m=o._map.layerPointToLatLng(h);u&&Oe(u,h),o._latlng=m,r.latlng=m,r.oldLatLng=this._oldLatLng,o.fire("move",r).fire("drag",r)},_onDragEnd:function(r){ne(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),ro=Xt.extend({options:{icon:new zi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,o){y(this,o),this._latlng=K(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var o=this._latlng;return this._latlng=K(r),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=r.icon.createIcon(this._icon),h=!1;u!==this._icon&&(this._icon&&this._removeIcon(),h=!0,r.title&&(u.title=r.title),u.tagName==="IMG"&&(u.alt=r.alt||"")),he(u,o),r.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(u,"focus",this._panOnFocus,this);var m=r.icon.createShadow(this._shadow),N=!1;m!==this._shadow&&(this._removeShadow(),N=!0),m&&(he(m,o),m.alt=""),this._shadow=m,r.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&N&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ce(this._icon,"focus",this._panOnFocus,this),Pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pe(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Oe(this._icon,r),this._shadow&&Oe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(he(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ch)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ch(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&at(this._icon,r),this._shadow&&at(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var o=this.options.icon.options,u=o.iconSize?F(o.iconSize):F(0,0),h=o.iconAnchor?F(o.iconAnchor):F(0,0);r.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:u.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function A0(r,o){return new ro(r,o)}var ir=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return y(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),so=ir.extend({options:{fill:!0,radius:10},initialize:function(r,o){y(this,o),this._latlng=K(r),this._radius=this.options.radius},setLatLng:function(r){var o=this._latlng;return this._latlng=K(r),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var o=r&&r.radius||this._radius;return ir.prototype.setStyle.call(this,r),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,o=this._radiusY||r,u=this._clickTolerance(),h=[r+u,o+u];this._pxBounds=new J(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function B0(r,o){return new so(r,o)}var cc=so.extend({initialize:function(r,o,u){if(typeof o=="number"&&(o=s({},u,{radius:o})),y(this,o),this._latlng=K(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new we(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:ir.prototype.setStyle,_project:function(){var r=this._latlng.lng,o=this._latlng.lat,u=this._map,h=u.options.crs;if(h.distance===pe.distance){var m=Math.PI/180,N=this._mRadius/pe.R/m,P=u.project([o+N,r]),M=u.project([o-N,r]),O=P.add(M).divideBy(2),U=u.unproject(O).lat,ee=Math.acos((Math.cos(N*m)-Math.sin(o*m)*Math.sin(U*m))/(Math.cos(o*m)*Math.cos(U*m)))/m;(isNaN(ee)||ee===0)&&(ee=N/Math.cos(Math.PI/180*o)),this._point=O.subtract(u.getPixelOrigin()),this._radius=isNaN(ee)?0:O.x-u.project([U,r-ee]).x,this._radiusY=O.y-P.y}else{var de=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(de).x}this._updateBounds()}});function F0(r,o,u){return new cc(r,o,u)}var In=ir.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,o){y(this,o),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var o=1/0,u=null,h=Di,m,N,P=0,M=this._parts.length;P<M;P++)for(var O=this._parts[P],U=1,ee=O.length;U<ee;U++){m=O[U-1],N=O[U];var de=h(r,m,N,!0);de<o&&(o=de,u=h(r,m,N))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,o){return o=o||this._defaultShape(),r=K(r),o.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new we,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Ht(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var o=[],u=Ht(r),h=0,m=r.length;h<m;h++)u?(o[h]=K(r[h]),this._bounds.extend(o[h])):o[h]=this._convertLatLngs(r[h]);return o},_project:function(){var r=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),o=new R(r,r);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(r,o,u){var h=r[0]instanceof ue,m=r.length,N,P;if(h){for(P=[],N=0;N<m;N++)P[N]=this._map.latLngToLayerPoint(r[N]),u.extend(P[N]);o.push(P)}else for(N=0;N<m;N++)this._projectLatlngs(r[N],o,u)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,h,m,N,P,M,O;for(u=0,m=0,N=this._rings.length;u<N;u++)for(O=this._rings[u],h=0,P=O.length;h<P-1;h++)M=ih(O[h],O[h+1],r,h,!0),M&&(o[m]=o[m]||[],o[m].push(M[0]),(M[1]!==O[h+1]||h===P-2)&&(o[m].push(M[1]),m++))}},_simplifyPoints:function(){for(var r=this._parts,o=this.options.smoothFactor,u=0,h=r.length;u<h;u++)r[u]=nh(r[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,o){var u,h,m,N,P,M,O=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(u=0,N=this._parts.length;u<N;u++)for(M=this._parts[u],h=0,P=M.length,m=P-1;h<P;m=h++)if(!(!o&&h===0)&&rh(r,M[m],M[h])<=O)return!0;return!1}});function U0(r,o){return new In(r,o)}In._flat=ah;var Ts=In.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return th(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var o=In.prototype._convertLatLngs.call(this,r),u=o.length;return u>=2&&o[0]instanceof ue&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(r){In.prototype._setLatLngs.call(this,r),Ht(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ht(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,o=this.options.weight,u=new R(o,o);if(r=new J(r.min.subtract(u),r.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,m=this._rings.length,N;h<m;h++)N=eh(this._rings[h],r,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var o=!1,u,h,m,N,P,M,O,U;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(N=0,O=this._parts.length;N<O;N++)for(u=this._parts[N],P=0,U=u.length,M=U-1;P<U;M=P++)h=u[P],m=u[M],h.y>r.y!=m.y>r.y&&r.x<(m.x-h.x)*(r.y-h.y)/(m.y-h.y)+h.x&&(o=!o);return o||In.prototype._containsPoint.call(this,r,!0)}});function H0(r,o){return new Ts(r,o)}var Rn=Mn.extend({initialize:function(r,o){y(this,o),this._layers={},r&&this.addData(r)},addData:function(r){var o=j(r)?r:r.features,u,h,m;if(o){for(u=0,h=o.length;u<h;u++)m=o[u],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var N=this.options;if(N.filter&&!N.filter(r))return this;var P=io(r,N);return P?(P.feature=lo(r),P.defaultOptions=P.options,this.resetStyle(P),N.onEachFeature&&N.onEachFeature(r,P),this.addLayer(P)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(o){this._setLayerStyle(o,r)},this)},_setLayerStyle:function(r,o){r.setStyle&&(typeof o=="function"&&(o=o(r.feature)),r.setStyle(o))}});function io(r,o){var u=r.type==="Feature"?r.geometry:r,h=u?u.coordinates:null,m=[],N=o&&o.pointToLayer,P=o&&o.coordsToLatLng||uc,M,O,U,ee;if(!h&&!u)return null;switch(u.type){case"Point":return M=P(h),uh(N,r,M,o);case"MultiPoint":for(U=0,ee=h.length;U<ee;U++)M=P(h[U]),m.push(uh(N,r,M,o));return new Mn(m);case"LineString":case"MultiLineString":return O=ao(h,u.type==="LineString"?0:1,P),new In(O,o);case"Polygon":case"MultiPolygon":return O=ao(h,u.type==="Polygon"?1:2,P),new Ts(O,o);case"GeometryCollection":for(U=0,ee=u.geometries.length;U<ee;U++){var de=io({geometry:u.geometries[U],type:"Feature",properties:r.properties},o);de&&m.push(de)}return new Mn(m);case"FeatureCollection":for(U=0,ee=u.features.length;U<ee;U++){var ve=io(u.features[U],o);ve&&m.push(ve)}return new Mn(m);default:throw new Error("Invalid GeoJSON object.")}}function uh(r,o,u,h){return r?r(o,u):new ro(u,h&&h.markersInheritOptions&&h)}function uc(r){return new ue(r[1],r[0],r[2])}function ao(r,o,u){for(var h=[],m=0,N=r.length,P;m<N;m++)P=o?ao(r[m],o-1,u):(u||uc)(r[m]),h.push(P);return h}function dc(r,o){return r=K(r),r.alt!==void 0?[C(r.lng,o),C(r.lat,o),C(r.alt,o)]:[C(r.lng,o),C(r.lat,o)]}function oo(r,o,u,h){for(var m=[],N=0,P=r.length;N<P;N++)m.push(o?oo(r[N],Ht(r[N])?0:o-1,u,h):dc(r[N],h));return!o&&u&&m.length>0&&m.push(m[0].slice()),m}function Ms(r,o){return r.feature?s({},r.feature,{geometry:o}):lo(o)}function lo(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var hc={toGeoJSON:function(r){return Ms(this,{type:"Point",coordinates:dc(this.getLatLng(),r)})}};ro.include(hc),cc.include(hc),so.include(hc),In.include({toGeoJSON:function(r){var o=!Ht(this._latlngs),u=oo(this._latlngs,o?1:0,!1,r);return Ms(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),Ts.include({toGeoJSON:function(r){var o=!Ht(this._latlngs),u=o&&!Ht(this._latlngs[0]),h=oo(this._latlngs,u?2:o?1:0,!0,r);return o||(h=[h]),Ms(this,{type:(u?"Multi":"")+"Polygon",coordinates:h})}}),Es.include({toMultiPoint:function(r){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(r).geometry.coordinates)}),Ms(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(r){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(r);var u=o==="GeometryCollection",h=[];return this.eachLayer(function(m){if(m.toGeoJSON){var N=m.toGeoJSON(r);if(u)h.push(N.geometry);else{var P=lo(N);P.type==="FeatureCollection"?h.push.apply(h,P.features):h.push(P)}}}),u?Ms(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function dh(r,o){return new Rn(r,o)}var Z0=dh,co=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,o,u){this._url=r,this._bounds=fe(o),y(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(he(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&jn(this._image),this},bringToBack:function(){return this._map&&Sn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=fe(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",o=this._image=r?this._url:be("img");if(he(o,"leaflet-image-layer"),this._zoomAnimated&&he(o,"leaflet-zoom-animated"),this.options.className&&he(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=c(this.fire,this,"load"),o.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(r){var o=this._map.getZoomScale(r.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Bt(this._image,u,o)},_reset:function(){var r=this._image,o=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();Oe(r,o.min),r.style.width=u.x+"px",r.style.height=u.y+"px"},_updateOpacity:function(){at(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),W0=function(r,o,u){return new co(r,o,u)},hh=co.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",o=this._image=r?this._url:be("video");if(he(o,"leaflet-image-layer"),this._zoomAnimated&&he(o,"leaflet-zoom-animated"),this.options.className&&he(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=c(this.fire,this,"load"),r){for(var u=o.getElementsByTagName("source"),h=[],m=0;m<u.length;m++)h.push(u[m].src);this._url=u.length>0?h:[o.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var P=be("source");P.src=this._url[N],o.appendChild(P)}}});function V0(r,o,u){return new hh(r,o,u)}var fh=co.extend({_initImage:function(){var r=this._image=this._url;he(r,"leaflet-image-layer"),this._zoomAnimated&&he(r,"leaflet-zoom-animated"),this.options.className&&he(r,this.options.className),r.onselectstart=v,r.onmousemove=v}});function $0(r,o,u){return new fh(r,o,u)}var fn=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,o){r&&(r instanceof ue||j(r))?(this._latlng=K(r),y(this,o)):(y(this,r),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&at(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&at(this._container,1),this.bringToFront(),this.options.interactive&&(he(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(at(this._container,0),this._removeTimeout=setTimeout(c(Pe,void 0,this._container),200)):Pe(this._container),this.options.interactive&&(Re(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=K(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jn(this._container),this},bringToBack:function(){return this._map&&Sn(this._container),this},_prepareOpen:function(r){var o=this._source;if(!o._map)return!1;if(o instanceof Mn){o=null;var u=this._source._layers;for(var h in u)if(u[h]._map){o=u[h];break}if(!o)return!1;this._source=o}if(!r)if(o.getCenter)r=o.getCenter();else if(o.getLatLng)r=o.getLatLng();else if(o.getBounds)r=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),o=F(this.options.offset),u=this._getAnchor();this._zoomAnimated?Oe(this._container,r.add(u)):o=o.add(r).add(u);var h=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=h+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});_e.include({_initOverlay:function(r,o,u,h){var m=o;return m instanceof r||(m=new r(h).setContent(o)),u&&m.setLatLng(u),m}}),Xt.include({_initOverlay:function(r,o,u,h){var m=u;return m instanceof r?(y(m,h),m._source=this):(m=o&&!h?o:new r(h,this),m.setContent(u)),m}});var uo=fn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,fn.prototype.openOn.call(this,r)},onAdd:function(r){fn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ir||this._source.on("preclick",Pn))},onRemove:function(r){fn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ir||this._source.off("preclick",Pn))},getEvents:function(){var r=fn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",o=this._container=be("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=be("div",r+"-content-wrapper",o);if(this._contentNode=be("div",r+"-content",u),$r(o),Mi(this._contentNode),me(o,"contextmenu",Pn),this._tipContainer=be("div",r+"-tip-container",o),this._tip=be("div",r+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=be("a",r+"-close-button",o);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',me(h,"click",function(m){Ge(m),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,o=r.style;o.width="",o.whiteSpace="nowrap";var u=r.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var h=r.offsetHeight,m=this.options.maxHeight,N="leaflet-popup-scrolled";m&&h>m?(o.height=m+"px",he(r,N)):Re(r,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),u=this._getAnchor();Oe(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,o=parseInt(Zr(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,h=this._containerWidth,m=new R(this._containerLeft,-u-this._containerBottom);m._add(En(this._container));var N=r.layerPointToContainerPoint(m),P=F(this.options.autoPanPadding),M=F(this.options.autoPanPaddingTopLeft||P),O=F(this.options.autoPanPaddingBottomRight||P),U=r.getSize(),ee=0,de=0;N.x+h+O.x>U.x&&(ee=N.x+h-U.x+O.x),N.x-ee-M.x<0&&(ee=N.x-M.x),N.y+u+O.y>U.y&&(de=N.y+u-U.y+O.y),N.y-de-M.y<0&&(de=N.y-M.y),(ee||de)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ee,de]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),G0=function(r,o){return new uo(r,o)};_e.mergeOptions({closePopupOnClick:!0}),_e.include({openPopup:function(r,o,u){return this._initOverlay(uo,r,o,u).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Xt.include({bindPopup:function(r,o){return this._popup=this._initOverlay(uo,this._popup,r,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof Mn||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Tn(r);var o=r.layer||r.target;if(this._popup._source===o&&!(o instanceof ir)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=o,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var ho=fn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){fn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){fn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=fn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",o=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=be("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var o,u,h=this._map,m=this._container,N=h.latLngToContainerPoint(h.getCenter()),P=h.layerPointToContainerPoint(r),M=this.options.direction,O=m.offsetWidth,U=m.offsetHeight,ee=F(this.options.offset),de=this._getAnchor();M==="top"?(o=O/2,u=U):M==="bottom"?(o=O/2,u=0):M==="center"?(o=O/2,u=U/2):M==="right"?(o=0,u=U/2):M==="left"?(o=O,u=U/2):P.x<N.x?(M="right",o=0,u=U/2):(M="left",o=O+(ee.x+de.x)*2,u=U/2),r=r.subtract(F(o,u,!0)).add(ee).add(de),Re(m,"leaflet-tooltip-right"),Re(m,"leaflet-tooltip-left"),Re(m,"leaflet-tooltip-top"),Re(m,"leaflet-tooltip-bottom"),he(m,"leaflet-tooltip-"+M),Oe(m,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&at(this._container,r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(o)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),q0=function(r,o){return new ho(r,o)};_e.include({openTooltip:function(r,o,u){return this._initOverlay(ho,r,o,u).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Xt.include({bindTooltip:function(r,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ho,this._tooltip,r,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var o=r?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof Mn||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&(me(o,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),me(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var o=r.latlng,u,h;this._tooltip.options.sticky&&r.originalEvent&&(u=this._map.mouseEventToContainerPoint(r.originalEvent),h=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(o)}});var ph=Ps.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var o=r&&r.tagName==="DIV"?r:document.createElement("div"),u=this.options;if(u.html instanceof Element?(hn(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var h=F(u.bgPos);o.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function K0(r){return new ph(r)}Ps.Default=zi;var Ai=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){y(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Pe(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Sn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof R?r:new R(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var o=this.getPane().children,u=-r(-1/0,1/0),h=0,m=o.length,N;h<m;h++)N=o[h].style.zIndex,o[h]!==this._container&&N&&(u=r(u,+N));isFinite(u)&&(this.options.zIndex=u+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){at(this._container,this.options.opacity);var r=+new Date,o=!1,u=!1;for(var h in this._tiles){var m=this._tiles[h];if(!(!m.current||!m.loaded)){var N=Math.min(1,(r-m.loaded)/200);at(m.el,N),N<1?o=!0:(m.active?u=!0:this._onOpaqueTile(m),m.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(ne(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,o=this.options.maxZoom;if(r!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===r?(this._levels[u].el.style.zIndex=o-Math.abs(r-u),this._onUpdateLevel(u)):(Pe(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var h=this._levels[r],m=this._map;return h||(h=this._levels[r]={},h.el=be("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=m.project(m.unproject(m.getPixelOrigin()),r).round(),h.zoom=r,this._setZoomTransform(h,m.getCenter(),m.getZoom()),v(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var r,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)o=this._tiles[r],o.retain=o.current;for(r in this._tiles)if(o=this._tiles[r],o.current&&!o.active){var h=o.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var o in this._tiles)this._tiles[o].coords.z===r&&this._removeTile(o)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Pe(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,o,u,h){var m=Math.floor(r/2),N=Math.floor(o/2),P=u-1,M=new R(+m,+N);M.z=+P;var O=this._tileCoordsToKey(M),U=this._tiles[O];return U&&U.active?(U.retain=!0,!0):(U&&U.loaded&&(U.retain=!0),P>h?this._retainParent(m,N,P,h):!1)},_retainChildren:function(r,o,u,h){for(var m=2*r;m<2*r+2;m++)for(var N=2*o;N<2*o+2;N++){var P=new R(m,N);P.z=u+1;var M=this._tileCoordsToKey(P),O=this._tiles[M];if(O&&O.active){O.retain=!0;continue}else O&&O.loaded&&(O.retain=!0);u+1<h&&this._retainChildren(m,N,u+1,h)}},_resetView:function(r){var o=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var o=this.options;return o.minNativeZoom!==void 0&&r<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<r?o.maxNativeZoom:r},_setView:function(r,o,u,h){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var N=this.options.updateWhenZooming&&m!==this._tileZoom;(!h||N)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(r),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(r,o)},_setZoomTransforms:function(r,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],r,o)},_setZoomTransform:function(r,o,u){var h=this._map.getZoomScale(u,r.zoom),m=r.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(o,u)).round();ae.any3d?Bt(r.el,m,h):Oe(r.el,m)},_resetGrid:function(){var r=this._map,o=r.options.crs,u=this._tileSize=this.getTileSize(),h=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,o.wrapLng[0]],h).x/u.x),Math.ceil(r.project([0,o.wrapLng[1]],h).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([o.wrapLat[0],0],h).y/u.x),Math.ceil(r.project([o.wrapLat[1],0],h).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),h=o.getZoomScale(u,this._tileZoom),m=o.project(r,this._tileZoom).floor(),N=o.getSize().divideBy(h*2);return new J(m.subtract(N),m.add(N))},_update:function(r){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(r===void 0&&(r=o.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(r),m=this._pxBoundsToTileRange(h),N=m.getCenter(),P=[],M=this.options.keepBuffer,O=new J(m.getBottomLeft().subtract([M,-M]),m.getTopRight().add([M,-M]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var U in this._tiles){var ee=this._tiles[U].coords;(ee.z!==this._tileZoom||!O.contains(new R(ee.x,ee.y)))&&(this._tiles[U].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(r,u);return}for(var de=m.min.y;de<=m.max.y;de++)for(var ve=m.min.x;ve<=m.max.x;ve++){var ht=new R(ve,de);if(ht.z=this._tileZoom,!!this._isValidTile(ht)){var Qe=this._tiles[this._tileCoordsToKey(ht)];Qe?Qe.current=!0:P.push(ht)}}if(P.sort(function(bt,Rs){return bt.distanceTo(N)-Rs.distanceTo(N)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Zt=document.createDocumentFragment();for(ve=0;ve<P.length;ve++)this._addTile(P[ve],Zt);this._level.el.appendChild(Zt)}}}},_isValidTile:function(r){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(r.x<u.min.x||r.x>u.max.x)||!o.wrapLat&&(r.y<u.min.y||r.y>u.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(r);return fe(this.options.bounds).overlaps(h)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var o=this._map,u=this.getTileSize(),h=r.scaleBy(u),m=h.add(u),N=o.unproject(h,r.z),P=o.unproject(m,r.z);return[N,P]},_tileCoordsToBounds:function(r){var o=this._tileCoordsToNwSe(r),u=new we(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var o=r.split(":"),u=new R(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(r){var o=this._tiles[r];o&&(Pe(o.el),delete this._tiles[r],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){he(r,"leaflet-tile");var o=this.getTileSize();r.style.width=o.x+"px",r.style.height=o.y+"px",r.onselectstart=v,r.onmousemove=v,ae.ielt9&&this.options.opacity<1&&at(r,this.options.opacity)},_addTile:function(r,o){var u=this._getTilePos(r),h=this._tileCoordsToKey(r),m=this.createTile(this._wrapCoords(r),c(this._tileReady,this,r));this._initTile(m),this.createTile.length<2&&se(c(this._tileReady,this,r,null,m)),Oe(m,u),this._tiles[h]={el:m,coords:r,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:r})},_tileReady:function(r,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:r});var h=this._tileCoordsToKey(r);u=this._tiles[h],u&&(u.loaded=+new Date,this._map._fadeAnimated?(at(u.el,0),ne(this._fadeFrame),this._fadeFrame=se(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(he(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?se(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var o=new R(this._wrapX?g(r.x,this._wrapX):r.x,this._wrapY?g(r.y,this._wrapY):r.y);return o.z=r.z,o},_pxBoundsToTileRange:function(r){var o=this.getTileSize();return new J(r.min.unscaleBy(o).floor(),r.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Q0(r){return new Ai(r)}var Is=Ai.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,o){this._url=r,o=y(this,o),o.detectRetina&&ae.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,o){return this._url===r&&o===void 0&&(o=!0),this._url=r,o||this.redraw(),this},createTile:function(r,o){var u=document.createElement("img");return me(u,"load",c(this._tileOnLoad,this,o,u)),me(u,"error",c(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(r),u},getTileUrl:function(r){var o={r:ae.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-r.y;this.options.tms&&(o.y=u),o["-y"]=u}return b(this._url,s(o,this.options))},_tileOnLoad:function(r,o){ae.ielt9?setTimeout(c(r,this,null,o),0):r(null,o)},_tileOnError:function(r,o,u){var h=this.options.errorTileUrl;h&&o.getAttribute("src")!==h&&(o.src=h),r(u,o)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,h=this.options.zoomOffset;return u&&(r=o-r),r+h},_getSubdomain:function(r){var o=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var r,o;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(o=this._tiles[r].el,o.onload=v,o.onerror=v,!o.complete)){o.src=T;var u=this._tiles[r].coords;Pe(o),delete this._tiles[r],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(r){var o=this._tiles[r];if(o)return o.el.setAttribute("src",T),Ai.prototype._removeTile.call(this,r)},_tileReady:function(r,o,u){if(!(!this._map||u&&u.getAttribute("src")===T))return Ai.prototype._tileReady.call(this,r,o,u)}});function mh(r,o){return new Is(r,o)}var gh=Is.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,o){this._url=r;var u=s({},this.defaultWmsParams);for(var h in o)h in this.options||(u[h]=o[h]);o=y(this,o);var m=o.detectRetina&&ae.retina?2:1,N=this.getTileSize();u.width=N.x*m,u.height=N.y*m,this.wmsParams=u},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Is.prototype.onAdd.call(this,r)},getTileUrl:function(r){var o=this._tileCoordsToNwSe(r),u=this._crs,h=le(u.project(o[0]),u.project(o[1])),m=h.min,N=h.max,P=(this._wmsVersion>=1.3&&this._crs===lh?[m.y,m.x,N.y,N.x]:[m.x,m.y,N.x,N.y]).join(","),M=Is.prototype.getTileUrl.call(this,r);return M+k(this.wmsParams,M,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(r,o){return s(this.wmsParams,r),o||this.redraw(),this}});function Y0(r,o){return new gh(r,o)}Is.WMS=gh,mh.wms=Y0;var On=Xt.extend({options:{padding:.1},initialize:function(r){y(this,r),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),he(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,o){var u=this._map.getZoomScale(o,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),N=h.multiplyBy(-u).add(m).subtract(this._map._getNewPixelOrigin(r,o));ae.any3d?Bt(this._container,N,u):Oe(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-r)).round();this._bounds=new J(u,u.add(o.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xh=On.extend({options:{tolerance:0},getEvents:function(){var r=On.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){On.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");me(r,"mousemove",this._onMouseMove,this),me(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){ne(this._redrawRequest),delete this._ctx,Pe(this._container),Ce(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var o in this._layers)r=this._layers[o],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){On.prototype._update.call(this);var r=this._bounds,o=this._container,u=r.getSize(),h=ae.retina?2:1;Oe(o,r.min),o.width=h*u.x,o.height=h*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){On.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[f(r)]=r;var o=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var o=r._order,u=o.next,h=o.prev;u?u.prev=h:this._drawLast=h,h?h.next=u:this._drawFirst=u,delete r._order,delete this._layers[f(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var o=r.options.dashArray.split(/[, ]+/),u=[],h,m;for(m=0;m<o.length;m++){if(h=Number(o[m]),isNaN(h))return;u.push(h)}r.options._dashArray=u}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||se(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var o=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(r._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(r._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var o=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)r=h.layer,(!o||r._pxBounds&&r._pxBounds.intersects(o))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,o){if(this._drawing){var u,h,m,N,P=r._parts,M=P.length,O=this._ctx;if(M){for(O.beginPath(),u=0;u<M;u++){for(h=0,m=P[u].length;h<m;h++)N=P[u][h],O[h?"lineTo":"moveTo"](N.x,N.y);o&&O.closePath()}this._fillStroke(O,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var o=r._point,u=this._ctx,h=Math.max(Math.round(r._radius),1),m=(Math.max(Math.round(r._radiusY),1)||h)/h;m!==1&&(u.save(),u.scale(1,m)),u.beginPath(),u.arc(o.x,o.y/m,h,0,Math.PI*2,!1),m!==1&&u.restore(),this._fillStroke(u,r)}},_fillStroke:function(r,o){var u=o.options;u.fill&&(r.globalAlpha=u.fillOpacity,r.fillStyle=u.fillColor||u.color,r.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(r.setLineDash&&r.setLineDash(o.options&&o.options._dashArray||[]),r.globalAlpha=u.opacity,r.lineWidth=u.weight,r.strokeStyle=u.color,r.lineCap=u.lineCap,r.lineJoin=u.lineJoin,r.stroke())},_onClick:function(r){for(var o=this._map.mouseEventToLayerPoint(r),u,h,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(u))&&(h=u);this._fireEvent(h?[h]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,o)}},_handleMouseOut:function(r){var o=this._hoveredLayer;o&&(Re(this._container,"leaflet-interactive"),this._fireEvent([o],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,o){if(!this._mouseHoverThrottled){for(var u,h,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(h=u);h!==this._hoveredLayer&&(this._handleMouseOut(r),h&&(he(this._container,"leaflet-interactive"),this._fireEvent([h],r,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,o,u){this._map._fireDOMEvent(o,u||o.type,r)},_bringToFront:function(r){var o=r._order;if(o){var u=o.next,h=o.prev;if(u)u.prev=h;else return;h?h.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(r)}},_bringToBack:function(r){var o=r._order;if(o){var u=o.next,h=o.prev;if(h)h.next=u;else return;u?u.prev=h:h&&(this._drawLast=h),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(r)}}});function vh(r){return ae.canvas?new xh(r):null}var Bi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),X0={_initContainer:function(){this._container=be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(On.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var o=r._container=Bi("shape");he(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",r._path=Bi("path"),o.appendChild(r._path),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){var o=r._container;this._container.appendChild(o),r.options.interactive&&r.addInteractiveTarget(o)},_removePath:function(r){var o=r._container;Pe(o),r.removeInteractiveTarget(o),delete this._layers[f(r)]},_updateStyle:function(r){var o=r._stroke,u=r._fill,h=r.options,m=r._container;m.stroked=!!h.stroke,m.filled=!!h.fill,h.stroke?(o||(o=r._stroke=Bi("stroke")),m.appendChild(o),o.weight=h.weight+"px",o.color=h.color,o.opacity=h.opacity,h.dashArray?o.dashStyle=j(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=h.lineCap.replace("butt","flat"),o.joinstyle=h.lineJoin):o&&(m.removeChild(o),r._stroke=null),h.fill?(u||(u=r._fill=Bi("fill")),m.appendChild(u),u.color=h.fillColor||h.color,u.opacity=h.fillOpacity):u&&(m.removeChild(u),r._fill=null)},_updateCircle:function(r){var o=r._point.round(),u=Math.round(r._radius),h=Math.round(r._radiusY||u);this._setPath(r,r._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+h+" 0,"+65535*360)},_setPath:function(r,o){r._path.v=o},_bringToFront:function(r){jn(r._container)},_bringToBack:function(r){Sn(r._container)}},fo=ae.vml?Bi:W,Fi=On.extend({_initContainer:function(){this._container=fo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pe(this._container),Ce(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){On.prototype._update.call(this);var r=this._bounds,o=r.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),Oe(u,r.min),u.setAttribute("viewBox",[r.min.x,r.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(r){var o=r._path=fo("path");r.options.className&&he(o,r.options.className),r.options.interactive&&he(o,"leaflet-interactive"),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Pe(r._path),r.removeInteractiveTarget(r._path),delete this._layers[f(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var o=r._path,u=r.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(r,o){this._setPath(r,ke(r._parts,o))},_updateCircle:function(r){var o=r._point,u=Math.max(Math.round(r._radius),1),h=Math.max(Math.round(r._radiusY),1)||u,m="a"+u+","+h+" 0 1,0 ",N=r._empty()?"M0 0":"M"+(o.x-u)+","+o.y+m+u*2+",0 "+m+-u*2+",0 ";this._setPath(r,N)},_setPath:function(r,o){r._path.setAttribute("d",o)},_bringToFront:function(r){jn(r._path)},_bringToBack:function(r){Sn(r._path)}});ae.vml&&Fi.include(X0);function yh(r){return ae.svg||ae.vml?new Fi(r):null}_e.include({getRenderer:function(r){var o=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var o=this._paneRenderers[r];return o===void 0&&(o=this._createRenderer({pane:r}),this._paneRenderers[r]=o),o},_createRenderer:function(r){return this.options.preferCanvas&&vh(r)||yh(r)}});var _h=Ts.extend({initialize:function(r,o){Ts.prototype.initialize.call(this,this._boundsToLatLngs(r),o)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=fe(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function J0(r,o){return new _h(r,o)}Fi.create=fo,Fi.pointsToPath=ke,Rn.geometryToLayer=io,Rn.coordsToLatLng=uc,Rn.coordsToLatLngs=ao,Rn.latLngToCoords=dc,Rn.latLngsToCoords=oo,Rn.getFeature=Ms,Rn.asFeature=lo,_e.mergeOptions({boxZoom:!0});var wh=Ut.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),tr(),Ni(),this._startPoint=this._map.mouseEventToContainerPoint(r),me(document,{contextmenu:Tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=be("div","leaflet-zoom-box",this._container),he(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var o=new J(this._point,this._startPoint),u=o.getSize();Oe(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Pe(this._box),Re(this._container,"leaflet-crosshair")),nr(),ki(),Ce(document,{contextmenu:Tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var o=new we(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_e.addInitHook("addHandler","boxZoom",wh),_e.mergeOptions({doubleClickZoom:!0});var bh=Ut.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var o=this._map,u=o.getZoom(),h=o.options.zoomDelta,m=r.originalEvent.shiftKey?u-h:u+h;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(r.containerPoint,m)}});_e.addInitHook("addHandler","doubleClickZoom",bh),_e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Lh=Ut.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new sr(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}he(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Re(this._map._container,"leaflet-grab"),Re(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=fe(this._map.options.maxBounds);this._offsetLimit=le(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,o){return r-(r-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;r.x<o.min.x&&(r.x=this._viscousLimit(r.x,o.min.x)),r.y<o.min.y&&(r.y=this._viscousLimit(r.y,o.min.y)),r.x>o.max.x&&(r.x=this._viscousLimit(r.x,o.max.x)),r.y>o.max.y&&(r.y=this._viscousLimit(r.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,o=Math.round(r/2),u=this._initialWorldOffset,h=this._draggable._newPos.x,m=(h-o+u)%r+o-u,N=(h+o+u)%r-o-u,P=Math.abs(m+u)<Math.abs(N+u)?m:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(r){var o=this._map,u=o.options,h=!u.inertia||r.noInertia||this._times.length<2;if(o.fire("dragend",r),h)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,P=u.easeLinearity,M=m.multiplyBy(P/N),O=M.distanceTo([0,0]),U=Math.min(u.inertiaMaxSpeed,O),ee=M.multiplyBy(U/O),de=U/(u.inertiaDeceleration*P),ve=ee.multiplyBy(-de/2).round();!ve.x&&!ve.y?o.fire("moveend"):(ve=o._limitOffset(ve,o.options.maxBounds),se(function(){o.panBy(ve,{duration:de,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});_e.addInitHook("addHandler","dragging",Lh),_e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Nh=Ut.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),me(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ce(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,o=document.documentElement,u=r.scrollTop||o.scrollTop,h=r.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(h,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var o=this._panKeys={},u=this.keyCodes,h,m;for(h=0,m=u.left.length;h<m;h++)o[u.left[h]]=[-1*r,0];for(h=0,m=u.right.length;h<m;h++)o[u.right[h]]=[r,0];for(h=0,m=u.down.length;h<m;h++)o[u.down[h]]=[0,r];for(h=0,m=u.up.length;h<m;h++)o[u.up[h]]=[0,-1*r]},_setZoomDelta:function(r){var o=this._zoomKeys={},u=this.keyCodes,h,m;for(h=0,m=u.zoomIn.length;h<m;h++)o[u.zoomIn[h]]=r;for(h=0,m=u.zoomOut.length;h<m;h++)o[u.zoomOut[h]]=-r},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=r.keyCode,u=this._map,h;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(h=this._panKeys[o],r.shiftKey&&(h=F(h).multiplyBy(3)),u.options.maxBounds&&(h=u._limitOffset(F(h),u.options.maxBounds)),u.options.worldCopyJump){var m=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(h)));u.panTo(m)}else u.panBy(h)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;Tn(r)}}});_e.addInitHook("addHandler","keyboard",Nh),_e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var kh=Ut.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var o=Xa(r),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var h=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),h),Tn(r)},_performZoom:function(){var r=this._map,o=r.getZoom(),u=this._map.options.zoomSnap||0;r._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,N=u?Math.ceil(m/u)*u:m,P=r._limitZoom(o+(this._delta>0?N:-N))-o;this._delta=0,this._startTime=null,P&&(r.options.scrollWheelZoom==="center"?r.setZoom(o+P):r.setZoomAround(this._lastMousePos,o+P))}});_e.addInitHook("addHandler","scrollWheelZoom",kh);var ex=600;_e.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var Ch=Ut.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var o=r.touches[0];this._startPos=this._newPos=new R(o.clientX,o.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",Ge),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),ex),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Ce(document,"touchend",Ge),Ce(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Ce(document,"touchend touchcancel contextmenu",this._cancel,this),Ce(document,"touchmove",this._onMove,this)},_onMove:function(r){var o=r.touches[0];this._newPos=new R(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,o){var u=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});_e.addInitHook("addHandler","tapHold",Ch),_e.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var jh=Ut.extend({addHooks:function(){he(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Re(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var o=this._map;if(!(!r.touches||r.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(r.touches[0]),h=o.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(h)._divideBy(2))),this._startDist=u.distanceTo(h),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),Ge(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(r.touches[0]),h=o.mouseEventToContainerPoint(r.touches[1]),m=u.distanceTo(h)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var N=u._add(h)._divideBy(2)._subtract(this._centerPoint);if(m===1&&N.x===0&&N.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),ne(this._animRequest);var P=c(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=se(P,this,!0),Ge(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ne(this._animRequest),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_e.addInitHook("addHandler","touchZoom",jh),_e.BoxZoom=wh,_e.DoubleClickZoom=bh,_e.Drag=Lh,_e.Keyboard=Nh,_e.ScrollWheelZoom=kh,_e.TapHold=Ch,_e.TouchZoom=jh,n.Bounds=J,n.Browser=ae,n.CRS=B,n.Canvas=xh,n.Circle=cc,n.CircleMarker=so,n.Class=q,n.Control=Tt,n.DivIcon=ph,n.DivOverlay=fn,n.DomEvent=tc,n.DomUtil=Jl,n.Draggable=sr,n.Evented=ce,n.FeatureGroup=Mn,n.GeoJSON=Rn,n.GridLayer=Ai,n.Handler=Ut,n.Icon=Ps,n.ImageOverlay=co,n.LatLng=ue,n.LatLngBounds=we,n.Layer=Xt,n.LayerGroup=Es,n.LineUtil=T0,n.Map=_e,n.Marker=ro,n.Mixin=k0,n.Path=ir,n.Point=R,n.PolyUtil=C0,n.Polygon=Ts,n.Polyline=In,n.Popup=uo,n.PosAnimation=Ja,n.Projection=M0,n.Rectangle=_h,n.Renderer=On,n.SVG=Fi,n.SVGOverlay=fh,n.TileLayer=Is,n.Tooltip=ho,n.Transformation=vt,n.Util=$,n.VideoOverlay=hh,n.bind=c,n.bounds=le,n.canvas=vh,n.circle=F0,n.circleMarker=B0,n.control=Gr,n.divIcon=K0,n.extend=s,n.featureGroup=D0,n.geoJSON=dh,n.geoJson=Z0,n.gridLayer=Q0,n.icon=z0,n.imageOverlay=W0,n.latLng=K,n.latLngBounds=fe,n.layerGroup=O0,n.map=nc,n.marker=A0,n.point=F,n.polygon=H0,n.polyline=U0,n.popup=G0,n.rectangle=J0,n.setOptions=y,n.stamp=f,n.svg=yh,n.svgOverlay=$0,n.tileLayer=mh,n.tooltip=q0,n.transformation=et,n.version=i,n.videoOverlay=V0;var tx=window.L;n.noConflict=function(){return window.L=tx,this},window.L=n})})(qu,qu.exports);var pL=qu.exports;const nt=gp(pL);(function(e,t,n){function i(s,a){for(;(s=s.parentElement)&&!s.classList.contains(a););return s}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(s,a){this._map=s,this._container=s._container,this._overlayPane=s._panes.overlayPane,this._popupPane=s._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(L.DomUtil.disableTextSelection(),s.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(s){L.setOptions(this,s)},_fireCreatedEvent:function(s){this._map.fire(L.Draw.Event.CREATED,{layer:s,layerType:this.type})},_cancelDrawing:function(s){s.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(s,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var s=this._markers.pop(),a=this._poly,c=a.getLatLngs(),d=c.splice(-1,1)[0];this._poly.setLatLngs(c),this._markerGroup.removeLayer(s),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(d,!1)}},addVertex:function(s){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(s))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(s)),this._poly.addLatLng(s),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(s,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var s=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(s[s.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent),c=this._map.layerPointToLatLng(a);this._currentLatLng=c,this._updateTooltip(c),this._updateGuide(a),this._mouseMarker.setLatLng(c),L.DomEvent.preventDefault(s.originalEvent)},_vertexChanged:function(s,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(s,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(s){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(s),this._clickHandled=!0,this._disableNewMarkers();var a=s.originalEvent,c=a.clientX,d=a.clientY;this._startPoint.call(this,c,d)}},_startPoint:function(s,a){this._mouseDownOrigin=L.point(s,a)},_onMouseUp:function(s){var a=s.originalEvent,c=a.clientX,d=a.clientY;this._endPoint.call(this,c,d,s),this._clickHandled=null},_endPoint:function(s,a,c){if(this._mouseDownOrigin){var d=L.point(s,a).distanceTo(this._mouseDownOrigin),f=this._calculateFinishDistance(c.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(c.latlng),this._finishShape()):f<10&&L.Browser.touch?this._finishShape():Math.abs(d)<9*(e.devicePixelRatio||1)&&this.addVertex(c.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(s){var a,c,d=s.originalEvent;!d.touches||!d.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=d.touches[0].clientX,c=d.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,c),this._endPoint.call(this,a,c,s),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(s){var a;if(this._markers.length>0){var c;if(this.type===L.Draw.Polyline.TYPE)c=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;c=this._markers[0]}var d=this._map.latLngToContainerPoint(c.getLatLng()),f=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),p=this._map.latLngToContainerPoint(f.getLatLng());a=d.distanceTo(p)}else a=1/0;return a},_updateFinishHandler:function(){var s=this._markers.length;s>1&&this._markers[s-1].on("click",this._finishShape,this),s>2&&this._markers[s-2].off("click",this._finishShape,this)},_createMarker:function(s){var a=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(s){var a=this._markers?this._markers.length:0;a>0&&(s=s||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),s))},_updateTooltip:function(s){var a=this._getTooltipText();s&&this._tooltip.updatePosition(s),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(s,a){var c,d,f,p=Math.floor(Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))),g=this.options.guidelineDistance,v=this.options.maxGuideLineLength,C=p>v?p-v:g;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));C<p;C+=this.options.guidelineDistance)c=C/p,d={x:Math.floor(s.x*(1-c)+c*a.x),y:Math.floor(s.y*(1-c)+c*a.y)},f=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),f.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(f,d)},_updateGuideColor:function(s){if(this._guidesContainer)for(var a=0,c=this._guidesContainer.childNodes.length;a<c;a++)this._guidesContainer.childNodes[a].style.backgroundColor=s},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var s,a,c=this.options.showLength;return this._markers.length===0?s={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=c?this._getMeasurementString():"",s=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),s},_updateRunningMeasure:function(s,a){var c,d,f=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(c=f-(a?2:1),d=L.GeometryUtil.isVersion07x()?s.distanceTo(this._markers[c].getLatLng())*(this.options.factor||1):this._map.distance(s,this._markers[c].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=d*(a?1:-1))},_getMeasurementString:function(){var s,a=this._currentLatLng,c=this._markers[this._markers.length-1].getLatLng();return s=L.GeometryUtil.isVersion07x()?c&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(c)*(this.options.factor||1):this._measurementRunningTotal||0:c&&a?this._measurementRunningTotal+this._map.distance(a,c)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(s,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var s=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(s,a){L.Draw.Polyline.prototype.initialize.call(this,s,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var s=this._markers.length;s===1&&this._markers[0].on("click",this._finishShape,this),s>2&&(this._markers[s-1].on("dblclick",this._finishShape,this),s>3&&this._markers[s-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var s,a;return this._markers.length===0?s=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(s=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(s=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:s,subtext:a}},_getMeasurementString:function(){var s=this._area,a="";return s||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),s&&(a+="<br>"+L.GeometryUtil.readableArea(s,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(s,a){var c;!this.options.allowIntersection&&this.options.showArea&&(c=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(c)),L.Draw.Polyline.prototype._vertexChanged.call(this,s,a)},_cleanUpShape:function(){var s=this._markers.length;s>0&&(this._markers[0].off("click",this._finishShape,this),s>2&&this._markers[s-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(s,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(s){this._isDrawing=!0,this._startLatLng=s.latlng,L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(s.originalEvent)},_onMouseMove:function(s){var a=s.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(s,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(s){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!i(s.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(s){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,s)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,s),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_getTooltipText:function(){var s,a,c,d=L.Draw.SimpleShape.prototype._getTooltipText.call(this),f=this._shape,p=this.options.showArea;return f&&(s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(s),c=p?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:d.text,subtext:c}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(s,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(s){var a=s.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(s){return new L.Marker(s,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(s){this._onMouseMove(s),this._onClick()},_fireCreatedEvent:function(){var s=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(s,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,a)},_fireCreatedEvent:function(){var s=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)},_createMarker:function(s){return new L.CircleMarker(s,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(s,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,a)},_drawShape:function(s){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(s);else var a=this._map.distance(this._startLatLng,s);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_onMouseMove:function(s){var a,c=s.latlng,d=this.options.showRadius,f=this.options.metric;if(this._tooltip.updatePosition(c),this._isDrawing){this._drawShape(c),a=this._shape.getRadius().toFixed(1);var p="";d&&(p=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,f,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:p})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(s,a){this._marker=s,L.setOptions(this,a)},addHooks:function(){var s=this._marker;s.dragging.enable(),s.on("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},removeHooks:function(){var s=this._marker;s.dragging.disable(),s.off("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},_onDragEnd:function(s){var a=s.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var s=this._marker._icon;s&&(s.style.display="none",L.DomUtil.hasClass(s,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,-4)):(L.DomUtil.addClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,4)),s.style.display="")},_offsetMarker:function(s,a){var c=parseInt(s.style.marginTop,10)-a,d=parseInt(s.style.marginLeft,10)-a;s.style.marginTop=c+"px",s.style.marginLeft=d+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(s){this.latlngs=[s._latlngs],s._holes&&(this.latlngs=this.latlngs.concat(s._holes)),this._poly=s,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(s){for(var a=0;a<this._verticesHandlers.length;a++)s(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(s){s.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(s){s.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(s){s.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var s=0;s<this.latlngs.length;s++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[s],this._poly.options.poly))},_updateLatLngs:function(s){this.latlngs=[s.layer._latlngs],s.layer._holes&&(this.latlngs=this.latlngs.concat(s.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(s,a,c){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=s,c&&c.drawError&&(c.drawError=L.Util.extend({},this.options.drawError,c.drawError)),this._latlngs=a,L.setOptions(this,c)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var s=this._poly,a=s._path;s instanceof L.Polygon||(s.options.fill=!1,s.options.editing&&(s.options.editing.fill=!1)),a&&s.options.editing&&s.options.editing.className&&(s.options.original.className&&s.options.original.className.split(" ").forEach(function(c){L.DomUtil.removeClass(a,c)}),s.options.editing.className.split(" ").forEach(function(c){L.DomUtil.addClass(a,c)})),s.setStyle(s.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var s=this._poly,a=s._path;a&&s.options.editing&&s.options.editing.className&&(s.options.editing.className.split(" ").forEach(function(c){L.DomUtil.removeClass(a,c)}),s.options.original.className&&s.options.original.className.split(" ").forEach(function(c){L.DomUtil.addClass(a,c)})),s.setStyle(s.options.original),s._map&&(s._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var s,a,c,d,f=this._defaultShape();for(s=0,c=f.length;s<c;s++)d=this._createMarker(f[s],s),d.on("click",this._onMarkerClick,this),d.on("contextmenu",this._onContextMenu,this),this._markers.push(d);var p,g;for(s=0,a=c-1;s<c;a=s++)(s!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(p=this._markers[a],g=this._markers[s],this._createMiddleMarker(p,g),this._updatePrevNext(p,g))},_createMarker:function(s,a){var c=new L.Marker.Touch(s,{draggable:!0,icon:this.options.icon});return c._origLatLng=s,c._index=a,c.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(c),c},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var s=this._defaultShape(),a=[].splice.apply(s,arguments);return this._poly._convertLatLngs(s,!0),this._poly.redraw(),a},_removeMarker:function(s){var a=s._index;this._markerGroup.removeLayer(s),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(s){var a=s.target,c=this._poly,d=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),c.options.poly){var f=c._map._editTooltip;if(!c.options.poly.allowIntersection&&c.intersects()){L.extend(a._origLatLng,d),a.setLatLng(d);var p=c.options.color;c.setStyle({color:this.options.drawError.color}),f&&f.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){c.setStyle({color:p}),f&&f.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var g=this._poly.getLatLngs();this._poly._convertLatLngs(g,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(s){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,c=s.target;this._defaultShape().length<a||(this._removeMarker(c),this._updatePrevNext(c._prev,c._next),c._middleLeft&&this._markerGroup.removeLayer(c._middleLeft),c._middleRight&&this._markerGroup.removeLayer(c._middleRight),c._prev&&c._next?this._createMiddleMarker(c._prev,c._next):c._prev?c._next||(c._prev._middleRight=null):c._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(s){var a=s.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),c=this._map.layerPointToLatLng(a),d=s.target;L.extend(d._origLatLng,c),d._middleLeft&&d._middleLeft.setLatLng(this._getMiddleLatLng(d._prev,d)),d._middleRight&&d._middleRight.setLatLng(this._getMiddleLatLng(d,d._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(s,a){this._markerGroup.eachLayer(function(c){c._index>s&&(c._index+=a)})},_createMiddleMarker:function(s,a){var c,d,f,p=this._getMiddleLatLng(s,a),g=this._createMarker(p);g.setOpacity(.6),s._middleRight=a._middleLeft=g,d=function(){g.off("touchmove",d,this);var v=a._index;g._index=v,g.off("click",c,this).on("click",this._onMarkerClick,this),p.lat=g.getLatLng().lat,p.lng=g.getLatLng().lng,this._spliceLatLngs(v,0,p),this._markers.splice(v,0,g),g.setOpacity(1),this._updateIndexes(v,1),a._index++,this._updatePrevNext(s,g),this._updatePrevNext(g,a),this._poly.fire("editstart")},f=function(){g.off("dragstart",d,this),g.off("dragend",f,this),g.off("touchmove",d,this),this._createMiddleMarker(s,g),this._createMiddleMarker(g,a)},c=function(){d.call(this),f.call(this),this._fireEdit()},g.on("click",c,this).on("dragstart",d,this).on("dragend",f,this).on("touchmove",d,this),this._markerGroup.addLayer(g)},_updatePrevNext:function(s,a){s&&(s._next=a),a&&(a._prev=s)},_getMiddleLatLng:function(s,a){var c=this._poly._map,d=c.project(s.getLatLng()),f=c.project(a.getLatLng());return c.unproject(d._add(f)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(s,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=s,L.Util.setOptions(this,a)},addHooks:function(){var s=this._shape;this._shape._map&&(this._map=this._shape._map,s.setStyle(s.options.editing),s._map&&(this._map=s._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var s=this._shape;if(s.setStyle(s.options.original),s._map){this._unbindMarker(this._moveMarker);for(var a=0,c=this._resizeMarkers.length;a<c;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(s,a){var c=new L.Marker.Touch(s,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(c),this._markerGroup.addLayer(c),c},_bindMarker:function(s){s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(s){s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(s){s.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(s){var a=s.target,c=a.getLatLng();a===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(s){s.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(s){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s),typeof this._getCorners=="function"){var a=this._getCorners(),c=s.target,d=c._cornerIndex;c.setOpacity(0),this._oppositeCorner=a[(d+2)%4],this._toggleCornerMarkers(0,d)}this._shape.fire("editstart")},_onTouchMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),c=this._map.layerPointToLatLng(a);return s.target===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),!1},_onTouchEnd:function(s){s.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getBounds(),a=s.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var s=this._getCorners();this._resizeMarkers=[];for(var a=0,c=s.length;a<c;a++)this._resizeMarkers.push(this._createMarker(s[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(s){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s);var a=this._getCorners(),c=s.target,d=c._cornerIndex;this._oppositeCorner=a[(d+2)%4],this._toggleCornerMarkers(0,d)},_onMarkerDragEnd:function(s){var a,c,d=s.target;d===this._moveMarker&&(a=this._shape.getBounds(),c=a.getCenter(),d.setLatLng(c)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,s)},_move:function(s){for(var a,c=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),d=this._shape.getBounds(),f=d.getCenter(),p=[],g=0,v=c.length;g<v;g++)a=[c[g].lat-f.lat,c[g].lng-f.lng],p.push([s.lat+a[0],s.lng+a[1]]);this._shape.setLatLngs(p),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(s){var a;this._shape.setBounds(L.latLngBounds(s,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var s=this._shape.getBounds();return[s.getNorthWest(),s.getNorthEast(),s.getSouthEast(),s.getSouthWest()]},_toggleCornerMarkers:function(s){for(var a=0,c=this._resizeMarkers.length;a<c;a++)this._resizeMarkers[a].setOpacity(s)},_repositionCornerMarkers:function(){for(var s=this._getCorners(),a=0,c=this._resizeMarkers.length;a<c;a++)this._resizeMarkers[a].setLatLng(s[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getLatLng();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(s){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(s);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(s),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var s=this._shape.getLatLng(),a=this._getResizeMarkerPoint(s);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(s){var a=this._shape._radius*Math.cos(Math.PI/4),c=this._map.project(s);return this._map.unproject([c.x+a,c.y-a])},_resize:function(s){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(s):radius=this._map.distance(a,s),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(s,a){var c={};if(s.touches!==void 0){if(!s.touches.length)return;c=s.touches[0]}else if(s.pointerType!=="touch"||(c=s,!this._filterClick(s)))return;var d=this._map.mouseEventToContainerPoint(c),f=this._map.mouseEventToLayerPoint(c),p=this._map.layerPointToLatLng(f);this._map.fire(a,{latlng:p,layerPoint:f,containerPoint:d,pageX:c.pageX,pageY:c.pageY,originalEvent:s})},_filterClick:function(s){var a=s.timeStamp||s.originalEvent.timeStamp,c=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return c&&c>100&&c<500||s.target._simulatedClick&&!s._simulated?(L.DomEvent.stop(s),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(s){this._map._loaded&&this._touchEvent(s,"touchstart")},_onTouchEnd:function(s){this._map._loaded&&this._touchEvent(s,"touchend")},_onTouchCancel:function(s){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(s,a)}},_onTouchLeave:function(s){this._map._loaded&&this._touchEvent(s,"touchleave")},_onTouchMove:function(s){this._map._loaded&&this._touchEvent(s,"touchmove")},_detectIE:function(){var s=e.navigator.userAgent,a=s.indexOf("MSIE ");if(a>0)return parseInt(s.substring(a+5,s.indexOf(".",a)),10);if(s.indexOf("Trident/")>0){var c=s.indexOf("rv:");return parseInt(s.substring(c+3,s.indexOf(".",c)),10)}var d=s.indexOf("Edge/");return d>0&&parseInt(s.substring(d+5,s.indexOf(".",d)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var s=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(s,"leaflet-clickable"),L.DomEvent.on(s,"click",this._onMouseClick,this),L.DomEvent.on(s,"keypress",this._onKeyPress,this);for(var c=0;c<a.length;c++)L.DomEvent.on(s,a[c],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var s=e.navigator.userAgent,a=s.indexOf("MSIE ");if(a>0)return parseInt(s.substring(a+5,s.indexOf(".",a)),10);if(s.indexOf("Trident/")>0){var c=s.indexOf("rv:");return parseInt(s.substring(c+3,s.indexOf(".",c)),10)}var d=s.indexOf("Edge/");return d>0&&parseInt(s.substring(d+5,s.indexOf(".",d)),10)}}),L.LatLngUtil={cloneLatLngs:function(s){for(var a=[],c=0,d=s.length;c<d;c++)Array.isArray(s[c])?a.push(L.LatLngUtil.cloneLatLngs(s[c])):a.push(this.cloneLatLng(s[c]));return a},cloneLatLng:function(s){return L.latLng(s.lat,s.lng)}},function(){var s={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var c,d,f=a.length,p=0,g=Math.PI/180;if(f>2){for(var v=0;v<f;v++)c=a[v],d=a[(v+1)%f],p+=(d.lng-c.lng)*g*(2+Math.sin(c.lat*g)+Math.sin(d.lat*g));p=6378137*p*6378137/2}return Math.abs(p)},formattedNumber:function(a,c){var d=parseFloat(a).toFixed(c),f=L.drawLocal.format&&L.drawLocal.format.numeric,p=f&&f.delimiters,g=p&&p.thousands,v=p&&p.decimal;if(g||v){var C=d.split(".");d=g?C[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g):C[0],v=v||".",C.length>1&&(d=d+v+C[1])}return d},readableArea:function(a,c,g){var f,p,g=L.Util.extend({},s,g);return c?(p=["ha","m"],type=typeof c,type==="string"?p=[c]:type!=="boolean"&&(p=c),f=a>=1e6&&p.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,g.km)+" km":a>=1e4&&p.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,g.ha)+" ha":L.GeometryUtil.formattedNumber(a,g.m)+" m"):(a/=.836127,f=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,g.mi)+" mi":a>=4840?L.GeometryUtil.formattedNumber(a/4840,g.ac)+" acres":L.GeometryUtil.formattedNumber(a,g.yd)+" yd"),f},readableDistance:function(a,c,d,f,v){var g,v=L.Util.extend({},s,v);switch(c?typeof c=="string"?c:"metric":d?"feet":f?"nauticalMile":"yards"){case"metric":g=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,v.km)+" km":L.GeometryUtil.formattedNumber(a,v.m)+" m";break;case"feet":a*=3.28083,g=L.GeometryUtil.formattedNumber(a,v.ft)+" ft";break;case"nauticalMile":a*=.53996,g=L.GeometryUtil.formattedNumber(a/1e3,v.nm)+" nm";break;case"yards":default:a*=1.09361,g=a>1760?L.GeometryUtil.formattedNumber(a/1760,v.mi)+" miles":L.GeometryUtil.formattedNumber(a,v.yd)+" yd"}return g},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(s,a,c,d){return this._checkCounterclockwise(s,c,d)!==this._checkCounterclockwise(a,c,d)&&this._checkCounterclockwise(s,a,c)!==this._checkCounterclockwise(s,a,d)},_checkCounterclockwise:function(s,a,c){return(c.y-s.y)*(a.x-s.x)>(a.y-s.y)*(c.x-s.x)}}),L.Polyline.include({intersects:function(){var s,a,c,d=this._getProjectedPoints(),f=d?d.length:0;if(this._tooFewPointsForIntersection())return!1;for(s=f-1;s>=3;s--)if(a=d[s-1],c=d[s],this._lineSegmentsIntersectsRange(a,c,s-2))return!0;return!1},newLatLngIntersects:function(s,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(s),a)},newPointIntersects:function(s,a){var c=this._getProjectedPoints(),d=c?c.length:0,f=c?c[d-1]:null,p=d-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(f,s,p,a?1:0)},_tooFewPointsForIntersection:function(s){var a=this._getProjectedPoints(),c=a?a.length:0;return c+=s||0,!a||c<=3},_lineSegmentsIntersectsRange:function(s,a,c,d){var f,p,g=this._getProjectedPoints();d=d||0;for(var v=c;v>d;v--)if(f=g[v-1],p=g[v],L.LineUtil.segmentsIntersect(s,a,f,p))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var s=[],a=this._defaultShape(),c=0;c<a.length;c++)s.push(this._map.latLngToLayerPoint(a[c]));return s}}),L.Polygon.include({intersects:function(){var s,a,c,d,f=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(s=f.length,a=f[0],c=f[s-1],d=s-2,this._lineSegmentsIntersectsRange(c,a,d,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(s){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,s);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(s){var a,c=L.DomUtil.create("div","leaflet-draw"),d=!1;for(var f in this._toolbars)this._toolbars.hasOwnProperty(f)&&(a=this._toolbars[f].addToolbar(s))&&(d||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),d=!0),c.appendChild(a));return c},onRemove:function(){for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&this._toolbars[s].removeToolbar()},setDrawingOptions:function(s){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(s)},_toolbarEnabled:function(s){var a=s.target;for(var c in this._toolbars)this._toolbars[c]!==a&&this._toolbars[c].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(s){L.setOptions(this,s),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(s){var a,c=L.DomUtil.create("div","leaflet-draw-section"),d=0,f=this._toolbarClass||"",p=this.getModeHandlers(s);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=s,a=0;a<p.length;a++)p[a].enabled&&this._initModeHandler(p[a].handler,this._toolbarContainer,d++,f,p[a].title);if(d)return this._lastButtonIndex=--d,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),c.appendChild(this._toolbarContainer),c.appendChild(this._actionsContainer),c},removeToolbar:function(){for(var s in this._modes)this._modes.hasOwnProperty(s)&&(this._disposeButton(this._modes[s].button,this._modes[s].handler.enable,this._modes[s].handler),this._modes[s].handler.disable(),this._modes[s].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,c=this._actionButtons.length;a<c;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(s,a,c,d,f){var p=s.type;this._modes[p]={},this._modes[p].handler=s,this._modes[p].button=this._createButton({type:p,title:f,className:d+"-"+p,container:a,callback:this._modes[p].handler.enable,context:this._modes[p].handler}),this._modes[p].buttonIndex=c,this._modes[p].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(s){var a=L.DomUtil.create("a",s.className||"",s.container),c=L.DomUtil.create("span","sr-only",s.container);a.href="#",a.appendChild(c),s.title&&(a.title=s.title,c.innerHTML=s.title),s.text&&(a.innerHTML=s.text,c.innerHTML=s.text);var d=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,d,s.callback,s.context),a},_disposeButton:function(s,a){var c=this._detectIOS()?"touchstart":"click";L.DomEvent.off(s,"click",L.DomEvent.stopPropagation).off(s,"mousedown",L.DomEvent.stopPropagation).off(s,"dblclick",L.DomEvent.stopPropagation).off(s,"touchstart",L.DomEvent.stopPropagation).off(s,"click",L.DomEvent.preventDefault).off(s,c,a)},_handlerActivated:function(s){this.disable(),this._activeMode=this._modes[s.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(s){var a,c,d,f,p=this._actionsContainer,g=this.getActions(s),v=g.length;for(c=0,d=this._actionButtons.length;c<d;c++)this._disposeButton(this._actionButtons[c].button,this._actionButtons[c].callback);for(this._actionButtons=[];p.firstChild;)p.removeChild(p.firstChild);for(var C=0;C<v;C++)"enabled"in g[C]&&!g[C].enabled||(a=L.DomUtil.create("li","",p),f=this._createButton({title:g[C].title,text:g[C].text,container:a,callback:g[C].callback,context:g[C].context}),this._actionButtons.push({button:f,callback:g[C].callback}))},_showActionsToolbar:function(){var s=this._activeMode.buttonIndex,a=this._lastButtonIndex,c=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=c+"px",s===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),s===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(s){this._map=s,this._popupPane=s._panes.popupPane,this._visible=!1,this._container=s.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(s){return this._container?(s.subtext=s.subtext||"",s.subtext.length!==0||this._singleLineLabel?s.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(s.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+s.subtext+"</span><br />":"")+"<span>"+s.text+"</span>",s.text||s.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(s){var a=this._map.latLngToLayerPoint(s),c=this._container;return this._container&&(this._visible&&(c.style.visibility="inherit"),L.DomUtil.setPosition(c,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(s){for(var a in this.options)this.options.hasOwnProperty(a)&&s[a]&&(s[a]=L.extend({},this.options[a],s[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,s)},getModeHandlers:function(s){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(s,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(s,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(s,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(s,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(s,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(s,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(s){return[{enabled:s.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:s.completeShape,context:s},{enabled:s.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:s.deleteLastVertex,context:s},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(s){L.setOptions(this,s);for(var a in this._modes)this._modes.hasOwnProperty(a)&&s.hasOwnProperty(a)&&this._modes[a].handler.setOptions(s[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(s){s.edit&&(s.edit.selectedPathOptions===void 0&&(s.edit.selectedPathOptions=this.options.edit.selectedPathOptions),s.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,s.edit.selectedPathOptions)),s.remove&&(s.remove=L.extend({},this.options.remove,s.remove)),s.poly&&(s.poly=L.extend({},this.options.poly,s.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,s),this._selectedFeatureCount=0},getModeHandlers:function(s){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(s,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(s,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(s){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return s.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(s){var a=L.Toolbar.prototype.addToolbar.call(this,s);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var s,a=this.options.featureGroup,c=a.getLayers().length!==0;this.options.edit&&(s=this._modes[L.EditToolbar.Edit.TYPE].button,c?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(s=this._modes[L.EditToolbar.Delete.TYPE].button,c?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(s,a){if(L.Handler.prototype.initialize.call(this,s),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),s._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(s){this._revertLayer(s)},this)},save:function(){var s=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(s.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:s})},_backupLayer:function(s){var a=L.Util.stamp(s);this._uneditedLayerProps[a]||(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(s.getLatLngs())}:s instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng()),radius:s.getRadius()}:(s instanceof L.Marker||s instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(s){var a=L.Util.stamp(s);s.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?s.setLatLngs(this._uneditedLayerProps[a].latlngs):s instanceof L.Circle?(s.setLatLng(this._uneditedLayerProps[a].latlng),s.setRadius(this._uneditedLayerProps[a].radius)):(s instanceof L.Marker||s instanceof L.CircleMarker)&&s.setLatLng(this._uneditedLayerProps[a].latlng),s.fire("revert-edited",{layer:s}))},_enableLayerEdit:function(s){var a,c,d=s.layer||s.target||s;this._backupLayer(d),this.options.poly&&(c=L.Util.extend({},this.options.poly),d.options.poly=c),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=d.options.color,a.fillColor=d.options.fillColor),d.options.original=L.extend({},d.options),d.options.editing=a),d instanceof L.Marker?(d.editing&&d.editing.enable(),d.dragging.enable(),d.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):d.editing.enable()},_disableLayerEdit:function(s){var a=s.layer||s.target||s;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_onMarkerDragEnd:function(s){var a=s.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(s){var a=s.originalEvent.changedTouches[0],c=this._map.mouseEventToLayerPoint(a),d=this._map.layerPointToLatLng(c);s.target.setLatLng(d)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(s,a){if(L.Handler.prototype.initialize.call(this,s),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(s){this._deletableLayers.addLayer(s),s.fire("revert-deleted",{layer:s})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(s){this._removeLayer({layer:s})},this),this.save()},_enableLayerDelete:function(s){(s.layer||s.target||s).on("click",this._removeLayer,this)},_disableLayerDelete:function(s){var a=s.layer||s.target||s;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(s){var a=s.layer||s.target||s;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);delete nt.Icon.Default.prototype._getIconUrl;nt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const mL=5e-4,gL=5e-5;function xL(e,t,n=mL){const i={x:e.lng,y:e.lat};let s=null,a=1/0;for(const c of t){const d=Nl(c),f=w0(i,d),p=_0(i,f);p<n&&p<a&&(a=p,s=f)}return s?{lat:s.y,lng:s.x}:e}function vL(e,t,n=gL){const i={x:e.lng,y:e.lat};for(const s of t){const a=Nl(s);if(Gu(i,a)){const c=w0(i,a),d=a.reduce((C,S)=>C+S.x,0)/a.length,f=a.reduce((C,S)=>C+S.y,0)/a.length;let p=c.x-d,g=c.y-f;const v=Math.sqrt(p*p+g*g);return v>0&&(p/=v,g/=v),{lat:c.y+g*n,lng:c.x+p*n}}}return e}function mp(e,t,n){return e.length<3?e:e.map(i=>{let s=xL(i,t);return s=vL(s,t),s})}const N0=({areas:e=[],selectedAreaId:t,editMode:n=!1,initialPolygon:i,onPolygonChange:s,onAreaClick:a,center:c=[-17.3935,-66.157],zoom:d=12,height:f="500px",editingAreaId:p,enableSnapToEdge:g=!0,onOverlapError:v,onOverlapResolved:C})=>{const S=x.useRef(null),_=x.useRef(null),y=x.useRef(null),k=x.useRef(null),w=x.useRef(null),[b,j]=x.useState(!1),E=x.useCallback(()=>e.filter(I=>I.id!==p&&I.area&&I.area.length>=3).map(I=>I.area).filter(I=>I!==void 0),[e,p]),T=x.useCallback(I=>{if(I.length<3)return!1;for(const z of e)if(!(p&&z.id===p)&&!(!z.area||z.area.length<3)&&y0(I,z.area))return j(!0),v==null||v(z.name),!0;return j(!1),C==null||C(),!1},[e,p,v,C]);return x.useEffect(()=>{if(!S.current||_.current)return;const I=nt.map(S.current,{zoomControl:!0,scrollWheelZoom:!0}).setView(c,d);return nt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:19}).addTo(I),y.current=new nt.FeatureGroup().addTo(I),k.current=new nt.FeatureGroup().addTo(I),_.current=I,()=>{I.remove(),_.current=null}},[]),x.useEffect(()=>{const I=_.current,z=k.current;if(!(!I||!z)&&(w.current&&(I.removeControl(w.current),w.current=null),n)){const A=new nt.Control.Draw({position:"topright",draw:{polygon:{allowIntersection:!1,showArea:!0,shapeOptions:{color:"#3B82F6",fillColor:"#3B82F6",fillOpacity:.3,weight:2}},polyline:!1,rectangle:!1,circle:!1,circlemarker:!1,marker:!1},edit:{featureGroup:z,remove:!0}});I.addControl(A),w.current=A;const Q=ne=>{const $=ne;z.clearLayers();const X=$.layer.getLatLngs()[0].map(ce=>[ce.lat,ce.lng]);let G=Qf(X);if(g){G=mp(G,E());const ce=Ki(G),R=nt.polygon(ce,{color:b?"#EF4444":"#3B82F6",fillColor:b?"#EF4444":"#3B82F6",fillOpacity:.3});z.addLayer(R)}else z.addLayer($.layer);T(G),s==null||s(G)},Z=ne=>{ne.layers.eachLayer(q=>{const G=q.getLatLngs()[0].map(R=>[R.lat,R.lng]);let ce=Qf(G);if(g){ce=mp(ce,E());const R=Ki(ce);q.setLatLngs(R)}T(ce),s==null||s(ce)})},se=()=>{j(!1),C==null||C(),s==null||s(null)};return I.on(nt.Draw.Event.CREATED,Q),I.on(nt.Draw.Event.EDITED,Z),I.on(nt.Draw.Event.DELETED,se),()=>{I.off(nt.Draw.Event.CREATED,Q),I.off(nt.Draw.Event.EDITED,Z),I.off(nt.Draw.Event.DELETED,se)}}},[n,s,g,E,T,b,C]),x.useEffect(()=>{const I=k.current,z=_.current;if(!(!I||!n)&&(I.clearLayers(),i&&i.length>=3)){const A=Ki(i),Q=T(i),Z=nt.polygon(A,{color:Q?"#EF4444":"#3B82F6",fillColor:Q?"#EF4444":"#3B82F6",fillOpacity:.3,weight:2});I.addLayer(Z),z==null||z.fitBounds(Z.getBounds(),{padding:[50,50]})}},[i,n,T]),x.useEffect(()=>{const I=y.current,z=_.current;if(!I||!z||(I.clearLayers(),!e||e.length===0))return;if((n?e.filter(Q=>Q.id!==p):e).forEach(Q=>{if(!Q.area||Q.area.length<3)return;const Z=Ki(Q.area),se=t===Q.id,ne=Fg(Q.id||0),$=n?.25:se?.6:.45,q=n?.5:se?1:.8,X=nt.polygon(Z,{color:se?"#000000":ne,fillColor:ne,fillOpacity:$,weight:se?3:2,opacity:q});(!n||Q.id!==p)&&X.bindTooltip(Q.name,{permanent:!n,direction:"center",className:"area-label"}),n||(X.on("click",()=>{a==null||a(Q)}),X.on("mouseover",()=>{se||X.setStyle({fillOpacity:.65,weight:3})}),X.on("mouseout",()=>{se||X.setStyle({fillOpacity:.45,weight:2})})),I.addLayer(X)}),!n&&e.length>0&&!t)try{z.fitBounds(I.getBounds(),{padding:[50,50]})}catch{}},[e,t,n,p,a]),x.useEffect(()=>{const I=_.current;if(!I||!t||n)return;const z=e.find(Z=>Z.id===t);if(!z||!z.area||z.area.length<3)return;const A=Ki(z.area),Q=nt.polygon(A);I.fitBounds(Q.getBounds(),{padding:[100,100]})},[t,e,n]),l.jsxs("div",{className:"relative",children:[l.jsx("div",{ref:S,style:{height:f,width:"100%"},className:"rounded-xl overflow-hidden border border-gray-200 shadow-sm"}),n&&l.jsxs("div",{className:"absolute top-3 left-3 z-[1000] flex flex-col gap-2",children:[l.jsxs("div",{className:"bg-blue-600 text-white px-3 py-1.5 rounded-lg shadow-lg text-sm font-medium flex items-center gap-2",children:[l.jsx("span",{className:"animate-pulse",children:""}),"Modo Edicin"]}),g&&l.jsx("div",{className:"bg-purple-600 text-white px-3 py-1.5 rounded-lg shadow-lg text-xs",children:" Snap activado"}),b&&l.jsx("div",{className:"bg-red-600 text-white px-3 py-1.5 rounded-lg shadow-lg text-xs animate-pulse",children:" Solapamiento detectado"})]}),n&&l.jsxs("div",{className:"absolute bottom-3 left-3 z-[1000] bg-white/95 backdrop-blur px-4 py-3 rounded-lg shadow-lg text-xs max-w-xs",children:[l.jsx("p",{className:"font-semibold text-gray-800 mb-2",children:" Instrucciones:"}),l.jsxs("ul",{className:"space-y-1 text-gray-600",children:[l.jsxs("li",{children:[" Clic en el ",l.jsx("strong",{children:"hexgono"})," para dibujar"]}),l.jsx("li",{children:" Clic en el mapa para aadir puntos"}),l.jsx("li",{children:" Clic en el primer punto para cerrar"}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Sin lmite"})," de puntos"]}),l.jsx("li",{children:" Los puntos se ajustan a reas cercanas"})]})]})]})},yL=({areas:e,loading:t=!1,selectedAreaId:n,onSelect:i,onEdit:s,onDelete:a})=>{const c=d=>{var f;return((f=d.area)==null?void 0:f.length)||0};return t?l.jsxs("div",{className:"bg-lead-50 rounded-xl shadow-sm border border-lead-200 overflow-hidden",children:[l.jsx("div",{className:"px-4 py-3 border-b border-lead-200 bg-lead-100",children:l.jsx("h3",{className:"text-sm font-semibold text-lead-700",children:"Lista de Zonas"})}),l.jsxs("div",{className:"p-8 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-accent-500 mx-auto"}),l.jsx("p",{className:"mt-3 text-sm text-lead-500",children:"Cargando reas..."})]})]}):e.length===0?l.jsxs("div",{className:"bg-lead-50 rounded-xl shadow-sm border border-lead-200 overflow-hidden",children:[l.jsx("div",{className:"px-4 py-3 border-b border-lead-200 bg-lead-100",children:l.jsx("h3",{className:"text-sm font-semibold text-lead-700",children:"Lista de Zonas"})}),l.jsxs("div",{className:"p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 mx-auto bg-lead-100 rounded-full flex items-center justify-center mb-4",children:l.jsx("span",{className:"text-3xl",children:""})}),l.jsx("p",{className:"text-lead-600 font-medium",children:"No hay reas registradas"}),l.jsx("p",{className:"text-sm text-lead-400 mt-1",children:"Crea tu primera zona de cobertura"})]})]}):l.jsxs("div",{className:"bg-lead-50 rounded-xl shadow-sm border border-lead-200 overflow-hidden",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-lead-200 bg-lead-100 flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-semibold text-lead-700",children:"Lista de Zonas"}),l.jsx("span",{className:"text-xs bg-accent-100 text-accent-700 px-2 py-1 rounded-full font-medium",children:e.length})]}),l.jsx("div",{className:"divide-y divide-lead-100 max-h-[400px] overflow-y-auto",children:e.map(d=>{const f=n===d.id,p=Fg(d.id||0);return l.jsx("div",{onClick:()=>i==null?void 0:i(d),className:`p-3 transition-all cursor-pointer ${f?"bg-accent-50 border-l-4 border-l-accent-500":"hover:bg-lead-100 border-l-4 border-l-transparent"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-4 h-4 rounded-sm shrink-0 shadow-sm",style:{backgroundColor:p}}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`font-medium text-sm truncate ${f?"text-accent-700":"text-lead-800"}`,children:d.name}),l.jsxs("p",{className:"text-xs text-lead-400",children:[c(d)," puntos"]})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:g=>{g.stopPropagation(),s==null||s(d)},title:"Editar",className:"p-1.5 rounded-lg hover:bg-blue-100 text-lead-400 hover:text-blue-600 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:g=>{g.stopPropagation(),a==null||a(d)},title:"Eliminar",className:"p-1.5 rounded-lg hover:bg-red-100 text-lead-400 hover:text-red-600 transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},d.id)})})]})},_L=({open:e,mode:t,initialData:n,submitting:i=!1,existingAreas:s=[],onClose:a,onSubmit:c})=>{const[d,f]=x.useState(""),[p,g]=x.useState(null),[v,C]=x.useState({}),[S,_]=x.useState(null);x.useEffect(()=>{e&&(t==="edit"&&n?(f(n.name),g(n.area||null)):(f(""),g(null)),C({}),_(null))},[e,t,n]);const y=x.useCallback(E=>{g(E),E&&E.length>=3&&C(T=>({...T,polygon:void 0}))},[]),k=x.useCallback(E=>{_(`El polgono se solapa con "${E}"`)},[]),w=x.useCallback(()=>{_(null)},[]),b=()=>{const E={};return d.trim()?d.trim().length<2&&(E.name="El nombre debe tener al menos 2 caracteres"):E.name="El nombre es obligatorio",p?ow(p)||(E.polygon="El polgono debe tener al menos 3 puntos"):E.polygon="Debes dibujar un polgono en el mapa",S&&(E.polygon=S),C(E),Object.keys(E).length===0},j=E=>{E.preventDefault(),!(!b()||!p)&&c({name:d.trim(),area:p})};return x.useEffect(()=>{const E=T=>{T.key==="Escape"&&e&&!i&&a()};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[e,i,a]),e?l.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},children:[l.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:i?void 0:a}),l.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",style:{zIndex:1e5},children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-brand-50 to-white",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-brand-100 rounded-xl",children:l.jsx("svg",{className:"w-6 h-6 text-brand-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t==="create"?" Nueva rea Geogrfica":" Editar rea"}),l.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Dibuja un polgono con los puntos que necesites"})]})]}),l.jsx("button",{type:"button",onClick:a,disabled:i,className:"p-2 rounded-full hover:bg-gray-100 transition-colors group",title:"Cerrar (Esc)",children:l.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("form",{onSubmit:j,className:"flex-1 overflow-y-auto",children:[l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"max-w-xl",children:[l.jsxs("label",{htmlFor:"area-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:[" Nombre del rea ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{id:"area-name",type:"text",value:d,onChange:E=>{f(E.target.value),v.name&&E.target.value.trim()&&C(T=>({...T,name:void 0}))},placeholder:"Ej: Zona Centro, rea Industrial Norte, Barrio Sur...",className:`w-full px-4 py-3 rounded-xl border-2 ${v.name?"border-red-400 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-200 focus:ring-brand-500 focus:border-brand-500"} focus:outline-none focus:ring-2 transition-all`,disabled:i,autoFocus:!0}),v.name&&l.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1.5",children:[l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),v.name]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" Polgono del rea ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg text-sm text-blue-800",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{className:"font-medium",children:"Sin lmite de puntos"})]}),l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg text-sm text-purple-800",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{className:"font-medium",children:"Snap automtico"})]}),l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg text-sm text-green-800",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{className:"font-medium",children:"Validacin de solapamiento"})]})]}),l.jsx(N0,{editMode:!0,areas:s,editingAreaId:n==null?void 0:n.id,initialPolygon:p,onPolygonChange:y,onOverlapError:k,onOverlapResolved:w,enableSnapToEdge:!0,height:"450px"}),l.jsxs("div",{className:"space-y-2",children:[v.polygon&&l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg text-sm text-red-700 border border-red-200",children:[l.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),l.jsx("span",{className:"font-medium",children:v.polygon})]}),S&&!v.polygon&&l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 rounded-lg text-sm text-amber-700 border border-amber-200",children:[l.jsx("svg",{className:"w-5 h-5 flex-shrink-0 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),l.jsxs("span",{className:"font-medium",children:[" ",S," - Ajusta el polgono"]})]}),p&&p.length>=3&&!v.polygon&&!S&&l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg text-sm text-green-700 border border-green-200",children:[l.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),l.jsxs("span",{className:"font-medium",children:[" Polgono vlido con ",p.length," puntos"]})]})]})]})]})]}),l.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between gap-4",children:[l.jsx("div",{className:"text-xs text-gray-500 hidden sm:block",children:" Tip: El snap automtico ajusta los puntos a los bordes de reas cercanas"}),l.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[l.jsx("button",{type:"button",onClick:a,disabled:i,className:"px-5 py-2.5 rounded-xl border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-100 hover:border-gray-400 transition-all disabled:opacity-50",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:i||!!S,className:`px-6 py-2.5 rounded-xl font-medium transition-all flex items-center gap-2 ${i||S?"bg-gray-400 text-white cursor-not-allowed":"bg-brand-600 text-white hover:bg-brand-700 shadow-lg shadow-brand-500/30 hover:shadow-brand-500/40"}`,children:i?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t==="create"?"Crear rea":"Guardar Cambios"]})})]})]})]})]})]}):null},wL=()=>{const{areas:e,loading:t,error:n,createArea:i,updateArea:s,deleteArea:a,clearError:c}=iL(),[d,f]=x.useState(!1),[p,g]=x.useState("create"),[v,C]=x.useState(null),[S,_]=x.useState(!1),[y,k]=x.useState(null),[w,b]=x.useState(null),j=()=>{g("create"),C(null),f(!0)},E=Z=>{g("edit"),C(Z),f(!0)},T=Z=>{k(Z.id!=null&&Z.id===y?null:Z.id??null)},I=Z=>{b(Z)},z=async()=>{if(!(!w||!w.id))try{await a(w.id),b(null),y===w.id&&k(null)}catch(Z){console.error("Error deleting area:",Z)}},A=async Z=>{_(!0);try{p==="create"?await i(Z.name,Z.area):v&&v.id&&await s(v.id,Z.name,Z.area),f(!1)}catch(se){console.error("Error saving area:",se)}finally{_(!1)}},Q=e.find(Z=>Z.id===y);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-lead-900",children:"reas Geogrficas"}),l.jsx("p",{className:"text-sm text-lead-500 mt-1",children:"Gestiona las zonas de cobertura para prevendedores"})]}),l.jsxs("button",{onClick:j,className:"flex items-center justify-center gap-2 px-5 py-2.5 bg-accent-500 text-white rounded-xl hover:bg-accent-600 transition-colors shadow-sm font-medium",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nueva rea"]})]}),n&&l.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[l.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:n})]}),l.jsx("button",{onClick:c,className:"text-red-600 hover:text-red-800",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"xl:col-span-1 space-y-4",children:[l.jsxs("div",{className:"bg-lead-50 rounded-xl shadow-sm border border-lead-200 p-4",children:[l.jsxs("h4",{className:"text-sm font-semibold text-lead-700 mb-3 flex items-center gap-2",children:[l.jsx("span",{children:""})," Resumen"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"text-center p-3 bg-brand-50 rounded-lg border border-brand-100",children:[l.jsx("p",{className:"text-2xl font-bold text-brand-700",children:e.length}),l.jsx("p",{className:"text-xs text-brand-600",children:"reas"})]}),l.jsxs("div",{className:"text-center p-3 bg-accent-50 rounded-lg border border-accent-100",children:[l.jsx("p",{className:"text-2xl font-bold text-accent-700",children:e.reduce((Z,se)=>{var ne;return Z+(((ne=se.area)==null?void 0:ne.length)||0)},0)}),l.jsx("p",{className:"text-xs text-accent-600",children:"Puntos"})]})]})]}),l.jsx(yL,{areas:e,loading:t,selectedAreaId:y,onSelect:T,onEdit:E,onDelete:I})]}),l.jsx("div",{className:"xl:col-span-3",children:l.jsxs("div",{className:"bg-lead-50 rounded-xl shadow-sm border border-lead-200 overflow-hidden",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-lead-200 bg-lead-100 flex items-center justify-between",children:[l.jsxs("h3",{className:"text-sm font-semibold text-lead-700 flex items-center gap-2",children:[l.jsx("span",{children:""})," Mapa de Zonas"]}),Q&&l.jsxs("span",{className:"text-xs bg-accent-100 text-accent-700 px-3 py-1 rounded-full font-medium",children:[" ",Q.name]})]}),l.jsx(N0,{areas:e,selectedAreaId:y,onAreaClick:Z=>T(Z),height:"650px"})]})})]}),l.jsx(_L,{open:d,mode:p,initialData:v,submitting:S,existingAreas:e,onClose:()=>f(!1),onSubmit:A}),w&&l.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},children:[l.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>b(null)}),l.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",style:{zIndex:1e5},children:[l.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:l.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Eliminar rea"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Esta accin no se puede deshacer"})]})]}),l.jsxs("p",{className:"text-gray-700 mb-6",children:["Ests seguro que deseas eliminar el rea"," ",l.jsxs("strong",{children:['"',w.name,'"']}),"?"]}),l.jsxs("div",{className:"flex items-center justify-end gap-3",children:[l.jsx("button",{onClick:()=>b(null),className:"px-4 py-2 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:z,className:"px-4 py-2 rounded-xl bg-red-600 text-white font-medium hover:bg-red-700 transition-colors",children:"S, Eliminar"})]})]})]})]})},bL=()=>l.jsx(y1,{children:l.jsx(Ag,{})}),LL=()=>l.jsxs(I_,{children:[l.jsx(ft,{path:"/login",element:l.jsx(_1,{})}),l.jsx(ft,{element:l.jsx(f1,{}),children:l.jsxs(ft,{element:l.jsx(bL,{}),children:[l.jsx(ft,{path:"/",element:l.jsx(Fu,{to:"/users",replace:!0})}),l.jsx(ft,{path:"/products",element:l.jsx(O1,{})}),l.jsx(ft,{path:"/suppliers",element:l.jsx(U1,{})}),l.jsx(ft,{path:"/inventory",element:l.jsx(W1,{})}),l.jsx(ft,{path:"/users",element:l.jsx(J1,{})}),l.jsx(ft,{path:"/profile",element:l.jsx(eL,{})}),l.jsx(ft,{path:"/clients",element:l.jsx(cL,{})}),l.jsx(ft,{path:"/clients/new",element:l.jsx(hL,{})}),l.jsx(ft,{path:"/clients/edit/:id",element:l.jsx(fL,{})}),l.jsx(ft,{path:"/areas",element:l.jsx(wL,{})})]})}),l.jsx(ft,{path:"*",element:l.jsx(Fu,{to:"/users",replace:!0})})]}),NL=()=>l.jsx(U_,{children:l.jsx(h1,{children:l.jsx(LL,{})})});Vc.createRoot(document.getElementById("root")).render(l.jsx(Cl.StrictMode,{children:l.jsx(NL,{})}));
