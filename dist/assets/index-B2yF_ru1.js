var vx=Object.defineProperty;var yx=(e,t,n)=>t in e?vx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Pn=(e,t,n)=>yx(e,typeof t!="symbol"?t+"":t,n);function _x(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(i,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var bx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ap(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var op={exports:{}},Ro={},lp={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=Symbol.for("react.element"),wx=Symbol.for("react.portal"),Lx=Symbol.for("react.fragment"),Nx=Symbol.for("react.strict_mode"),kx=Symbol.for("react.profiler"),jx=Symbol.for("react.provider"),Cx=Symbol.for("react.context"),Sx=Symbol.for("react.forward_ref"),Ex=Symbol.for("react.suspense"),Px=Symbol.for("react.memo"),Tx=Symbol.for("react.lazy"),mh=Symbol.iterator;function Mx(e){return e===null||typeof e!="object"?null:(e=mh&&e[mh]||e["@@iterator"],typeof e=="function"?e:null)}var cp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dp=Object.assign,up={};function Rs(e,t,n){this.props=e,this.context=t,this.refs=up,this.updater=n||cp}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hp(){}hp.prototype=Rs.prototype;function gd(e,t,n){this.props=e,this.context=t,this.refs=up,this.updater=n||cp}var xd=gd.prototype=new hp;xd.constructor=gd;dp(xd,Rs.prototype);xd.isPureReactComponent=!0;var gh=Array.isArray,fp=Object.prototype.hasOwnProperty,vd={current:null},pp={key:!0,ref:!0,__self:!0,__source:!0};function mp(e,t,n){var i,s={},a=null,c=null;if(t!=null)for(i in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(a=""+t.key),t)fp.call(t,i)&&!pp.hasOwnProperty(i)&&(s[i]=t[i]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var h=Array(u),p=0;p<u;p++)h[p]=arguments[p+2];s.children=h}if(e&&e.defaultProps)for(i in u=e.defaultProps,u)s[i]===void 0&&(s[i]=u[i]);return{$$typeof:Vi,type:e,key:a,ref:c,props:s,_owner:vd.current}}function Ix(e,t){return{$$typeof:Vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vi}function Rx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var xh=/\/+/g;function Dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Rx(""+e.key):t.toString(36)}function Za(e,t,n,i,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Vi:case wx:c=!0}}if(c)return c=e,s=s(c),e=i===""?"."+Dl(c,0):i,gh(s)?(n="",e!=null&&(n=e.replace(xh,"$&/")+"/"),Za(s,t,n,"",function(p){return p})):s!=null&&(yd(s)&&(s=Ix(s,n+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(xh,"$&/")+"/")+e)),t.push(s)),1;if(c=0,i=i===""?".":i+":",gh(e))for(var u=0;u<e.length;u++){a=e[u];var h=i+Dl(a,u);c+=Za(a,t,n,h,s)}else if(h=Mx(e),typeof h=="function")for(e=h.call(e),u=0;!(a=e.next()).done;)a=a.value,h=i+Dl(a,u++),c+=Za(a,t,n,h,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function La(e,t,n){if(e==null)return e;var i=[],s=0;return Za(e,i,"","",function(a){return t.call(n,a,s++)}),i}function Dx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},$a={transition:null},Ox={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:$a,ReactCurrentOwner:vd};function gp(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:La,forEach:function(e,t,n){La(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return La(e,function(){t++}),t},toArray:function(e){return La(e,function(t){return t})||[]},only:function(e){if(!yd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=Rs;we.Fragment=Lx;we.Profiler=kx;we.PureComponent=gd;we.StrictMode=Nx;we.Suspense=Ex;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ox;we.act=gp;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=dp({},e.props),s=e.key,a=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,c=vd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(h in t)fp.call(t,h)&&!pp.hasOwnProperty(h)&&(i[h]=t[h]===void 0&&u!==void 0?u[h]:t[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var p=0;p<h;p++)u[p]=arguments[p+2];i.children=u}return{$$typeof:Vi,type:e.type,key:s,ref:a,props:i,_owner:c}};we.createContext=function(e){return e={$$typeof:Cx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jx,_context:e},e.Consumer=e};we.createElement=mp;we.createFactory=function(e){var t=mp.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Sx,render:e}};we.isValidElement=yd;we.lazy=function(e){return{$$typeof:Tx,_payload:{_status:-1,_result:e},_init:Dx}};we.memo=function(e,t){return{$$typeof:Px,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=$a.transition;$a.transition={};try{e()}finally{$a.transition=t}};we.unstable_act=gp;we.useCallback=function(e,t){return gt.current.useCallback(e,t)};we.useContext=function(e){return gt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};we.useEffect=function(e,t){return gt.current.useEffect(e,t)};we.useId=function(){return gt.current.useId()};we.useImperativeHandle=function(e,t,n){return gt.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return gt.current.useMemo(e,t)};we.useReducer=function(e,t,n){return gt.current.useReducer(e,t,n)};we.useRef=function(e){return gt.current.useRef(e)};we.useState=function(e){return gt.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return gt.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return gt.current.useTransition()};we.version="18.3.1";lp.exports=we;var x=lp.exports;const pn=ap(x),Ax=_x({__proto__:null,default:pn},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx=x,Bx=Symbol.for("react.element"),Fx=Symbol.for("react.fragment"),Ux=Object.prototype.hasOwnProperty,Hx=zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zx={key:!0,ref:!0,__self:!0,__source:!0};function xp(e,t,n){var i,s={},a=null,c=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(c=t.ref);for(i in t)Ux.call(t,i)&&!Zx.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:Bx,type:e,key:a,ref:c,props:s,_owner:Hx.current}}Ro.Fragment=Fx;Ro.jsx=xp;Ro.jsxs=xp;op.exports=Ro;var o=op.exports,uc={},vp={exports:{}},Rt={},yp={exports:{}},_p={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,G){var U=O.length;O.push(G);e:for(;0<U;){var $=U-1>>>1,ne=O[$];if(0<s(ne,G))O[$]=G,O[U]=ne,U=$;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var G=O[0],U=O.pop();if(U!==G){O[0]=U;e:for(var $=0,ne=O.length,X=ne>>>1;$<X;){var se=2*($+1)-1,ee=O[se],le=se+1,A=O[le];if(0>s(ee,U))le<ne&&0>s(A,ee)?(O[$]=A,O[le]=U,$=le):(O[$]=ee,O[se]=U,$=se);else if(le<ne&&0>s(A,U))O[$]=A,O[le]=U,$=le;else break e}}return G}function s(O,G){var U=O.sortIndex-G.sortIndex;return U!==0?U:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var h=[],p=[],m=1,g=null,b=3,S=!1,w=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(O){for(var G=n(p);G!==null;){if(G.callback===null)i(p);else if(G.startTime<=O)i(p),G.sortIndex=G.expirationTime,t(h,G);else break;G=n(p)}}function E(O){if(k=!1,N(O),!w)if(n(h)!==null)w=!0,H(P);else{var G=n(p);G!==null&&Q(E,G.startTime-O)}}function P(O,G){w=!1,k&&(k=!1,_(D),D=-1),S=!0;var U=b;try{for(N(G),g=n(h);g!==null&&(!(g.expirationTime>G)||O&&!Z());){var $=g.callback;if(typeof $=="function"){g.callback=null,b=g.priorityLevel;var ne=$(g.expirationTime<=G);G=e.unstable_now(),typeof ne=="function"?g.callback=ne:g===n(h)&&i(h),N(G)}else i(h);g=n(h)}if(g!==null)var X=!0;else{var se=n(p);se!==null&&Q(E,se.startTime-G),X=!1}return X}finally{g=null,b=U,S=!1}}var M=!1,I=null,D=-1,K=5,F=-1;function Z(){return!(e.unstable_now()-F<K)}function W(){if(I!==null){var O=e.unstable_now();F=O;var G=!0;try{G=I(!0,O)}finally{G?ae():(M=!1,I=null)}}else M=!1}var ae;if(typeof y=="function")ae=function(){y(W)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,re=Y.port2;Y.port1.onmessage=W,ae=function(){re.postMessage(null)}}else ae=function(){C(W,0)};function H(O){I=O,M||(M=!0,ae())}function Q(O,G){D=C(function(){O(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){w||S||(w=!0,H(P))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(O){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var U=b;b=G;try{return O()}finally{b=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=b;b=O;try{return G()}finally{b=U}},e.unstable_scheduleCallback=function(O,G,U){var $=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?$+U:$):U=$,O){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=U+ne,O={id:m++,callback:G,priorityLevel:O,startTime:U,expirationTime:ne,sortIndex:-1},U>$?(O.sortIndex=U,t(p,O),n(h)===null&&O===n(p)&&(k?(_(D),D=-1):k=!0,Q(E,U-$))):(O.sortIndex=ne,t(h,O),w||S||(w=!0,H(P))),O},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(O){var G=b;return function(){var U=b;b=G;try{return O.apply(this,arguments)}finally{b=U}}}})(_p);yp.exports=_p;var $x=yp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx=x,It=$x;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bp=new Set,ji={};function Hr(e,t){ks(e,t),ks(e+"Capture",t)}function ks(e,t){for(ji[e]=t,e=0;e<t.length;e++)bp.add(t[e])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=Object.prototype.hasOwnProperty,Vx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vh={},yh={};function Gx(e){return hc.call(yh,e)?!0:hc.call(vh,e)?!1:Vx.test(e)?yh[e]=!0:(vh[e]=!0,!1)}function qx(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kx(e,t,n,i){if(t===null||typeof t>"u"||qx(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xt(e,t,n,i,s,a,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=c}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){it[e]=new xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];it[t]=new xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){it[e]=new xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){it[e]=new xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){it[e]=new xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){it[e]=new xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){it[e]=new xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){it[e]=new xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){it[e]=new xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var _d=/[\-:]([a-z])/g;function bd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_d,bd);it[t]=new xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_d,bd);it[t]=new xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_d,bd);it[t]=new xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){it[e]=new xt(e,1,!1,e.toLowerCase(),null,!1,!1)});it.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){it[e]=new xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function wd(e,t,n,i){var s=it.hasOwnProperty(t)?it[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kx(t,n,s,i)&&(n=null),i||s===null?Gx(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,i=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Fn=Wx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Na=Symbol.for("react.element"),os=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),Ld=Symbol.for("react.strict_mode"),fc=Symbol.for("react.profiler"),wp=Symbol.for("react.provider"),Lp=Symbol.for("react.context"),Nd=Symbol.for("react.forward_ref"),pc=Symbol.for("react.suspense"),mc=Symbol.for("react.suspense_list"),kd=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),Np=Symbol.for("react.offscreen"),_h=Symbol.iterator;function si(e){return e===null||typeof e!="object"?null:(e=_h&&e[_h]||e["@@iterator"],typeof e=="function"?e:null)}var Fe=Object.assign,Ol;function fi(e){if(Ol===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ol=t&&t[1]||""}return`
`+Ol+e}var Al=!1;function zl(e,t){if(!e||Al)return"";Al=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var i=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){i=p}e.call(t.prototype)}else{try{throw Error()}catch(p){i=p}e()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),a=i.stack.split(`
`),c=s.length-1,u=a.length-1;1<=c&&0<=u&&s[c]!==a[u];)u--;for(;1<=c&&0<=u;c--,u--)if(s[c]!==a[u]){if(c!==1||u!==1)do if(c--,u--,0>u||s[c]!==a[u]){var h=`
`+s[c].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=c&&0<=u);break}}}finally{Al=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?fi(e):""}function Qx(e){switch(e.tag){case 5:return fi(e.type);case 16:return fi("Lazy");case 13:return fi("Suspense");case 19:return fi("SuspenseList");case 0:case 2:case 15:return e=zl(e.type,!1),e;case 11:return e=zl(e.type.render,!1),e;case 1:return e=zl(e.type,!0),e;default:return""}}function gc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ls:return"Fragment";case os:return"Portal";case fc:return"Profiler";case Ld:return"StrictMode";case pc:return"Suspense";case mc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lp:return(e.displayName||"Context")+".Consumer";case wp:return(e._context.displayName||"Context")+".Provider";case Nd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kd:return t=e.displayName||null,t!==null?t:gc(e.type)||"Memo";case Kn:t=e._payload,e=e._init;try{return gc(e(t))}catch{}}return null}function Yx(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gc(t);case 8:return t===Ld?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ur(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xx(e){var t=kp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(c){i=""+c,a.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ka(e){e._valueTracker||(e._valueTracker=Xx(e))}function jp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=kp(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ao(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xc(e,t){var n=t.checked;return Fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function bh(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=ur(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cp(e,t){t=t.checked,t!=null&&wd(e,"checked",t,!1)}function vc(e,t){Cp(e,t);var n=ur(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yc(e,t.type,n):t.hasOwnProperty("defaultValue")&&yc(e,t.type,ur(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yc(e,t,n){(t!=="number"||ao(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pi=Array.isArray;function ys(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ur(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function _c(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return Fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Lh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(pi(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ur(n)}}function Sp(e,t){var n=ur(t.value),i=ur(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Nh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ep(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ep(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ja,Pp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ja=ja||document.createElement("div"),ja.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ja.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ci(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jx=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(e){Jx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xi[t]=xi[e]})});function Tp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||xi.hasOwnProperty(e)&&xi[e]?(""+t).trim():t+"px"}function Mp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Tp(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}var ev=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wc(e,t){if(t){if(ev[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function Lc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nc=null;function jd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kc=null,_s=null,bs=null;function kh(e){if(e=Ki(e)){if(typeof kc!="function")throw Error(q(280));var t=e.stateNode;t&&(t=Bo(t),kc(e.stateNode,e.type,t))}}function Ip(e){_s?bs?bs.push(e):bs=[e]:_s=e}function Rp(){if(_s){var e=_s,t=bs;if(bs=_s=null,kh(e),t)for(e=0;e<t.length;e++)kh(t[e])}}function Dp(e,t){return e(t)}function Op(){}var Bl=!1;function Ap(e,t,n){if(Bl)return e(t,n);Bl=!0;try{return Dp(e,t,n)}finally{Bl=!1,(_s!==null||bs!==null)&&(Op(),Rp())}}function Si(e,t){var n=e.stateNode;if(n===null)return null;var i=Bo(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var jc=!1;if(On)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){jc=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{jc=!1}function tv(e,t,n,i,s,a,c,u,h){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(m){this.onError(m)}}var vi=!1,oo=null,lo=!1,Cc=null,nv={onError:function(e){vi=!0,oo=e}};function rv(e,t,n,i,s,a,c,u,h){vi=!1,oo=null,tv.apply(nv,arguments)}function sv(e,t,n,i,s,a,c,u,h){if(rv.apply(this,arguments),vi){if(vi){var p=oo;vi=!1,oo=null}else throw Error(q(198));lo||(lo=!0,Cc=p)}}function Zr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jh(e){if(Zr(e)!==e)throw Error(q(188))}function iv(e){var t=e.alternate;if(!t){if(t=Zr(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return jh(s),e;if(a===i)return jh(s),t;a=a.sibling}throw Error(q(188))}if(n.return!==i.return)n=s,i=a;else{for(var c=!1,u=s.child;u;){if(u===n){c=!0,n=s,i=a;break}if(u===i){c=!0,i=s,n=a;break}u=u.sibling}if(!c){for(u=a.child;u;){if(u===n){c=!0,n=a,i=s;break}if(u===i){c=!0,i=a,n=s;break}u=u.sibling}if(!c)throw Error(q(189))}}if(n.alternate!==i)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function Bp(e){return e=iv(e),e!==null?Fp(e):null}function Fp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Fp(e);if(t!==null)return t;e=e.sibling}return null}var Up=It.unstable_scheduleCallback,Ch=It.unstable_cancelCallback,av=It.unstable_shouldYield,ov=It.unstable_requestPaint,We=It.unstable_now,lv=It.unstable_getCurrentPriorityLevel,Cd=It.unstable_ImmediatePriority,Hp=It.unstable_UserBlockingPriority,co=It.unstable_NormalPriority,cv=It.unstable_LowPriority,Zp=It.unstable_IdlePriority,Do=null,mn=null;function dv(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Do,e,void 0,(e.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:fv,uv=Math.log,hv=Math.LN2;function fv(e){return e>>>=0,e===0?32:31-(uv(e)/hv|0)|0}var Ca=64,Sa=4194304;function mi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uo(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes,c=n&268435455;if(c!==0){var u=c&~s;u!==0?i=mi(u):(a&=c,a!==0&&(i=mi(a)))}else c=n&~s,c!==0?i=mi(c):a!==0&&(i=mi(a));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-tn(t),s=1<<n,i|=e[n],t&=~s;return i}function pv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mv(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-tn(a),u=1<<c,h=s[c];h===-1?(!(u&n)||u&i)&&(s[c]=pv(u,t)):h<=t&&(e.expiredLanes|=u),a&=~u}}function Sc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $p(){var e=Ca;return Ca<<=1,!(Ca&4194240)&&(Ca=64),e}function Fl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tn(t),e[t]=n}function gv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-tn(n),a=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~a}}function Sd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-tn(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var je=0;function Wp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vp,Ed,Gp,qp,Kp,Ec=!1,Ea=[],nr=null,rr=null,sr=null,Ei=new Map,Pi=new Map,Yn=[],xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sh(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(t.pointerId)}}function ai(e,t,n,i,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Ki(t),t!==null&&Ed(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vv(e,t,n,i,s){switch(t){case"focusin":return nr=ai(nr,e,t,n,i,s),!0;case"dragenter":return rr=ai(rr,e,t,n,i,s),!0;case"mouseover":return sr=ai(sr,e,t,n,i,s),!0;case"pointerover":var a=s.pointerId;return Ei.set(a,ai(Ei.get(a)||null,e,t,n,i,s)),!0;case"gotpointercapture":return a=s.pointerId,Pi.set(a,ai(Pi.get(a)||null,e,t,n,i,s)),!0}return!1}function Qp(e){var t=Er(e.target);if(t!==null){var n=Zr(t);if(n!==null){if(t=n.tag,t===13){if(t=zp(n),t!==null){e.blockedOn=t,Kp(e.priority,function(){Gp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Nc=i,n.target.dispatchEvent(i),Nc=null}else return t=Ki(n),t!==null&&Ed(t),e.blockedOn=n,!1;t.shift()}return!0}function Eh(e,t,n){Wa(e)&&n.delete(t)}function yv(){Ec=!1,nr!==null&&Wa(nr)&&(nr=null),rr!==null&&Wa(rr)&&(rr=null),sr!==null&&Wa(sr)&&(sr=null),Ei.forEach(Eh),Pi.forEach(Eh)}function oi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ec||(Ec=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,yv)))}function Ti(e){function t(s){return oi(s,e)}if(0<Ea.length){oi(Ea[0],e);for(var n=1;n<Ea.length;n++){var i=Ea[n];i.blockedOn===e&&(i.blockedOn=null)}}for(nr!==null&&oi(nr,e),rr!==null&&oi(rr,e),sr!==null&&oi(sr,e),Ei.forEach(t),Pi.forEach(t),n=0;n<Yn.length;n++)i=Yn[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)Qp(n),n.blockedOn===null&&Yn.shift()}var ws=Fn.ReactCurrentBatchConfig,ho=!0;function _v(e,t,n,i){var s=je,a=ws.transition;ws.transition=null;try{je=1,Pd(e,t,n,i)}finally{je=s,ws.transition=a}}function bv(e,t,n,i){var s=je,a=ws.transition;ws.transition=null;try{je=4,Pd(e,t,n,i)}finally{je=s,ws.transition=a}}function Pd(e,t,n,i){if(ho){var s=Pc(e,t,n,i);if(s===null)Ql(e,t,i,fo,n),Sh(e,i);else if(vv(s,e,t,n,i))i.stopPropagation();else if(Sh(e,i),t&4&&-1<xv.indexOf(e)){for(;s!==null;){var a=Ki(s);if(a!==null&&Vp(a),a=Pc(e,t,n,i),a===null&&Ql(e,t,i,fo,n),a===s)break;s=a}s!==null&&i.stopPropagation()}else Ql(e,t,i,null,n)}}var fo=null;function Pc(e,t,n,i){if(fo=null,e=jd(i),e=Er(e),e!==null)if(t=Zr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fo=e,null}function Yp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lv()){case Cd:return 1;case Hp:return 4;case co:case cv:return 16;case Zp:return 536870912;default:return 16}default:return 16}}var Jn=null,Td=null,Va=null;function Xp(){if(Va)return Va;var e,t=Td,n=t.length,i,s="value"in Jn?Jn.value:Jn.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var c=n-e;for(i=1;i<=c&&t[n-i]===s[a-i];i++);return Va=s.slice(e,1<i?1-i:void 0)}function Ga(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pa(){return!0}function Ph(){return!1}function Dt(e){function t(n,i,s,a,c){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=c,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Pa:Ph,this.isPropagationStopped=Ph,this}return Fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),t}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Md=Dt(Ds),qi=Fe({},Ds,{view:0,detail:0}),wv=Dt(qi),Ul,Hl,li,Oo=Fe({},qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Id,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==li&&(li&&e.type==="mousemove"?(Ul=e.screenX-li.screenX,Hl=e.screenY-li.screenY):Hl=Ul=0,li=e),Ul)},movementY:function(e){return"movementY"in e?e.movementY:Hl}}),Th=Dt(Oo),Lv=Fe({},Oo,{dataTransfer:0}),Nv=Dt(Lv),kv=Fe({},qi,{relatedTarget:0}),Zl=Dt(kv),jv=Fe({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Cv=Dt(jv),Sv=Fe({},Ds,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ev=Dt(Sv),Pv=Fe({},Ds,{data:0}),Mh=Dt(Pv),Tv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Iv[e])?!!t[e]:!1}function Id(){return Rv}var Dv=Fe({},qi,{key:function(e){if(e.key){var t=Tv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Id,charCode:function(e){return e.type==="keypress"?Ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ov=Dt(Dv),Av=Fe({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ih=Dt(Av),zv=Fe({},qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Id}),Bv=Dt(zv),Fv=Fe({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uv=Dt(Fv),Hv=Fe({},Oo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zv=Dt(Hv),$v=[9,13,27,32],Rd=On&&"CompositionEvent"in window,yi=null;On&&"documentMode"in document&&(yi=document.documentMode);var Wv=On&&"TextEvent"in window&&!yi,Jp=On&&(!Rd||yi&&8<yi&&11>=yi),Rh=" ",Dh=!1;function em(e,t){switch(e){case"keyup":return $v.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cs=!1;function Vv(e,t){switch(e){case"compositionend":return tm(t);case"keypress":return t.which!==32?null:(Dh=!0,Rh);case"textInput":return e=t.data,e===Rh&&Dh?null:e;default:return null}}function Gv(e,t){if(cs)return e==="compositionend"||!Rd&&em(e,t)?(e=Xp(),Va=Td=Jn=null,cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jp&&t.locale!=="ko"?null:t.data;default:return null}}var qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qv[e.type]:t==="textarea"}function nm(e,t,n,i){Ip(i),t=po(t,"onChange"),0<t.length&&(n=new Md("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var _i=null,Mi=null;function Kv(e){fm(e,0)}function Ao(e){var t=hs(e);if(jp(t))return e}function Qv(e,t){if(e==="change")return t}var rm=!1;if(On){var $l;if(On){var Wl="oninput"in document;if(!Wl){var Ah=document.createElement("div");Ah.setAttribute("oninput","return;"),Wl=typeof Ah.oninput=="function"}$l=Wl}else $l=!1;rm=$l&&(!document.documentMode||9<document.documentMode)}function zh(){_i&&(_i.detachEvent("onpropertychange",sm),Mi=_i=null)}function sm(e){if(e.propertyName==="value"&&Ao(Mi)){var t=[];nm(t,Mi,e,jd(e)),Ap(Kv,t)}}function Yv(e,t,n){e==="focusin"?(zh(),_i=t,Mi=n,_i.attachEvent("onpropertychange",sm)):e==="focusout"&&zh()}function Xv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ao(Mi)}function Jv(e,t){if(e==="click")return Ao(t)}function ey(e,t){if(e==="input"||e==="change")return Ao(t)}function ty(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:ty;function Ii(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!hc.call(t,s)||!rn(e[s],t[s]))return!1}return!0}function Bh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fh(e,t){var n=Bh(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bh(n)}}function im(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?im(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function am(){for(var e=window,t=ao();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ao(e.document)}return t}function Dd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ny(e){var t=am(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&im(n.ownerDocument.documentElement,n)){if(i!==null&&Dd(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!e.extend&&a>i&&(s=i,i=a,a=s),s=Fh(n,a);var c=Fh(n,i);s&&c&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ry=On&&"documentMode"in document&&11>=document.documentMode,ds=null,Tc=null,bi=null,Mc=!1;function Uh(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mc||ds==null||ds!==ao(i)||(i=ds,"selectionStart"in i&&Dd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),bi&&Ii(bi,i)||(bi=i,i=po(Tc,"onSelect"),0<i.length&&(t=new Md("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ds)))}function Ta(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var us={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionend:Ta("Transition","TransitionEnd")},Vl={},om={};On&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);function zo(e){if(Vl[e])return Vl[e];if(!us[e])return e;var t=us[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in om)return Vl[e]=t[n];return e}var lm=zo("animationend"),cm=zo("animationiteration"),dm=zo("animationstart"),um=zo("transitionend"),hm=new Map,Hh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){hm.set(e,t),Hr(t,[e])}for(var Gl=0;Gl<Hh.length;Gl++){var ql=Hh[Gl],sy=ql.toLowerCase(),iy=ql[0].toUpperCase()+ql.slice(1);fr(sy,"on"+iy)}fr(lm,"onAnimationEnd");fr(cm,"onAnimationIteration");fr(dm,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(um,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);Hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ay=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function Zh(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,sv(i,t,void 0,e),e.currentTarget=null}function fm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var c=i.length-1;0<=c;c--){var u=i[c],h=u.instance,p=u.currentTarget;if(u=u.listener,h!==a&&s.isPropagationStopped())break e;Zh(s,u,p),a=h}else for(c=0;c<i.length;c++){if(u=i[c],h=u.instance,p=u.currentTarget,u=u.listener,h!==a&&s.isPropagationStopped())break e;Zh(s,u,p),a=h}}}if(lo)throw e=Cc,lo=!1,Cc=null,e}function Te(e,t){var n=t[Ac];n===void 0&&(n=t[Ac]=new Set);var i=e+"__bubble";n.has(i)||(pm(t,e,2,!1),n.add(i))}function Kl(e,t,n){var i=0;t&&(i|=4),pm(n,e,i,t)}var Ma="_reactListening"+Math.random().toString(36).slice(2);function Ri(e){if(!e[Ma]){e[Ma]=!0,bp.forEach(function(n){n!=="selectionchange"&&(ay.has(n)||Kl(n,!1,e),Kl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ma]||(t[Ma]=!0,Kl("selectionchange",!1,t))}}function pm(e,t,n,i){switch(Yp(t)){case 1:var s=_v;break;case 4:s=bv;break;default:s=Pd}n=s.bind(null,t,n,e),s=void 0,!jc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ql(e,t,n,i,s){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var u=i.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(c===4)for(c=i.return;c!==null;){var h=c.tag;if((h===3||h===4)&&(h=c.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;c=c.return}for(;u!==null;){if(c=Er(u),c===null)return;if(h=c.tag,h===5||h===6){i=a=c;continue e}u=u.parentNode}}i=i.return}Ap(function(){var p=a,m=jd(n),g=[];e:{var b=hm.get(e);if(b!==void 0){var S=Md,w=e;switch(e){case"keypress":if(Ga(n)===0)break e;case"keydown":case"keyup":S=Ov;break;case"focusin":w="focus",S=Zl;break;case"focusout":w="blur",S=Zl;break;case"beforeblur":case"afterblur":S=Zl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Nv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Bv;break;case lm:case cm:case dm:S=Cv;break;case um:S=Uv;break;case"scroll":S=wv;break;case"wheel":S=Zv;break;case"copy":case"cut":case"paste":S=Ev;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Ih}var k=(t&4)!==0,C=!k&&e==="scroll",_=k?b!==null?b+"Capture":null:b;k=[];for(var y=p,N;y!==null;){N=y;var E=N.stateNode;if(N.tag===5&&E!==null&&(N=E,_!==null&&(E=Si(y,_),E!=null&&k.push(Di(y,E,N)))),C)break;y=y.return}0<k.length&&(b=new S(b,w,null,n,m),g.push({event:b,listeners:k}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",b&&n!==Nc&&(w=n.relatedTarget||n.fromElement)&&(Er(w)||w[An]))break e;if((S||b)&&(b=m.window===m?m:(b=m.ownerDocument)?b.defaultView||b.parentWindow:window,S?(w=n.relatedTarget||n.toElement,S=p,w=w?Er(w):null,w!==null&&(C=Zr(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(S=null,w=p),S!==w)){if(k=Th,E="onMouseLeave",_="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(k=Ih,E="onPointerLeave",_="onPointerEnter",y="pointer"),C=S==null?b:hs(S),N=w==null?b:hs(w),b=new k(E,y+"leave",S,n,m),b.target=C,b.relatedTarget=N,E=null,Er(m)===p&&(k=new k(_,y+"enter",w,n,m),k.target=N,k.relatedTarget=C,E=k),C=E,S&&w)t:{for(k=S,_=w,y=0,N=k;N;N=is(N))y++;for(N=0,E=_;E;E=is(E))N++;for(;0<y-N;)k=is(k),y--;for(;0<N-y;)_=is(_),N--;for(;y--;){if(k===_||_!==null&&k===_.alternate)break t;k=is(k),_=is(_)}k=null}else k=null;S!==null&&$h(g,b,S,k,!1),w!==null&&C!==null&&$h(g,C,w,k,!0)}}e:{if(b=p?hs(p):window,S=b.nodeName&&b.nodeName.toLowerCase(),S==="select"||S==="input"&&b.type==="file")var P=Qv;else if(Oh(b))if(rm)P=ey;else{P=Xv;var M=Yv}else(S=b.nodeName)&&S.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(P=Jv);if(P&&(P=P(e,p))){nm(g,P,n,m);break e}M&&M(e,b,p),e==="focusout"&&(M=b._wrapperState)&&M.controlled&&b.type==="number"&&yc(b,"number",b.value)}switch(M=p?hs(p):window,e){case"focusin":(Oh(M)||M.contentEditable==="true")&&(ds=M,Tc=p,bi=null);break;case"focusout":bi=Tc=ds=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,Uh(g,n,m);break;case"selectionchange":if(ry)break;case"keydown":case"keyup":Uh(g,n,m)}var I;if(Rd)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else cs?em(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Jp&&n.locale!=="ko"&&(cs||D!=="onCompositionStart"?D==="onCompositionEnd"&&cs&&(I=Xp()):(Jn=m,Td="value"in Jn?Jn.value:Jn.textContent,cs=!0)),M=po(p,D),0<M.length&&(D=new Mh(D,e,null,n,m),g.push({event:D,listeners:M}),I?D.data=I:(I=tm(n),I!==null&&(D.data=I)))),(I=Wv?Vv(e,n):Gv(e,n))&&(p=po(p,"onBeforeInput"),0<p.length&&(m=new Mh("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:p}),m.data=I))}fm(g,t)})}function Di(e,t,n){return{instance:e,listener:t,currentTarget:n}}function po(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Si(e,n),a!=null&&i.unshift(Di(e,a,s)),a=Si(e,t),a!=null&&i.push(Di(e,a,s))),e=e.return}return i}function is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $h(e,t,n,i,s){for(var a=t._reactName,c=[];n!==null&&n!==i;){var u=n,h=u.alternate,p=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&p!==null&&(u=p,s?(h=Si(n,a),h!=null&&c.unshift(Di(n,h,u))):s||(h=Si(n,a),h!=null&&c.push(Di(n,h,u)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var oy=/\r\n?/g,ly=/\u0000|\uFFFD/g;function Wh(e){return(typeof e=="string"?e:""+e).replace(oy,`
`).replace(ly,"")}function Ia(e,t,n){if(t=Wh(t),Wh(e)!==t&&n)throw Error(q(425))}function mo(){}var Ic=null,Rc=null;function Dc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Oc=typeof setTimeout=="function"?setTimeout:void 0,cy=typeof clearTimeout=="function"?clearTimeout:void 0,Vh=typeof Promise=="function"?Promise:void 0,dy=typeof queueMicrotask=="function"?queueMicrotask:typeof Vh<"u"?function(e){return Vh.resolve(null).then(e).catch(uy)}:Oc;function uy(e){setTimeout(function(){throw e})}function Yl(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){e.removeChild(s),Ti(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ti(t)}function ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Os=Math.random().toString(36).slice(2),fn="__reactFiber$"+Os,Oi="__reactProps$"+Os,An="__reactContainer$"+Os,Ac="__reactEvents$"+Os,hy="__reactListeners$"+Os,fy="__reactHandles$"+Os;function Er(e){var t=e[fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gh(e);e!==null;){if(n=e[fn])return n;e=Gh(e)}return t}e=n,n=e.parentNode}return null}function Ki(e){return e=e[fn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function Bo(e){return e[Oi]||null}var zc=[],fs=-1;function pr(e){return{current:e}}function Me(e){0>fs||(e.current=zc[fs],zc[fs]=null,fs--)}function Pe(e,t){fs++,zc[fs]=e.current,e.current=t}var hr={},ut=pr(hr),bt=pr(!1),Or=hr;function js(e,t){var n=e.type.contextTypes;if(!n)return hr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function wt(e){return e=e.childContextTypes,e!=null}function go(){Me(bt),Me(ut)}function qh(e,t,n){if(ut.current!==hr)throw Error(q(168));Pe(ut,t),Pe(bt,n)}function mm(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(q(108,Yx(e)||"Unknown",s));return Fe({},n,i)}function xo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hr,Or=ut.current,Pe(ut,e),Pe(bt,bt.current),!0}function Kh(e,t,n){var i=e.stateNode;if(!i)throw Error(q(169));n?(e=mm(e,t,Or),i.__reactInternalMemoizedMergedChildContext=e,Me(bt),Me(ut),Pe(ut,e)):Me(bt),Pe(bt,n)}var Mn=null,Fo=!1,Xl=!1;function gm(e){Mn===null?Mn=[e]:Mn.push(e)}function py(e){Fo=!0,gm(e)}function mr(){if(!Xl&&Mn!==null){Xl=!0;var e=0,t=je;try{var n=Mn;for(je=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Mn=null,Fo=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(e+1)),Up(Cd,mr),s}finally{je=t,Xl=!1}}return null}var ps=[],ms=0,vo=null,yo=0,Ht=[],Zt=0,Ar=null,In=1,Rn="";function Cr(e,t){ps[ms++]=yo,ps[ms++]=vo,vo=e,yo=t}function xm(e,t,n){Ht[Zt++]=In,Ht[Zt++]=Rn,Ht[Zt++]=Ar,Ar=e;var i=In;e=Rn;var s=32-tn(i)-1;i&=~(1<<s),n+=1;var a=32-tn(t)+s;if(30<a){var c=s-s%5;a=(i&(1<<c)-1).toString(32),i>>=c,s-=c,In=1<<32-tn(t)+s|n<<s|i,Rn=a+e}else In=1<<a|n<<s|i,Rn=e}function Od(e){e.return!==null&&(Cr(e,1),xm(e,1,0))}function Ad(e){for(;e===vo;)vo=ps[--ms],ps[ms]=null,yo=ps[--ms],ps[ms]=null;for(;e===Ar;)Ar=Ht[--Zt],Ht[Zt]=null,Rn=Ht[--Zt],Ht[Zt]=null,In=Ht[--Zt],Ht[Zt]=null}var Mt=null,Tt=null,De=!1,en=null;function vm(e,t){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Qh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,Tt=ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,Tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ar!==null?{id:In,overflow:Rn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Mt=e,Tt=null,!0):!1;default:return!1}}function Bc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fc(e){if(De){var t=Tt;if(t){var n=t;if(!Qh(e,t)){if(Bc(e))throw Error(q(418));t=ir(n.nextSibling);var i=Mt;t&&Qh(e,t)?vm(i,n):(e.flags=e.flags&-4097|2,De=!1,Mt=e)}}else{if(Bc(e))throw Error(q(418));e.flags=e.flags&-4097|2,De=!1,Mt=e}}}function Yh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function Ra(e){if(e!==Mt)return!1;if(!De)return Yh(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Dc(e.type,e.memoizedProps)),t&&(t=Tt)){if(Bc(e))throw ym(),Error(q(418));for(;t;)vm(e,t),t=ir(t.nextSibling)}if(Yh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Tt=ir(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Tt=null}}else Tt=Mt?ir(e.stateNode.nextSibling):null;return!0}function ym(){for(var e=Tt;e;)e=ir(e.nextSibling)}function Cs(){Tt=Mt=null,De=!1}function zd(e){en===null?en=[e]:en.push(e)}var my=Fn.ReactCurrentBatchConfig;function ci(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var i=n.stateNode}if(!i)throw Error(q(147,e));var s=i,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(c){var u=s.refs;c===null?delete u[a]:u[a]=c},t._stringRef=a,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function Da(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xh(e){var t=e._init;return t(e._payload)}function _m(e){function t(_,y){if(e){var N=_.deletions;N===null?(_.deletions=[y],_.flags|=16):N.push(y)}}function n(_,y){if(!e)return null;for(;y!==null;)t(_,y),y=y.sibling;return null}function i(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=cr(_,y),_.index=0,_.sibling=null,_}function a(_,y,N){return _.index=N,e?(N=_.alternate,N!==null?(N=N.index,N<y?(_.flags|=2,y):N):(_.flags|=2,y)):(_.flags|=1048576,y)}function c(_){return e&&_.alternate===null&&(_.flags|=2),_}function u(_,y,N,E){return y===null||y.tag!==6?(y=ic(N,_.mode,E),y.return=_,y):(y=s(y,N),y.return=_,y)}function h(_,y,N,E){var P=N.type;return P===ls?m(_,y,N.props.children,E,N.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Kn&&Xh(P)===y.type)?(E=s(y,N.props),E.ref=ci(_,y,N),E.return=_,E):(E=eo(N.type,N.key,N.props,null,_.mode,E),E.ref=ci(_,y,N),E.return=_,E)}function p(_,y,N,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==N.containerInfo||y.stateNode.implementation!==N.implementation?(y=ac(N,_.mode,E),y.return=_,y):(y=s(y,N.children||[]),y.return=_,y)}function m(_,y,N,E,P){return y===null||y.tag!==7?(y=Rr(N,_.mode,E,P),y.return=_,y):(y=s(y,N),y.return=_,y)}function g(_,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ic(""+y,_.mode,N),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Na:return N=eo(y.type,y.key,y.props,null,_.mode,N),N.ref=ci(_,null,y),N.return=_,N;case os:return y=ac(y,_.mode,N),y.return=_,y;case Kn:var E=y._init;return g(_,E(y._payload),N)}if(pi(y)||si(y))return y=Rr(y,_.mode,N,null),y.return=_,y;Da(_,y)}return null}function b(_,y,N,E){var P=y!==null?y.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return P!==null?null:u(_,y,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Na:return N.key===P?h(_,y,N,E):null;case os:return N.key===P?p(_,y,N,E):null;case Kn:return P=N._init,b(_,y,P(N._payload),E)}if(pi(N)||si(N))return P!==null?null:m(_,y,N,E,null);Da(_,N)}return null}function S(_,y,N,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return _=_.get(N)||null,u(y,_,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Na:return _=_.get(E.key===null?N:E.key)||null,h(y,_,E,P);case os:return _=_.get(E.key===null?N:E.key)||null,p(y,_,E,P);case Kn:var M=E._init;return S(_,y,N,M(E._payload),P)}if(pi(E)||si(E))return _=_.get(N)||null,m(y,_,E,P,null);Da(y,E)}return null}function w(_,y,N,E){for(var P=null,M=null,I=y,D=y=0,K=null;I!==null&&D<N.length;D++){I.index>D?(K=I,I=null):K=I.sibling;var F=b(_,I,N[D],E);if(F===null){I===null&&(I=K);break}e&&I&&F.alternate===null&&t(_,I),y=a(F,y,D),M===null?P=F:M.sibling=F,M=F,I=K}if(D===N.length)return n(_,I),De&&Cr(_,D),P;if(I===null){for(;D<N.length;D++)I=g(_,N[D],E),I!==null&&(y=a(I,y,D),M===null?P=I:M.sibling=I,M=I);return De&&Cr(_,D),P}for(I=i(_,I);D<N.length;D++)K=S(I,_,D,N[D],E),K!==null&&(e&&K.alternate!==null&&I.delete(K.key===null?D:K.key),y=a(K,y,D),M===null?P=K:M.sibling=K,M=K);return e&&I.forEach(function(Z){return t(_,Z)}),De&&Cr(_,D),P}function k(_,y,N,E){var P=si(N);if(typeof P!="function")throw Error(q(150));if(N=P.call(N),N==null)throw Error(q(151));for(var M=P=null,I=y,D=y=0,K=null,F=N.next();I!==null&&!F.done;D++,F=N.next()){I.index>D?(K=I,I=null):K=I.sibling;var Z=b(_,I,F.value,E);if(Z===null){I===null&&(I=K);break}e&&I&&Z.alternate===null&&t(_,I),y=a(Z,y,D),M===null?P=Z:M.sibling=Z,M=Z,I=K}if(F.done)return n(_,I),De&&Cr(_,D),P;if(I===null){for(;!F.done;D++,F=N.next())F=g(_,F.value,E),F!==null&&(y=a(F,y,D),M===null?P=F:M.sibling=F,M=F);return De&&Cr(_,D),P}for(I=i(_,I);!F.done;D++,F=N.next())F=S(I,_,D,F.value,E),F!==null&&(e&&F.alternate!==null&&I.delete(F.key===null?D:F.key),y=a(F,y,D),M===null?P=F:M.sibling=F,M=F);return e&&I.forEach(function(W){return t(_,W)}),De&&Cr(_,D),P}function C(_,y,N,E){if(typeof N=="object"&&N!==null&&N.type===ls&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Na:e:{for(var P=N.key,M=y;M!==null;){if(M.key===P){if(P=N.type,P===ls){if(M.tag===7){n(_,M.sibling),y=s(M,N.props.children),y.return=_,_=y;break e}}else if(M.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Kn&&Xh(P)===M.type){n(_,M.sibling),y=s(M,N.props),y.ref=ci(_,M,N),y.return=_,_=y;break e}n(_,M);break}else t(_,M);M=M.sibling}N.type===ls?(y=Rr(N.props.children,_.mode,E,N.key),y.return=_,_=y):(E=eo(N.type,N.key,N.props,null,_.mode,E),E.ref=ci(_,y,N),E.return=_,_=E)}return c(_);case os:e:{for(M=N.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===N.containerInfo&&y.stateNode.implementation===N.implementation){n(_,y.sibling),y=s(y,N.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else t(_,y);y=y.sibling}y=ac(N,_.mode,E),y.return=_,_=y}return c(_);case Kn:return M=N._init,C(_,y,M(N._payload),E)}if(pi(N))return w(_,y,N,E);if(si(N))return k(_,y,N,E);Da(_,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,N),y.return=_,_=y):(n(_,y),y=ic(N,_.mode,E),y.return=_,_=y),c(_)):n(_,y)}return C}var Ss=_m(!0),bm=_m(!1),_o=pr(null),bo=null,gs=null,Bd=null;function Fd(){Bd=gs=bo=null}function Ud(e){var t=_o.current;Me(_o),e._currentValue=t}function Uc(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ls(e,t){bo=e,Bd=gs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_t=!0),e.firstContext=null)}function Gt(e){var t=e._currentValue;if(Bd!==e)if(e={context:e,memoizedValue:t,next:null},gs===null){if(bo===null)throw Error(q(308));gs=e,bo.dependencies={lanes:0,firstContext:e}}else gs=gs.next=e;return t}var Pr=null;function Hd(e){Pr===null?Pr=[e]:Pr.push(e)}function wm(e,t,n,i){var s=t.interleaved;return s===null?(n.next=n,Hd(t)):(n.next=s.next,s.next=n),t.interleaved=n,zn(e,i)}function zn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Qn=!1;function Zd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ar(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ne&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,zn(e,n)}return s=i.interleaved,s===null?(t.next=t,Hd(i)):(t.next=s.next,s.next=t),i.interleaved=t,zn(e,n)}function qa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Sd(e,n)}}function Jh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=c:a=a.next=c,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function wo(e,t,n,i){var s=e.updateQueue;Qn=!1;var a=s.firstBaseUpdate,c=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var h=u,p=h.next;h.next=null,c===null?a=p:c.next=p,c=h;var m=e.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==c&&(u===null?m.firstBaseUpdate=p:u.next=p,m.lastBaseUpdate=h))}if(a!==null){var g=s.baseState;c=0,m=p=h=null,u=a;do{var b=u.lane,S=u.eventTime;if((i&b)===b){m!==null&&(m=m.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var w=e,k=u;switch(b=t,S=n,k.tag){case 1:if(w=k.payload,typeof w=="function"){g=w.call(S,g,b);break e}g=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=k.payload,b=typeof w=="function"?w.call(S,g,b):w,b==null)break e;g=Fe({},g,b);break e;case 2:Qn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,b=s.effects,b===null?s.effects=[u]:b.push(u))}else S={eventTime:S,lane:b,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(p=m=S,h=g):m=m.next=S,c|=b;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;b=u,u=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(!0);if(m===null&&(h=g),s.baseState=h,s.firstBaseUpdate=p,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do c|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Br|=c,e.lanes=c,e.memoizedState=g}}function ef(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(q(191,s));s.call(i)}}}var Qi={},gn=pr(Qi),Ai=pr(Qi),zi=pr(Qi);function Tr(e){if(e===Qi)throw Error(q(174));return e}function $d(e,t){switch(Pe(zi,t),Pe(Ai,e),Pe(gn,Qi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bc(t,e)}Me(gn),Pe(gn,t)}function Es(){Me(gn),Me(Ai),Me(zi)}function Nm(e){Tr(zi.current);var t=Tr(gn.current),n=bc(t,e.type);t!==n&&(Pe(Ai,e),Pe(gn,n))}function Wd(e){Ai.current===e&&(Me(gn),Me(Ai))}var Ae=pr(0);function Lo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jl=[];function Vd(){for(var e=0;e<Jl.length;e++)Jl[e]._workInProgressVersionPrimary=null;Jl.length=0}var Ka=Fn.ReactCurrentDispatcher,ec=Fn.ReactCurrentBatchConfig,zr=0,ze=null,Qe=null,Je=null,No=!1,wi=!1,Bi=0,gy=0;function ot(){throw Error(q(321))}function Gd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rn(e[n],t[n]))return!1;return!0}function qd(e,t,n,i,s,a){if(zr=a,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ka.current=e===null||e.memoizedState===null?_y:by,e=n(i,s),wi){a=0;do{if(wi=!1,Bi=0,25<=a)throw Error(q(301));a+=1,Je=Qe=null,t.updateQueue=null,Ka.current=wy,e=n(i,s)}while(wi)}if(Ka.current=ko,t=Qe!==null&&Qe.next!==null,zr=0,Je=Qe=ze=null,No=!1,t)throw Error(q(300));return e}function Kd(){var e=Bi!==0;return Bi=0,e}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?ze.memoizedState=Je=e:Je=Je.next=e,Je}function qt(){if(Qe===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=Je===null?ze.memoizedState:Je.next;if(t!==null)Je=t,Qe=e;else{if(e===null)throw Error(q(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Je===null?ze.memoizedState=Je=e:Je=Je.next=e}return Je}function Fi(e,t){return typeof t=="function"?t(e):t}function tc(e){var t=qt(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var i=Qe,s=i.baseQueue,a=n.pending;if(a!==null){if(s!==null){var c=s.next;s.next=a.next,a.next=c}i.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,i=i.baseState;var u=c=null,h=null,p=a;do{var m=p.lane;if((zr&m)===m)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:e(i,p.action);else{var g={lane:m,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(u=h=g,c=i):h=h.next=g,ze.lanes|=m,Br|=m}p=p.next}while(p!==null&&p!==a);h===null?c=i:h.next=u,rn(i,t.memoizedState)||(_t=!0),t.memoizedState=i,t.baseState=c,t.baseQueue=h,n.lastRenderedState=i}if(e=n.interleaved,e!==null){s=e;do a=s.lane,ze.lanes|=a,Br|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nc(e){var t=qt(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var c=s=s.next;do a=e(a,c.action),c=c.next;while(c!==s);rn(a,t.memoizedState)||(_t=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function km(){}function jm(e,t){var n=ze,i=qt(),s=t(),a=!rn(i.memoizedState,s);if(a&&(i.memoizedState=s,_t=!0),i=i.queue,Qd(Em.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Ui(9,Sm.bind(null,n,i,s,t),void 0,null),et===null)throw Error(q(349));zr&30||Cm(n,t,s)}return s}function Cm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sm(e,t,n,i){t.value=n,t.getSnapshot=i,Pm(t)&&Tm(e)}function Em(e,t,n){return n(function(){Pm(t)&&Tm(e)})}function Pm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rn(e,n)}catch{return!0}}function Tm(e){var t=zn(e,1);t!==null&&nn(t,e,1,-1)}function tf(e){var t=hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:e},t.queue=e,e=e.dispatch=yy.bind(null,ze,e),[t.memoizedState,e]}function Ui(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function Mm(){return qt().memoizedState}function Qa(e,t,n,i){var s=hn();ze.flags|=e,s.memoizedState=Ui(1|t,n,void 0,i===void 0?null:i)}function Uo(e,t,n,i){var s=qt();i=i===void 0?null:i;var a=void 0;if(Qe!==null){var c=Qe.memoizedState;if(a=c.destroy,i!==null&&Gd(i,c.deps)){s.memoizedState=Ui(t,n,a,i);return}}ze.flags|=e,s.memoizedState=Ui(1|t,n,a,i)}function nf(e,t){return Qa(8390656,8,e,t)}function Qd(e,t){return Uo(2048,8,e,t)}function Im(e,t){return Uo(4,2,e,t)}function Rm(e,t){return Uo(4,4,e,t)}function Dm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Om(e,t,n){return n=n!=null?n.concat([e]):null,Uo(4,4,Dm.bind(null,t,e),n)}function Yd(){}function Am(e,t){var n=qt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Gd(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function zm(e,t){var n=qt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Gd(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Bm(e,t,n){return zr&21?(rn(n,t)||(n=$p(),ze.lanes|=n,Br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_t=!0),e.memoizedState=n)}function xy(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var i=ec.transition;ec.transition={};try{e(!1),t()}finally{je=n,ec.transition=i}}function Fm(){return qt().memoizedState}function vy(e,t,n){var i=lr(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Um(e))Hm(t,n);else if(n=wm(e,t,n,i),n!==null){var s=mt();nn(n,e,i,s),Zm(n,t,i)}}function yy(e,t,n){var i=lr(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Um(e))Hm(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var c=t.lastRenderedState,u=a(c,n);if(s.hasEagerState=!0,s.eagerState=u,rn(u,c)){var h=t.interleaved;h===null?(s.next=s,Hd(t)):(s.next=h.next,h.next=s),t.interleaved=s;return}}catch{}finally{}n=wm(e,t,s,i),n!==null&&(s=mt(),nn(n,e,i,s),Zm(n,t,i))}}function Um(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function Hm(e,t){wi=No=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zm(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Sd(e,n)}}var ko={readContext:Gt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},_y={readContext:Gt,useCallback:function(e,t){return hn().memoizedState=[e,t===void 0?null:t],e},useContext:Gt,useEffect:nf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qa(4194308,4,Dm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qa(4,2,e,t)},useMemo:function(e,t){var n=hn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=hn();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=vy.bind(null,ze,e),[i.memoizedState,e]},useRef:function(e){var t=hn();return e={current:e},t.memoizedState=e},useState:tf,useDebugValue:Yd,useDeferredValue:function(e){return hn().memoizedState=e},useTransition:function(){var e=tf(!1),t=e[0];return e=xy.bind(null,e[1]),hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ze,s=hn();if(De){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),et===null)throw Error(q(349));zr&30||Cm(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,nf(Em.bind(null,i,a,e),[e]),i.flags|=2048,Ui(9,Sm.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=hn(),t=et.identifierPrefix;if(De){var n=Rn,i=In;n=(i&~(1<<32-tn(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},by={readContext:Gt,useCallback:Am,useContext:Gt,useEffect:Qd,useImperativeHandle:Om,useInsertionEffect:Im,useLayoutEffect:Rm,useMemo:zm,useReducer:tc,useRef:Mm,useState:function(){return tc(Fi)},useDebugValue:Yd,useDeferredValue:function(e){var t=qt();return Bm(t,Qe.memoizedState,e)},useTransition:function(){var e=tc(Fi)[0],t=qt().memoizedState;return[e,t]},useMutableSource:km,useSyncExternalStore:jm,useId:Fm,unstable_isNewReconciler:!1},wy={readContext:Gt,useCallback:Am,useContext:Gt,useEffect:Qd,useImperativeHandle:Om,useInsertionEffect:Im,useLayoutEffect:Rm,useMemo:zm,useReducer:nc,useRef:Mm,useState:function(){return nc(Fi)},useDebugValue:Yd,useDeferredValue:function(e){var t=qt();return Qe===null?t.memoizedState=e:Bm(t,Qe.memoizedState,e)},useTransition:function(){var e=nc(Fi)[0],t=qt().memoizedState;return[e,t]},useMutableSource:km,useSyncExternalStore:jm,useId:Fm,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=Fe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Hc(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Fe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ho={isMounted:function(e){return(e=e._reactInternals)?Zr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=mt(),s=lr(e),a=Dn(i,s);a.payload=t,n!=null&&(a.callback=n),t=ar(e,a,s),t!==null&&(nn(t,e,s,i),qa(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=mt(),s=lr(e),a=Dn(i,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ar(e,a,s),t!==null&&(nn(t,e,s,i),qa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mt(),i=lr(e),s=Dn(n,i);s.tag=2,t!=null&&(s.callback=t),t=ar(e,s,i),t!==null&&(nn(t,e,i,n),qa(t,e,i))}};function rf(e,t,n,i,s,a,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,c):t.prototype&&t.prototype.isPureReactComponent?!Ii(n,i)||!Ii(s,a):!0}function $m(e,t,n){var i=!1,s=hr,a=t.contextType;return typeof a=="object"&&a!==null?a=Gt(a):(s=wt(t)?Or:ut.current,i=t.contextTypes,a=(i=i!=null)?js(e,s):hr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ho,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function sf(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function Zc(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Zd(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Gt(a):(a=wt(t)?Or:ut.current,s.context=js(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Hc(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ho.enqueueReplaceState(s,s.state,null),wo(e,n,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ps(e,t){try{var n="",i=t;do n+=Qx(i),i=i.return;while(i);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function rc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $c(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ly=typeof WeakMap=="function"?WeakMap:Map;function Wm(e,t,n){n=Dn(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Co||(Co=!0,ed=i),$c(e,t)},n}function Vm(e,t,n){n=Dn(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){$c(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){$c(e,t),typeof i!="function"&&(or===null?or=new Set([this]):or.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),n}function af(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Ly;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=Ay.bind(null,e,t,n),t.then(e,e))}function of(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lf(e,t,n,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Dn(-1,1),t.tag=2,ar(n,t,1))),n.lanes|=1),e)}var Ny=Fn.ReactCurrentOwner,_t=!1;function pt(e,t,n,i){t.child=e===null?bm(t,null,n,i):Ss(t,e.child,n,i)}function cf(e,t,n,i,s){n=n.render;var a=t.ref;return Ls(t,s),i=qd(e,t,n,i,a,s),n=Kd(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(De&&n&&Od(t),t.flags|=1,pt(e,t,i,s),t.child)}function df(e,t,n,i,s){if(e===null){var a=n.type;return typeof a=="function"&&!iu(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Gm(e,t,a,i,s)):(e=eo(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var c=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ii,n(c,i)&&e.ref===t.ref)return Bn(e,t,s)}return t.flags|=1,e=cr(a,i),e.ref=t.ref,e.return=t,t.child=e}function Gm(e,t,n,i,s){if(e!==null){var a=e.memoizedProps;if(Ii(a,i)&&e.ref===t.ref)if(_t=!1,t.pendingProps=i=a,(e.lanes&s)!==0)e.flags&131072&&(_t=!0);else return t.lanes=e.lanes,Bn(e,t,s)}return Wc(e,t,n,i,s)}function qm(e,t,n){var i=t.pendingProps,s=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(vs,Pt),Pt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pe(vs,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:n,Pe(vs,Pt),Pt|=i}else a!==null?(i=a.baseLanes|n,t.memoizedState=null):i=n,Pe(vs,Pt),Pt|=i;return pt(e,t,s,n),t.child}function Km(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Wc(e,t,n,i,s){var a=wt(n)?Or:ut.current;return a=js(t,a),Ls(t,s),n=qd(e,t,n,i,a,s),i=Kd(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(De&&i&&Od(t),t.flags|=1,pt(e,t,n,s),t.child)}function uf(e,t,n,i,s){if(wt(n)){var a=!0;xo(t)}else a=!1;if(Ls(t,s),t.stateNode===null)Ya(e,t),$m(t,n,i),Zc(t,n,i,s),i=!0;else if(e===null){var c=t.stateNode,u=t.memoizedProps;c.props=u;var h=c.context,p=n.contextType;typeof p=="object"&&p!==null?p=Gt(p):(p=wt(n)?Or:ut.current,p=js(t,p));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof c.getSnapshotBeforeUpdate=="function";g||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==i||h!==p)&&sf(t,c,i,p),Qn=!1;var b=t.memoizedState;c.state=b,wo(t,i,c,s),h=t.memoizedState,u!==i||b!==h||bt.current||Qn?(typeof m=="function"&&(Hc(t,n,m,i),h=t.memoizedState),(u=Qn||rf(t,n,u,i,b,h,p))?(g||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),c.props=i,c.state=h,c.context=p,i=u):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{c=t.stateNode,Lm(e,t),u=t.memoizedProps,p=t.type===t.elementType?u:Xt(t.type,u),c.props=p,g=t.pendingProps,b=c.context,h=n.contextType,typeof h=="object"&&h!==null?h=Gt(h):(h=wt(n)?Or:ut.current,h=js(t,h));var S=n.getDerivedStateFromProps;(m=typeof S=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==g||b!==h)&&sf(t,c,i,h),Qn=!1,b=t.memoizedState,c.state=b,wo(t,i,c,s);var w=t.memoizedState;u!==g||b!==w||bt.current||Qn?(typeof S=="function"&&(Hc(t,n,S,i),w=t.memoizedState),(p=Qn||rf(t,n,p,i,b,w,h)||!1)?(m||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(i,w,h),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(i,w,h)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=w),c.props=i,c.state=w,c.context=h,i=p):(typeof c.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),i=!1)}return Vc(e,t,n,i,a,s)}function Vc(e,t,n,i,s,a){Km(e,t);var c=(t.flags&128)!==0;if(!i&&!c)return s&&Kh(t,n,!1),Bn(e,t,a);i=t.stateNode,Ny.current=t;var u=c&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&c?(t.child=Ss(t,e.child,null,a),t.child=Ss(t,null,u,a)):pt(e,t,u,a),t.memoizedState=i.state,s&&Kh(t,n,!0),t.child}function Qm(e){var t=e.stateNode;t.pendingContext?qh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qh(e,t.context,!1),$d(e,t.containerInfo)}function hf(e,t,n,i,s){return Cs(),zd(s),t.flags|=256,pt(e,t,n,i),t.child}var Gc={dehydrated:null,treeContext:null,retryLane:0};function qc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ym(e,t,n){var i=t.pendingProps,s=Ae.current,a=!1,c=(t.flags&128)!==0,u;if((u=c)||(u=e!==null&&e.memoizedState===null?!1:(s&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Pe(Ae,s&1),e===null)return Fc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=c):a=Wo(c,i,0,null),e=Rr(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=qc(n),t.memoizedState=Gc,e):Xd(t,c));if(s=e.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return ky(e,t,c,i,u,s,n);if(a){a=i.fallback,c=t.mode,s=e.child,u=s.sibling;var h={mode:"hidden",children:i.children};return!(c&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=h,t.deletions=null):(i=cr(s,h),i.subtreeFlags=s.subtreeFlags&14680064),u!==null?a=cr(u,a):(a=Rr(a,c,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=e.child.memoizedState,c=c===null?qc(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Gc,i}return a=e.child,e=a.sibling,i=cr(a,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Xd(e,t){return t=Wo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oa(e,t,n,i){return i!==null&&zd(i),Ss(t,e.child,null,n),e=Xd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ky(e,t,n,i,s,a,c){if(n)return t.flags&256?(t.flags&=-257,i=rc(Error(q(422))),Oa(e,t,c,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=Wo({mode:"visible",children:i.children},s,0,null),a=Rr(a,s,c,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,t.mode&1&&Ss(t,e.child,null,c),t.child.memoizedState=qc(c),t.memoizedState=Gc,a);if(!(t.mode&1))return Oa(e,t,c,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var u=i.dgst;return i=u,a=Error(q(419)),i=rc(a,i,void 0),Oa(e,t,c,i)}if(u=(c&e.childLanes)!==0,_t||u){if(i=et,i!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|c)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,zn(e,s),nn(i,e,s,-1))}return su(),i=rc(Error(q(421))),Oa(e,t,c,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=zy.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Tt=ir(s.nextSibling),Mt=t,De=!0,en=null,e!==null&&(Ht[Zt++]=In,Ht[Zt++]=Rn,Ht[Zt++]=Ar,In=e.id,Rn=e.overflow,Ar=t),t=Xd(t,i.children),t.flags|=4096,t)}function ff(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Uc(e.return,t,n)}function sc(e,t,n,i,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=s)}function Xm(e,t,n){var i=t.pendingProps,s=i.revealOrder,a=i.tail;if(pt(e,t,i.children,n),i=Ae.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ff(e,n,t);else if(e.tag===19)ff(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Pe(Ae,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Lo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),sc(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Lo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}sc(t,!0,n,null,a);break;case"together":sc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ya(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=cr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jy(e,t,n){switch(t.tag){case 3:Qm(t),Cs();break;case 5:Nm(t);break;case 1:wt(t.type)&&xo(t);break;case 4:$d(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Pe(_o,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Pe(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?Ym(e,t,n):(Pe(Ae,Ae.current&1),e=Bn(e,t,n),e!==null?e.sibling:null);Pe(Ae,Ae.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Xm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(Ae,Ae.current),i)break;return null;case 22:case 23:return t.lanes=0,qm(e,t,n)}return Bn(e,t,n)}var Jm,Kc,eg,tg;Jm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kc=function(){};eg=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Tr(gn.current);var a=null;switch(n){case"input":s=xc(e,s),i=xc(e,i),a=[];break;case"select":s=Fe({},s,{value:void 0}),i=Fe({},i,{value:void 0}),a=[];break;case"textarea":s=_c(e,s),i=_c(e,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=mo)}wc(n,i);var c;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var u=s[p];for(c in u)u.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(ji.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in i){var h=i[p];if(u=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&h!==u&&(h!=null||u!=null))if(p==="style")if(u){for(c in u)!u.hasOwnProperty(c)||h&&h.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in h)h.hasOwnProperty(c)&&u[c]!==h[c]&&(n||(n={}),n[c]=h[c])}else n||(a||(a=[]),a.push(p,n)),n=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(a=a||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(a=a||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(ji.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&Te("scroll",e),a||u===h||(a=[])):(a=a||[]).push(p,h))}n&&(a=a||[]).push("style",n);var p=a;(t.updateQueue=p)&&(t.flags|=4)}};tg=function(e,t,n,i){n!==i&&(t.flags|=4)};function di(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Cy(e,t,n){var i=t.pendingProps;switch(Ad(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return wt(t.type)&&go(),lt(t),null;case 3:return i=t.stateNode,Es(),Me(bt),Me(ut),Vd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ra(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,en!==null&&(rd(en),en=null))),Kc(e,t),lt(t),null;case 5:Wd(t);var s=Tr(zi.current);if(n=t.type,e!==null&&t.stateNode!=null)eg(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(q(166));return lt(t),null}if(e=Tr(gn.current),Ra(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[fn]=t,i[Oi]=a,e=(t.mode&1)!==0,n){case"dialog":Te("cancel",i),Te("close",i);break;case"iframe":case"object":case"embed":Te("load",i);break;case"video":case"audio":for(s=0;s<gi.length;s++)Te(gi[s],i);break;case"source":Te("error",i);break;case"img":case"image":case"link":Te("error",i),Te("load",i);break;case"details":Te("toggle",i);break;case"input":bh(i,a),Te("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Te("invalid",i);break;case"textarea":Lh(i,a),Te("invalid",i)}wc(n,a),s=null;for(var c in a)if(a.hasOwnProperty(c)){var u=a[c];c==="children"?typeof u=="string"?i.textContent!==u&&(a.suppressHydrationWarning!==!0&&Ia(i.textContent,u,e),s=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Ia(i.textContent,u,e),s=["children",""+u]):ji.hasOwnProperty(c)&&u!=null&&c==="onScroll"&&Te("scroll",i)}switch(n){case"input":ka(i),wh(i,a,!0);break;case"textarea":ka(i),Nh(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=mo)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ep(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=c.createElement(n,{is:i.is}):(e=c.createElement(n),n==="select"&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,n),e[fn]=t,e[Oi]=i,Jm(e,t,!1,!1),t.stateNode=e;e:{switch(c=Lc(n,i),n){case"dialog":Te("cancel",e),Te("close",e),s=i;break;case"iframe":case"object":case"embed":Te("load",e),s=i;break;case"video":case"audio":for(s=0;s<gi.length;s++)Te(gi[s],e);s=i;break;case"source":Te("error",e),s=i;break;case"img":case"image":case"link":Te("error",e),Te("load",e),s=i;break;case"details":Te("toggle",e),s=i;break;case"input":bh(e,i),s=xc(e,i),Te("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=Fe({},i,{value:void 0}),Te("invalid",e);break;case"textarea":Lh(e,i),s=_c(e,i),Te("invalid",e);break;default:s=i}wc(n,s),u=s;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];a==="style"?Mp(e,h):a==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Pp(e,h)):a==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Ci(e,h):typeof h=="number"&&Ci(e,""+h):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ji.hasOwnProperty(a)?h!=null&&a==="onScroll"&&Te("scroll",e):h!=null&&wd(e,a,h,c))}switch(n){case"input":ka(e),wh(e,i,!1);break;case"textarea":ka(e),Nh(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ur(i.value));break;case"select":e.multiple=!!i.multiple,a=i.value,a!=null?ys(e,!!i.multiple,a,!1):i.defaultValue!=null&&ys(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=mo)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)tg(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(q(166));if(n=Tr(zi.current),Tr(gn.current),Ra(t)){if(i=t.stateNode,n=t.memoizedProps,i[fn]=t,(a=i.nodeValue!==n)&&(e=Mt,e!==null))switch(e.tag){case 3:Ia(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ia(i.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[fn]=t,t.stateNode=i}return lt(t),null;case 13:if(Me(Ae),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&Tt!==null&&t.mode&1&&!(t.flags&128))ym(),Cs(),t.flags|=98560,a=!1;else if(a=Ra(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(q(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(q(317));a[fn]=t}else Cs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),a=!1}else en!==null&&(rd(en),en=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?Ye===0&&(Ye=3):su())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return Es(),Kc(e,t),e===null&&Ri(t.stateNode.containerInfo),lt(t),null;case 10:return Ud(t.type._context),lt(t),null;case 17:return wt(t.type)&&go(),lt(t),null;case 19:if(Me(Ae),a=t.memoizedState,a===null)return lt(t),null;if(i=(t.flags&128)!==0,c=a.rendering,c===null)if(i)di(a,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=Lo(e),c!==null){for(t.flags|=128,di(a,!1),i=c.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)a=n,e=i,a.flags&=14680066,c=a.alternate,c===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pe(Ae,Ae.current&1|2),t.child}e=e.sibling}a.tail!==null&&We()>Ts&&(t.flags|=128,i=!0,di(a,!1),t.lanes=4194304)}else{if(!i)if(e=Lo(c),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),di(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!De)return lt(t),null}else 2*We()-a.renderingStartTime>Ts&&n!==1073741824&&(t.flags|=128,i=!0,di(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(n=a.last,n!==null?n.sibling=c:t.child=c,a.last=c)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=We(),t.sibling=null,n=Ae.current,Pe(Ae,i?n&1|2:n&1),t):(lt(t),null);case 22:case 23:return ru(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Pt&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function Sy(e,t){switch(Ad(t),t.tag){case 1:return wt(t.type)&&go(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Es(),Me(bt),Me(ut),Vd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wd(t),null;case 13:if(Me(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));Cs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(Ae),null;case 4:return Es(),null;case 10:return Ud(t.type._context),null;case 22:case 23:return ru(),null;case 24:return null;default:return null}}var Aa=!1,ct=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,ce=null;function xs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){He(e,t,i)}else n.current=null}function Qc(e,t,n){try{n()}catch(i){He(e,t,i)}}var pf=!1;function Py(e,t){if(Ic=ho,e=am(),Dd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var c=0,u=-1,h=-1,p=0,m=0,g=e,b=null;t:for(;;){for(var S;g!==n||s!==0&&g.nodeType!==3||(u=c+s),g!==a||i!==0&&g.nodeType!==3||(h=c+i),g.nodeType===3&&(c+=g.nodeValue.length),(S=g.firstChild)!==null;)b=g,g=S;for(;;){if(g===e)break t;if(b===n&&++p===s&&(u=c),b===a&&++m===i&&(h=c),(S=g.nextSibling)!==null)break;g=b,b=g.parentNode}g=S}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rc={focusedElem:e,selectionRange:n},ho=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var k=w.memoizedProps,C=w.memoizedState,_=t.stateNode,y=_.getSnapshotBeforeUpdate(t.elementType===t.type?k:Xt(t.type,k),C);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(E){He(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return w=pf,pf=!1,w}function Li(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Qc(t,n,a)}s=s.next}while(s!==i)}}function Zo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Yc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ng(e){var t=e.alternate;t!==null&&(e.alternate=null,ng(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fn],delete t[Oi],delete t[Ac],delete t[hy],delete t[fy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rg(e){return e.tag===5||e.tag===3||e.tag===4}function mf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=mo));else if(i!==4&&(e=e.child,e!==null))for(Xc(e,t,n),e=e.sibling;e!==null;)Xc(e,t,n),e=e.sibling}function Jc(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Jc(e,t,n),e=e.sibling;e!==null;)Jc(e,t,n),e=e.sibling}var rt=null,Jt=!1;function qn(e,t,n){for(n=n.child;n!==null;)sg(e,t,n),n=n.sibling}function sg(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Do,n)}catch{}switch(n.tag){case 5:ct||xs(n,t);case 6:var i=rt,s=Jt;rt=null,qn(e,t,n),rt=i,Jt=s,rt!==null&&(Jt?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(Jt?(e=rt,n=n.stateNode,e.nodeType===8?Yl(e.parentNode,n):e.nodeType===1&&Yl(e,n),Ti(e)):Yl(rt,n.stateNode));break;case 4:i=rt,s=Jt,rt=n.stateNode.containerInfo,Jt=!0,qn(e,t,n),rt=i,Jt=s;break;case 0:case 11:case 14:case 15:if(!ct&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,c=a.destroy;a=a.tag,c!==void 0&&(a&2||a&4)&&Qc(n,t,c),s=s.next}while(s!==i)}qn(e,t,n);break;case 1:if(!ct&&(xs(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){He(n,t,u)}qn(e,t,n);break;case 21:qn(e,t,n);break;case 22:n.mode&1?(ct=(i=ct)||n.memoizedState!==null,qn(e,t,n),ct=i):qn(e,t,n);break;default:qn(e,t,n)}}function gf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ey),t.forEach(function(i){var s=By.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Yt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var a=e,c=t,u=c;e:for(;u!==null;){switch(u.tag){case 5:rt=u.stateNode,Jt=!1;break e;case 3:rt=u.stateNode.containerInfo,Jt=!0;break e;case 4:rt=u.stateNode.containerInfo,Jt=!0;break e}u=u.return}if(rt===null)throw Error(q(160));sg(a,c,s),rt=null,Jt=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(p){He(s,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ig(t,e),t=t.sibling}function ig(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),dn(e),i&4){try{Li(3,e,e.return),Zo(3,e)}catch(k){He(e,e.return,k)}try{Li(5,e,e.return)}catch(k){He(e,e.return,k)}}break;case 1:Yt(t,e),dn(e),i&512&&n!==null&&xs(n,n.return);break;case 5:if(Yt(t,e),dn(e),i&512&&n!==null&&xs(n,n.return),e.flags&32){var s=e.stateNode;try{Ci(s,"")}catch(k){He(e,e.return,k)}}if(i&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,c=n!==null?n.memoizedProps:a,u=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&Cp(s,a),Lc(u,c);var p=Lc(u,a);for(c=0;c<h.length;c+=2){var m=h[c],g=h[c+1];m==="style"?Mp(s,g):m==="dangerouslySetInnerHTML"?Pp(s,g):m==="children"?Ci(s,g):wd(s,m,g,p)}switch(u){case"input":vc(s,a);break;case"textarea":Sp(s,a);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var S=a.value;S!=null?ys(s,!!a.multiple,S,!1):b!==!!a.multiple&&(a.defaultValue!=null?ys(s,!!a.multiple,a.defaultValue,!0):ys(s,!!a.multiple,a.multiple?[]:"",!1))}s[Oi]=a}catch(k){He(e,e.return,k)}}break;case 6:if(Yt(t,e),dn(e),i&4){if(e.stateNode===null)throw Error(q(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(k){He(e,e.return,k)}}break;case 3:if(Yt(t,e),dn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ti(t.containerInfo)}catch(k){He(e,e.return,k)}break;case 4:Yt(t,e),dn(e);break;case 13:Yt(t,e),dn(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(tu=We())),i&4&&gf(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(ct=(p=ct)||m,Yt(t,e),ct=p):Yt(t,e),dn(e),i&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!m&&e.mode&1)for(ce=e,m=e.child;m!==null;){for(g=ce=m;ce!==null;){switch(b=ce,S=b.child,b.tag){case 0:case 11:case 14:case 15:Li(4,b,b.return);break;case 1:xs(b,b.return);var w=b.stateNode;if(typeof w.componentWillUnmount=="function"){i=b,n=b.return;try{t=i,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(k){He(i,n,k)}}break;case 5:xs(b,b.return);break;case 22:if(b.memoizedState!==null){vf(g);continue}}S!==null?(S.return=b,ce=S):vf(g)}m=m.sibling}e:for(m=null,g=e;;){if(g.tag===5){if(m===null){m=g;try{s=g.stateNode,p?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=g.stateNode,h=g.memoizedProps.style,c=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=Tp("display",c))}catch(k){He(e,e.return,k)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=p?"":g.memoizedProps}catch(k){He(e,e.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Yt(t,e),dn(e),i&4&&gf(e);break;case 21:break;default:Yt(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(rg(n)){var i=n;break e}n=n.return}throw Error(q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ci(s,""),i.flags&=-33);var a=mf(e);Jc(e,a,s);break;case 3:case 4:var c=i.stateNode.containerInfo,u=mf(e);Xc(e,u,c);break;default:throw Error(q(161))}}catch(h){He(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ty(e,t,n){ce=e,ag(e)}function ag(e,t,n){for(var i=(e.mode&1)!==0;ce!==null;){var s=ce,a=s.child;if(s.tag===22&&i){var c=s.memoizedState!==null||Aa;if(!c){var u=s.alternate,h=u!==null&&u.memoizedState!==null||ct;u=Aa;var p=ct;if(Aa=c,(ct=h)&&!p)for(ce=s;ce!==null;)c=ce,h=c.child,c.tag===22&&c.memoizedState!==null?yf(s):h!==null?(h.return=c,ce=h):yf(s);for(;a!==null;)ce=a,ag(a),a=a.sibling;ce=s,Aa=u,ct=p}xf(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ce=a):xf(e)}}function xf(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ct||Zo(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ct)if(n===null)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Xt(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ef(t,a,i);break;case 3:var c=t.updateQueue;if(c!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ef(t,c,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var m=p.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Ti(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ct||t.flags&512&&Yc(t)}catch(b){He(t,t.return,b)}}if(t===e){ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,ce=n;break}ce=t.return}}function vf(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ce=n;break}ce=t.return}}function yf(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zo(4,t)}catch(h){He(t,n,h)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(h){He(t,s,h)}}var a=t.return;try{Yc(t)}catch(h){He(t,a,h)}break;case 5:var c=t.return;try{Yc(t)}catch(h){He(t,c,h)}}}catch(h){He(t,t.return,h)}if(t===e){ce=null;break}var u=t.sibling;if(u!==null){u.return=t.return,ce=u;break}ce=t.return}}var My=Math.ceil,jo=Fn.ReactCurrentDispatcher,Jd=Fn.ReactCurrentOwner,Wt=Fn.ReactCurrentBatchConfig,Ne=0,et=null,Ke=null,st=0,Pt=0,vs=pr(0),Ye=0,Hi=null,Br=0,$o=0,eu=0,Ni=null,yt=null,tu=0,Ts=1/0,Tn=null,Co=!1,ed=null,or=null,za=!1,er=null,So=0,ki=0,td=null,Xa=-1,Ja=0;function mt(){return Ne&6?We():Xa!==-1?Xa:Xa=We()}function lr(e){return e.mode&1?Ne&2&&st!==0?st&-st:my.transition!==null?(Ja===0&&(Ja=$p()),Ja):(e=je,e!==0||(e=window.event,e=e===void 0?16:Yp(e.type)),e):1}function nn(e,t,n,i){if(50<ki)throw ki=0,td=null,Error(q(185));Gi(e,n,i),(!(Ne&2)||e!==et)&&(e===et&&(!(Ne&2)&&($o|=n),Ye===4&&Xn(e,st)),Lt(e,i),n===1&&Ne===0&&!(t.mode&1)&&(Ts=We()+500,Fo&&mr()))}function Lt(e,t){var n=e.callbackNode;mv(e,t);var i=uo(e,e===et?st:0);if(i===0)n!==null&&Ch(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Ch(n),t===1)e.tag===0?py(_f.bind(null,e)):gm(_f.bind(null,e)),dy(function(){!(Ne&6)&&mr()}),n=null;else{switch(Wp(i)){case 1:n=Cd;break;case 4:n=Hp;break;case 16:n=co;break;case 536870912:n=Zp;break;default:n=co}n=pg(n,og.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function og(e,t){if(Xa=-1,Ja=0,Ne&6)throw Error(q(327));var n=e.callbackNode;if(Ns()&&e.callbackNode!==n)return null;var i=uo(e,e===et?st:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Eo(e,i);else{t=i;var s=Ne;Ne|=2;var a=cg();(et!==e||st!==t)&&(Tn=null,Ts=We()+500,Ir(e,t));do try{Dy();break}catch(u){lg(e,u)}while(!0);Fd(),jo.current=a,Ne=s,Ke!==null?t=0:(et=null,st=0,t=Ye)}if(t!==0){if(t===2&&(s=Sc(e),s!==0&&(i=s,t=nd(e,s))),t===1)throw n=Hi,Ir(e,0),Xn(e,i),Lt(e,We()),n;if(t===6)Xn(e,i);else{if(s=e.current.alternate,!(i&30)&&!Iy(s)&&(t=Eo(e,i),t===2&&(a=Sc(e),a!==0&&(i=a,t=nd(e,a))),t===1))throw n=Hi,Ir(e,0),Xn(e,i),Lt(e,We()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(q(345));case 2:Sr(e,yt,Tn);break;case 3:if(Xn(e,i),(i&130023424)===i&&(t=tu+500-We(),10<t)){if(uo(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){mt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Oc(Sr.bind(null,e,yt,Tn),t);break}Sr(e,yt,Tn);break;case 4:if(Xn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var c=31-tn(i);a=1<<c,c=t[c],c>s&&(s=c),i&=~a}if(i=s,i=We()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*My(i/1960))-i,10<i){e.timeoutHandle=Oc(Sr.bind(null,e,yt,Tn),i);break}Sr(e,yt,Tn);break;case 5:Sr(e,yt,Tn);break;default:throw Error(q(329))}}}return Lt(e,We()),e.callbackNode===n?og.bind(null,e):null}function nd(e,t){var n=Ni;return e.current.memoizedState.isDehydrated&&(Ir(e,t).flags|=256),e=Eo(e,t),e!==2&&(t=yt,yt=n,t!==null&&rd(t)),e}function rd(e){yt===null?yt=e:yt.push.apply(yt,e)}function Iy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],a=s.getSnapshot;s=s.value;try{if(!rn(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xn(e,t){for(t&=~eu,t&=~$o,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tn(t),i=1<<n;e[n]=-1,t&=~i}}function _f(e){if(Ne&6)throw Error(q(327));Ns();var t=uo(e,0);if(!(t&1))return Lt(e,We()),null;var n=Eo(e,t);if(e.tag!==0&&n===2){var i=Sc(e);i!==0&&(t=i,n=nd(e,i))}if(n===1)throw n=Hi,Ir(e,0),Xn(e,t),Lt(e,We()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sr(e,yt,Tn),Lt(e,We()),null}function nu(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(Ts=We()+500,Fo&&mr())}}function Fr(e){er!==null&&er.tag===0&&!(Ne&6)&&Ns();var t=Ne;Ne|=1;var n=Wt.transition,i=je;try{if(Wt.transition=null,je=1,e)return e()}finally{je=i,Wt.transition=n,Ne=t,!(Ne&6)&&mr()}}function ru(){Pt=vs.current,Me(vs)}function Ir(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cy(n)),Ke!==null)for(n=Ke.return;n!==null;){var i=n;switch(Ad(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&go();break;case 3:Es(),Me(bt),Me(ut),Vd();break;case 5:Wd(i);break;case 4:Es();break;case 13:Me(Ae);break;case 19:Me(Ae);break;case 10:Ud(i.type._context);break;case 22:case 23:ru()}n=n.return}if(et=e,Ke=e=cr(e.current,null),st=Pt=t,Ye=0,Hi=null,eu=$o=Br=0,yt=Ni=null,Pr!==null){for(t=0;t<Pr.length;t++)if(n=Pr[t],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,a=n.pending;if(a!==null){var c=a.next;a.next=s,i.next=c}n.pending=i}Pr=null}return e}function lg(e,t){do{var n=Ke;try{if(Fd(),Ka.current=ko,No){for(var i=ze.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}No=!1}if(zr=0,Je=Qe=ze=null,wi=!1,Bi=0,Jd.current=null,n===null||n.return===null){Ye=1,Hi=t,Ke=null;break}e:{var a=e,c=n.return,u=n,h=t;if(t=st,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var b=m.alternate;b?(m.updateQueue=b.updateQueue,m.memoizedState=b.memoizedState,m.lanes=b.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=of(c);if(S!==null){S.flags&=-257,lf(S,c,u,a,t),S.mode&1&&af(a,p,t),t=S,h=p;var w=t.updateQueue;if(w===null){var k=new Set;k.add(h),t.updateQueue=k}else w.add(h);break e}else{if(!(t&1)){af(a,p,t),su();break e}h=Error(q(426))}}else if(De&&u.mode&1){var C=of(c);if(C!==null){!(C.flags&65536)&&(C.flags|=256),lf(C,c,u,a,t),zd(Ps(h,u));break e}}a=h=Ps(h,u),Ye!==4&&(Ye=2),Ni===null?Ni=[a]:Ni.push(a),a=c;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var _=Wm(a,h,t);Jh(a,_);break e;case 1:u=h;var y=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(or===null||!or.has(N)))){a.flags|=65536,t&=-t,a.lanes|=t;var E=Vm(a,u,t);Jh(a,E);break e}}a=a.return}while(a!==null)}ug(n)}catch(P){t=P,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function cg(){var e=jo.current;return jo.current=ko,e===null?ko:e}function su(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),et===null||!(Br&268435455)&&!($o&268435455)||Xn(et,st)}function Eo(e,t){var n=Ne;Ne|=2;var i=cg();(et!==e||st!==t)&&(Tn=null,Ir(e,t));do try{Ry();break}catch(s){lg(e,s)}while(!0);if(Fd(),Ne=n,jo.current=i,Ke!==null)throw Error(q(261));return et=null,st=0,Ye}function Ry(){for(;Ke!==null;)dg(Ke)}function Dy(){for(;Ke!==null&&!av();)dg(Ke)}function dg(e){var t=fg(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?ug(e):Ke=t,Jd.current=null}function ug(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Sy(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,Ke=null;return}}else if(n=Cy(n,t,Pt),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Ye===0&&(Ye=5)}function Sr(e,t,n){var i=je,s=Wt.transition;try{Wt.transition=null,je=1,Oy(e,t,n,i)}finally{Wt.transition=s,je=i}return null}function Oy(e,t,n,i){do Ns();while(er!==null);if(Ne&6)throw Error(q(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(gv(e,a),e===et&&(Ke=et=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||za||(za=!0,pg(co,function(){return Ns(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Wt.transition,Wt.transition=null;var c=je;je=1;var u=Ne;Ne|=4,Jd.current=null,Py(e,n),ig(n,e),ny(Rc),ho=!!Ic,Rc=Ic=null,e.current=n,Ty(n),ov(),Ne=u,je=c,Wt.transition=a}else e.current=n;if(za&&(za=!1,er=e,So=s),a=e.pendingLanes,a===0&&(or=null),dv(n.stateNode),Lt(e,We()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Co)throw Co=!1,e=ed,ed=null,e;return So&1&&e.tag!==0&&Ns(),a=e.pendingLanes,a&1?e===td?ki++:(ki=0,td=e):ki=0,mr(),null}function Ns(){if(er!==null){var e=Wp(So),t=Wt.transition,n=je;try{if(Wt.transition=null,je=16>e?16:e,er===null)var i=!1;else{if(e=er,er=null,So=0,Ne&6)throw Error(q(331));var s=Ne;for(Ne|=4,ce=e.current;ce!==null;){var a=ce,c=a.child;if(ce.flags&16){var u=a.deletions;if(u!==null){for(var h=0;h<u.length;h++){var p=u[h];for(ce=p;ce!==null;){var m=ce;switch(m.tag){case 0:case 11:case 15:Li(8,m,a)}var g=m.child;if(g!==null)g.return=m,ce=g;else for(;ce!==null;){m=ce;var b=m.sibling,S=m.return;if(ng(m),m===p){ce=null;break}if(b!==null){b.return=S,ce=b;break}ce=S}}}var w=a.alternate;if(w!==null){var k=w.child;if(k!==null){w.child=null;do{var C=k.sibling;k.sibling=null,k=C}while(k!==null)}}ce=a}}if(a.subtreeFlags&2064&&c!==null)c.return=a,ce=c;else e:for(;ce!==null;){if(a=ce,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Li(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,ce=_;break e}ce=a.return}}var y=e.current;for(ce=y;ce!==null;){c=ce;var N=c.child;if(c.subtreeFlags&2064&&N!==null)N.return=c,ce=N;else e:for(c=y;ce!==null;){if(u=ce,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Zo(9,u)}}catch(P){He(u,u.return,P)}if(u===c){ce=null;break e}var E=u.sibling;if(E!==null){E.return=u.return,ce=E;break e}ce=u.return}}if(Ne=s,mr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Do,e)}catch{}i=!0}return i}finally{je=n,Wt.transition=t}}return!1}function bf(e,t,n){t=Ps(n,t),t=Wm(e,t,1),e=ar(e,t,1),t=mt(),e!==null&&(Gi(e,1,t),Lt(e,t))}function He(e,t,n){if(e.tag===3)bf(e,e,n);else for(;t!==null;){if(t.tag===3){bf(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(or===null||!or.has(i))){e=Ps(n,e),e=Vm(t,e,1),t=ar(t,e,1),e=mt(),t!==null&&(Gi(t,1,e),Lt(t,e));break}}t=t.return}}function Ay(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=mt(),e.pingedLanes|=e.suspendedLanes&n,et===e&&(st&n)===n&&(Ye===4||Ye===3&&(st&130023424)===st&&500>We()-tu?Ir(e,0):eu|=n),Lt(e,t)}function hg(e,t){t===0&&(e.mode&1?(t=Sa,Sa<<=1,!(Sa&130023424)&&(Sa=4194304)):t=1);var n=mt();e=zn(e,t),e!==null&&(Gi(e,t,n),Lt(e,n))}function zy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hg(e,n)}function By(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(q(314))}i!==null&&i.delete(t),hg(e,n)}var fg;fg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||bt.current)_t=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _t=!1,jy(e,t,n);_t=!!(e.flags&131072)}else _t=!1,De&&t.flags&1048576&&xm(t,yo,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ya(e,t),e=t.pendingProps;var s=js(t,ut.current);Ls(t,n),s=qd(null,t,i,e,s,n);var a=Kd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wt(i)?(a=!0,xo(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zd(t),s.updater=Ho,t.stateNode=s,s._reactInternals=t,Zc(t,i,e,n),t=Vc(null,t,i,!0,a,n)):(t.tag=0,De&&a&&Od(t),pt(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ya(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=Uy(i),e=Xt(i,e),s){case 0:t=Wc(null,t,i,e,n);break e;case 1:t=uf(null,t,i,e,n);break e;case 11:t=cf(null,t,i,e,n);break e;case 14:t=df(null,t,i,Xt(i.type,e),n);break e}throw Error(q(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Xt(i,s),Wc(e,t,i,s,n);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Xt(i,s),uf(e,t,i,s,n);case 3:e:{if(Qm(t),e===null)throw Error(q(387));i=t.pendingProps,a=t.memoizedState,s=a.element,Lm(e,t),wo(t,i,null,n);var c=t.memoizedState;if(i=c.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Ps(Error(q(423)),t),t=hf(e,t,i,n,s);break e}else if(i!==s){s=Ps(Error(q(424)),t),t=hf(e,t,i,n,s);break e}else for(Tt=ir(t.stateNode.containerInfo.firstChild),Mt=t,De=!0,en=null,n=bm(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cs(),i===s){t=Bn(e,t,n);break e}pt(e,t,i,n)}t=t.child}return t;case 5:return Nm(t),e===null&&Fc(t),i=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,c=s.children,Dc(i,s)?c=null:a!==null&&Dc(i,a)&&(t.flags|=32),Km(e,t),pt(e,t,c,n),t.child;case 6:return e===null&&Fc(t),null;case 13:return Ym(e,t,n);case 4:return $d(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ss(t,null,i,n):pt(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Xt(i,s),cf(e,t,i,s,n);case 7:return pt(e,t,t.pendingProps,n),t.child;case 8:return pt(e,t,t.pendingProps.children,n),t.child;case 12:return pt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,c=s.value,Pe(_o,i._currentValue),i._currentValue=c,a!==null)if(rn(a.value,c)){if(a.children===s.children&&!bt.current){t=Bn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){c=a.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(a.tag===1){h=Dn(-1,n&-n),h.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var m=p.pending;m===null?h.next=h:(h.next=m.next,m.next=h),p.pending=h}}a.lanes|=n,h=a.alternate,h!==null&&(h.lanes|=n),Uc(a.return,n,t),u.lanes|=n;break}h=h.next}}else if(a.tag===10)c=a.type===t.type?null:a.child;else if(a.tag===18){if(c=a.return,c===null)throw Error(q(341));c.lanes|=n,u=c.alternate,u!==null&&(u.lanes|=n),Uc(c,n,t),c=a.sibling}else c=a.child;if(c!==null)c.return=a;else for(c=a;c!==null;){if(c===t){c=null;break}if(a=c.sibling,a!==null){a.return=c.return,c=a;break}c=c.return}a=c}pt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Ls(t,n),s=Gt(s),i=i(s),t.flags|=1,pt(e,t,i,n),t.child;case 14:return i=t.type,s=Xt(i,t.pendingProps),s=Xt(i.type,s),df(e,t,i,s,n);case 15:return Gm(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:Xt(i,s),Ya(e,t),t.tag=1,wt(i)?(e=!0,xo(t)):e=!1,Ls(t,n),$m(t,i,s),Zc(t,i,s,n),Vc(null,t,i,!0,e,n);case 19:return Xm(e,t,n);case 22:return qm(e,t,n)}throw Error(q(156,t.tag))};function pg(e,t){return Up(e,t)}function Fy(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,t,n,i){return new Fy(e,t,n,i)}function iu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uy(e){if(typeof e=="function")return iu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Nd)return 11;if(e===kd)return 14}return 2}function cr(e,t){var n=e.alternate;return n===null?(n=$t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eo(e,t,n,i,s,a){var c=2;if(i=e,typeof e=="function")iu(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case ls:return Rr(n.children,s,a,t);case Ld:c=8,s|=8;break;case fc:return e=$t(12,n,t,s|2),e.elementType=fc,e.lanes=a,e;case pc:return e=$t(13,n,t,s),e.elementType=pc,e.lanes=a,e;case mc:return e=$t(19,n,t,s),e.elementType=mc,e.lanes=a,e;case Np:return Wo(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wp:c=10;break e;case Lp:c=9;break e;case Nd:c=11;break e;case kd:c=14;break e;case Kn:c=16,i=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=$t(c,n,t,s),t.elementType=e,t.type=i,t.lanes=a,t}function Rr(e,t,n,i){return e=$t(7,e,i,t),e.lanes=n,e}function Wo(e,t,n,i){return e=$t(22,e,i,t),e.elementType=Np,e.lanes=n,e.stateNode={isHidden:!1},e}function ic(e,t,n){return e=$t(6,e,null,t),e.lanes=n,e}function ac(e,t,n){return t=$t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hy(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fl(0),this.expirationTimes=Fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fl(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function au(e,t,n,i,s,a,c,u,h){return e=new Hy(e,t,n,u,h),t===1?(t=1,a===!0&&(t|=8)):t=0,a=$t(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zd(a),e}function Zy(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:os,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function mg(e){if(!e)return hr;e=e._reactInternals;e:{if(Zr(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(wt(n))return mm(e,n,t)}return t}function gg(e,t,n,i,s,a,c,u,h){return e=au(n,i,!0,e,s,a,c,u,h),e.context=mg(null),n=e.current,i=mt(),s=lr(n),a=Dn(i,s),a.callback=t??null,ar(n,a,s),e.current.lanes=s,Gi(e,s,i),Lt(e,i),e}function Vo(e,t,n,i){var s=t.current,a=mt(),c=lr(s);return n=mg(n),t.context===null?t.context=n:t.pendingContext=n,t=Dn(a,c),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ar(s,t,c),e!==null&&(nn(e,s,c,a),qa(e,s,c)),c}function Po(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ou(e,t){wf(e,t),(e=e.alternate)&&wf(e,t)}function $y(){return null}var xg=typeof reportError=="function"?reportError:function(e){console.error(e)};function lu(e){this._internalRoot=e}Go.prototype.render=lu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));Vo(e,t,null,null)};Go.prototype.unmount=lu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fr(function(){Vo(null,e,null,null)}),t[An]=null}};function Go(e){this._internalRoot=e}Go.prototype.unstable_scheduleHydration=function(e){if(e){var t=qp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yn.length&&t!==0&&t<Yn[n].priority;n++);Yn.splice(n,0,e),n===0&&Qp(e)}};function cu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lf(){}function Wy(e,t,n,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var p=Po(c);a.call(p)}}var c=gg(t,i,e,0,null,!1,!1,"",Lf);return e._reactRootContainer=c,e[An]=c.current,Ri(e.nodeType===8?e.parentNode:e),Fr(),c}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var u=i;i=function(){var p=Po(h);u.call(p)}}var h=au(e,0,!1,null,null,!1,!1,"",Lf);return e._reactRootContainer=h,e[An]=h.current,Ri(e.nodeType===8?e.parentNode:e),Fr(function(){Vo(t,h,n,i)}),h}function Ko(e,t,n,i,s){var a=n._reactRootContainer;if(a){var c=a;if(typeof s=="function"){var u=s;s=function(){var h=Po(c);u.call(h)}}Vo(t,c,e,s)}else c=Wy(n,t,e,s,i);return Po(c)}Vp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mi(t.pendingLanes);n!==0&&(Sd(t,n|1),Lt(t,We()),!(Ne&6)&&(Ts=We()+500,mr()))}break;case 13:Fr(function(){var i=zn(e,1);if(i!==null){var s=mt();nn(i,e,1,s)}}),ou(e,1)}};Ed=function(e){if(e.tag===13){var t=zn(e,134217728);if(t!==null){var n=mt();nn(t,e,134217728,n)}ou(e,134217728)}};Gp=function(e){if(e.tag===13){var t=lr(e),n=zn(e,t);if(n!==null){var i=mt();nn(n,e,t,i)}ou(e,t)}};qp=function(){return je};Kp=function(e,t){var n=je;try{return je=e,t()}finally{je=n}};kc=function(e,t,n){switch(t){case"input":if(vc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=Bo(i);if(!s)throw Error(q(90));jp(i),vc(i,s)}}}break;case"textarea":Sp(e,n);break;case"select":t=n.value,t!=null&&ys(e,!!n.multiple,t,!1)}};Dp=nu;Op=Fr;var Vy={usingClientEntryPoint:!1,Events:[Ki,hs,Bo,Ip,Rp,nu]},ui={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gy={bundleType:ui.bundleType,version:ui.version,rendererPackageName:ui.rendererPackageName,rendererConfig:ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bp(e),e===null?null:e.stateNode},findFiberByHostInstance:ui.findFiberByHostInstance||$y,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{Do=Ba.inject(Gy),mn=Ba}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vy;Rt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cu(t))throw Error(q(200));return Zy(e,t,null,n)};Rt.createRoot=function(e,t){if(!cu(e))throw Error(q(299));var n=!1,i="",s=xg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=au(e,1,!1,null,null,n,!1,i,s),e[An]=t.current,Ri(e.nodeType===8?e.parentNode:e),new lu(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=Bp(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return Fr(e)};Rt.hydrate=function(e,t,n){if(!qo(t))throw Error(q(200));return Ko(null,e,t,!0,n)};Rt.hydrateRoot=function(e,t,n){if(!cu(e))throw Error(q(405));var i=n!=null&&n.hydratedSources||null,s=!1,a="",c=xg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),t=gg(t,null,e,1,n??null,s,!1,a,c),e[An]=t.current,Ri(e),i)for(e=0;e<i.length;e++)n=i[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Go(t)};Rt.render=function(e,t,n){if(!qo(t))throw Error(q(200));return Ko(null,e,t,!1,n)};Rt.unmountComponentAtNode=function(e){if(!qo(e))throw Error(q(40));return e._reactRootContainer?(Fr(function(){Ko(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};Rt.unstable_batchedUpdates=nu;Rt.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!qo(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Ko(e,t,n,!1,i)};Rt.version="18.3.1-next-f1338f8080-20240426";function vg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vg)}catch(e){console.error(e)}}vg(),vp.exports=Rt;var qy=vp.exports,Nf=qy;uc.createRoot=Nf.createRoot,uc.hydrateRoot=Nf.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zi(){return Zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zi.apply(this,arguments)}var tr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(tr||(tr={}));const kf="popstate";function Ky(e){e===void 0&&(e={});function t(i,s){let{pathname:a,search:c,hash:u}=i.location;return sd("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:To(s)}return Yy(t,n,null,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function du(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qy(){return Math.random().toString(36).substr(2,8)}function jf(e,t){return{usr:e.state,key:e.key,idx:t}}function sd(e,t,n,i){return n===void 0&&(n=null),Zi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?As(t):t,{state:n,key:t&&t.key||i||Qy()})}function To(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function As(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Yy(e,t,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,c=s.history,u=tr.Pop,h=null,p=m();p==null&&(p=0,c.replaceState(Zi({},c.state,{idx:p}),""));function m(){return(c.state||{idx:null}).idx}function g(){u=tr.Pop;let C=m(),_=C==null?null:C-p;p=C,h&&h({action:u,location:k.location,delta:_})}function b(C,_){u=tr.Push;let y=sd(k.location,C,_);p=m()+1;let N=jf(y,p),E=k.createHref(y);try{c.pushState(N,"",E)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(E)}a&&h&&h({action:u,location:k.location,delta:1})}function S(C,_){u=tr.Replace;let y=sd(k.location,C,_);p=m();let N=jf(y,p),E=k.createHref(y);c.replaceState(N,"",E),a&&h&&h({action:u,location:k.location,delta:0})}function w(C){let _=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof C=="string"?C:To(C);return y=y.replace(/ $/,"%20"),Be(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let k={get action(){return u},get location(){return e(s,c)},listen(C){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(kf,g),h=C,()=>{s.removeEventListener(kf,g),h=null}},createHref(C){return t(s,C)},createURL:w,encodeLocation(C){let _=w(C);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:b,replace:S,go(C){return c.go(C)}};return k}var Cf;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Cf||(Cf={}));function Xy(e,t,n){return n===void 0&&(n="/"),Jy(e,t,n)}function Jy(e,t,n,i){let s=typeof t=="string"?As(t):t,a=Ms(s.pathname||"/",n);if(a==null)return null;let c=yg(e);e_(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let p=u_(a);u=c_(c[h],p)}return u}function yg(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(Be(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let p=dr([i,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(Be(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),yg(a.children,t,m,p)),!(a.path==null&&!a.index)&&t.push({path:p,score:o_(p,a.index),routesMeta:m})};return e.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let h of _g(a.path))s(a,c,h)}),t}function _g(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let c=_g(i.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...c),u.map(h=>e.startsWith("/")&&h===""?"/":h)}function e_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:l_(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const t_=/^:[\w-]+$/,n_=3,r_=2,s_=1,i_=10,a_=-2,Sf=e=>e==="*";function o_(e,t){let n=e.split("/"),i=n.length;return n.some(Sf)&&(i+=a_),t&&(i+=r_),n.filter(s=>!Sf(s)).reduce((s,a)=>s+(t_.test(a)?n_:a===""?s_:i_),i)}function l_(e,t){return e.length===t.length&&e.slice(0,-1).every((i,s)=>i===t[s])?e[e.length-1]-t[t.length-1]:0}function c_(e,t,n){let{routesMeta:i}=e,s={},a="/",c=[];for(let u=0;u<i.length;++u){let h=i[u],p=u===i.length-1,m=a==="/"?t:t.slice(a.length)||"/",g=id({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),b=h.route;if(!g)return null;Object.assign(s,g.params),c.push({params:s,pathname:dr([a,g.pathname]),pathnameBase:g_(dr([a,g.pathnameBase])),route:b}),g.pathnameBase!=="/"&&(a=dr([a,g.pathnameBase]))}return c}function id(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=d_(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:i.reduce((p,m,g)=>{let{paramName:b,isOptional:S}=m;if(b==="*"){let k=u[g]||"";c=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const w=u[g];return S&&!w?p[b]=void 0:p[b]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:e}}function d_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),du(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function u_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return du(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ms(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const h_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,f_=e=>h_.test(e);function p_(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:s=""}=typeof e=="string"?As(e):e,a;if(n)if(f_(n))a=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),du(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?a=Ef(n.substring(1),"/"):a=Ef(n,t)}else a=t;return{pathname:a,search:x_(i),hash:v_(s)}}function Ef(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function oc(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function m_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function uu(e,t){let n=m_(e);return t?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function hu(e,t,n,i){i===void 0&&(i=!1);let s;typeof e=="string"?s=As(e):(s=Zi({},e),Be(!s.pathname||!s.pathname.includes("?"),oc("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),oc("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),oc("#","search","hash",s)));let a=e===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=n;else{let g=t.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),g-=1;s.pathname=b.join("/")}u=g>=0?t[g]:"/"}let h=p_(s,u),p=c&&c!=="/"&&c.endsWith("/"),m=(a||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}const dr=e=>e.join("/").replace(/\/\/+/g,"/"),g_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),x_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,v_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function y_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const bg=["post","put","patch","delete"];new Set(bg);const __=["get",...bg];new Set(__);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $i(){return $i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$i.apply(this,arguments)}const Qo=x.createContext(null),wg=x.createContext(null),Un=x.createContext(null),Yo=x.createContext(null),Hn=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Lg=x.createContext(null);function b_(e,t){let{relative:n}=t===void 0?{}:t;zs()||Be(!1);let{basename:i,navigator:s}=x.useContext(Un),{hash:a,pathname:c,search:u}=Jo(e,{relative:n}),h=c;return i!=="/"&&(h=c==="/"?i:dr([i,c])),s.createHref({pathname:h,search:u,hash:a})}function zs(){return x.useContext(Yo)!=null}function gr(){return zs()||Be(!1),x.useContext(Yo).location}function Ng(e){x.useContext(Un).static||x.useLayoutEffect(e)}function Xo(){let{isDataRoute:e}=x.useContext(Hn);return e?O_():w_()}function w_(){zs()||Be(!1);let e=x.useContext(Qo),{basename:t,future:n,navigator:i}=x.useContext(Un),{matches:s}=x.useContext(Hn),{pathname:a}=gr(),c=JSON.stringify(uu(s,n.v7_relativeSplatPath)),u=x.useRef(!1);return Ng(()=>{u.current=!0}),x.useCallback(function(p,m){if(m===void 0&&(m={}),!u.current)return;if(typeof p=="number"){i.go(p);return}let g=hu(p,JSON.parse(c),a,m.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:dr([t,g.pathname])),(m.replace?i.replace:i.push)(g,m.state,m)},[t,i,c,a,e])}const L_=x.createContext(null);function N_(e){let t=x.useContext(Hn).outlet;return t&&x.createElement(L_.Provider,{value:e},t)}function Jo(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=x.useContext(Un),{matches:s}=x.useContext(Hn),{pathname:a}=gr(),c=JSON.stringify(uu(s,i.v7_relativeSplatPath));return x.useMemo(()=>hu(e,JSON.parse(c),a,n==="path"),[e,c,a,n])}function k_(e,t){return j_(e,t)}function j_(e,t,n,i){zs()||Be(!1);let{navigator:s}=x.useContext(Un),{matches:a}=x.useContext(Hn),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let p=gr(),m;if(t){var g;let C=typeof t=="string"?As(t):t;h==="/"||(g=C.pathname)!=null&&g.startsWith(h)||Be(!1),m=C}else m=p;let b=m.pathname||"/",S=b;if(h!=="/"){let C=h.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=Xy(e,{pathname:S}),k=T_(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:dr([h,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:dr([h,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,n,i);return t&&k?x.createElement(Yo.Provider,{value:{location:$i({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:tr.Pop}},k):k}function C_(){let e=D_(),t=y_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:s},n):null,null)}const S_=x.createElement(C_,null);class E_ extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(Hn.Provider,{value:this.props.routeContext},x.createElement(Lg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function P_(e){let{routeContext:t,match:n,children:i}=e,s=x.useContext(Qo);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Hn.Provider,{value:t},i)}function T_(e,t,n,i){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=i)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let c=e,u=(s=n)==null?void 0:s.errors;if(u!=null){let m=c.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||Be(!1),c=c.slice(0,Math.min(c.length,m+1))}let h=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<c.length;m++){let g=c[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=m),g.route.id){let{loaderData:b,errors:S}=n,w=g.route.loader&&b[g.route.id]===void 0&&(!S||S[g.route.id]===void 0);if(g.route.lazy||w){h=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((m,g,b)=>{let S,w=!1,k=null,C=null;n&&(S=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||S_,h&&(p<0&&b===0?(A_("route-fallback"),w=!0,C=null):p===b&&(w=!0,C=g.route.hydrateFallbackElement||null)));let _=t.concat(c.slice(0,b+1)),y=()=>{let N;return S?N=k:w?N=C:g.route.Component?N=x.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=m,x.createElement(P_,{match:g,routeContext:{outlet:m,matches:_,isDataRoute:n!=null},children:N})};return n&&(g.route.ErrorBoundary||g.route.errorElement||b===0)?x.createElement(E_,{location:n.location,revalidation:n.revalidation,component:k,error:S,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var kg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kg||{}),jg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jg||{});function M_(e){let t=x.useContext(Qo);return t||Be(!1),t}function I_(e){let t=x.useContext(wg);return t||Be(!1),t}function R_(e){let t=x.useContext(Hn);return t||Be(!1),t}function Cg(e){let t=R_(),n=t.matches[t.matches.length-1];return n.route.id||Be(!1),n.route.id}function D_(){var e;let t=x.useContext(Lg),n=I_(),i=Cg();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function O_(){let{router:e}=M_(kg.UseNavigateStable),t=Cg(jg.UseNavigateStable),n=x.useRef(!1);return Ng(()=>{n.current=!0}),x.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,$i({fromRouteId:t},a)))},[e,t])}const Pf={};function A_(e,t,n){Pf[e]||(Pf[e]=!0)}function z_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ad(e){let{to:t,replace:n,state:i,relative:s}=e;zs()||Be(!1);let{future:a,static:c}=x.useContext(Un),{matches:u}=x.useContext(Hn),{pathname:h}=gr(),p=Xo(),m=hu(t,uu(u,a.v7_relativeSplatPath),h,s==="path"),g=JSON.stringify(m);return x.useEffect(()=>p(JSON.parse(g),{replace:n,state:i,relative:s}),[p,g,s,n,i]),null}function Sg(e){return N_(e.context)}function ft(e){Be(!1)}function B_(e){let{basename:t="/",children:n=null,location:i,navigationType:s=tr.Pop,navigator:a,static:c=!1,future:u}=e;zs()&&Be(!1);let h=t.replace(/^\/*/,"/"),p=x.useMemo(()=>({basename:h,navigator:a,static:c,future:$i({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof i=="string"&&(i=As(i));let{pathname:m="/",search:g="",hash:b="",state:S=null,key:w="default"}=i,k=x.useMemo(()=>{let C=Ms(m,h);return C==null?null:{location:{pathname:C,search:g,hash:b,state:S,key:w},navigationType:s}},[h,m,g,b,S,w,s]);return k==null?null:x.createElement(Un.Provider,{value:p},x.createElement(Yo.Provider,{children:n,value:k}))}function F_(e){let{children:t,location:n}=e;return k_(od(t),n)}new Promise(()=>{});function od(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(i,s)=>{if(!x.isValidElement(i))return;let a=[...t,s];if(i.type===x.Fragment){n.push.apply(n,od(i.props.children,a));return}i.type!==ft&&Be(!1),!i.props.index||!i.props.children||Be(!1);let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=od(i.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mo(){return Mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Mo.apply(this,arguments)}function Eg(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,a;for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function U_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function H_(e,t){return e.button===0&&(!t||t==="_self")&&!U_(e)}const Z_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$_=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],W_="6";try{window.__reactRouterVersion=W_}catch{}const V_=x.createContext({isTransitioning:!1}),G_="startTransition",Tf=Ax[G_];function q_(e){let{basename:t,children:n,future:i,window:s}=e,a=x.useRef();a.current==null&&(a.current=Ky({window:s,v5Compat:!0}));let c=a.current,[u,h]=x.useState({action:c.action,location:c.location}),{v7_startTransition:p}=i||{},m=x.useCallback(g=>{p&&Tf?Tf(()=>h(g)):h(g)},[h,p]);return x.useLayoutEffect(()=>c.listen(m),[c,m]),x.useEffect(()=>z_(i),[i]),x.createElement(B_,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:c,future:i})}const K_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y_=x.forwardRef(function(t,n){let{onClick:i,relative:s,reloadDocument:a,replace:c,state:u,target:h,to:p,preventScrollReset:m,viewTransition:g}=t,b=Eg(t,Z_),{basename:S}=x.useContext(Un),w,k=!1;if(typeof p=="string"&&Q_.test(p)&&(w=p,K_))try{let N=new URL(window.location.href),E=p.startsWith("//")?new URL(N.protocol+p):new URL(p),P=Ms(E.pathname,S);E.origin===N.origin&&P!=null?p=P+E.search+E.hash:k=!0}catch{}let C=b_(p,{relative:s}),_=J_(p,{replace:c,state:u,target:h,preventScrollReset:m,relative:s,viewTransition:g});function y(N){i&&i(N),N.defaultPrevented||_(N)}return x.createElement("a",Mo({},b,{href:w||C,onClick:k||a?i:y,ref:n,target:h}))}),Mf=x.forwardRef(function(t,n){let{"aria-current":i="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,viewTransition:p,children:m}=t,g=Eg(t,$_),b=Jo(h,{relative:g.relative}),S=gr(),w=x.useContext(wg),{navigator:k,basename:C}=x.useContext(Un),_=w!=null&&eb(b)&&p===!0,y=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,N=S.pathname,E=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(N=N.toLowerCase(),E=E?E.toLowerCase():null,y=y.toLowerCase()),E&&C&&(E=Ms(E,C)||E);const P=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let M=N===y||!c&&N.startsWith(y)&&N.charAt(P)==="/",I=E!=null&&(E===y||!c&&E.startsWith(y)&&E.charAt(y.length)==="/"),D={isActive:M,isPending:I,isTransitioning:_},K=M?i:void 0,F;typeof a=="function"?F=a(D):F=[a,M?"active":null,I?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let Z=typeof u=="function"?u(D):u;return x.createElement(Y_,Mo({},g,{"aria-current":K,className:F,ref:n,style:Z,to:h,viewTransition:p}),typeof m=="function"?m(D):m)});var ld;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ld||(ld={}));var If;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(If||(If={}));function X_(e){let t=x.useContext(Qo);return t||Be(!1),t}function J_(e,t){let{target:n,replace:i,state:s,preventScrollReset:a,relative:c,viewTransition:u}=t===void 0?{}:t,h=Xo(),p=gr(),m=Jo(e,{relative:c});return x.useCallback(g=>{if(H_(g,n)){g.preventDefault();let b=i!==void 0?i:To(p)===To(m);h(e,{replace:b,state:s,preventScrollReset:a,relative:c,viewTransition:u})}},[p,h,m,i,s,n,e,a,c,u])}function eb(e,t){t===void 0&&(t={});let n=x.useContext(V_);n==null&&Be(!1);let{basename:i}=X_(ld.useViewTransitionState),s=Jo(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=Ms(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=Ms(n.nextLocation.pathname,i)||n.nextLocation.pathname;return id(s.pathname,c)!=null||id(s.pathname,a)!=null}class tb{constructor(t){this.authRepo=t}async login(t,n){var i,s;try{return{success:!0,user:(await this.authRepo.login(t,n)).user}}catch(a){return{success:!1,error:((s=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:s.error)||(a==null?void 0:a.message)||"Error al iniciar sesin"}}}async logout(){try{await this.authRepo.logout()}catch{}}async getCurrentUser(){try{return await this.authRepo.getMe()}catch{return null}}}class Rf{constructor(t){this.userRepo=t}async getAll(){return this.userRepo.getAll()}async getById(t){return this.userRepo.getById(t)}async create(t){return this.userRepo.create(t)}async update(t,n){return this.userRepo.update(t,n)}async updateState(t,n,i){return this.userRepo.updateState(t,n,i)}async resetPassword(t){return this.userRepo.resetPassword(t)}async updatePassword(t,n){return this.userRepo.updatePassword(t,n)}async changeFirstLoginPassword(t,n){return this.userRepo.changeFirstLoginPassword(t,n)}}class nb{constructor(t){this.categoryRepo=t}async getAll(){return this.categoryRepo.getAll()}async getById(t){return this.categoryRepo.getById(t)}async create(t){return this.categoryRepo.create(t)}async update(t,n){return this.categoryRepo.update(t,n)}async updateState(t,n){return this.categoryRepo.updateState(t,n)}async delete(t){return this.categoryRepo.delete(t)}}class rb{constructor(t){this.productRepo=t}async getAll(t){return this.productRepo.getAll(t)}async getById(t){return this.productRepo.getById(t)}async create(t){return this.productRepo.create(t)}async update(t,n){return this.productRepo.update(t,n)}async updateState(t,n){return this.productRepo.updateState(t,n)}async delete(t){return this.productRepo.delete(t)}}class sb{constructor(t){this.supplierRepo=t}async getAll(){return this.supplierRepo.getAll()}async getById(t){return this.supplierRepo.getById(t)}async create(t){return this.supplierRepo.create(t)}async update(t,n){return this.supplierRepo.update(t,n)}async updateState(t,n,i){return this.supplierRepo.updateState(t,n,i)}async delete(t,n){return this.supplierRepo.delete(t,n)}}class ib{constructor(t){this.psRepo=t}async getAll(){return this.psRepo.getAll()}async getById(t){return this.psRepo.getById(t)}async create(t){return this.psRepo.create(t)}async update(t,n){return this.psRepo.update(t,n)}async updateState(t,n){return this.psRepo.update(t,{state:n})}async delete(t){return this.psRepo.delete(t)}}class ab{constructor(t){this.branchRepo=t}async getAll(){return this.branchRepo.getAll()}async getById(t){return this.branchRepo.getById(t)}async create(t){return this.branchRepo.create(t)}async update(t,n){return this.branchRepo.update(t,n)}async updateState(t,n){return this.branchRepo.updateState(t,n)}}class ob{constructor(t){this.repository=t}async getAll(){return this.repository.getAll()}}class lb{constructor(t){this.brandRepo=t}async getAll(){return this.brandRepo.getAll()}async getById(t){return this.brandRepo.getById(t)}async create(t){return this.brandRepo.create(t)}async update(t,n){return this.brandRepo.update(t,n)}async updateState(t,n){return this.brandRepo.updateState(t,n)}}class cb{constructor(t){this.repository=t}async getByBranchPaginated(t,n){return this.repository.getByBranchPaginated(t,n)}async setStock(t,n,i){return this.repository.setStock(t,n,i)}}class db{constructor(t){this.presentationRepo=t}async getAll(){return this.presentationRepo.getAll()}async getById(t){return this.presentationRepo.getById(t)}async create(t){return this.presentationRepo.create(t)}async update(t,n){return this.presentationRepo.update(t,n)}async updateState(t,n){return this.presentationRepo.updateState(t,n)}async delete(t){return this.presentationRepo.delete(t)}}class ub{constructor(t){this.colorRepo=t}async getAll(){return this.colorRepo.getAll()}async getById(t){return this.colorRepo.getById(t)}async create(t){return this.colorRepo.create(t)}async update(t,n){return this.colorRepo.update(t,n)}async updateState(t,n){return this.colorRepo.updateState(t,n)}async delete(t){return this.colorRepo.delete(t)}}class hb{constructor(t){this.repository=t}async listPaginated(){return this.repository.getAll()}async getById(t){return this.repository.getById(t)}async create(t){return this.repository.create(t)}async update(t,n){return this.repository.update(t,n)}async softDelete(t){return this.repository.softDelete(t)}async search(t){return this.repository.search(t)}}function Df(e){return e.map(([t,n])=>({lat:t,lng:n}))}function as(e){return e.map(t=>[t.lat,t.lng])}function fb(e){return e.length>=3}function Pg(e){const t=["#4285F4","#34A853","#FBBC04","#EA4335","#9C27B0","#FF6D00","#00BCD4","#E91E63","#795548","#607D8B","#8BC34A","#FF5722","#673AB7","#009688","#FFC107","#3F51B5","#CDDC39","#00796B","#C2185B","#1976D2"];return t[e%t.length]}function cd(e){return e.reduce((t,n)=>(n.id&&(t[n.id]=n.name),t),{})}function pb(e,t){return t==null?"Sin rea":e[t]||`rea #${t}`}class mb{constructor(t){Pn(this,"cache",null);Pn(this,"cacheTime",0);Pn(this,"cacheDuration",5*60*1e3);this.repository=t}async listPaginated(t=1,n=10){return this.repository.getAll(t,n)}async getAllCached(){const t=Date.now();if(this.cache&&t-this.cacheTime<this.cacheDuration)return this.cache;const n=await this.repository.getAll(1,100);return this.cache=n.data,this.cacheTime=t,this.cache}async getAllFresh(){return this.clearCache(),this.getAllCached()}async getAreaMap(){const t=await this.getAllCached();return cd(t)}async create(t,n){const i=await this.repository.create(t,n);return this.clearCache(),i}async update(t,n){const i=await this.repository.update(t,n);return this.clearCache(),i}async delete(t){await this.repository.delete(t),this.clearCache()}clearCache(){this.cache=null,this.cacheTime=0}}class gb{constructor(t){this.repository=t}async create(t){return this.repository.create(t)}}class xb{constructor(t){this.repository=t}async listAll(){return this.repository.getAll()}async getByClient(t){return this.repository.getByClientId(t)}async create(t,n){return this.repository.create(t,n)}async update(t,n,i){return this.repository.update(t,n,i)}async softDelete(t,n){return this.repository.softDelete(t,n)}}function Tg(e,t){return function(){return e.apply(t,arguments)}}const{toString:vb}=Object.prototype,{getPrototypeOf:fu}=Object,{iterator:el,toStringTag:Mg}=Symbol,tl=(e=>t=>{const n=vb.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),sn=e=>(e=e.toLowerCase(),t=>tl(t)===e),nl=e=>t=>typeof t===e,{isArray:Bs}=Array,Is=nl("undefined");function Yi(e){return e!==null&&!Is(e)&&e.constructor!==null&&!Is(e.constructor)&&Nt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ig=sn("ArrayBuffer");function yb(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ig(e.buffer),t}const _b=nl("string"),Nt=nl("function"),Rg=nl("number"),Xi=e=>e!==null&&typeof e=="object",bb=e=>e===!0||e===!1,to=e=>{if(tl(e)!=="object")return!1;const t=fu(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Mg in e)&&!(el in e)},wb=e=>{if(!Xi(e)||Yi(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Lb=sn("Date"),Nb=sn("File"),kb=sn("Blob"),jb=sn("FileList"),Cb=e=>Xi(e)&&Nt(e.pipe),Sb=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Nt(e.append)&&((t=tl(e))==="formdata"||t==="object"&&Nt(e.toString)&&e.toString()==="[object FormData]"))},Eb=sn("URLSearchParams"),[Pb,Tb,Mb,Ib]=["ReadableStream","Request","Response","Headers"].map(sn),Rb=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ji(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,s;if(typeof e!="object"&&(e=[e]),Bs(e))for(i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else{if(Yi(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),c=a.length;let u;for(i=0;i<c;i++)u=a[i],t.call(null,e[u],u,e)}}function Dg(e,t){if(Yi(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,s;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const Mr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Og=e=>!Is(e)&&e!==Mr;function dd(){const{caseless:e,skipUndefined:t}=Og(this)&&this||{},n={},i=(s,a)=>{const c=e&&Dg(n,a)||a;to(n[c])&&to(s)?n[c]=dd(n[c],s):to(s)?n[c]=dd({},s):Bs(s)?n[c]=s.slice():(!t||!Is(s))&&(n[c]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Ji(arguments[s],i);return n}const Db=(e,t,n,{allOwnKeys:i}={})=>(Ji(t,(s,a)=>{n&&Nt(s)?e[a]=Tg(s,n):e[a]=s},{allOwnKeys:i}),e),Ob=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ab=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},zb=(e,t,n,i)=>{let s,a,c;const u={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)c=s[a],(!i||i(c,e,t))&&!u[c]&&(t[c]=e[c],u[c]=!0);e=n!==!1&&fu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Bb=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},Fb=e=>{if(!e)return null;if(Bs(e))return e;let t=e.length;if(!Rg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Ub=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&fu(Uint8Array)),Hb=(e,t)=>{const i=(e&&e[el]).call(e);let s;for(;(s=i.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},Zb=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},$b=sn("HTMLFormElement"),Wb=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),Of=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Vb=sn("RegExp"),Ag=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Ji(n,(s,a)=>{let c;(c=t(s,a,e))!==!1&&(i[a]=c||s)}),Object.defineProperties(e,i)},Gb=e=>{Ag(e,(t,n)=>{if(Nt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Nt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},qb=(e,t)=>{const n={},i=s=>{s.forEach(a=>{n[a]=!0})};return Bs(e)?i(e):i(String(e).split(t)),n},Kb=()=>{},Qb=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Yb(e){return!!(e&&Nt(e.append)&&e[Mg]==="FormData"&&e[el])}const Xb=e=>{const t=new Array(10),n=(i,s)=>{if(Xi(i)){if(t.indexOf(i)>=0)return;if(Yi(i))return i;if(!("toJSON"in i)){t[s]=i;const a=Bs(i)?[]:{};return Ji(i,(c,u)=>{const h=n(c,s+1);!Is(h)&&(a[u]=h)}),t[s]=void 0,a}}return i};return n(e,0)},Jb=sn("AsyncFunction"),ew=e=>e&&(Xi(e)||Nt(e))&&Nt(e.then)&&Nt(e.catch),zg=((e,t)=>e?setImmediate:t?((n,i)=>(Mr.addEventListener("message",({source:s,data:a})=>{s===Mr&&a===n&&i.length&&i.shift()()},!1),s=>{i.push(s),Mr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Nt(Mr.postMessage)),tw=typeof queueMicrotask<"u"?queueMicrotask.bind(Mr):typeof process<"u"&&process.nextTick||zg,nw=e=>e!=null&&Nt(e[el]),B={isArray:Bs,isArrayBuffer:Ig,isBuffer:Yi,isFormData:Sb,isArrayBufferView:yb,isString:_b,isNumber:Rg,isBoolean:bb,isObject:Xi,isPlainObject:to,isEmptyObject:wb,isReadableStream:Pb,isRequest:Tb,isResponse:Mb,isHeaders:Ib,isUndefined:Is,isDate:Lb,isFile:Nb,isBlob:kb,isRegExp:Vb,isFunction:Nt,isStream:Cb,isURLSearchParams:Eb,isTypedArray:Ub,isFileList:jb,forEach:Ji,merge:dd,extend:Db,trim:Rb,stripBOM:Ob,inherits:Ab,toFlatObject:zb,kindOf:tl,kindOfTest:sn,endsWith:Bb,toArray:Fb,forEachEntry:Hb,matchAll:Zb,isHTMLForm:$b,hasOwnProperty:Of,hasOwnProp:Of,reduceDescriptors:Ag,freezeMethods:Gb,toObjectSet:qb,toCamelCase:Wb,noop:Kb,toFiniteNumber:Qb,findKey:Dg,global:Mr,isContextDefined:Og,isSpecCompliantForm:Yb,toJSONObject:Xb,isAsyncFn:Jb,isThenable:ew,setImmediate:zg,asap:tw,isIterable:nw};function xe(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}B.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Bg=xe.prototype,Fg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Fg[e]={value:e}});Object.defineProperties(xe,Fg);Object.defineProperty(Bg,"isAxiosError",{value:!0});xe.from=(e,t,n,i,s,a)=>{const c=Object.create(Bg);B.toFlatObject(e,c,function(m){return m!==Error.prototype},p=>p!=="isAxiosError");const u=e&&e.message?e.message:"Error",h=t==null&&e?e.code:t;return xe.call(c,u,h,n,i,s),e&&c.cause==null&&Object.defineProperty(c,"cause",{value:e,configurable:!0}),c.name=e&&e.name||"Error",a&&Object.assign(c,a),c};const rw=null;function ud(e){return B.isPlainObject(e)||B.isArray(e)}function Ug(e){return B.endsWith(e,"[]")?e.slice(0,-2):e}function Af(e,t,n){return e?e.concat(t).map(function(s,a){return s=Ug(s),!n&&a?"["+s+"]":s}).join(n?".":""):t}function sw(e){return B.isArray(e)&&!e.some(ud)}const iw=B.toFlatObject(B,{},null,function(t){return/^is[A-Z]/.test(t)});function rl(e,t,n){if(!B.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=B.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,C){return!B.isUndefined(C[k])});const i=n.metaTokens,s=n.visitor||m,a=n.dots,c=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(t);if(!B.isFunction(s))throw new TypeError("visitor must be a function");function p(w){if(w===null)return"";if(B.isDate(w))return w.toISOString();if(B.isBoolean(w))return w.toString();if(!h&&B.isBlob(w))throw new xe("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(w)||B.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function m(w,k,C){let _=w;if(w&&!C&&typeof w=="object"){if(B.endsWith(k,"{}"))k=i?k:k.slice(0,-2),w=JSON.stringify(w);else if(B.isArray(w)&&sw(w)||(B.isFileList(w)||B.endsWith(k,"[]"))&&(_=B.toArray(w)))return k=Ug(k),_.forEach(function(N,E){!(B.isUndefined(N)||N===null)&&t.append(c===!0?Af([k],E,a):c===null?k:k+"[]",p(N))}),!1}return ud(w)?!0:(t.append(Af(C,k,a),p(w)),!1)}const g=[],b=Object.assign(iw,{defaultVisitor:m,convertValue:p,isVisitable:ud});function S(w,k){if(!B.isUndefined(w)){if(g.indexOf(w)!==-1)throw Error("Circular reference detected in "+k.join("."));g.push(w),B.forEach(w,function(_,y){(!(B.isUndefined(_)||_===null)&&s.call(t,_,B.isString(y)?y.trim():y,k,b))===!0&&S(_,k?k.concat(y):[y])}),g.pop()}}if(!B.isObject(e))throw new TypeError("data must be an object");return S(e),t}function zf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function pu(e,t){this._pairs=[],e&&rl(e,this,t)}const Hg=pu.prototype;Hg.append=function(t,n){this._pairs.push([t,n])};Hg.toString=function(t){const n=t?function(i){return t.call(this,i,zf)}:zf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function aw(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Zg(e,t,n){if(!t)return e;const i=n&&n.encode||aw;B.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(t,n):a=B.isURLSearchParams(t)?t.toString():new pu(t,n).toString(i),a){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Bf{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){B.forEach(this.handlers,function(i){i!==null&&t(i)})}}const $g={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ow=typeof URLSearchParams<"u"?URLSearchParams:pu,lw=typeof FormData<"u"?FormData:null,cw=typeof Blob<"u"?Blob:null,dw={isBrowser:!0,classes:{URLSearchParams:ow,FormData:lw,Blob:cw},protocols:["http","https","file","blob","url","data"]},mu=typeof window<"u"&&typeof document<"u",hd=typeof navigator=="object"&&navigator||void 0,uw=mu&&(!hd||["ReactNative","NativeScript","NS"].indexOf(hd.product)<0),hw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fw=mu&&window.location.href||"http://localhost",pw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mu,hasStandardBrowserEnv:uw,hasStandardBrowserWebWorkerEnv:hw,navigator:hd,origin:fw},Symbol.toStringTag,{value:"Module"})),dt={...pw,...dw};function mw(e,t){return rl(e,new dt.classes.URLSearchParams,{visitor:function(n,i,s,a){return dt.isNode&&B.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function gw(e){return B.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function xw(e){const t={},n=Object.keys(e);let i;const s=n.length;let a;for(i=0;i<s;i++)a=n[i],t[a]=e[a];return t}function Wg(e){function t(n,i,s,a){let c=n[a++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),h=a>=n.length;return c=!c&&B.isArray(s)?s.length:c,h?(B.hasOwnProp(s,c)?s[c]=[s[c],i]:s[c]=i,!u):((!s[c]||!B.isObject(s[c]))&&(s[c]=[]),t(n,i,s[c],a)&&B.isArray(s[c])&&(s[c]=xw(s[c])),!u)}if(B.isFormData(e)&&B.isFunction(e.entries)){const n={};return B.forEachEntry(e,(i,s)=>{t(gw(i),s,n,0)}),n}return null}function vw(e,t,n){if(B.isString(e))try{return(t||JSON.parse)(e),B.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const ea={transitional:$g,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,a=B.isObject(t);if(a&&B.isHTMLForm(t)&&(t=new FormData(t)),B.isFormData(t))return s?JSON.stringify(Wg(t)):t;if(B.isArrayBuffer(t)||B.isBuffer(t)||B.isStream(t)||B.isFile(t)||B.isBlob(t)||B.isReadableStream(t))return t;if(B.isArrayBufferView(t))return t.buffer;if(B.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return mw(t,this.formSerializer).toString();if((u=B.isFileList(t))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return rl(u?{"files[]":t}:t,h&&new h,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),vw(t)):t}],transformResponse:[function(t){const n=this.transitional||ea.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(B.isResponse(t)||B.isReadableStream(t))return t;if(t&&B.isString(t)&&(i&&!this.responseType||s)){const c=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(u){if(c)throw u.name==="SyntaxError"?xe.from(u,xe.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dt.classes.FormData,Blob:dt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],e=>{ea.headers[e]={}});const yw=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_w=e=>{const t={};let n,i,s;return e&&e.split(`
`).forEach(function(c){s=c.indexOf(":"),n=c.substring(0,s).trim().toLowerCase(),i=c.substring(s+1).trim(),!(!n||t[n]&&yw[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Ff=Symbol("internals");function hi(e){return e&&String(e).trim().toLowerCase()}function no(e){return e===!1||e==null?e:B.isArray(e)?e.map(no):String(e)}function bw(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const ww=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function lc(e,t,n,i,s){if(B.isFunction(i))return i.call(this,t,n);if(s&&(t=n),!!B.isString(t)){if(B.isString(i))return t.indexOf(i)!==-1;if(B.isRegExp(i))return i.test(t)}}function Lw(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function Nw(e,t){const n=B.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(s,a,c){return this[i].call(this,t,s,a,c)},configurable:!0})})}let kt=class{constructor(t){t&&this.set(t)}set(t,n,i){const s=this;function a(u,h,p){const m=hi(h);if(!m)throw new Error("header name must be a non-empty string");const g=B.findKey(s,m);(!g||s[g]===void 0||p===!0||p===void 0&&s[g]!==!1)&&(s[g||h]=no(u))}const c=(u,h)=>B.forEach(u,(p,m)=>a(p,m,h));if(B.isPlainObject(t)||t instanceof this.constructor)c(t,n);else if(B.isString(t)&&(t=t.trim())&&!ww(t))c(_w(t),n);else if(B.isObject(t)&&B.isIterable(t)){let u={},h,p;for(const m of t){if(!B.isArray(m))throw TypeError("Object iterator must return a key-value pair");u[p=m[0]]=(h=u[p])?B.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}c(u,n)}else t!=null&&a(n,t,i);return this}get(t,n){if(t=hi(t),t){const i=B.findKey(this,t);if(i){const s=this[i];if(!n)return s;if(n===!0)return bw(s);if(B.isFunction(n))return n.call(this,s,i);if(B.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=hi(t),t){const i=B.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||lc(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let s=!1;function a(c){if(c=hi(c),c){const u=B.findKey(i,c);u&&(!n||lc(i,i[u],u,n))&&(delete i[u],s=!0)}}return B.isArray(t)?t.forEach(a):a(t),s}clear(t){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const a=n[i];(!t||lc(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const n=this,i={};return B.forEach(this,(s,a)=>{const c=B.findKey(i,a);if(c){n[c]=no(s),delete n[a];return}const u=t?Lw(a):String(a).trim();u!==a&&delete n[a],n[u]=no(s),i[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return B.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=t&&B.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[Ff]=this[Ff]={accessors:{}}).accessors,s=this.prototype;function a(c){const u=hi(c);i[u]||(Nw(s,c),i[u]=!0)}return B.isArray(t)?t.forEach(a):a(t),this}};kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(kt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});B.freezeMethods(kt);function cc(e,t){const n=this||ea,i=t||n,s=kt.from(i.headers);let a=i.data;return B.forEach(e,function(u){a=u.call(n,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function Vg(e){return!!(e&&e.__CANCEL__)}function Fs(e,t,n){xe.call(this,e??"canceled",xe.ERR_CANCELED,t,n),this.name="CanceledError"}B.inherits(Fs,xe,{__CANCEL__:!0});function Gg(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new xe("Request failed with status code "+n.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function kw(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function jw(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s=0,a=0,c;return t=t!==void 0?t:1e3,function(h){const p=Date.now(),m=i[a];c||(c=p),n[s]=h,i[s]=p;let g=a,b=0;for(;g!==s;)b+=n[g++],g=g%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),p-c<t)return;const S=m&&p-m;return S?Math.round(b*1e3/S):void 0}}function Cw(e,t){let n=0,i=1e3/t,s,a;const c=(p,m=Date.now())=>{n=m,s=null,a&&(clearTimeout(a),a=null),e(...p)};return[(...p)=>{const m=Date.now(),g=m-n;g>=i?c(p,m):(s=p,a||(a=setTimeout(()=>{a=null,c(s)},i-g)))},()=>s&&c(s)]}const Io=(e,t,n=3)=>{let i=0;const s=jw(50,250);return Cw(a=>{const c=a.loaded,u=a.lengthComputable?a.total:void 0,h=c-i,p=s(h),m=c<=u;i=c;const g={loaded:c,total:u,progress:u?c/u:void 0,bytes:h,rate:p||void 0,estimated:p&&u&&m?(u-c)/p:void 0,event:a,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(g)},n)},Uf=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},Hf=e=>(...t)=>B.asap(()=>e(...t)),Sw=dt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,dt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(dt.origin),dt.navigator&&/(msie|trident)/i.test(dt.navigator.userAgent)):()=>!0,Ew=dt.hasStandardBrowserEnv?{write(e,t,n,i,s,a,c){if(typeof document>"u")return;const u=[`${e}=${encodeURIComponent(t)}`];B.isNumber(n)&&u.push(`expires=${new Date(n).toUTCString()}`),B.isString(i)&&u.push(`path=${i}`),B.isString(s)&&u.push(`domain=${s}`),a===!0&&u.push("secure"),B.isString(c)&&u.push(`SameSite=${c}`),document.cookie=u.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Pw(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Tw(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function qg(e,t,n){let i=!Pw(t);return e&&(i||n==!1)?Tw(e,t):t}const Zf=e=>e instanceof kt?{...e}:e;function Ur(e,t){t=t||{};const n={};function i(p,m,g,b){return B.isPlainObject(p)&&B.isPlainObject(m)?B.merge.call({caseless:b},p,m):B.isPlainObject(m)?B.merge({},m):B.isArray(m)?m.slice():m}function s(p,m,g,b){if(B.isUndefined(m)){if(!B.isUndefined(p))return i(void 0,p,g,b)}else return i(p,m,g,b)}function a(p,m){if(!B.isUndefined(m))return i(void 0,m)}function c(p,m){if(B.isUndefined(m)){if(!B.isUndefined(p))return i(void 0,p)}else return i(void 0,m)}function u(p,m,g){if(g in t)return i(p,m);if(g in e)return i(void 0,p)}const h={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(p,m,g)=>s(Zf(p),Zf(m),g,!0)};return B.forEach(Object.keys({...e,...t}),function(m){const g=h[m]||s,b=g(e[m],t[m],m);B.isUndefined(b)&&g!==u||(n[m]=b)}),n}const Kg=e=>{const t=Ur({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:c,auth:u}=t;if(t.headers=c=kt.from(c),t.url=Zg(qg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),B.isFormData(n)){if(dt.hasStandardBrowserEnv||dt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(B.isFunction(n.getHeaders)){const h=n.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([m,g])=>{p.includes(m.toLowerCase())&&c.set(m,g)})}}if(dt.hasStandardBrowserEnv&&(i&&B.isFunction(i)&&(i=i(t)),i||i!==!1&&Sw(t.url))){const h=s&&a&&Ew.read(a);h&&c.set(s,h)}return t},Mw=typeof XMLHttpRequest<"u",Iw=Mw&&function(e){return new Promise(function(n,i){const s=Kg(e);let a=s.data;const c=kt.from(s.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:p}=s,m,g,b,S,w;function k(){S&&S(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let C=new XMLHttpRequest;C.open(s.method.toUpperCase(),s.url,!0),C.timeout=s.timeout;function _(){if(!C)return;const N=kt.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),P={data:!u||u==="text"||u==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:N,config:e,request:C};Gg(function(I){n(I),k()},function(I){i(I),k()},P),C=null}"onloadend"in C?C.onloadend=_:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(_)},C.onabort=function(){C&&(i(new xe("Request aborted",xe.ECONNABORTED,e,C)),C=null)},C.onerror=function(E){const P=E&&E.message?E.message:"Network Error",M=new xe(P,xe.ERR_NETWORK,e,C);M.event=E||null,i(M),C=null},C.ontimeout=function(){let E=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const P=s.transitional||$g;s.timeoutErrorMessage&&(E=s.timeoutErrorMessage),i(new xe(E,P.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,e,C)),C=null},a===void 0&&c.setContentType(null),"setRequestHeader"in C&&B.forEach(c.toJSON(),function(E,P){C.setRequestHeader(P,E)}),B.isUndefined(s.withCredentials)||(C.withCredentials=!!s.withCredentials),u&&u!=="json"&&(C.responseType=s.responseType),p&&([b,w]=Io(p,!0),C.addEventListener("progress",b)),h&&C.upload&&([g,S]=Io(h),C.upload.addEventListener("progress",g),C.upload.addEventListener("loadend",S)),(s.cancelToken||s.signal)&&(m=N=>{C&&(i(!N||N.type?new Fs(null,e,C):N),C.abort(),C=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const y=kw(s.url);if(y&&dt.protocols.indexOf(y)===-1){i(new xe("Unsupported protocol "+y+":",xe.ERR_BAD_REQUEST,e));return}C.send(a||null)})},Rw=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,s;const a=function(p){if(!s){s=!0,u();const m=p instanceof Error?p:this.reason;i.abort(m instanceof xe?m:new Fs(m instanceof Error?m.message:m))}};let c=t&&setTimeout(()=>{c=null,a(new xe(`timeout ${t} of ms exceeded`,xe.ETIMEDOUT))},t);const u=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),e=null)};e.forEach(p=>p.addEventListener("abort",a));const{signal:h}=i;return h.unsubscribe=()=>B.asap(u),h}},Dw=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,s;for(;i<n;)s=i+t,yield e.slice(i,s),i=s},Ow=async function*(e,t){for await(const n of Aw(e))yield*Dw(n,t)},Aw=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},$f=(e,t,n,i)=>{const s=Ow(e,t);let a=0,c,u=h=>{c||(c=!0,i&&i(h))};return new ReadableStream({async pull(h){try{const{done:p,value:m}=await s.next();if(p){u(),h.close();return}let g=m.byteLength;if(n){let b=a+=g;n(b)}h.enqueue(new Uint8Array(m))}catch(p){throw u(p),p}},cancel(h){return u(h),s.return()}},{highWaterMark:2})},Wf=64*1024,{isFunction:Fa}=B,zw=(({Request:e,Response:t})=>({Request:e,Response:t}))(B.global),{ReadableStream:Vf,TextEncoder:Gf}=B.global,qf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Bw=e=>{e=B.merge.call({skipUndefined:!0},zw,e);const{fetch:t,Request:n,Response:i}=e,s=t?Fa(t):typeof fetch=="function",a=Fa(n),c=Fa(i);if(!s)return!1;const u=s&&Fa(Vf),h=s&&(typeof Gf=="function"?(w=>k=>w.encode(k))(new Gf):async w=>new Uint8Array(await new n(w).arrayBuffer())),p=a&&u&&qf(()=>{let w=!1;const k=new n(dt.origin,{body:new Vf,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!k}),m=c&&u&&qf(()=>B.isReadableStream(new i("").body)),g={stream:m&&(w=>w.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!g[w]&&(g[w]=(k,C)=>{let _=k&&k[w];if(_)return _.call(k);throw new xe(`Response type '${w}' is not supported`,xe.ERR_NOT_SUPPORT,C)})});const b=async w=>{if(w==null)return 0;if(B.isBlob(w))return w.size;if(B.isSpecCompliantForm(w))return(await new n(dt.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(B.isArrayBufferView(w)||B.isArrayBuffer(w))return w.byteLength;if(B.isURLSearchParams(w)&&(w=w+""),B.isString(w))return(await h(w)).byteLength},S=async(w,k)=>{const C=B.toFiniteNumber(w.getContentLength());return C??b(k)};return async w=>{let{url:k,method:C,data:_,signal:y,cancelToken:N,timeout:E,onDownloadProgress:P,onUploadProgress:M,responseType:I,headers:D,withCredentials:K="same-origin",fetchOptions:F}=Kg(w),Z=t||fetch;I=I?(I+"").toLowerCase():"text";let W=Rw([y,N&&N.toAbortSignal()],E),ae=null;const Y=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let re;try{if(M&&p&&C!=="get"&&C!=="head"&&(re=await S(D,_))!==0){let $=new n(k,{method:"POST",body:_,duplex:"half"}),ne;if(B.isFormData(_)&&(ne=$.headers.get("content-type"))&&D.setContentType(ne),$.body){const[X,se]=Uf(re,Io(Hf(M)));_=$f($.body,Wf,X,se)}}B.isString(K)||(K=K?"include":"omit");const H=a&&"credentials"in n.prototype,Q={...F,signal:W,method:C.toUpperCase(),headers:D.normalize().toJSON(),body:_,duplex:"half",credentials:H?K:void 0};ae=a&&new n(k,Q);let O=await(a?Z(ae,F):Z(k,Q));const G=m&&(I==="stream"||I==="response");if(m&&(P||G&&Y)){const $={};["status","statusText","headers"].forEach(ee=>{$[ee]=O[ee]});const ne=B.toFiniteNumber(O.headers.get("content-length")),[X,se]=P&&Uf(ne,Io(Hf(P),!0))||[];O=new i($f(O.body,Wf,X,()=>{se&&se(),Y&&Y()}),$)}I=I||"text";let U=await g[B.findKey(g,I)||"text"](O,w);return!G&&Y&&Y(),await new Promise(($,ne)=>{Gg($,ne,{data:U,headers:kt.from(O.headers),status:O.status,statusText:O.statusText,config:w,request:ae})})}catch(H){throw Y&&Y(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,w,ae),{cause:H.cause||H}):xe.from(H,H&&H.code,w,ae)}}},Fw=new Map,Qg=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:s}=t,a=[i,s,n];let c=a.length,u=c,h,p,m=Fw;for(;u--;)h=a[u],p=m.get(h),p===void 0&&m.set(h,p=u?new Map:Bw(t)),m=p;return p};Qg();const gu={http:rw,xhr:Iw,fetch:{get:Qg}};B.forEach(gu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Kf=e=>`- ${e}`,Uw=e=>B.isFunction(e)||e===null||e===!1;function Hw(e,t){e=B.isArray(e)?e:[e];const{length:n}=e;let i,s;const a={};for(let c=0;c<n;c++){i=e[c];let u;if(s=i,!Uw(i)&&(s=gu[(u=String(i)).toLowerCase()],s===void 0))throw new xe(`Unknown adapter '${u}'`);if(s&&(B.isFunction(s)||(s=s.get(t))))break;a[u||"#"+c]=s}if(!s){const c=Object.entries(a).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=n?c.length>1?`since :
`+c.map(Kf).join(`
`):" "+Kf(c[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return s}const Yg={getAdapter:Hw,adapters:gu};function dc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fs(null,e)}function Qf(e){return dc(e),e.headers=kt.from(e.headers),e.data=cc.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Yg.getAdapter(e.adapter||ea.adapter,e)(e).then(function(i){return dc(e),i.data=cc.call(e,e.transformResponse,i),i.headers=kt.from(i.headers),i},function(i){return Vg(i)||(dc(e),i&&i.response&&(i.response.data=cc.call(e,e.transformResponse,i.response),i.response.headers=kt.from(i.response.headers))),Promise.reject(i)})}const Xg="1.13.2",sl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{sl[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Yf={};sl.transitional=function(t,n,i){function s(a,c){return"[Axios v"+Xg+"] Transitional option '"+a+"'"+c+(i?". "+i:"")}return(a,c,u)=>{if(t===!1)throw new xe(s(c," has been removed"+(n?" in "+n:"")),xe.ERR_DEPRECATED);return n&&!Yf[c]&&(Yf[c]=!0,console.warn(s(c," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,c,u):!0}};sl.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function Zw(e,t,n){if(typeof e!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const a=i[s],c=t[a];if(c){const u=e[a],h=u===void 0||c(u,a,e);if(h!==!0)throw new xe("option "+a+" must be "+h,xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xe("Unknown option "+a,xe.ERR_BAD_OPTION)}}const ro={assertOptions:Zw,validators:sl},un=ro.validators;let Dr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Bf,response:new Bf}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ur(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:a}=n;i!==void 0&&ro.assertOptions(i,{silentJSONParsing:un.transitional(un.boolean),forcedJSONParsing:un.transitional(un.boolean),clarifyTimeoutError:un.transitional(un.boolean)},!1),s!=null&&(B.isFunction(s)?n.paramsSerializer={serialize:s}:ro.assertOptions(s,{encode:un.function,serialize:un.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ro.assertOptions(n,{baseUrl:un.spelling("baseURL"),withXsrfToken:un.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=a&&B.merge(a.common,a[n.method]);a&&B.forEach(["delete","get","head","post","put","patch","common"],w=>{delete a[w]}),n.headers=kt.concat(c,a);const u=[];let h=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(n)===!1||(h=h&&k.synchronous,u.unshift(k.fulfilled,k.rejected))});const p=[];this.interceptors.response.forEach(function(k){p.push(k.fulfilled,k.rejected)});let m,g=0,b;if(!h){const w=[Qf.bind(this),void 0];for(w.unshift(...u),w.push(...p),b=w.length,m=Promise.resolve(n);g<b;)m=m.then(w[g++],w[g++]);return m}b=u.length;let S=n;for(;g<b;){const w=u[g++],k=u[g++];try{S=w(S)}catch(C){k.call(this,C);break}}try{m=Qf.call(this,S)}catch(w){return Promise.reject(w)}for(g=0,b=p.length;g<b;)m=m.then(p[g++],p[g++]);return m}getUri(t){t=Ur(this.defaults,t);const n=qg(t.baseURL,t.url,t.allowAbsoluteUrls);return Zg(n,t.params,t.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(t){Dr.prototype[t]=function(n,i){return this.request(Ur(i||{},{method:t,url:n,data:(i||{}).data}))}});B.forEach(["post","put","patch"],function(t){function n(i){return function(a,c,u){return this.request(Ur(u||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}Dr.prototype[t]=n(),Dr.prototype[t+"Form"]=n(!0)});let $w=class Jg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const c=new Promise(u=>{i.subscribe(u),a=u}).then(s);return c.cancel=function(){i.unsubscribe(a)},c},t(function(a,c,u){i.reason||(i.reason=new Fs(a,c,u),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Jg(function(s){t=s}),cancel:t}}};function Ww(e){return function(n){return e.apply(null,n)}}function Vw(e){return B.isObject(e)&&e.isAxiosError===!0}const fd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(fd).forEach(([e,t])=>{fd[t]=e});function e0(e){const t=new Dr(e),n=Tg(Dr.prototype.request,t);return B.extend(n,Dr.prototype,t,{allOwnKeys:!0}),B.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return e0(Ur(e,s))},n}const Ze=e0(ea);Ze.Axios=Dr;Ze.CanceledError=Fs;Ze.CancelToken=$w;Ze.isCancel=Vg;Ze.VERSION=Xg;Ze.toFormData=rl;Ze.AxiosError=xe;Ze.Cancel=Ze.CanceledError;Ze.all=function(t){return Promise.all(t)};Ze.spread=Ww;Ze.isAxiosError=Vw;Ze.mergeConfig=Ur;Ze.AxiosHeaders=kt;Ze.formToJSON=e=>Wg(B.isHTMLForm(e)?new FormData(e):e);Ze.getAdapter=Yg.getAdapter;Ze.HttpStatusCode=fd;Ze.default=Ze;const{Axios:YL,AxiosError:XL,CanceledError:JL,isCancel:eN,CancelToken:tN,VERSION:nN,all:rN,Cancel:sN,isAxiosError:iN,spread:aN,toFormData:oN,AxiosHeaders:lN,HttpStatusCode:cN,formToJSON:dN,getAdapter:uN,mergeConfig:hN}=Ze,Gw={apiBaseUrl:"http://localhost:3000"},J=Ze.create({baseURL:Gw.apiBaseUrl});J.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token"),n=localStorage.getItem("auth_token_expires_at");if(n&&Number(n)<=Date.now()){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token_expires_at");try{window.location.href="/login"}catch{}throw new Ze.Cancel("Token expired")}return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));J.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&console.warn("Sesin expirada o invlida"),Promise.reject(e)});class qw{async login(t,n){const i=await J.post("/login",{userName:t,password:n}),{token:s,user:a}=i.data,c=typeof s=="string"?s:s.accessToken,u=typeof s=="string"?void 0:s.expiresIn;if(c&&localStorage.setItem("auth_token",c),localStorage.setItem("auth_user",JSON.stringify(a)),u){const h=Date.now()+u*1e3;localStorage.setItem("auth_token_expires_at",String(h))}return{user:a}}async logout(){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token_expires_at")}async getMe(){const t=localStorage.getItem("auth_user");if(!t)throw new Error("No hay sesin activa");return JSON.parse(t)}}class Kw{constructor(){Pn(this,"basePath","/users")}async getAll(){return(await J.get(this.basePath)).data}async getById(t){return(await J.get(`${this.basePath}/${t}`)).data}async create(t){return(await J.post(this.basePath,t)).data}async update(t,n){return(await J.patch(`${this.basePath}/${t}`,n)).data}async updateState(t,n,i){await J.patch(`${this.basePath}/${t}/state`,{state:n,user_id:i})}async resetPassword(t){await J.post(`${this.basePath}/${t}/reset-password`)}async updatePassword(t,n){await J.patch(`${this.basePath}/${t}/password`,{password:n})}async changeFirstLoginPassword(t,n){return(await J.post(`${this.basePath}/change-first-login-password`,{currentPassword:t,newPassword:n})).data}}class Qw{async getAll(){return(await J.get("/categories")).data}async getById(t){return(await J.get(`/categories/${t}`)).data}async create(t){return(await J.post("/categories",t)).data}async update(t,n){return(await J.patch(`/categories/${t}`,n)).data}async updateState(t,n){await J.patch(`/categories/${t}/state`,{user_id:n})}async delete(t){await J.delete(`/categories/${t}`)}}class Yw{async getAll(t){const n=new URLSearchParams;t!=null&&t.categoryId&&n.append("categoryId",String(t.categoryId)),t!=null&&t.brandId&&n.append("brandId",String(t.brandId)),(t==null?void 0:t.state)!==void 0&&n.append("state",String(t.state)),t!=null&&t.search&&n.append("search",t.search),t!=null&&t.page&&n.append("page",String(t.page)),t!=null&&t.limit&&n.append("limit",String(t.limit));const i=n.toString(),s=i?`/products?${i}`:"/products";return(await J.get(s)).data}async getById(t){return(await J.get(`/products/${t}`)).data}async create(t){if(t.imageFile){const i=Xf(t);return(await J.post("/products",i,{headers:{"Content-Type":"multipart/form-data"}})).data}return(await J.post("/products",t)).data}async update(t,n){if(n.imageFile){const s=Xf(n);return(await J.patch(`/products/${t}`,s,{headers:{"Content-Type":"multipart/form-data"}})).data}return(await J.patch(`/products/${t}`,n)).data}async updateState(t,n){await J.patch(`/products/${t}/state`,{user_id:n})}async delete(t){await J.delete(`/products/${t}`)}}function Xf(e){const t=new FormData;return e.name&&t.append("name",e.name),e.categoryId!==void 0&&t.append("categoryId",String(e.categoryId)),e.brandId!==void 0&&t.append("brandId",String(e.brandId)),e.userId!==void 0&&t.append("userId",String(e.userId)),e.barcode!==void 0&&t.append("barcode",e.barcode===null?"":e.barcode),e.internalCode!==void 0&&t.append("internalCode",e.internalCode===null?"":e.internalCode),e.presentationId!==void 0&&t.append("presentationId",e.presentationId===null?"":String(e.presentationId)),e.colorId!==void 0&&t.append("colorId",e.colorId===null?"":String(e.colorId)),e.prices&&t.append("prices",JSON.stringify(e.prices)),e.imageFile&&t.append("image",e.imageFile),t}class Xw{async getAll(){return(await J.get("/suppliers")).data}async getById(t){return(await J.get(`/suppliers/${t}`)).data}async create(t){return(await J.post("/suppliers",{...t,user_id:t.userId})).data.supplier}async update(t,n){const i=await J.patch(`/suppliers/${t}`,{...n,user_id:n.userId});return i.data.supplier||i.data}async updateState(t,n,i){await J.patch(`/suppliers/${t}/state`,{state:n,user_id:i})}async delete(t,n){await J.patch(`/suppliers/${t}/state`,{state:!1,user_id:n})}}class Jw{async getAll(){return(await J.get("/product-suppliers")).data}async getById(t){return(await J.get(`/product-suppliers/${t}`)).data}async create(t){return(await J.post("/product-suppliers",t)).data.productSupplier}async update(t,n){return(await J.put(`/product-suppliers/${t}`,n)).data.productSupplier}async delete(t){await J.delete(`/product-suppliers/${t}`)}}class e1{constructor(){Pn(this,"basePath","/branches")}async getAll(){return(await J.get(this.basePath)).data}async getById(t){return(await J.get(`${this.basePath}/${t}`)).data}async create(t){return(await J.post(this.basePath,t)).data}async update(t,n){return(await J.put(`${this.basePath}/${t}`,n)).data}async updateState(t,n){return await J.patch(`${this.basePath}/${t}/state`,{state:n}),this.getById(t)}}class t1{async getAll(){return(await J.get("/countries")).data}}class n1{async getAll(){return(await J.get("/brands")).data}async getById(t){return(await J.get(`/brands/${t}`)).data}async create(t){return(await J.post("/brands",t)).data}async update(t,n){return(await J.patch(`/brands/${t}`,n)).data}async updateState(t,n){await J.patch(`/brands/${t}/state`,{user_id:n})}}class r1{async getByBranch(t){return(await J.get(`/branches/${t}/products?limit=100`)).data.data.map(i=>({productId:i.id,branchId:i.branch.branchId,hasStock:i.branch.hasStock,stockQty:i.branch.stockQty,productName:i.name,productBarcode:i.barcode,productPrices:i.prices}))}async getByBranchPaginated(t,n){const i=new URLSearchParams;n!=null&&n.search&&i.append("search",n.search),n!=null&&n.page&&i.append("page",String(n.page)),n!=null&&n.limit&&i.append("limit",String(n.limit)),(n==null?void 0:n.onlyAvailable)!==void 0&&i.append("onlyAvailable",String(n.onlyAvailable)),n!=null&&n.categoryId&&i.append("categoryId",String(n.categoryId)),n!=null&&n.brandId&&i.append("brandId",String(n.brandId));const s=i.toString(),a=s?`/branches/${t}/products?${s}`:`/branches/${t}/products`;return(await J.get(a)).data}async setStock(t,n,i){return(await J.put(`/products/${t}/branches/${n}/stock`,{has_stock:i.hasStock,stock_qty:i.stockQty})).data}}class s1{async getAll(){return(await J.get("/presentations")).data}async getById(t){return(await J.get(`/presentations/${t}`)).data}async create(t){return(await J.post("/presentations",t)).data}async update(t,n){return(await J.patch(`/presentations/${t}`,n)).data}async updateState(t,n){await J.patch(`/presentations/${t}/state`,{user_id:n})}async delete(t){await J.delete(`/presentations/${t}`)}}class i1{async getAll(){return(await J.get("/colors")).data}async getById(t){return(await J.get(`/colors/${t}`)).data}async create(t){return(await J.post("/colors",t)).data}async update(t,n){return(await J.patch(`/colors/${t}`,n)).data}async updateState(t,n){await J.patch(`/colors/${t}/state`,{user_id:n})}async delete(t){await J.delete(`/colors/${t}`)}}class a1{constructor(){Pn(this,"mapClientResponse",t=>{if(!t)throw new Error("Invalid client response");return{id:t.id,name:t.name,lastName:t.lastName,secondLastName:t.secondLastName,phone:t.phone,ci:t.ci||null,ciExt:t.ciExt??t.ci_ext??null,clientTypeId:t.clientTypeId}})}async getAll(){const n=(await J.get("/clients")).data;return Array.isArray(n)?n.map(this.mapClientResponse):[]}async getById(t){const n=await J.get(`/clients/${t}`);return this.mapClientResponse(n.data)}async create(t){const n=this.createPayload(t),i=await J.post("/clients",n);return this.mapClientResponse(i.data)}async update(t,n){const i=this.createPayload(n),s=await J.patch(`/clients/${t}`,i);return this.mapClientResponse(s.data)}async softDelete(t){await J.delete(`/clients/${t}`)}async search(t){const{search:n="",limit:i=10}=t;try{const s=await J.get("/clients/search",{params:{q:n,limit:i}});return Array.isArray(s.data)?s.data.map(this.mapClientResponse):[]}catch(s){return console.error("Error searching clients:",s),[]}}createPayload(t){const n={};return t.name!==void 0&&(n.name=t.name),t.lastName!==void 0&&(n.last_name=t.lastName),t.secondLastName!==void 0&&(n.second_last_name=t.secondLastName),t.phone!==void 0&&(n.phone=t.phone),t.clientTypeId!==void 0&&(n.client_type_id=t.clientTypeId),t.ci!==void 0&&(n.ci=t.ci),t.ciExt!==void 0&&(n.ci_ext=t.ciExt),n}}class o1{async getAll(t=1,n=10){const i=await J.get("/areas",{params:{page:t,size:n}});return Array.isArray(i.data)?{data:i.data,total:i.data.length,page:1,size:i.data.length}:i.data}async getById(t){return(await J.get(`/areas/${t}`)).data}async create(t,n){return(await J.post("/areas",{name:t,area:n})).data}async update(t,n){return(await J.patch(`/areas/${t}`,n)).data}async delete(t){await J.delete(`/areas/${t}`)}}class l1{constructor(){Pn(this,"basePath","/routes")}async create(t){return(await J.post(this.basePath,t)).data}}class c1{constructor(){Pn(this,"mapBusinessResponse",t=>{if(!t)throw new Error("Invalid business response");return{id:t.id,name:t.name,nit:t.nit||null,position:t.position||null,pathImage:t.pathImage||null,address:t.address||null,businessTypeId:t.businessTypeId,clientId:t.clientId,areaId:t.areaId??null,isActive:t.isActive??!0}})}async getAll(){return((await J.get("/business")).data||[]).map(this.mapBusinessResponse)}async getByClientId(t){return(await this.getAll()).filter(i=>Number(i.clientId)===Number(t))}async create(t,n){if(t.imageFile){const a=this.createFormData(t,n),c=await J.post("/business",a,{headers:{"Content-Type":"multipart/form-data"}});return this.mapBusinessResponse(c.data)}const i=this.createPayload(t,n),s=await J.post("/business",i);return this.mapBusinessResponse(s.data)}async update(t,n,i){if(n.imageFile){const c=this.createFormData(n,i),u=await J.patch(`/business/${t}`,c,{headers:{"Content-Type":"multipart/form-data"}});return this.mapBusinessResponse(u.data)}const s=this.createPayload(n,i),a=await J.patch(`/business/${t}`,s);return this.mapBusinessResponse(a.data)}async softDelete(t,n){return await J.delete(`/business/${t}`,{data:{user_id:n}}),!0}createFormData(t,n){const i=new FormData;t.name!==void 0&&i.append("name",t.name),t.nit!==void 0&&t.nit!==null&&i.append("nit",t.nit),t.address!==void 0&&t.address!==null&&i.append("address",t.address),t.clientId!==void 0&&i.append("client_id",String(t.clientId)),t.client_id!==void 0&&i.append("client_id",String(t.client_id)),t.businessTypeId!==void 0&&i.append("business_type_id",String(t.businessTypeId)),t.business_type_id!==void 0&&i.append("business_type_id",String(t.business_type_id));const s=t.areaId!==void 0?t.areaId:t.area_id;return s!==void 0&&i.append("area_id",s===null?"":String(s)),t.position!==void 0&&t.position!==null&&i.append("position",JSON.stringify(t.position)),t.isActive!==void 0?i.append("is_active",String(t.isActive)):t.is_active!==void 0&&i.append("is_active",String(t.is_active)),n!=null&&i.append("user_id",String(n)),t.imageFile&&i.append("image",t.imageFile),i}createPayload(t,n){const i={};t.name!==void 0&&(i.name=t.name),t.nit!==void 0&&(i.nit=t.nit),t.address!==void 0&&(i.address=t.address),t.clientId!==void 0&&(i.client_id=t.clientId),t.client_id!==void 0&&(i.client_id=t.client_id),t.businessTypeId!==void 0&&(i.business_type_id=t.businessTypeId),t.business_type_id!==void 0&&(i.business_type_id=t.business_type_id);const s=t.areaId!==void 0?t.areaId:t.area_id;return s!==void 0&&(i.area_id=s),t.position!==void 0&&(i.position=t.position),t.isActive!==void 0?i.is_active=t.isActive:t.is_active!==void 0&&(i.is_active=t.is_active),n!=null&&(i.user_id=n),i}}const d1=new qw,Jf=new Kw,u1=new Qw,h1=new Yw,f1=new Xw,p1=new Jw,m1=new e1,g1=new t1,x1=new a1,v1=new o1,y1=new n1,_1=new r1,b1=new s1,w1=new i1,L1=new l1,N1=new c1,ie={auth:new tb(d1),user:new Rf(Jf),users:new Rf(Jf),categories:new nb(u1),products:new rb(h1),suppliers:new sb(f1),productSuppliers:new ib(p1),branches:new ab(m1),countries:new ob(g1),clients:new hb(x1),areas:new mb(v1),brands:new lb(y1),productBranches:new cb(_1),presentations:new db(b1),colors:new ub(w1),businesses:new xb(N1),routes:new gb(L1)},k1=({open:e,submitting:t,error:n,onSubmit:i})=>{const[s,a]=x.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[c,u]=x.useState({}),h=g=>{const{name:b,value:S}=g.target;a(w=>({...w,[b]:S})),c[b]&&u(w=>{const k={...w};return delete k[b],k})},p=()=>{const g={};return s.currentPassword.trim()||(g.currentPassword="La contrasea temporal es obligatoria"),s.newPassword.trim()?s.newPassword.length<6?g.newPassword="La contrasea debe tener al menos 6 caracteres":s.newPassword===s.currentPassword&&(g.newPassword="La nueva contrasea debe ser diferente a la temporal"):g.newPassword="La nueva contrasea es obligatoria",s.confirmPassword.trim()?s.confirmPassword!==s.newPassword&&(g.confirmPassword="Las contraseas no coinciden"):g.confirmPassword="Confirma la nueva contrasea",u(g),Object.keys(g).length===0},m=g=>{g.preventDefault(),p()&&i(s.currentPassword,s.newPassword)};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/80 backdrop-blur-sm",children:o.jsxs("div",{className:"mx-4 w-full max-w-md overflow-hidden rounded-xl bg-white shadow-2xl ring-1 ring-black/5",children:[o.jsx("div",{className:"bg-gradient-to-r from-brand-600 to-brand-700 px-6 py-5",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"rounded-full bg-white/20 p-2",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-white",children:"Cambiar contrasea"}),o.jsx("p",{className:"text-sm text-brand-100",children:"Es tu primer inicio de sesin"})]})]})}),o.jsxs("form",{onSubmit:m,className:"space-y-5 px-6 py-6",children:[o.jsx("div",{className:"rounded-lg bg-amber-50 border border-amber-200 p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-amber-500 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),o.jsxs("div",{className:"text-sm text-amber-800",children:[o.jsx("p",{className:"font-medium",children:"Contrasea temporal detectada"}),o.jsx("p",{className:"mt-1 text-amber-700",children:"Por seguridad, debes cambiar tu contrasea temporal antes de continuar."})]})]})}),n&&o.jsx("div",{className:"rounded-lg bg-red-50 border border-red-200 p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),o.jsx("p",{className:"text-sm text-red-700",children:n})]})}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-lead-700",children:"Contrasea temporal *"}),o.jsx("input",{id:"currentPassword",name:"currentPassword",type:"password",value:s.currentPassword,onChange:h,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${c.currentPassword?"border-red-500":"border-lead-300"}`,placeholder:"Ingresa tu contrasea temporal",disabled:t,autoFocus:!0}),c.currentPassword&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.currentPassword})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-lead-700",children:"Nueva contrasea *"}),o.jsx("input",{id:"newPassword",name:"newPassword",type:"password",value:s.newPassword,onChange:h,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${c.newPassword?"border-red-500":"border-lead-300"}`,placeholder:"Ingresa tu nueva contrasea",disabled:t}),c.newPassword&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.newPassword}),o.jsx("p",{className:"mt-1 text-xs text-lead-500",children:"Mnimo 6 caracteres"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-lead-700",children:"Confirmar nueva contrasea *"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:h,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${c.confirmPassword?"border-red-500":"border-lead-300"}`,placeholder:"Confirma tu nueva contrasea",disabled:t}),c.confirmPassword&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.confirmPassword})]}),o.jsx("div",{className:"pt-4",children:o.jsx("button",{type:"submit",className:"w-full rounded-lg bg-brand-600 px-4 py-3 text-sm font-medium text-white shadow-md hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 disabled:opacity-60 transition-all flex items-center justify-center gap-2",disabled:t,children:t?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{children:"Actualizando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),o.jsx("span",{children:"Cambiar contrasea"})]})})})]})]})}):null},t0=x.createContext(void 0),j1=({children:e})=>{const[t,n]=x.useState(null),[i,s]=x.useState(null),[a,c]=x.useState(!0),[u,h]=x.useState(!1),[p,m]=x.useState(!1),[g,b]=x.useState(null);x.useEffect(()=>{(async()=>{try{const E=await ie.auth.getCurrentUser();n(E),E&&E.isFirstLogin&&h(!0)}catch{n(null)}finally{c(!1)}})()},[]);const S=x.useCallback(async(N,E)=>{c(!0),s(null);try{const P=await ie.auth.login(N,E);return P.success&&P.user?(n(P.user),P.user.isFirstLogin&&h(!0),!0):(s(P.error||"Error al iniciar sesin"),n(null),!1)}catch(P){return s((P==null?void 0:P.message)||"Error al iniciar sesin"),n(null),!1}finally{c(!1)}},[]),w=x.useCallback(async()=>{await ie.auth.logout(),n(null),s(null),h(!1),b(null)},[]),k=x.useCallback(async()=>{const N=await ie.auth.getCurrentUser();return n(N),N},[]),C=x.useCallback(async(N,E)=>{var P,M;m(!0),b(null);try{await ie.user.changeFirstLoginPassword(N,E),t&&n({...t,isFirstLogin:!1}),h(!1)}catch(I){const D=((M=(P=I==null?void 0:I.response)==null?void 0:P.data)==null?void 0:M.message)||(I==null?void 0:I.message)||"Error al cambiar la contrasea";b(D)}finally{m(!1)}},[t]),_=!!t,y=x.useMemo(()=>({isLoading:a,isAuthenticated:_,user:t,error:i,login:S,logout:w,refreshProfile:k}),[a,_,t,i,S,w,k]);return o.jsxs(t0.Provider,{value:y,children:[e,o.jsx(k1,{open:u&&_,submitting:p,error:g,onSubmit:C})]})},jt=()=>{const e=x.useContext(t0);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},C1=()=>{const{isAuthenticated:e,isLoading:t}=jt();return t?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("svg",{className:"animate-spin h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e?o.jsx(Sg,{}):o.jsx(ad,{to:"/login",replace:!0})},S1=({user:e,onViewProfile:t,onChangePassword:n,onLogout:i})=>{const[s,a]=x.useState(!1),c=x.useRef(null);x.useEffect(()=>{const m=g=>{c.current&&g.target instanceof Node&&(c.current.contains(g.target)||a(!1))};return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[]);const u=()=>{a(!1),t()},h=()=>{a(!1),n()},p=()=>{a(!1),i()};return o.jsxs("div",{ref:c,className:"relative",children:[o.jsx("button",{onClick:()=>a(m=>!m),className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-700 font-bold border border-brand-200 focus:outline-none","aria-haspopup":!0,"aria-expanded":s,children:e!=null&&e.names?e.names.charAt(0):"S"}),s&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-xl bg-white border border-white/10 shadow-lg z-50",children:o.jsxs("div",{className:"py-2",children:[o.jsx("button",{onClick:u,className:"w-full text-left px-4 py-2 text-sm hover:bg-lead-100",children:" Ver mis datos"}),o.jsx("button",{onClick:h,className:"w-full text-left px-4 py-2 text-sm hover:bg-lead-100",children:" Cambiar contrasea"}),o.jsx("div",{className:"border-t border-lead-200 my-1"}),o.jsx("button",{onClick:p,className:"w-full text-left px-4 py-2 text-sm hover:bg-lead-100 text-rose-600",children:" Cerrar Sesin"})]})})]})},E1={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"},P1={success:o.jsx("svg",{className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:o.jsx("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),warning:o.jsx("svg",{className:"h-5 w-5 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),info:o.jsx("svg",{className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})},T1=({toast:e,onDismiss:t})=>{const[n,i]=x.useState(!1);return x.useEffect(()=>{requestAnimationFrame(()=>i(!0));const s=e.duration??4e3,a=setTimeout(()=>{i(!1),setTimeout(()=>t(e.id),300)},s);return()=>clearTimeout(a)},[e,t]),o.jsxs("div",{className:`
        flex items-start gap-3 rounded-lg border px-4 py-3 shadow-lg
        transition-all duration-300 ease-out
        ${E1[e.type]}
        ${n?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
      `,children:[o.jsx("div",{className:"flex-shrink-0",children:P1[e.type]}),o.jsx("p",{className:"flex-1 text-sm font-medium",children:e.message}),o.jsx("button",{onClick:()=>{i(!1),setTimeout(()=>t(e.id),300)},className:"flex-shrink-0 rounded p-1 hover:bg-black/5 transition-colors",children:o.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},$r=({toasts:e,onDismiss:t})=>e.length===0?null:o.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 max-w-sm",children:e.map(n=>o.jsx(T1,{toast:n,onDismiss:t},n.id))});function Zn(){const[e,t]=x.useState([]),n=x.useCallback((h,p,m)=>{const g=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;t(b=>[...b,{id:g,type:h,message:p,duration:m}])},[]),i=x.useCallback(h=>{t(p=>p.filter(m=>m.id!==h))},[]),s=x.useCallback((h,p)=>n("success",h,p),[n]),a=x.useCallback((h,p)=>n("error",h,p),[n]),c=x.useCallback((h,p)=>n("warning",h,p),[n]),u=x.useCallback((h,p)=>n("info",h,p),[n]);return x.useMemo(()=>({toasts:e,dismissToast:i,success:s,error:a,warning:c,info:u}),[e,i,s,a,c,u])}const M1=({userId:e,onClose:t})=>{const[n,i]=x.useState(""),[s,a]=x.useState(""),[c,u]=x.useState(!1),h=Zn(),p=async m=>{if(m.preventDefault(),!n||n!==s)return h.error("Las contraseas no coinciden");u(!0);try{await ie.users.updatePassword(e,n),h.success("Contrasea actualizada"),t()}catch(g){h.error((g==null?void 0:g.message)||"Error actualizando contrasea")}finally{u(!1)}};return o.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nueva contrasea"}),o.jsx("input",{value:n,onChange:m=>i(m.target.value),type:"password",className:"mt-1 block w-full rounded-lg border px-3 py-2"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Confirmar contrasea"}),o.jsx("input",{value:s,onChange:m=>a(m.target.value),type:"password",className:"mt-1 block w-full rounded-lg border px-3 py-2"})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded border",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 rounded bg-accent-500 text-white",children:c?"Guardando...":"Guardar"})]})]})},I1=({children:e})=>{var g,b;const{user:t,logout:n}=jt(),i=gr(),s=Xo(),[a,c]=x.useState(!1),[u,h]=x.useState(!1);Zn();const p=[{label:"Clientes",to:"/clients",icon:""},{label:"reas",to:"/areas",icon:""},{label:"Rutas",to:"/routes",icon:""},{label:"Productos",to:"/products",icon:""},{label:"Inventario",to:"/inventory",icon:""},{label:"Proveedores",to:"/suppliers",icon:""},{label:"Usuarios",to:"/users",icon:""}],m=async()=>{await n(),s("/login")};return o.jsxs("div",{className:"flex min-h-screen bg-lead-200 text-lead-800 font-sans",children:[o.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 flex flex-col bg-gradient-to-b from-brand-900 via-brand-800 to-brand-900 text-white shadow-2xl transition-all duration-300 ease-in-out ${a?"w-64":"w-20"}`,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[o.jsxs("div",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:`cursor-pointer flex items-center gap-3 border-b border-white/10 px-4 py-8 transition-all duration-300 ${a?"justify-start":"justify-center"}`,children:[o.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-accent-500 to-accent-600 text-xl font-bold text-white shadow-lg shadow-accent-500/20 ring-1 ring-white/10",children:t!=null&&t.names?t.names.charAt(0):"A"}),o.jsxs("div",{className:`leading-tight overflow-hidden transition-all duration-300 ${a?"opacity-100 w-auto":"opacity-0 w-0"}`,children:[o.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.2em] text-brand-200 font-bold whitespace-nowrap",children:"Administrador"}),o.jsx("p",{className:"text-base font-bold text-white truncate max-w-[140px]",children:t?`${((g=t.names)==null?void 0:g.split(" ")[0])||t.names} ${t.lastName||""}`.trim():"Usuario"})]})]}),o.jsx("nav",{className:"flex-1 space-y-2 px-3 py-8 text-sm font-medium overflow-y-auto overflow-x-hidden",children:p.map(S=>o.jsx("div",{children:S.subItems?o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:`flex items-center rounded-xl px-3 py-3.5 text-xs font-bold uppercase tracking-wider text-lead-200 transition-all duration-200 ${a?"justify-start":"justify-center"}`,children:[!a&&o.jsx("span",{className:"text-lg",title:S.label,children:S.icon}),o.jsx("span",{className:`transition-all duration-300 ${a?"opacity-100":"opacity-0 hidden"}`,children:S.label})]}),S.subItems.map(w=>o.jsxs(Mf,{to:w.to,className:({isActive:k})=>`flex items-center rounded-xl px-3 py-3 text-xs font-bold uppercase tracking-wider transition-all duration-200 ${k||i.pathname.startsWith(w.to)?"bg-accent-500 text-white shadow-lg shadow-accent-500/25 translate-x-1":"text-lead-200 hover:bg-white/10 hover:text-white hover:translate-x-1"} ${a?"pl-8":"justify-center"}`,children:[o.jsx("span",{className:`truncate ${a?"opacity-100":"opacity-0 w-0 hidden"}`,children:w.label}),!a&&o.jsx("span",{className:"text-xs",title:w.label,children:""})]},w.to))]}):S.disabled?o.jsxs("div",{className:`flex items-center gap-3 rounded-xl px-3 py-3.5 text-xs font-bold uppercase tracking-wider text-white/30 cursor-not-allowed ${a?"justify-start":"justify-center"}`,children:[!a&&o.jsx("span",{className:"text-lg",title:S.label,children:""}),o.jsx("span",{className:`truncate ${a?"opacity-100":"opacity-0 w-0 hidden"}`,children:S.label})]}):o.jsxs(Mf,{to:S.to,className:({isActive:w})=>`flex items-center gap-3 rounded-xl px-3 py-3.5 text-xs font-bold uppercase tracking-wider transition-all duration-200 ${w||i.pathname.startsWith(S.to)?"bg-accent-500 text-white shadow-lg shadow-accent-500/25 translate-x-1":"text-lead-200 hover:bg-white/10 hover:text-white hover:translate-x-1"} ${a?"justify-start":"justify-center"}`,children:[o.jsx("span",{className:"text-lg shrink-0",title:S.label,children:S.icon}),o.jsx("span",{className:`truncate ${a?"opacity-100":"opacity-0 w-0 hidden"}`,children:S.label})]})},S.label))}),o.jsx("div",{className:`border-t border-white/10 px-4 py-6 transition-all duration-300 ${a?"opacity-100":"opacity-0"}`,children:o.jsx("p",{className:"text-[0.6rem] uppercase tracking-[0.3em] text-brand-400/60 text-center whitespace-nowrap",children:"SICME ELECTRIK v1.0"})})]}),o.jsxs("div",{className:`flex flex-1 flex-col relative z-10 transition-all duration-300 ${a?"ml-64":"ml-20"}`,children:[o.jsxs("header",{className:"sticky top-0 z-40 flex items-center justify-between bg-lead-100 px-6 py-4 shadow-sm lg:px-10 border-b border-lead-300",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-brand-600 font-bold mb-0.5",children:"Panel General"}),o.jsx("h1",{className:"text-xl font-bold text-lead-900",children:(t==null?void 0:t.role)==="propietario"?"Propietario":"Administracin"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[t?o.jsxs("div",{className:"leading-tight text-right hidden sm:block",children:[o.jsx("p",{className:"text-sm font-bold text-lead-700",children:t.names}),o.jsx("p",{className:"text-[0.65rem] uppercase tracking-wider text-lead-400 font-semibold",children:(b=t.role)==null?void 0:b.replace(/_/g," ")})]}):null,o.jsx("div",{className:"hidden md:block",children:o.jsx(pn.Suspense,{fallback:o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-700 font-bold border border-brand-200",children:t!=null&&t.names?t.names.charAt(0):"S"}),children:o.jsx(S1,{user:t??null,onViewProfile:()=>s("/profile"),onChangePassword:()=>h(!0),onLogout:m})})}),o.jsx("div",{className:"block md:hidden",children:o.jsx("button",{onClick:m,className:"flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-700 font-bold border border-brand-200",children:t!=null&&t.names?t.names.charAt(0):"S"})})]})]}),u&&t&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm",children:o.jsxs("div",{className:"mx-4 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsx("div",{className:"bg-brand-600 px-6 py-4",children:o.jsx("h2",{className:"text-lg font-semibold text-white",children:"Cambiar contrasea"})}),o.jsx("div",{className:"px-6 py-6",children:o.jsx(M1,{userId:t.id,onClose:()=>h(!1)})})]})}),o.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-8 bg-lead-200",children:e})]})]})},R1=()=>{const e=Xo(),t=gr(),{login:n,isAuthenticated:i,isLoading:s,error:a,user:c}=jt(),[u,h]=x.useState(""),[p,m]=x.useState(""),[g,b]=x.useState(!1),[S,w]=x.useState(null);x.useEffect(()=>{var C;if(i&&c){const _=(c.role==="admin","/dashboard"),y=((C=t.state)==null?void 0:C.from)||_;e(y,{replace:!0})}},[i,c,t.state,e]);const k=async C=>{C.preventDefault(),b(!0),w(null);try{await n(u.trim(),p)||w("Credenciales invlidas")}catch(_){const y=_ instanceof Error?_.message:"Credenciales invlidas";w(y)}finally{b(!1)}};return s&&!g&&!i?o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-brand-900",children:o.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-white/20 border-t-accent-400"})}):o.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-gradient-to-br from-brand-600 via-brand-800 to-brand-900 px-6 py-16 text-white sm:px-10",children:[o.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 20% 20%, rgba(255,255,255,0.1), transparent 60%), radial-gradient(circle at 80% 10%, rgba(255,255,255,0.08), transparent 55%)"}}),o.jsx("div",{className:"absolute -bottom-32 -left-32 h-72 w-72 rounded-full bg-accent-500/30 blur-3xl"}),o.jsx("div",{className:"absolute -top-40 -right-28 h-96 w-96 rounded-full bg-brand-400/20 blur-3xl"}),o.jsxs("div",{className:"relative w-full max-w-sm space-y-10",children:[o.jsxs("div",{className:"space-y-2 text-center",children:[o.jsx("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-xl border border-white/20 bg-white/10 backdrop-blur-sm text-white",children:o.jsx("span",{className:"text-xl font-semibold",children:"S"})}),o.jsx("div",{className:"text-lg font-semibold tracking-widest text-brand-100",children:"SICME"}),o.jsx("div",{className:"text-2xl font-bold tracking-[0.3em] text-accent-400",children:"ELECTRIK"})]}),o.jsxs("div",{className:"space-y-6 rounded-[2rem] bg-brand-900/40 px-8 py-10 shadow-2xl border border-white/10 backdrop-blur-xl",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wide text-white",children:"Iniciar sesin"}),o.jsx("p",{className:"text-sm text-brand-100/80 mt-1",children:"Accede con tu usuario y contrasea."})]}),(S||a)&&o.jsx("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm font-medium text-red-200",children:S||a}),o.jsxs("form",{className:"space-y-5",onSubmit:k,children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-brand-200",htmlFor:"username",children:"Usuario"}),o.jsx("input",{id:"username",className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder-white/30 focus:border-accent-400 focus:bg-white/10 focus:outline-none focus:ring-1 focus:ring-accent-400 transition-all",value:u,onChange:C=>h(C.target.value),autoComplete:"username",placeholder:"tu.usuario",required:!0})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-brand-200",htmlFor:"password",children:"Contrasea"}),o.jsx("input",{id:"password",type:"password",className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder-white/30 focus:border-accent-400 focus:bg-white/10 focus:outline-none focus:ring-1 focus:ring-accent-400 transition-all",value:p,onChange:C=>m(C.target.value),autoComplete:"current-password",placeholder:"",required:!0})]}),o.jsx("button",{className:"w-full rounded-xl bg-accent-500 py-3.5 text-sm font-bold uppercase tracking-wide text-white shadow-lg shadow-accent-500/20 hover:bg-accent-400 hover:shadow-accent-500/40 focus:outline-none focus:ring-2 focus:ring-accent-400 focus:ring-offset-2 focus:ring-offset-brand-900 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform active:scale-[0.98]",type:"submit",disabled:g,children:g?"Validando...":"Ingresar"})]})]})]})]})};function ue(e){var t,n,i,s;if(e instanceof Error){const a=e;return(n=(t=a.response)==null?void 0:t.data)!=null&&n.message?a.response.data.message:(s=(i=a.response)==null?void 0:i.data)!=null&&s.error?a.response.data.error:e.message}return typeof e=="string"?e:"Error desconocido"}function D1(e){const{fetchFn:t,limit:n=10,initialFilters:i={}}=e,[s,a]=x.useState([]),[c,u]=x.useState({page:1,limit:n,total:0,totalPages:0}),[h,p]=x.useState(!1),[m,g]=x.useState(null),b=x.useRef(new Map),S=x.useRef(i),w=x.useCallback((M,I)=>JSON.stringify({...M,page:I,limit:n}),[n]),k=x.useCallback(async(M,I,D=!1)=>{const K=w(I,M);if(!D&&b.current.has(K)){const F=b.current.get(K);a(F.data),u(Z=>({...Z,page:M,total:F.total,totalPages:F.totalPages}));return}p(!0),g(null);try{const F=await t(I,M,n),Z=(F==null?void 0:F.data)||[],W=(F==null?void 0:F.total)||0,ae=(F==null?void 0:F.totalPages)||0;b.current.set(K,{data:Z,total:W,totalPages:ae}),a(Z),u(Y=>({...Y,page:M,total:W,totalPages:ae}))}catch(F){const Z=F instanceof Error?F.message:"Error desconocido";g(Z)}finally{p(!1)}},[t,w,n]),C=x.useCallback(async M=>{b.current.clear(),S.current=M||{},await k(1,S.current)},[k]),_=x.useCallback(async M=>{M<1||c.totalPages>0&&M>c.totalPages||await k(M,S.current)},[k,c.totalPages]),y=x.useCallback(async()=>{await k(c.page,S.current,!0)},[k,c.page]),N=x.useCallback(()=>{b.current.clear()},[]),E=x.useCallback(()=>{g(null)},[]),P=x.useCallback(()=>S.current,[]);return{items:s,pagination:c,isLoading:h,error:m,goToPage:_,applyFilters:C,refreshCurrentPage:y,clearError:E,clearCache:N,getCurrentFilters:P}}function ta(){const[e,t]=x.useState({isOpen:!1,mode:"create",entity:null,isSubmitting:!1}),n=x.useCallback(()=>{t({isOpen:!0,mode:"create",entity:null,isSubmitting:!1})},[]),i=x.useCallback(c=>{t({isOpen:!0,mode:"edit",entity:c,isSubmitting:!1})},[]),s=x.useCallback(()=>{t(c=>c.isSubmitting?c:{isOpen:!1,mode:"create",entity:null,isSubmitting:!1})},[]),a=x.useCallback(c=>{t(u=>({...u,isSubmitting:c}))},[]);return{modalState:e,openCreate:n,openEdit:i,close:s,setSubmitting:a}}function na(){const[e,t]=x.useState({isOpen:!1,entity:null,isLoading:!1}),[n,i]=x.useState(null),s=x.useCallback(u=>{t({isOpen:!0,entity:u,isLoading:!1})},[]),a=x.useCallback(()=>{t(u=>u.isLoading?u:{isOpen:!1,entity:null,isLoading:!1})},[]),c=x.useCallback(async(u,h)=>{t(p=>({...p,isLoading:!0})),i(h);try{await u(),t({isOpen:!1,entity:null,isLoading:!1})}finally{t(p=>({...p,isLoading:!1})),i(null)}},[]);return{dialogState:e,busyId:n,openConfirm:s,closeConfirm:a,executeWithLoading:c}}function il(e,t={}){const{pageSize:n=10,initialPage:i=1}=t,[s,a]=x.useState(i),c=e.length,u=Math.max(1,Math.ceil(c/n)),h=x.useMemo(()=>{const m=(s-1)*n;return e.slice(m,m+n)},[e,s,n]);return x.useEffect(()=>{s>u&&u>0&&a(u)},[s,u]),{page:s,setPage:a,totalPages:u,paginatedItems:h,totalItems:c,resetToFirstPage:()=>a(1)}}const O1=10,n0=()=>{const[e,t]=x.useState(!1),[n,i]=x.useState(null),s=x.useCallback(async(E,P,M)=>{const I=await ie.products.getAll({...E,page:P,limit:M});return{data:I.data,total:I.total,totalPages:I.totalPages}},[]),{items:a,pagination:c,isLoading:u,error:h,goToPage:p,applyFilters:m,refreshCurrentPage:g,clearError:b,clearCache:S}=D1({fetchFn:s,limit:O1}),w=x.useCallback(async E=>{i(null);try{return await ie.products.getById(E)}catch(P){return i(ue(P)),null}},[]),k=x.useCallback(async E=>{t(!0),i(null);try{const P=await ie.products.create(E);return S(),await m(),P}catch(P){return i(ue(P)),null}finally{t(!1)}},[S,m]),C=x.useCallback(async(E,P)=>{t(!0),i(null);try{const M=await ie.products.update(E,P);return S(),await g(),M}catch(M){return i(ue(M)),null}finally{t(!1)}},[S,g]),_=x.useCallback(async(E,P)=>{t(!0),i(null);try{return await ie.products.updateState(E,P),S(),await g(),!0}catch(M){return i(ue(M)),!1}finally{t(!1)}},[S,g]),y=x.useCallback(async E=>{t(!0),i(null);try{return await ie.products.delete(E),S(),await g(),!0}catch(P){return i(ue(P)),!1}finally{t(!1)}},[S,g]),N=x.useCallback(()=>{b(),i(null)},[b]);return{products:a,page:c.page,total:c.total,totalPages:c.totalPages,goToPage:p,applyFilters:m,refreshCurrentPage:g,isLoading:u||e,error:h||n,clearError:N,clearCache:S,fetchProductById:w,createProduct:k,updateProduct:C,updateProductState:_,deleteProduct:y}},al=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>new Map(e.map(k=>[k.id,k.name])),[e]),u=x.useCallback(k=>k==null?"Sin categora":c.get(k)??"Desconocida",[c]),h=x.useCallback(()=>a(null),[]),p=x.useCallback(async()=>{i(!0),a(null);try{const k=await ie.categories.getAll();t(k)}catch(k){a(ue(k))}finally{i(!1)}},[]),m=x.useCallback(async k=>{a(null);try{return await ie.categories.getById(k)}catch(C){return a(ue(C)),null}},[]),g=x.useCallback(async k=>{i(!0),a(null);try{const C=await ie.categories.create(k);return t(_=>[..._,C]),C}catch(C){return a(ue(C)),null}finally{i(!1)}},[]),b=x.useCallback(async(k,C)=>{i(!0),a(null);try{const _=await ie.categories.update(k,C);return t(y=>y.map(N=>N.id===k?_:N)),_}catch(_){return a(ue(_)),null}finally{i(!1)}},[]),S=x.useCallback(async(k,C)=>{i(!0),a(null);try{return await ie.categories.updateState(k,C),t(_=>{const y=_.find(N=>N.id===k);return y?y.state?_.filter(N=>N.id!==k):_.map(N=>N.id===k?{...N,state:!0}:N):_}),!0}catch(_){return a(ue(_)),!1}finally{i(!1)}},[]),w=x.useCallback(async k=>{i(!0),a(null);try{return await ie.categories.delete(k),t(C=>C.filter(_=>_.id!==k)),!0}catch(C){return a(ue(C)),!1}finally{i(!1)}},[]);return{categories:e,categoryMap:c,isLoading:n,error:s,fetchCategories:p,fetchCategoryById:m,createCategory:g,updateCategory:b,updateCategoryState:S,deleteCategory:w,getCategoryName:u,clearError:h}},ol=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>new Map(e.map(w=>[w.id,w.name])),[e]),u=x.useCallback(w=>w==null?"Sin marca":c.get(w)??"Desconocida",[c]),h=x.useCallback(()=>a(null),[]),p=x.useCallback(async()=>{i(!0),a(null);try{const w=await ie.brands.getAll();t(w)}catch(w){a(ue(w))}finally{i(!1)}},[]),m=x.useCallback(async w=>{a(null);try{return await ie.brands.getById(w)}catch(k){return a(ue(k)),null}},[]),g=x.useCallback(async w=>{i(!0),a(null);try{const k=await ie.brands.create(w);return t(C=>[k,...C]),k}catch(k){return a(ue(k)),null}finally{i(!1)}},[]),b=x.useCallback(async(w,k)=>{i(!0),a(null);try{const C=await ie.brands.update(w,k);return t(_=>_.map(y=>y.id===w?C:y)),C}catch(C){return a(ue(C)),null}finally{i(!1)}},[]),S=x.useCallback(async(w,k)=>{i(!0),a(null);try{return await ie.brands.updateState(w,k),t(C=>{const _=C.find(y=>y.id===w);return _?_.state?C.filter(y=>y.id!==w):C.map(y=>y.id===w?{...y,state:!0}:y):C}),!0}catch(C){return a(ue(C)),!1}finally{i(!1)}},[]);return{brands:e,brandMap:c,isLoading:n,error:s,fetchBrands:p,fetchBrandById:m,createBrand:g,updateBrand:b,updateBrandState:S,getBrandName:u,clearError:h}},xu=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>new Map(e.map(k=>[k.id,k.name])),[e]),u=x.useCallback(k=>k==null?"Sin presentacin":c.get(k)??"Desconocida",[c]),h=x.useCallback(()=>a(null),[]),p=x.useCallback(async()=>{i(!0),a(null);try{const k=await ie.presentations.getAll();t(k)}catch(k){a(ue(k))}finally{i(!1)}},[]),m=x.useCallback(async k=>{a(null);try{return await ie.presentations.getById(k)}catch(C){return a(ue(C)),null}},[]),g=x.useCallback(async k=>{i(!0),a(null);try{const C=await ie.presentations.create(k);return t(_=>[..._,C]),C}catch(C){return a(ue(C)),null}finally{i(!1)}},[]),b=x.useCallback(async(k,C)=>{i(!0),a(null);try{const _=await ie.presentations.update(k,C);return t(y=>y.map(N=>N.id===k?_:N)),_}catch(_){return a(ue(_)),null}finally{i(!1)}},[]),S=x.useCallback(async(k,C)=>{i(!0),a(null);try{return await ie.presentations.updateState(k,C),t(_=>{const y=_.find(N=>N.id===k);return y?y.state?_.filter(N=>N.id!==k):_.map(N=>N.id===k?{...N,state:!0}:N):_}),!0}catch(_){return a(ue(_)),!1}finally{i(!1)}},[]),w=x.useCallback(async k=>{i(!0),a(null);try{return await ie.presentations.delete(k),t(C=>C.filter(_=>_.id!==k)),!0}catch(C){return a(ue(C)),!1}finally{i(!1)}},[]);return{presentations:e,presentationMap:c,isLoading:n,error:s,fetchPresentations:p,fetchPresentationById:m,createPresentation:g,updatePresentation:b,updatePresentationState:S,deletePresentation:w,getPresentationName:u,clearError:h}},vu=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>new Map(e.map(k=>[k.id,k.name])),[e]),u=x.useCallback(k=>k==null?"Sin color":c.get(k)??"Desconocido",[c]),h=x.useCallback(()=>a(null),[]),p=x.useCallback(async()=>{i(!0),a(null);try{const k=await ie.colors.getAll();t(k)}catch(k){a(ue(k))}finally{i(!1)}},[]),m=x.useCallback(async k=>{a(null);try{return await ie.colors.getById(k)}catch(C){return a(ue(C)),null}},[]),g=x.useCallback(async k=>{i(!0),a(null);try{const C=await ie.colors.create(k);return t(_=>[..._,C]),C}catch(C){return a(ue(C)),null}finally{i(!1)}},[]),b=x.useCallback(async(k,C)=>{i(!0),a(null);try{const _=await ie.colors.update(k,C);return t(y=>y.map(N=>N.id===k?_:N)),_}catch(_){return a(ue(_)),null}finally{i(!1)}},[]),S=x.useCallback(async(k,C)=>{i(!0),a(null);try{return await ie.colors.updateState(k,C),t(_=>{const y=_.find(N=>N.id===k);return y?y.state?_.filter(N=>N.id!==k):_.map(N=>N.id===k?{...N,state:!0}:N):_}),!0}catch(_){return a(ue(_)),!1}finally{i(!1)}},[]),w=x.useCallback(async k=>{i(!0),a(null);try{return await ie.colors.delete(k),t(C=>C.filter(_=>_.id!==k)),!0}catch(C){return a(ue(C)),!1}finally{i(!1)}},[]);return{colors:e,colorMap:c,isLoading:n,error:s,fetchColors:p,fetchColorById:m,createColor:g,updateColor:b,updateColorState:S,deleteColor:w,getColorName:u,clearError:h}},A1=({brands:e,onEdit:t,onDelete:n,busyBrandId:i=null})=>{const s=e.length===0,a=c=>i!=null&&i===c;return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:s?o.jsx("tr",{children:o.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:2,children:"No hay marcas para mostrar."})}):e.map(c=>o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 text-lead-600",children:c.name}),o.jsx("td",{className:"px-4 py-3 text-center align-middle",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>t(c),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:a(c.id),children:"Editar"}),o.jsx("button",{type:"button",onClick:()=>n(c),className:`rounded px-3 py-1.5 font-medium transition disabled:opacity-50 ${c.state?"bg-accent-100 text-accent-700 hover:bg-accent-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:a(c.id),children:c.state?"Desactivar":"Activar"})]})})]},c.id))})]})})},z1=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,u]=x.useState(""),[h,p]=x.useState("");x.useEffect(()=>{e&&(u(t==="edit"&&n?n.name:""),p(""))},[e,t,n]);const m=g=>{if(g.preventDefault(),!c.trim()){p("El nombre es requerido");return}a({name:c.trim()})};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nueva Marca":"Editar Marca"}),o.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("form",{onSubmit:m,className:"space-y-5 px-6 py-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre de la Marca *"}),o.jsx("input",{type:"text",id:"name",value:c,onChange:g=>{u(g.target.value),h&&p("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${h?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),h&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},Vt=({open:e=!0,title:t,message:n,description:i,confirmLabel:s="Confirmar",cancelLabel:a="Cancelar",onConfirm:c,onCancel:u,disabled:h=!1})=>{if(!e)return null;const p=n||i;return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm",children:o.jsxs("div",{className:"mx-4 w-full max-w-sm overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsx("div",{className:"bg-brand-600 px-6 py-4",children:o.jsx("h2",{className:"text-lg font-semibold text-white",children:t})}),o.jsxs("div",{className:"px-6 py-6",children:[p?o.jsx("p",{className:"text-sm text-lead-600 leading-relaxed",children:p}):null,o.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:u,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors",disabled:h,children:a}),o.jsx("button",{type:"button",onClick:c,className:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-60 transition-all",disabled:h,children:s})]})]})]})})},xn=()=>o.jsx("div",{className:"flex items-center justify-center py-10",children:o.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-t-2 border-brand-600"})}),xr=({currentPage:e,totalPages:t,totalItems:n,itemsPerPage:i,onPageChange:s,isLoading:a=!1,className:c=""})=>{const u=n===0?0:(e-1)*i+1,h=Math.min(e*i,n),p=x.useMemo(()=>{const S=[];if(t<=5)for(let k=1;k<=t;k++)S.push(k);else{let k=Math.max(1,e-Math.floor(2.5));const C=Math.min(t,k+5-1);C-k+1<5&&(k=Math.max(1,C-5+1));for(let _=k;_<=C;_++)S.push(_)}return S},[e,t]);if(n===0)return null;const m="inline-flex items-center justify-center min-w-[40px] h-10 px-3 text-sm font-medium rounded-lg transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed",g="text-lead-600 bg-white border border-lead-200 hover:bg-lead-50 hover:border-lead-300",b="text-white bg-brand-600 border border-brand-600 shadow-md";return o.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-4 ${c}`,children:[o.jsxs("p",{className:"text-sm text-lead-500",children:["Mostrando ",o.jsx("span",{className:"font-semibold text-lead-700",children:u.toLocaleString()})," a"," ",o.jsx("span",{className:"font-semibold text-lead-700",children:h.toLocaleString()})," de"," ",o.jsx("span",{className:"font-semibold text-lead-700",children:n.toLocaleString()})," resultados"]}),o.jsxs("nav",{className:"flex items-center gap-1","aria-label":"Paginacin",children:[o.jsx("button",{type:"button",onClick:()=>s(1),disabled:e===1||a,className:`${m} ${g}`,"aria-label":"Primera pgina",title:"Primera pgina",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),o.jsx("button",{type:"button",onClick:()=>s(e-1),disabled:e===1||a,className:`${m} ${g}`,"aria-label":"Pgina anterior",title:"Pgina anterior",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsxs("div",{className:"hidden sm:flex items-center gap-1",children:[p[0]>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",onClick:()=>s(1),disabled:a,className:`${m} ${g}`,children:"1"}),p[0]>2&&o.jsx("span",{className:"px-2 text-lead-400",children:"..."})]}),p.map(S=>o.jsx("button",{type:"button",onClick:()=>s(S),disabled:a,className:`${m} ${S===e?b:g}`,"aria-current":S===e?"page":void 0,children:S},S)),p[p.length-1]<t&&o.jsxs(o.Fragment,{children:[p[p.length-1]<t-1&&o.jsx("span",{className:"px-2 text-lead-400",children:"..."}),o.jsx("button",{type:"button",onClick:()=>s(t),disabled:a,className:`${m} ${g}`,children:t})]})]}),o.jsxs("span",{className:"sm:hidden px-3 text-sm text-lead-600",children:[e," / ",t]}),o.jsx("button",{type:"button",onClick:()=>s(e+1),disabled:e===t||a,className:`${m} ${g}`,"aria-label":"Pgina siguiente",title:"Pgina siguiente",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),o.jsx("button",{type:"button",onClick:()=>s(t),disabled:e===t||a,className:`${m} ${g}`,"aria-label":"ltima pgina",title:"ltima pgina",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})},B1=({searchTerm:e,onToast:t})=>{const{brands:n,isLoading:i,error:s,fetchBrands:a,createBrand:c,updateBrand:u,updateBrandState:h,clearError:p}=ol(),m=jt(),g=ta(),b=na(),S=x.useMemo(()=>{const _=e.trim().toLowerCase();let y=[...n];return _&&(y=y.filter(N=>(N.name||"").toLowerCase().includes(_))),y.sort((N,E)=>(N.name||"").localeCompare(E.name||""))},[n,e]),w=il(S,{pageSize:10});x.useEffect(()=>{w.resetToFirstPage()},[e]),x.useEffect(()=>{a()},[a]),x.useEffect(()=>{s&&(t("error",`Error cargando marcas: ${s}`),p())},[s,t,p]);const k=async _=>{if(m.user){g.setSubmitting(!0);try{g.modalState.mode==="create"?await c({name:_.name,userId:m.user.id})&&(t("success","Marca creada correctamente"),g.close()):g.modalState.entity&&await u(g.modalState.entity.id,{name:_.name})&&(t("success","Marca actualizada correctamente"),g.close())}catch(y){const N=y instanceof Error?y.message:"No se pudo guardar la marca";t("error",N)}finally{g.setSubmitting(!1)}}},C=async()=>{if(!b.dialogState.entity||!m.user)return;const _=b.dialogState.entity;await b.executeWithLoading(async()=>{await h(_.id,m.user.id)&&t("success",`Marca "${_.name}" eliminada correctamente`)},_.id)};return o.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de marcas"}),o.jsxs("p",{className:"text-sm text-lead-500",children:[S.length," marca(s) encontradas."]})]}),o.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:g.openCreate,children:"Crear marca"})]}),i?o.jsx(xn,{}):o.jsxs(o.Fragment,{children:[o.jsx(A1,{brands:w.paginatedItems,onEdit:g.openEdit,onDelete:b.openConfirm,busyBrandId:b.busyId}),w.totalPages>1&&o.jsx(xr,{currentPage:w.page,totalPages:w.totalPages,totalItems:w.totalItems,itemsPerPage:10,onPageChange:w.setPage,isLoading:i})]}),o.jsx(z1,{open:g.modalState.isOpen,mode:g.modalState.mode,initialData:g.modalState.entity,submitting:g.modalState.isSubmitting,onClose:g.close,onSubmit:k}),o.jsx(Vt,{open:b.dialogState.isOpen,title:"Eliminar marca",confirmLabel:"Eliminar",onConfirm:C,onCancel:b.closeConfirm,disabled:b.dialogState.isLoading})]})},F1=({categories:e,onEdit:t,onDeactivate:n,busyId:i})=>{if(!e.length)return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Descripcin"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-lead-500",children:"No hay categoras registradas."})})})]})});const s=a=>i!=null&&i===a;return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Descripcin"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:e.map(a=>o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 text-lead-600 font-medium text-brand-900",children:a.name}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:a.description??""}),o.jsx("td",{className:"px-4 py-3 text-center align-middle",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>t(a),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:s(a.id),children:"Editar"}),o.jsx("button",{type:"button",onClick:()=>n(a),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:s(a.id)||!a.state,children:"Eliminar"})]})})]},a.id))})]})})},U1=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,u]=x.useState(""),[h,p]=x.useState(""),[m,g]=x.useState("");x.useEffect(()=>{e&&(t==="edit"&&n?(u(n.name??""),p(n.description??"")):(u(""),p("")),g(""))},[e,t,n]);const b=S=>{if(S.preventDefault(),!c.trim()){g("El nombre es requerido");return}a({name:c.trim(),description:h.trim()||void 0})};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nueva Categora":"Editar Categora"}),o.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("form",{onSubmit:b,className:"space-y-5 px-6 py-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre de la Categora *"}),o.jsx("input",{type:"text",id:"name",value:c,onChange:S=>{u(S.target.value),m&&g("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${m?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),m&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:m})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-lead-700",children:"Descripcin"}),o.jsx("textarea",{id:"description",value:h,onChange:S=>p(S.target.value),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 resize-none",rows:3,disabled:i})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},H1=({searchTerm:e,onToast:t})=>{const{categories:n,isLoading:i,error:s,fetchCategories:a,createCategory:c,updateCategory:u,updateCategoryState:h,clearError:p}=al(),m=jt(),g=ta(),b=na(),S=x.useMemo(()=>{const _=e.trim().toLowerCase();let y=[...n];return _&&(y=y.filter(N=>(N.name||"").toLowerCase().includes(_)||(N.description||"").toLowerCase().includes(_))),y.sort((N,E)=>(N.name||"").localeCompare(E.name||""))},[n,e]),w=il(S,{pageSize:10});x.useEffect(()=>{w.resetToFirstPage()},[e]),x.useEffect(()=>{a()},[a]),x.useEffect(()=>{s&&(t("error",`Error cargando categoras: ${s}`),p())},[s,t,p]);const k=async _=>{if(m.user){g.setSubmitting(!0);try{g.modalState.mode==="create"?await c({name:_.name,description:_.description,userId:m.user.id})&&(t("success","Categora creada correctamente"),g.close()):g.modalState.entity&&await u(g.modalState.entity.id,{name:_.name,description:_.description,user_id:m.user.id})&&(t("success","Categora actualizada correctamente"),g.close())}catch(y){const N=y instanceof Error?y.message:"No se pudo guardar la categora";t("error",N)}finally{g.setSubmitting(!1)}}},C=async()=>{if(!b.dialogState.entity||!m.user)return;const _=b.dialogState.entity;await b.executeWithLoading(async()=>{await h(_.id,m.user.id)&&t("success",`Categora "${_.name}" eliminada correctamente`)},_.id)};return o.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de categoras"}),o.jsxs("p",{className:"text-sm text-lead-500",children:[S.length," categora(s) encontradas."]})]}),o.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:g.openCreate,children:"Crear categora"})]}),i?o.jsx(xn,{}):o.jsxs(o.Fragment,{children:[o.jsx(F1,{categories:w.paginatedItems,onEdit:g.openEdit,onDeactivate:b.openConfirm,busyId:b.busyId}),w.totalPages>1&&o.jsx(xr,{currentPage:w.page,totalPages:w.totalPages,totalItems:w.totalItems,itemsPerPage:10,onPageChange:w.setPage,isLoading:i})]}),o.jsx(U1,{open:g.modalState.isOpen,mode:g.modalState.mode,initialData:g.modalState.entity,submitting:g.modalState.isSubmitting,onClose:g.close,onSubmit:k}),o.jsx(Vt,{open:b.dialogState.isOpen,title:"Eliminar categora",confirmLabel:"Eliminar",onConfirm:C,onCancel:b.closeConfirm,disabled:b.dialogState.isLoading})]})},Z1=({presentations:e,onEdit:t,onDeactivate:n,busyId:i})=>{if(!e.length)return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:o.jsx("tr",{children:o.jsx("td",{colSpan:2,className:"px-4 py-8 text-center text-lead-500",children:"No hay presentaciones registradas."})})})]})});const s=a=>i!=null&&i===a;return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:e.map(a=>o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 text-lead-600 font-medium text-brand-900",children:a.name}),o.jsx("td",{className:"px-4 py-3 text-center align-middle",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>t(a),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:s(a.id),children:"Editar"}),o.jsx("button",{type:"button",onClick:()=>n(a),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:s(a.id)||!a.state,children:"Eliminar"})]})})]},a.id))})]})})},$1=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,u]=x.useState(""),[h,p]=x.useState("");x.useEffect(()=>{e&&(u(t==="edit"&&n?n.name??"":""),p(""))},[e,t,n]);const m=g=>{if(g.preventDefault(),!c.trim()){p("El nombre es requerido");return}a({name:c.trim()})};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nueva Presentacin":"Editar Presentacin"}),o.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("form",{onSubmit:m,className:"space-y-5 px-6 py-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre de la Presentacin *"}),o.jsx("input",{type:"text",id:"name",value:c,onChange:g=>{u(g.target.value),h&&p("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${h?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),h&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},W1=({searchTerm:e,onToast:t})=>{const{presentations:n,isLoading:i,error:s,fetchPresentations:a,createPresentation:c,updatePresentation:u,updatePresentationState:h,clearError:p}=xu(),m=jt(),g=ta(),b=na(),S=x.useMemo(()=>{const _=e.trim().toLowerCase();let y=[...n];return _&&(y=y.filter(N=>(N.name||"").toLowerCase().includes(_))),y.sort((N,E)=>(N.name||"").localeCompare(E.name||""))},[n,e]),w=il(S,{pageSize:10});x.useEffect(()=>{w.resetToFirstPage()},[e]),x.useEffect(()=>{a()},[a]),x.useEffect(()=>{s&&(t("error",`Error cargando presentaciones: ${s}`),p())},[s,t,p]);const k=async _=>{if(m.user){g.setSubmitting(!0);try{g.modalState.mode==="create"?await c({name:_.name,userId:m.user.id})&&(t("success","Presentacin creada correctamente"),g.close()):g.modalState.entity&&await u(g.modalState.entity.id,{name:_.name,user_id:m.user.id})&&(t("success","Presentacin actualizada correctamente"),g.close())}catch(y){const N=y instanceof Error?y.message:"No se pudo guardar la presentacin";t("error",N)}finally{g.setSubmitting(!1)}}},C=async()=>{if(!b.dialogState.entity||!m.user)return;const _=b.dialogState.entity;await b.executeWithLoading(async()=>{await h(_.id,m.user.id)&&t("success",`Presentacin "${_.name}" eliminada correctamente`)},_.id)};return o.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de presentaciones"}),o.jsxs("p",{className:"text-sm text-lead-500",children:[S.length," presentacin(es) encontradas."]})]}),o.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:g.openCreate,children:"Crear presentacin"})]}),i?o.jsx(xn,{}):o.jsxs(o.Fragment,{children:[o.jsx(Z1,{presentations:w.paginatedItems,onEdit:g.openEdit,onDeactivate:b.openConfirm,busyId:b.busyId}),w.totalPages>1&&o.jsx(xr,{currentPage:w.page,totalPages:w.totalPages,totalItems:w.totalItems,itemsPerPage:10,onPageChange:w.setPage,isLoading:i})]}),o.jsx($1,{open:g.modalState.isOpen,mode:g.modalState.mode,initialData:g.modalState.entity,submitting:g.modalState.isSubmitting,onClose:g.close,onSubmit:k}),o.jsx(Vt,{open:b.dialogState.isOpen,title:"Eliminar presentacin",confirmLabel:"Eliminar",onConfirm:C,onCancel:b.closeConfirm,disabled:b.dialogState.isLoading})]})},V1=({colors:e,onEdit:t,onDeactivate:n,busyId:i})=>{if(!e.length)return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:o.jsx("tr",{children:o.jsx("td",{colSpan:2,className:"px-4 py-8 text-center text-lead-500",children:"No hay colores registrados."})})})]})});const s=a=>i!=null&&i===a;return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:e.map(a=>o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 text-lead-600",children:a.name}),o.jsx("td",{className:"px-4 py-3 text-center align-middle",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>t(a),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:s(a.id),children:"Editar"}),o.jsx("button",{type:"button",onClick:()=>n(a),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:s(a.id)||!a.state,children:"Eliminar"})]})})]},a.id))})]})})},G1=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,u]=x.useState(""),[h,p]=x.useState("");x.useEffect(()=>{e&&(u(t==="edit"&&n?n.name??"":""),p(""))},[e,t,n]);const m=g=>{if(g.preventDefault(),!c.trim()){p("El nombre es requerido");return}a({name:c.trim()})};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nuevo Color":"Editar Color"}),o.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("form",{onSubmit:m,className:"space-y-5 px-6 py-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre del Color *"}),o.jsx("input",{type:"text",id:"name",value:c,onChange:g=>{u(g.target.value),h&&p("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${h?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),h&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},q1=({searchTerm:e,onToast:t})=>{const{colors:n,isLoading:i,error:s,fetchColors:a,createColor:c,updateColor:u,updateColorState:h,clearError:p}=vu(),m=jt(),g=ta(),b=na(),S=x.useMemo(()=>{const _=e.trim().toLowerCase();let y=[...n];return _&&(y=y.filter(N=>(N.name||"").toLowerCase().includes(_))),y.sort((N,E)=>(N.name||"").localeCompare(E.name||""))},[n,e]),w=il(S,{pageSize:10});x.useEffect(()=>{w.resetToFirstPage()},[e]),x.useEffect(()=>{a()},[a]),x.useEffect(()=>{s&&(t("error",`Error cargando colores: ${s}`),p())},[s,t,p]);const k=async _=>{if(m.user){g.setSubmitting(!0);try{g.modalState.mode==="create"?await c({name:_.name,userId:m.user.id})&&(t("success","Color creado correctamente"),g.close()):g.modalState.entity&&await u(g.modalState.entity.id,{name:_.name,user_id:m.user.id})&&(t("success","Color actualizado correctamente"),g.close())}catch(y){const N=y instanceof Error?y.message:"No se pudo guardar el color";t("error",N)}finally{g.setSubmitting(!1)}}},C=async()=>{if(!b.dialogState.entity||!m.user)return;const _=b.dialogState.entity;await b.executeWithLoading(async()=>{await h(_.id,m.user.id)&&t("success",`Color "${_.name}" eliminado correctamente`)},_.id)};return o.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de colores"}),o.jsxs("p",{className:"text-sm text-lead-500",children:[S.length," color(es) encontrados."]})]}),o.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:g.openCreate,children:"Crear color"})]}),i?o.jsx(xn,{}):o.jsxs(o.Fragment,{children:[o.jsx(V1,{colors:w.paginatedItems,onEdit:g.openEdit,onDeactivate:b.openConfirm,busyId:b.busyId}),w.totalPages>1&&o.jsx(xr,{currentPage:w.page,totalPages:w.totalPages,totalItems:w.totalItems,itemsPerPage:10,onPageChange:w.setPage,isLoading:i})]}),o.jsx(G1,{open:g.modalState.isOpen,mode:g.modalState.mode,initialData:g.modalState.entity,submitting:g.modalState.isSubmitting,onClose:g.close,onSubmit:k}),o.jsx(Vt,{open:b.dialogState.isOpen,title:"Eliminar color",confirmLabel:"Eliminar",onConfirm:C,onCancel:b.closeConfirm,disabled:b.dialogState.isLoading})]})};function r0(e,t=500){const[n,i]=x.useState(e);return x.useEffect(()=>{const s=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(s)}},[e,t]),n}const K1=({products:e,categoryMap:t,brandMap:n,presentationMap:i,colorMap:s,onEdit:a,onDeactivate:c,onView:u,busyId:h})=>{const p=e.length===0,m=g=>h!=null&&h===g;return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Categora"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Marca"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Mayorista"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Minorista"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Regular"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:p?o.jsx("tr",{children:o.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:7,children:"No hay productos para mostrar."})}):e.map(g=>{var b,S,w,k,C,_,y,N,E;return o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-lead-800",children:g.name}),(g.presentationName||g.presentationId&&i.get(g.presentationId))&&o.jsx("p",{className:"text-xs text-lead-500",children:g.presentationName||(g.presentationId?i.get(g.presentationId):"")})]})})}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:g.categoryName||t.get(g.categoryId)||""}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:g.brandName||n.get(g.brandId)||""}),o.jsx("td",{className:"px-4 py-3 text-lead-600 text-xs",children:(S=(b=g.prices)==null?void 0:b.find(P=>P.clientTypeId===3))!=null&&S.price?Number((w=g.prices.find(P=>P.clientTypeId===3))==null?void 0:w.price).toFixed(2):""}),o.jsx("td",{className:"px-4 py-3 text-lead-600 text-xs",children:(C=(k=g.prices)==null?void 0:k.find(P=>P.clientTypeId===2))!=null&&C.price?Number((_=g.prices.find(P=>P.clientTypeId===2))==null?void 0:_.price).toFixed(2):""}),o.jsx("td",{className:"px-4 py-3 text-lead-600 text-xs",children:(N=(y=g.prices)==null?void 0:y.find(P=>P.clientTypeId===1))!=null&&N.price?Number((E=g.prices.find(P=>P.clientTypeId===1))==null?void 0:E.price).toFixed(2):""}),o.jsx("td",{className:"px-4 py-3 text-center align-middle",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>u&&u(g),className:"rounded bg-lead-200 px-3 py-1.5 font-medium text-lead-800 transition hover:bg-lead-300 disabled:opacity-50",children:"Ver"}),o.jsx("button",{type:"button",onClick:()=>a(g),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:m(g.id),children:"Editar"}),o.jsx("button",{type:"button",onClick:()=>c(g),className:"rounded px-3 py-1.5 font-medium transition disabled:opacity-50 bg-accent-100 text-accent-700 hover:bg-accent-200",disabled:m(g.id),children:"Eliminar"})]})})]},g.id)})})]})})},Q1=({open:e,mode:t,initialData:n,categories:i,brands:s,presentations:a,colors:c,submitting:u,onClose:h,onSubmit:p})=>{const[m,g]=x.useState(""),[b,S]=x.useState(""),[w,k]=x.useState(""),[C,_]=x.useState(0),[y,N]=x.useState(0),[E,P]=x.useState(0),[M,I]=x.useState(0),[D,K]=x.useState(""),[F,Z]=x.useState(""),[W,ae]=x.useState(""),[Y,re]=x.useState({}),[H,Q]=x.useState(null),[O,G]=x.useState(null);x.useEffect(()=>{var A,fe,_e;if(e){if(t==="edit"&&n){g(n.name||""),S(n.barcode||""),k(n.internalCode||""),_(n.presentationId||0),N(n.colorId||0),P(n.categoryId||0),I(n.brandId||0);const ve=(A=n.prices)==null?void 0:A.find(Ue=>Ue.clientTypeId===3),Ie=(fe=n.prices)==null?void 0:fe.find(Ue=>Ue.clientTypeId===2),Ve=(_e=n.prices)==null?void 0:_e.find(Ue=>Ue.clientTypeId===1);K(ve?String(ve.price):""),Z(Ie?String(Ie.price):""),ae(Ve?String(Ve.price):""),Q(null),G(null)}else g(""),S(""),k(""),_(0),N(0),P(i.length>0?i[0].id:0),I(s.length>0?s[0].id:0),K(""),Z(""),ae(""),Q(null),G(null);re({})}},[e,t,n,i,s]);const U=()=>{const A={};return m.trim()||(A.name="El nombre es requerido"),E||(A.categoryId="La categora es requerida"),M||(A.brandId="La marca es requerida"),!D&&!F&&!W&&(A.prices="Al menos un precio es requerido"),re(A),Object.keys(A).length===0};function $(A){if(!A)return"";let fe=A.replace(",",".");fe=fe.replace(/[^0-9.]/g,"");const _e=fe.split(".");if(_e.length===1)return _e[0];const ve=_e.shift()||"",Ve=_e.join("").slice(0,2);return ve+"."+Ve}const ne=A=>fe=>{const _e=$(fe.target.value);A(_e)},X=A=>{if(A.preventDefault(),!U())return;const fe=[];D&&fe.push({clientTypeId:3,price:Math.round(parseFloat(D)*100)/100}),F&&fe.push({clientTypeId:2,price:Math.round(parseFloat(F)*100)/100}),W&&fe.push({clientTypeId:1,price:Math.round(parseFloat(W)*100)/100}),p({name:m.trim(),barcode:b.trim()||null,internalCode:w.trim()||null,presentationId:C||null,colorId:y||null,prices:fe,imageFile:H||void 0,categoryId:E,brandId:M})},se=A=>{var _e;const fe=((_e=A.target.files)==null?void 0:_e[0])||null;if(Q(fe),fe){const ve=URL.createObjectURL(fe);G(ve)}else G(null)},ee=a.filter(A=>A.state),le=c.filter(A=>A.state);return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-2xl overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nuevo Producto":"Editar Producto"}),o.jsx("button",{onClick:h,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:u,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("form",{onSubmit:X,className:"space-y-5 px-6 py-6 max-h-[70vh] overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre del Producto *"}),o.jsx("input",{type:"text",id:"name",value:m,onChange:A=>g(A.target.value),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${Y.name?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"Ej: Cable HDMI 2m",disabled:u}),Y.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y.name})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-lead-700",children:"Categora *"}),o.jsxs("select",{id:"categoryId",value:E,onChange:A=>P(Number(A.target.value)),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${Y.categoryId?"border-red-500":"border-lead-300 bg-white"}`,disabled:u,children:[o.jsx("option",{value:0,children:"Seleccione..."}),i.map(A=>o.jsx("option",{value:A.id,children:A.name},A.id))]}),Y.categoryId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y.categoryId})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"brandId",className:"block text-sm font-medium text-lead-700",children:"Marca *"}),o.jsxs("select",{id:"brandId",value:M,onChange:A=>I(Number(A.target.value)),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${Y.brandId?"border-red-500":"border-lead-300 bg-white"}`,disabled:u,children:[o.jsx("option",{value:0,children:"Seleccione..."}),s.map(A=>o.jsx("option",{value:A.id,children:A.name},A.id))]}),Y.brandId&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y.brandId})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"barcode",className:"block text-sm font-medium text-lead-700",children:"Cdigo de Barras"}),o.jsx("input",{type:"text",id:"barcode",value:b,onChange:A=>S(A.target.value),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"Ej: 123456789012",disabled:u})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"internalCode",className:"block text-sm font-medium text-lead-700",children:"Cdigo Interno"}),o.jsx("input",{type:"text",id:"internalCode",value:w,onChange:A=>k(A.target.value),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"Ej: CAB-HDMI-2M",disabled:u})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"presentationId",className:"block text-sm font-medium text-lead-700",children:"Presentacin"}),o.jsxs("select",{id:"presentationId",value:C,onChange:A=>_(Number(A.target.value)),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:u,children:[o.jsx("option",{value:0,children:"Sin presentacin"}),ee.map(A=>o.jsx("option",{value:A.id,children:A.name},A.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"colorId",className:"block text-sm font-medium text-lead-700",children:"Color"}),o.jsxs("select",{id:"colorId",value:y,onChange:A=>N(Number(A.target.value)),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:u,children:[o.jsx("option",{value:0,children:"Sin color"}),le.map(A=>o.jsx("option",{value:A.id,children:A.name},A.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700 mb-2",children:"Precios de Venta *"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"priceMayorista",className:"block text-xs text-lead-500",children:"Mayorista (Bs.)"}),o.jsx("input",{type:"text",inputMode:"decimal",id:"priceMayorista",value:D,onChange:ne(K),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0.00",pattern:"^\\d*(\\.\\d{0,2})?$",min:0,disabled:u})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"priceMinorista",className:"block text-xs text-lead-500",children:"Minorista (Bs.)"}),o.jsx("input",{type:"text",inputMode:"decimal",id:"priceMinorista",value:F,onChange:ne(Z),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0.00",pattern:"^\\d*(\\.\\d{0,2})?$",min:0,disabled:u})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"priceRegular",className:"block text-xs text-lead-500",children:"Regular (Bs.)"}),o.jsx("input",{type:"text",inputMode:"decimal",id:"priceRegular",value:W,onChange:ne(ae),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0.00",pattern:"^\\d*(\\.\\d{0,2})?$",min:0,disabled:u})]})]}),Y.prices&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y.prices})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-lead-700",children:"Imagen (archivo)"}),o.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:se,className:`mt-1 block w-full text-sm text-lead-500\r
                file:mr-4 file:py-2 file:px-4\r
                file:rounded-lg file:border-0\r
                file:text-sm file:font-semibold\r
                file:bg-brand-50 file:text-brand-700\r
                hover:file:bg-brand-100`,disabled:u}),H&&o.jsxs("p",{className:"mt-1 text-xs text-lead-600",children:["Archivo seleccionado: ",H.name]}),O&&o.jsx("img",{src:O,alt:"preview",className:"mt-2 max-h-40 object-contain"})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:h,disabled:u,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:u,children:u?"Guardando...":"Guardar"})]})]})]})}):null},Y1=({product:e,presentationMap:t,colorMap:n,onClose:i})=>{var a,c,u,h,p,m,g,b,S;return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden bg-black/60 backdrop-blur-sm p-4 md:p-0",children:o.jsxs("div",{className:"relative w-full max-w-3xl transform rounded-3xl bg-white shadow-2xl transition-all",children:[o.jsxs("div",{className:"relative h-56 w-full overflow-hidden rounded-t-3xl bg-gray-100",children:[o.jsx("button",{onClick:i,className:"absolute right-4 top-4 z-10 rounded-full bg-black/20 p-2 text-white hover:bg-black/40 transition-colors",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.pathImage?o.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-100",children:o.jsx("img",{src:`http://localhost:3000${e.pathImage}`,alt:e.name,className:"max-h-full max-w-full object-contain",onError:w=>{w.target.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}})}):o.jsx("div",{className:"flex h-full w-full items-center justify-center bg-brand-100",children:o.jsx("div",{className:"mx-auto w-full max-w-2xl rounded-lg bg-white/80 p-6 text-center",children:o.jsx("div",{className:"text-5xl font-bold text-brand-600",children:e.name.charAt(0)})})})]}),o.jsxs("div",{className:"px-8 pb-8 pt-8",children:[o.jsxs("div",{className:"mb-2 text-center",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:e.name}),o.jsx("p",{className:"text-lg text-brand-600 font-medium",children:e.brandName||e.categoryName||""}),o.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[o.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800",children:e.presentationName||(e.presentationId?t.get(e.presentationId):null)||"Sin presentacin"}),o.jsx("span",{className:"inline-flex items-center rounded-full bg-purple-100 px-3 py-1 text-xs font-medium text-purple-800",children:e.colorName||(e.colorId?n.get(e.colorId):null)||"Sin color"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-4 rounded-2xl bg-gray-50 p-5",children:[o.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500",children:"Informacin"}),o.jsxs("div",{className:"space-y-3 text-sm text-gray-800",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M12 15h4.01M12 21h4.01M12 18h4.01M12 9h4.01M12 6h4.01M12 3h4.01"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Cdigo de Barras"}),o.jsx("p",{className:"font-medium text-gray-900",children:e.barcode||""})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Cdigo Interno"}),o.jsx("p",{className:"font-medium text-gray-900",children:e.internalCode||""})]})]})]})]}),o.jsxs("div",{className:"space-y-4 rounded-2xl bg-gray-50 p-5",children:[o.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500",children:"Precios"}),o.jsxs("div",{className:"space-y-3 text-sm text-gray-800",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[o.jsxs("div",{className:"rounded-lg bg-white p-2 shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Mayorista"}),o.jsx("p",{className:"font-bold text-brand-600",children:(c=(a=e.prices)==null?void 0:a.find(w=>w.clientTypeId===3))!=null&&c.price?Number((u=e.prices.find(w=>w.clientTypeId===3))==null?void 0:u.price).toFixed(2):""})]}),o.jsxs("div",{className:"rounded-lg bg-white p-2 shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Minorista"}),o.jsx("p",{className:"font-bold text-brand-600",children:(p=(h=e.prices)==null?void 0:h.find(w=>w.clientTypeId===2))!=null&&p.price?Number((m=e.prices.find(w=>w.clientTypeId===2))==null?void 0:m.price).toFixed(2):""})]}),o.jsxs("div",{className:"rounded-lg bg-white p-2 shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Regular"}),o.jsx("p",{className:"font-bold text-brand-600",children:(b=(g=e.prices)==null?void 0:g.find(w=>w.clientTypeId===1))!=null&&b.price?Number((S=e.prices.find(w=>w.clientTypeId===1))==null?void 0:S.price).toFixed(2):""})]})]}),o.jsxs("div",{className:"pt-2",children:[e.createdAt&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Creado: ",new Date(e.createdAt).toLocaleString()]}),e.updatedAt&&o.jsxs("p",{className:"text-xs text-gray-500",children:["ltima actualizacin: ",new Date(e.updatedAt).toLocaleString()]})]})]})]})]})]})]})}):null},X1=({searchTerm:e,categoryFilter:t,brandFilter:n,onToast:i})=>{const{products:s,isLoading:a,error:c,page:u,total:h,totalPages:p,goToPage:m,applyFilters:g,createProduct:b,updateProduct:S,updateProductState:w,clearError:k}=n0(),{categories:C,categoryMap:_,fetchCategories:y}=al(),{brands:N,brandMap:E,fetchBrands:P}=ol(),{presentations:M,presentationMap:I,fetchPresentations:D}=xu(),{colors:K,colorMap:F,fetchColors:Z}=vu(),W=jt(),ae=ta(),Y=na(),[re,H]=pn.useState(null),Q=r0(e,500),O=x.useMemo(()=>[...Array.isArray(s)?s.filter(Boolean):[]].sort((ne,X)=>(ne.name||"").toLowerCase().localeCompare((X.name||"").toLowerCase())),[s]);x.useEffect(()=>{Promise.all([y(),P(),D(),Z()])},[y,P,D,Z]),x.useEffect(()=>{const $={};Q.trim()&&($.search=Q.trim()),t!=="all"&&($.categoryId=t),n!=="all"&&($.brandId=n),g($)},[Q,t,n,g]),x.useEffect(()=>{c&&(i("error",c),k())},[c,i,k]);const G=async $=>{if(W.user){ae.setSubmitting(!0);try{ae.modalState.mode==="create"?await b({name:$.name,barcode:$.barcode,internalCode:$.internalCode,presentationId:$.presentationId,colorId:$.colorId,prices:$.prices,imageFile:$.imageFile,categoryId:$.categoryId,brandId:$.brandId,userId:W.user.id})&&(i("success","Producto creado correctamente"),ae.close()):ae.modalState.entity&&await S(ae.modalState.entity.id,{name:$.name,barcode:$.barcode,internalCode:$.internalCode,presentationId:$.presentationId,colorId:$.colorId,prices:$.prices,imageFile:$.imageFile,categoryId:$.categoryId,brandId:$.brandId})&&(i("success","Producto actualizado correctamente"),ae.close())}catch(ne){const X=ne instanceof Error?ne.message:"No se pudo guardar el producto";i("error",X)}finally{ae.setSubmitting(!1)}}},U=async()=>{if(!Y.dialogState.entity||!W.user)return;const $=Y.dialogState.entity;await Y.executeWithLoading(async()=>{await w($.id,W.user.id)&&i("success",`Producto "${$.name}" eliminado correctamente`)},$.id)};return o.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de productos"}),o.jsxs("p",{className:"text-sm text-lead-500",children:[p>0&&`Pgina ${u} de ${p}  `,h.toLocaleString()," producto(s) total",(Q||t!=="all"||n!=="all")&&" (filtrados)"]})]}),o.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",onClick:ae.openCreate,children:"Crear producto"})]}),a&&s.length===0?o.jsx(xn,{}):o.jsxs(o.Fragment,{children:[o.jsx(K1,{products:O,categoryMap:_,brandMap:E,presentationMap:I,colorMap:F,onEdit:ae.openEdit,onDeactivate:Y.openConfirm,onView:$=>H($),busyId:Y.busyId}),p>0&&o.jsx("div",{className:"mt-6",children:o.jsx(xr,{currentPage:u,totalPages:p,totalItems:h,itemsPerPage:10,onPageChange:m,isLoading:a})})]}),o.jsx(Q1,{open:ae.modalState.isOpen,mode:ae.modalState.mode,initialData:ae.modalState.entity,categories:C,brands:N,presentations:M,colors:K,submitting:ae.modalState.isSubmitting,onClose:ae.close,onSubmit:G}),re&&o.jsx(Y1,{product:re,presentationMap:I,colorMap:F,onClose:()=>H(null)}),o.jsx(Vt,{open:Y.dialogState.isOpen,title:"Eliminar producto",confirmLabel:"Eliminar",onConfirm:U,onCancel:Y.closeConfirm,disabled:Y.dialogState.isLoading})]})},J1=()=>{const{total:e}=n0(),{brands:t,fetchBrands:n}=ol(),{categories:i,fetchCategories:s}=al(),{presentations:a,fetchPresentations:c}=xu(),{colors:u,fetchColors:h}=vu(),p=Zn(),[m,g]=x.useState("products"),[b,S]=x.useState(""),[w,k]=x.useState("all"),[C,_]=x.useState("all");x.useEffect(()=>{Promise.all([s(),n(),c(),h()])},[s,n,c,h]);const y=x.useCallback((M,I)=>{M==="success"?p.success(I):p.error(I)},[p]),N=x.useMemo(()=>{switch(m){case"products":return"Buscar por nombre, codigo de barras o codigo interno";case"brands":return"Buscar marcas por nombre";case"categories":return"Buscar categorias por nombre";case"presentations":return"Buscar presentaciones por nombre";case"colors":return"Buscar colores por nombre";default:return"Buscar..."}},[m]),E=x.useMemo(()=>({cards:[{label:"Total Productos",value:e,accent:"from-brand-900 to-brand-600"}],breakdown:[{label:"Marcas",value:t.length},{label:"Categorias",value:i.length},{label:"Presentaciones",value:a.length},{label:"Colores",value:u.length}]}),[e,t.length,i.length,a.length,u.length]),P=[{key:"products",label:"Productos"},{key:"brands",label:"Marcas"},{key:"categories",label:"Categorias"},{key:"presentations",label:"Presentaciones"},{key:"colors",label:"Colores"}];return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),o.jsxs("div",{className:"relative space-y-10 px-6 py-8 lg:px-10 lg:py-12",children:[o.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),o.jsxs("div",{className:"grid gap-10 px-8 py-10 md:px-12 lg:grid-cols-[2fr,1.2fr]",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Panel de Productos"}),o.jsx("h2",{className:"text-3xl font-semibold leading-tight md:text-4xl",children:"Gestiona tu catalogo de productos, marcas y categorias"}),o.jsxs("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:[o.jsx("div",{className:"flex flex-col gap-3 md:flex-row",children:o.jsx("input",{className:"input-plain flex-1",placeholder:N,value:b,onChange:M=>S(M.target.value)})}),m==="products"&&o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("select",{className:"rounded-full px-4 py-2 text-sm font-semibold bg-white/10 text-white/90 border border-white/20 focus:outline-none",value:w,onChange:M=>k(M.target.value==="all"?"all":Number(M.target.value)),children:[o.jsx("option",{value:"all",className:"text-lead-900",children:"Todas las categorias"}),i.filter(M=>M.state).map(M=>o.jsx("option",{value:M.id,className:"text-lead-900",children:M.name},M.id))]}),o.jsxs("select",{className:"rounded-full px-4 py-2 text-sm font-semibold bg-white/10 text-white/90 border border-white/20 focus:outline-none",value:C,onChange:M=>_(M.target.value==="all"?"all":Number(M.target.value)),children:[o.jsx("option",{value:"all",className:"text-lead-900",children:"Todas las marcas"}),t.filter(M=>M.state).map(M=>o.jsx("option",{value:M.id,className:"text-lead-900",children:M.name},M.id))]})]})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-white/10 blur-xl"}),o.jsxs("div",{className:"relative space-y-5 rounded-[2rem] border border-white/20 bg-white/10 px-7 py-8 backdrop-blur",children:[o.jsx("div",{className:"grid grid-cols-2 gap-4",children:E.cards.map(M=>o.jsxs("div",{className:`rounded-2xl bg-gradient-to-br ${M.accent} px-4 py-5 shadow-lg`,children:[o.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:M.label}),o.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:M.value})]},M.label))}),o.jsxs("div",{className:"space-y-2 rounded-xl border border-white/20 bg-white/10 p-4 text-sm text-white/80",children:[o.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Catalogo"}),E.breakdown.map(M=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:M.label}),o.jsx("span",{className:"font-semibold text-white",children:M.value})]},M.label))]})]})]})]})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:P.map(({key:M,label:I})=>o.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${m===M?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>g(M),children:I},M))}),o.jsxs("section",{className:"grid gap-8 xl:grid-cols-[1fr]",children:[m==="products"&&o.jsx(X1,{searchTerm:b,categoryFilter:w,brandFilter:C,onToast:y}),m==="brands"&&o.jsx(B1,{searchTerm:b,onToast:y}),m==="categories"&&o.jsx(H1,{searchTerm:b,onToast:y}),m==="presentations"&&o.jsx(W1,{searchTerm:b,onToast:y}),m==="colors"&&o.jsx(q1,{searchTerm:b,onToast:y})]})]})]}),o.jsx($r,{toasts:p.toasts,onDismiss:p.dismissToast})]})},so=10,ep=(e,t)=>JSON.stringify({...e,page:t,limit:so}),eL=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),[c,u]=x.useState(1),[h,p]=x.useState(0),[m,g]=x.useState(0),b=x.useRef(new Map),S=x.useRef({}),w=x.useMemo(()=>new Map(e.map(Z=>[Z.id,Z])),[e]),k=x.useCallback(Z=>{var W;return Z==null?"Sin proveedor":((W=w.get(Z))==null?void 0:W.name)??"Desconocido"},[w]),C=x.useCallback(async(Z,W,ae=!1)=>{const Y=ep(W,Z);if(!ae&&b.current.has(Y)){const re=b.current.get(Y);t(re.data),u(Z),p(re.total),g(re.totalPages);return}i(!0),a(null);try{const re=await ie.suppliers.getAll(W,Z,so);let H=[],Q=0,O=0;if(Array.isArray(re))H=re,Q=H.length,O=Math.max(1,Math.ceil(Q/so));else if(re&&typeof re=="object"&&"data"in re){const G=re;H=G.data,Q=G.total??H.length,O=G.totalPages??Math.max(1,Math.ceil(Q/so))}b.current.set(Y,{data:H,total:Q,totalPages:O}),t(H),u(Z),p(Q),g(O)}catch(re){a(ue(re))}finally{i(!1)}},[]),_=x.useCallback(async Z=>{b.current.clear(),S.current=Z||{},await C(1,S.current)},[C]),y=x.useCallback(async Z=>{Z<1||m>0&&Z>m||await C(Z,S.current)},[C,m]),N=x.useCallback(async()=>{await C(c,S.current,!0)},[C,c]),E=x.useCallback(()=>{b.current.clear()},[]),P=x.useCallback(async Z=>{a(null);try{return await ie.suppliers.getById(Z)}catch(W){return a(ue(W)),null}},[]),M=x.useCallback(async(Z,W)=>{i(!0),a(null);try{const ae=await ie.suppliers.create({...Z,userId:W});return E(),await C(1,S.current,!0),ae}catch(ae){return a(ue(ae)),null}finally{i(!1)}},[C,E]),I=x.useCallback(async(Z,W,ae)=>{i(!0),a(null);try{const Y=await ie.suppliers.update(Z,{...W,userId:ae});t(Q=>Q.map(O=>O.id===Z?Y:O));const re=ep(S.current,c),H=b.current.get(re);return H&&(H.data=H.data.map(Q=>Q.id===Z?Y:Q)),Y}catch(Y){return a(ue(Y)),null}finally{i(!1)}},[c]),D=x.useCallback(async(Z,W,ae)=>{i(!0),a(null);try{return await ie.suppliers.updateState(Z,W,ae),E(),await C(c,S.current,!0),!0}catch(Y){return a(ue(Y)),!1}finally{i(!1)}},[C,c,E]),K=x.useCallback(async(Z,W)=>{i(!0),a(null);try{return await ie.suppliers.delete(Z,W),E(),await C(c,S.current,!0),!0}catch(ae){return a(ue(ae)),!1}finally{i(!1)}},[C,c,E]),F=x.useCallback(()=>{a(null)},[]);return{suppliers:e,supplierMap:w,isLoading:n,error:s,page:c,total:h,totalPages:m,goToPage:y,applyFilters:_,refreshCurrentPage:N,fetchSupplierById:P,createSupplier:M,updateSupplier:I,updateSupplierState:D,deleteSupplier:K,getSupplierName:k,clearError:F,clearCache:E}},tL=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>new Map(e.map(m=>[m.id,m.name])),[e]),u=x.useCallback(m=>m==null?"Sin pas":c.get(m)??"Desconocido",[c]),h=x.useCallback(()=>a(null),[]),p=x.useCallback(async()=>{i(!0),a(null);try{const m=await ie.countries.getAll();t(m)}catch(m){a(ue(m))}finally{i(!1)}},[]);return{countries:e,countryMap:c,isLoading:n,error:s,fetchCountries:p,getCountryName:u,clearError:h}},nL=({suppliers:e,countryMap:t,onEdit:n,onDeactivate:i,busyId:s})=>{const a=Array.isArray(e)?e.filter(Boolean):[],c=a.length===0,u=h=>s!=null&&s===h;return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"NIT"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Telfono"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Pas"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Direccin"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Contacto"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:c?o.jsx("tr",{children:o.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:7,children:"No hay proveedores para mostrar."})}):a.map(h=>o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 text-lead-600",children:(h==null?void 0:h.nit)??""}),o.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:(h==null?void 0:h.name)??""}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:(h==null?void 0:h.phone)??""}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:o.jsx("span",{className:"inline-flex items-center rounded-full bg-brand-50 px-2.5 py-0.5 text-xs font-medium text-brand-700",children:t[h.countryId]||"Desconocido"})}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:h.address??""}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:h.contactName??""}),o.jsx("td",{className:"px-4 py-3 text-center align-middle",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>n(h),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:u(h.id),children:"Editar"}),o.jsx("button",{type:"button",onClick:()=>i(h),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:u(h.id)||!h.state,children:"Eliminar"})]})})]},h==null?void 0:h.id))})]})})},rL=({supplier:e,countries:t,onClose:n,onSave:i,saving:s})=>{const a=!!(e!=null&&e.id),[c,u]=x.useState(""),[h,p]=x.useState(""),[m,g]=x.useState(""),[b,S]=x.useState(""),[w,k]=x.useState(""),[C,_]=x.useState(""),[y,N]=x.useState({});x.useEffect(()=>{e?(u(e.nit??""),p(e.name??""),g(e.contactName??""),S(e.phone??""),k(e.address??""),_(e.countryId?String(e.countryId):"")):(u(""),p(""),g(""),S(""),k(""),_("")),N({})},[e]);const E=()=>{const D={};return c.trim()||(D.nit="El NIT es obligatorio"),h.trim()||(D.name="El nombre es obligatorio"),C||(D.countryId="El pas es obligatorio"),N(D),Object.keys(D).length===0},P=D=>{D.preventDefault(),E()&&i({...a?{id:e.id}:{},nit:c.trim(),name:h.trim(),contactName:m.trim()||void 0,phone:b.trim()||void 0,address:w.trim()||void 0,countryId:Number(C),state:(e==null?void 0:e.state)??!0})},M=a?"Editar Proveedor":"Nuevo Proveedor",I=a?"Guardar cambios":"Crear";return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-lg overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:M}),o.jsx("button",{type:"button",onClick:n,className:"text-brand-100 hover:text-white transition-colors",disabled:s,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("form",{onSubmit:P,className:"space-y-5 px-6 py-6",children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"nit",className:"block text-sm font-medium text-lead-700",children:"NIT *"}),o.jsx("input",{type:"text",id:"nit",value:c,onChange:D=>u(D.target.value),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${y.nit?"border-red-500":"border-lead-300 bg-white"}`,disabled:s}),y.nit?o.jsx("p",{className:"mt-1 text-xs text-red-600",children:y.nit}):null]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre *"}),o.jsx("input",{type:"text",id:"name",value:h,onChange:D=>p(D.target.value),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${y.name?"border-red-500":"border-lead-300 bg-white"}`,disabled:s}),y.name?o.jsx("p",{className:"mt-1 text-xs text-red-600",children:y.name}):null]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"countryId",className:"block text-sm font-medium text-lead-700",children:"Pas *"}),o.jsxs("select",{id:"countryId",value:C,onChange:D=>_(D.target.value),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${y.countryId?"border-red-500":"border-lead-300 bg-white"}`,disabled:s,children:[o.jsx("option",{value:"",children:""}),t.map(D=>o.jsx("option",{value:D.id,children:D.name},D.id))]}),y.countryId?o.jsx("p",{className:"mt-1 text-xs text-red-600",children:y.countryId}):null]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-lead-700",children:"Telfono"}),o.jsx("input",{type:"tel",id:"phone",value:b,onChange:D=>S(D.target.value),className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:s})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"contactName",className:"block text-sm font-medium text-lead-700",children:"Contacto"}),o.jsx("input",{type:"text",id:"contactName",value:m,onChange:D=>g(D.target.value),className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:s})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-lead-700",children:"Direccin"}),o.jsx("textarea",{id:"address",value:w,onChange:D=>k(D.target.value),className:"mt-1 block w-full resize-none rounded-lg border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",rows:2,disabled:s})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",onClick:n,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors",disabled:s,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded-lg bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-60 transition-all",disabled:s,children:s?"Guardando...":I})]})]})]})})},sL=()=>{var ne;const{suppliers:e,isLoading:t,error:n,applyFilters:i,createSupplier:s,updateSupplier:a,updateSupplierState:c}=eL(),{countries:u,countryMap:h,fetchCountries:p}=tL(),m=jt(),g=Zn(),b=(ne=m.user)==null?void 0:ne.id,[S,w]=x.useState(!1),[k,C]=x.useState(null),[_,y]=x.useState(null),[N,E]=x.useState(!1),[P,M]=x.useState(null),[I,D]=x.useState(""),[K,F]=x.useState(1),Z=10;x.useEffect(()=>{i(),p()},[i,p]),x.useEffect(()=>{n&&g.error(n)},[n]);const W=x.useMemo(()=>{let X=Array.isArray(e)?e.filter(Boolean):[];if(I.trim()){const se=I.toLowerCase();X=X.filter(ee=>(ee.name??"").toLowerCase().includes(se)||(ee.contactName??"").toLowerCase().includes(se)||(ee.phone??"").toLowerCase().includes(se)||(ee.nit??"").toLowerCase().includes(se))}return[...X].sort((se,ee)=>(se.name||"").toLowerCase().localeCompare((ee.name||"").toLowerCase()))},[e,I]),ae=W.length,Y=Math.max(1,Math.ceil(ae/Z)),re=x.useMemo(()=>{const X=(K-1)*Z;return W.slice(X,X+Z)},[W,K,Z]);x.useEffect(()=>{F(1)},[I]);const H=()=>{C(null),w(!0)},Q=X=>{C(X),w(!0)},O=()=>{w(!1),C(null)},G=async X=>{E(!0);try{if(X.id){const{userId:se,...ee}=X;await a(X.id,ee,b),g.success("Proveedor actualizado correctamente")}else await s(X,b),g.success("Proveedor creado correctamente");O()}catch(se){const ee=se instanceof Error?se.message:"Error al guardar proveedor";g.error(ee)}finally{E(!1)}},U=X=>{y(X)},$=async()=>{if(_){M(_.id);try{await c(_.id,!1,b),g.success(`Proveedor "${_.name}" desactivado correctamente`)}catch(X){const se=X instanceof Error?X.message:"Error al desactivar proveedor";g.error(se)}finally{M(null),y(null)}}};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),o.jsxs("div",{className:"relative space-y-10 px-6 py-8 lg:px-10 lg:py-12",children:[o.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),o.jsx("div",{className:"grid gap-10 px-8 py-10 md:px-12 lg:grid-cols-[2fr,1.2fr]",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Panel de Proveedores"}),o.jsx("h2",{className:"text-3xl font-semibold leading-tight md:text-4xl",children:"Gestin de proveedores y suministros"}),o.jsx("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:o.jsx("div",{className:"flex flex-col gap-3 md:flex-row",children:o.jsx("input",{className:"input-plain flex-1",placeholder:"Buscar por nombre, contacto, telfono o NIT",value:I,onChange:X=>D(X.target.value)})})})]})})]}),o.jsx("section",{className:"grid gap-8 xl:grid-cols-[1fr]",children:o.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de proveedores"}),o.jsxs("p",{className:"text-sm text-lead-500",children:[Y>1&&`Pgina ${K} de ${Y}  `,ae," proveedor(es) ",I.trim()&&"(filtrados)"]})]}),o.jsx("button",{onClick:H,className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",children:"+ Nuevo proveedor"})]}),t&&o.jsx(xn,{}),!t&&o.jsxs(o.Fragment,{children:[o.jsx(nL,{suppliers:re,countryMap:Object.fromEntries(h),onEdit:Q,onDeactivate:U,busyId:P}),Y>0&&o.jsx("div",{className:"mt-6",children:o.jsx(xr,{currentPage:K,totalPages:Y,totalItems:ae,itemsPerPage:Z,onPageChange:F,isLoading:t})})]})]})})]})]}),S&&o.jsx(rL,{supplier:k,countries:u,onClose:O,onSave:G,saving:N}),_&&o.jsx(Vt,{open:!!_,title:"Desactivar proveedor",description:`Est seguro de desactivar al proveedor "${_.name}"?`,confirmLabel:"Desactivar",onConfirm:$,onCancel:()=>y(null)}),o.jsx($r,{toasts:g.toasts,onDismiss:g.dismissToast})]})},io=10,iL=(e,t,n)=>JSON.stringify({branchId:e,...t,page:n,limit:io}),aL=()=>{const[e,t]=x.useState([]),[n,i]=x.useState({page:1,limit:io,total:0,totalPages:0}),[s,a]=x.useState(!1),[c,u]=x.useState(null),h=x.useRef(new Map),p=x.useRef(0),m=x.useRef({}),g=x.useCallback(async(y,N,E,P=!1)=>{const M=iL(y,N,E);if(!P&&h.current.has(M)){const I=h.current.get(M);t(I.data),i(D=>({...D,page:E,total:I.total,totalPages:I.totalPages}));return}a(!0),u(null);try{const I=await ie.productBranches.getByBranchPaginated(y,{...N,page:E,limit:io}),D=(I==null?void 0:I.data)||[],K=(I==null?void 0:I.total)||0,F=(I==null?void 0:I.totalPages)||0,Z=(I==null?void 0:I.page)||E;h.current.set(M,{data:D,total:K,totalPages:F}),t(D),i({page:Z,limit:io,total:K,totalPages:F})}catch(I){console.error("Error fetching inventory:",I),u(ue(I))}finally{a(!1)}},[]),b=x.useCallback(async(y,N)=>{const E=N||{},P=p.current===y,M=JSON.stringify(m.current)===JSON.stringify(E);P&&M||(h.current.clear(),p.current=y,m.current=E,await g(y,m.current,1))},[g]),S=x.useCallback(async y=>{y<1||n.totalPages>0&&y>n.totalPages||p.current!==0&&await g(p.current,m.current,y)},[g,n.totalPages]),w=x.useCallback(async()=>{p.current!==0&&await g(p.current,m.current,n.page,!0)},[g,n.page]),k=x.useCallback(()=>{h.current.clear()},[]),C=x.useCallback(async(y,N,E)=>{a(!0),u(null);try{const P=await ie.productBranches.setStock(y,N,E);return k(),P}catch(P){return u(ue(P)),null}finally{a(!1)}},[k]),_=x.useCallback(()=>{u(null)},[]);return{inventory:e,pagination:n,isLoading:s,error:c,goToPage:S,applyFilters:b,refreshCurrentPage:w,setStock:C,clearError:_,clearCache:k}};function oL(e){return new Map(e.map(t=>[t.id,t.name]))}function s0(e,t){return t==null?"Sin sucursal":e.get(t)??`${t}`}const yu=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>oL(e),[e]),u=x.useCallback(w=>s0(c,w),[c]),h=x.useCallback(()=>a(null),[]),p=x.useCallback(async()=>{i(!0),a(null);try{const w=await ie.branches.getAll();t(w)}catch(w){a({message:ue(w),code:"FETCH_ERROR"})}finally{i(!1)}},[]),m=x.useCallback(async w=>{a(null);try{return await ie.branches.getById(w)}catch(k){return a({message:ue(k),code:"FETCH_BY_ID_ERROR"}),null}},[]),g=x.useCallback(async w=>{i(!0),a(null);try{const k=await ie.branches.create(w);return t(C=>[...C,k]),k}catch(k){return a({message:ue(k),code:"CREATE_ERROR"}),null}finally{i(!1)}},[]),b=x.useCallback(async(w,k)=>{i(!0),a(null);try{const C=await ie.branches.update(w,k);return t(_=>_.map(y=>y.id===w?C:y)),C}catch(C){return a({message:ue(C),code:"UPDATE_ERROR"}),null}finally{i(!1)}},[]),S=x.useCallback(async(w,k)=>{i(!0),a(null);try{const C=await ie.branches.updateState(w,k);return t(k?_=>_.map(y=>y.id===w?C:y):_=>_.filter(y=>y.id!==w)),!0}catch(C){return a({message:ue(C),code:"UPDATE_STATE_ERROR"}),!1}finally{i(!1)}},[]);return{branches:e,branchMap:c,isLoading:n,error:s,getBranchNameById:u,fetchBranches:p,fetchBranchById:m,createBranch:g,updateBranch:b,updateBranchState:S,clearError:h}},lL=()=>{const{inventory:e,pagination:t,isLoading:n,error:i,goToPage:s,applyFilters:a,setStock:c,clearError:u}=aL(),{branches:h,fetchBranches:p,isLoading:m}=yu(),{categories:g,fetchCategories:b}=al(),{brands:S,fetchBrands:w}=ol(),k=jt(),C=Zn(),[_,y]=x.useState(null),[N,E]=x.useState(""),[P,M]=x.useState("available"),[I,D]=x.useState("all"),[K,F]=x.useState("all"),Z=r0(N,500),[W,ae]=x.useState({open:!1,item:null}),[Y,re]=x.useState(!1),[H,Q]=x.useState(""),[O,G]=x.useState(!1);x.useEffect(()=>{p(),b(),w()},[p,b,w]),x.useEffect(()=>{var A;if(h.length>0&&_===null){const fe=(A=k.user)==null?void 0:A.branchId;fe&&h.find(_e=>_e.id===fe)?y(fe):y(h[0].id)}},[h,_,k.user]),x.useEffect(()=>{_&&a(_,{search:Z||void 0,onlyAvailable:P==="available",categoryId:I!=="all"?I:void 0,brandId:K!=="all"?K:void 0})},[_,Z,P,I,K,a]),x.useEffect(()=>{i&&(C.error(i),u())},[i,C,u]);const U=A=>{y(Number(A.target.value))},$=A=>{var fe;ae({open:!0,item:A}),re(A.branch.hasStock),Q(((fe=A.branch.stockQty)==null?void 0:fe.toString())??"")},ne=()=>{ae({open:!1,item:null})},X=async A=>{if(A.preventDefault(),!W.item||!_)return;const fe=W.item.branch.hasStock,_e=Y;G(!0);try{const ve=await c(W.item.id,_,{hasStock:Y,stockQty:H?parseInt(H,10):null});ve&&(C.success(ve.deleted?"Producto marcado como no disponible en esta sucursal":"Stock actualizado correctamente"),ne(),fe!==_e&&await a(_,{search:Z||void 0,onlyAvailable:P==="available",categoryId:I!=="all"?I:void 0,brandId:K!=="all"?K:void 0}))}catch(ve){C.error((ve==null?void 0:ve.message)||"Error al actualizar stock")}finally{G(!1)}},se=A=>{if(!A||A.length===0)return"";const fe=A.find(_e=>_e.clientTypeId===1);return fe?`Bs. ${fe.price.toFixed(2)}`:`Bs. ${A[0].price.toFixed(2)}`},ee=h.find(A=>A.id===_),le=pn.useMemo(()=>[...h].sort((A,fe)=>(A.name||"").localeCompare(fe.name||"")),[h]);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),o.jsxs("div",{className:"relative space-y-10 px-6 py-8 lg:px-10 lg:py-12",children:[o.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),o.jsxs("div",{className:"grid gap-10 px-8 py-10 md:px-12 lg:grid-cols-[2fr,1.2fr]",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Control de Stock"}),o.jsx("h2",{className:"text-3xl font-semibold leading-tight md:text-4xl",children:"Inventario por Sucursal"}),o.jsxs("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:[o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-xs uppercase tracking-wide text-white/70 mb-1",children:"Sucursal"}),o.jsx("select",{className:"w-full rounded-lg px-4 py-2.5 text-sm font-medium bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-white/30",value:_??"",onChange:U,disabled:m,children:le.map(A=>o.jsx("option",{value:A.id,className:"text-lead-900",children:A.name},A.id))})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-xs uppercase tracking-wide text-white/70 mb-1",children:"Buscar"}),o.jsx("input",{className:"input-plain w-full",placeholder:"Nombre, cdigo de barras o cdigo interno...",value:N,onChange:A=>E(A.target.value)})]})]}),o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-xs uppercase tracking-wide text-white/70 mb-1",children:"Categora"}),o.jsxs("select",{className:"w-full rounded-lg px-4 py-2.5 text-sm font-medium bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-white/30",value:I,onChange:A=>D(A.target.value==="all"?"all":Number(A.target.value)),children:[o.jsx("option",{value:"all",className:"text-lead-900",children:"Todas las categoras"}),g.filter(A=>A.state).map(A=>o.jsx("option",{value:A.id,className:"text-lead-900",children:A.name},A.id))]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-xs uppercase tracking-wide text-white/70 mb-1",children:"Marca"}),o.jsxs("select",{className:"w-full rounded-lg px-4 py-2.5 text-sm font-medium bg-white/20 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-white/30",value:K,onChange:A=>F(A.target.value==="all"?"all":Number(A.target.value)),children:[o.jsx("option",{value:"all",className:"text-lead-900",children:"Todas las marcas"}),S.filter(A=>A.state).map(A=>o.jsx("option",{value:A.id,className:"text-lead-900",children:A.name},A.id))]})]})]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:["available","all"].map(A=>o.jsx("button",{type:"button",onClick:()=>M(A),className:`rounded-full px-4 py-2 text-sm font-semibold transition ${P===A?"bg-lead-50 text-brand-700 shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:A==="available"?"En Inventario":"Catlogo Completo"},A))})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-white/10 blur-xl"}),o.jsx("div",{className:"relative flex items-center justify-center rounded-[2rem] border border-white/20 bg-white/10 px-7 py-8 backdrop-blur",children:o.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-brand-900 to-brand-600 px-8 py-6 shadow-lg text-center w-full",children:[o.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:"Total Productos"}),o.jsx("p",{className:"mt-2 text-4xl font-semibold text-white",children:t.total.toLocaleString()})]})})]})]})]}),o.jsx("section",{className:"grid gap-8 xl:grid-cols-[1fr]",children:o.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[o.jsx("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-brand-900",children:["Stock en ",(ee==null?void 0:ee.name)??"Sucursal"]}),o.jsxs("p",{className:"text-sm text-lead-500",children:[t.totalPages>0&&`Pgina ${t.page} de ${t.totalPages}  `,t.total.toLocaleString()," productos total"]})]})}),n&&e.length===0?o.jsx(xn,{}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Producto"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Categora"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Marca"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Cdigo"}),o.jsx("th",{className:"px-4 py-4 text-center font-semibold",children:"Disponible"}),o.jsx("th",{className:"px-4 py-4 text-center font-semibold",children:"Stock"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Precio"}),o.jsx("th",{className:"w-32 px-4 py-4 text-center font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:e.length===0?o.jsx("tr",{children:o.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:8,children:Z||I!=="all"||K!=="all"?"No se encontraron productos con los filtros seleccionados.":"No hay productos en el inventario de esta sucursal."})}):[...e].sort((A,fe)=>(A.name||"").localeCompare(fe.name||"")).map(A=>o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:A.name}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:A.category.name}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:A.brand.name}),o.jsx("td",{className:"px-4 py-3 text-lead-600 font-mono text-xs",children:A.barcode||A.internalCode||""}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${A.branch.hasStock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.branch.hasStock?"S":"No"})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`font-semibold ${!A.branch.stockQty||A.branch.stockQty===0?"text-red-600":A.branch.stockQty<=5?"text-amber-600":"text-green-600"}`,children:A.branch.stockQty??0})}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:se(A.prices)}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("button",{type:"button",onClick:()=>$(A),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200",children:"Editar"})})]},A.id))})]})}),t.totalPages>0&&o.jsx("div",{className:"mt-6",children:o.jsx(xr,{currentPage:t.page,totalPages:t.totalPages,totalItems:t.total,itemsPerPage:t.limit,onPageChange:s,isLoading:n})})]})]})})]})]}),W.open&&W.item&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:"Editar Stock"}),o.jsx("button",{onClick:ne,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:O,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("form",{onSubmit:X,className:"space-y-5 px-6 py-6",children:[o.jsxs("div",{className:"rounded-lg bg-brand-50 p-3 border border-brand-100",children:[o.jsx("p",{className:"text-sm font-medium text-brand-900",children:W.item.name}),o.jsxs("div",{className:"flex gap-4 mt-1 text-xs text-brand-600",children:[o.jsx("span",{children:W.item.category.name}),o.jsx("span",{children:""}),o.jsx("span",{children:W.item.brand.name})]}),(W.item.barcode||W.item.internalCode)&&o.jsx("p",{className:"text-xs text-brand-500 font-mono mt-1",children:W.item.barcode||W.item.internalCode})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:Y,onChange:A=>re(A.target.checked),className:"h-5 w-5 rounded border-lead-300 text-brand-600 focus:ring-brand-500",disabled:O}),o.jsx("span",{className:"text-sm font-medium text-lead-700",children:"Tiene stock disponible en esta sucursal"})]}),o.jsx("p",{className:"mt-1 ml-8 text-xs text-lead-500",children:Y?"El producto est disponible para venta en esta sucursal.":"Desmarcar eliminar el registro de stock para esta sucursal."})]}),Y&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"stockQty",className:"block text-sm font-medium text-lead-700",children:"Cantidad en Stock"}),o.jsx("input",{type:"number",id:"stockQty",value:H,onChange:A=>Q(A.target.value),className:"mt-1 block w-full rounded-lg border border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0",min:"0",disabled:O})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:ne,disabled:O,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:O,children:O?"Guardando...":"Guardar"})]})]})]})}),o.jsx($r,{toasts:C.toasts,onDismiss:C.dismissToast})]})},i0=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=x.useMemo(()=>new Map(e.map(C=>[C.id,C])),[e]),u=x.useCallback(C=>{if(C==null)return"Sin usuario";const _=c.get(C);return _?`${_.names} ${_.lastName}`:"Desconocido"},[c]),h=x.useCallback(()=>a(null),[]),p=x.useCallback(async()=>{i(!0),a(null);try{const C=await ie.users.getAll();t(C)}catch(C){a({message:ue(C),code:"FETCH_ERROR"})}finally{i(!1)}},[]),m=x.useCallback(async C=>{a(null);try{return(await ie.users.getAll()).find(y=>y.id===C)??null}catch(_){return a({message:ue(_),code:"FETCH_BY_ID_ERROR"}),null}},[]),g=x.useCallback(async C=>{i(!0),a(null);try{const _=await ie.users.create(C);return t(y=>[...y,_]),_}catch(_){return a({message:ue(_),code:"CREATE_ERROR"}),null}finally{i(!1)}},[]),b=x.useCallback(async(C,_)=>{i(!0),a(null);try{const y=await ie.users.update(C,_);return t(N=>N.map(E=>E.id===C?y:E)),y}catch(y){return a({message:ue(y),code:"UPDATE_ERROR"}),null}finally{i(!1)}},[]),S=x.useCallback(async(C,_,y)=>{i(!0),a(null);try{return await ie.users.updateState(C,_,y),t(N=>N.filter(E=>E.id!==C)),!0}catch(N){return a({message:ue(N),code:"UPDATE_STATE_ERROR"}),!1}finally{i(!1)}},[]),w=x.useCallback(async C=>{i(!0),a(null);try{return await ie.users.resetPassword(C),!0}catch(_){return a({message:ue(_),code:"RESET_PASSWORD_ERROR"}),!1}finally{i(!1)}},[]),k=x.useCallback(async(C,_)=>{i(!0),a(null);try{return await ie.users.updatePassword(C,_),!0}catch(y){return a({message:ue(y),code:"UPDATE_PASSWORD_ERROR"}),!1}finally{i(!1)}},[]);return{users:e,userMap:c,isLoading:n,error:s,fetchUsers:p,fetchUserById:m,createUser:g,updateUser:b,updateUserState:S,resetUserPassword:w,updateUserPassword:k,getUserName:u,clearError:h}};function cL(e){if(!e)return"Sin rol";const t={propietario:"Propietario",administrador:"Administrador",prevendedor:"Prevendedor",transportista:"Transportista"};return e in t?t[e]:e.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}function dL(e,t){return e==="propietario"?t!=="propietario":e==="administrador"?t==="prevendedor"||t==="transportista":!1}const uL=({users:e,branchMap:t,currentUserRole:n,onEdit:i,onDeactivate:s,onResetPassword:a,showResetButton:c,busyUserId:u})=>{const h=e.length===0,p=m=>u!=null&&u===m;return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Usuario"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Rol"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Sucursal"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"CI"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:h?o.jsx("tr",{children:o.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:6,children:"No hay usuarios para mostrar."})}):e.map(m=>{const g=dL(n,m.role);return o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:m.userName}),o.jsxs("td",{className:"px-4 py-3 text-lead-600",children:[o.jsxs("span",{children:[m.lastName,m.secondLastName?` ${m.secondLastName}`:"",","]}),o.jsxs("span",{className:"ml-1",children:[" ",m.names]})]}),o.jsx("td",{className:"px-4 py-3 capitalize text-lead-600",children:o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${m.role==="propietario"?"bg-purple-100 text-purple-800":m.role==="administrador"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:cL(m.role)})}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:o.jsx("span",{className:"inline-flex items-center rounded-full bg-brand-50 px-2.5 py-0.5 text-xs font-medium text-brand-700",children:s0(t,m.branchId)})}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:m.ci??""}),o.jsx("td",{className:"px-4 py-3 text-center align-middle",children:o.jsx("div",{className:"flex items-center justify-center gap-2",children:g?o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",onClick:()=>i(m),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:p(m.id),children:"Editar"}),o.jsx("button",{type:"button",onClick:()=>s(m),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:p(m.id),children:"Eliminar"}),c&&a?o.jsx("button",{type:"button",onClick:()=>a(m),className:"rounded bg-lead-200 px-3 py-1.5 font-medium text-lead-800 transition hover:bg-lead-300 disabled:opacity-50",disabled:p(m.id),children:"Resetear"}):null]}):o.jsx("span",{className:"text-xs text-lead-400 italic",children:"Sin permisos"})})})]},m.id)})})]})})},hL=[{value:"administrador",label:"Administrador"},{value:"prevendedor",label:"Prevendedor"},{value:"transportista",label:"Transportista"}],tp=[{value:"prevendedor",label:"Prevendedor"},{value:"transportista",label:"Transportista"}],a0="prevendedor",np={ciMain:"",ciExt:"",names:"",lastName:"",secondLastName:"",branchId:"",role:a0,email:""},fL=({open:e,mode:t,initialUser:n,submitting:i,branches:s,branchesLoading:a=!1,onClose:c,onSubmit:u})=>{var M,I;const[h,p]=x.useState(np),[m,g]=x.useState({}),b=jt(),S=((M=b.user)==null?void 0:M.role)==="propietario",w=((I=b.user)==null?void 0:I.role)==="administrador";x.useEffect(()=>{if(e){if(t==="edit"&&n){const D=n.ci??"",[K,F]=D.includes("-")?D.split("-",2):[D,""];p({ciMain:K,ciExt:F,names:n.names,lastName:n.lastName,secondLastName:n.secondLastName??"",branchId:n.branchId!=null?String(n.branchId):"",role:n.role==="propietario"?a0:n.role,email:n.email??""})}else p(np);g({})}},[e,t,n]);const k=t==="create"?"Crear usuario":"Editar usuario",C=t==="create"?"Crear":"Guardar cambios",_=x.useMemo(()=>S?hL:w?tp:[],[S,w]),y=_.length?_:tp,N=D=>{const{name:K,value:F}=D.target;let Z=F;(K==="names"||K==="lastName"||K==="secondLastName")&&(Z=F.replace(/[^A-Za-z\s]/g,"").toUpperCase()),K==="ciMain"&&(Z=F.replace(/\D/g,"").slice(0,9)),K==="ciExt"&&(Z=F.replace(/[^0-9a-zA-Z]/g,"").slice(0,2).toUpperCase()),K==="email"&&(Z=F.toLowerCase()),p(W=>({...W,[K]:Z}))},E=()=>{const D={};if(h.ciMain.trim()?/^\d{1,9}$/.test(h.ciMain)||(D.ciMain="CI invlida (solo hasta 9 dgitos)"):D.ciMain="La cdula (CI) es obligatoria",h.names.trim()?/^[A-Z\s]+$/.test(h.names)||(D.names="El nombre slo puede contener letras"):D.names="El nombre es obligatorio",h.lastName.trim()?/^[A-Z\s]+$/.test(h.lastName)||(D.lastName="El apellido slo puede contener letras"):D.lastName="El apellido es obligatorio",h.secondLastName.trim()?/^[A-Z\s]+$/.test(h.secondLastName)||(D.secondLastName="El segundo apellido slo puede contener letras"):D.secondLastName="El segundo apellido es obligatorio",!h.branchId.trim())D.branchId="La sucursal es obligatoria";else{const K=Number(h.branchId);Number.isNaN(K)&&(D.branchId="La sucursal debe ser numrica")}return h.role||(D.role="Selecciona un rol"),t==="create"&&!h.email.trim()?D.email="El correo electrnico es obligatorio":h.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email.trim())&&(D.email="Formato de correo invlido"),h.ciExt.trim()&&!/^\d[a-zA-Z]$/.test(h.ciExt.trim())&&(D.ciExt="Formato de ext invlido (ej: 1B)"),g(D),Object.keys(D).length===0},P=D=>{if(D.preventDefault(),!E())return;const K=Number(h.branchId),F=h.ciMain.trim(),Z=h.ciExt.trim(),W=Z?`${F}-${Z}`:F;u({ci:W,names:h.names.trim(),lastName:h.lastName.trim(),secondLastName:h.secondLastName.trim()||null,branchId:K,role:h.role,email:h.email.trim()})};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-lg overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:k}),o.jsx("button",{type:"button",onClick:c,className:"text-brand-100 hover:text-white transition-colors",disabled:i,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("form",{onSubmit:P,className:"space-y-5 px-6 py-6",children:[t==="create"&&o.jsx("div",{className:"rounded-lg bg-blue-50 border border-blue-200 p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium",children:"Credenciales automticas"}),o.jsx("p",{className:"mt-1 text-blue-700",children:"El usuario y contrasea temporal se generarn automticamente y se enviarn al correo electrnico del usuario. En su primer inicio de sesin, deber cambiar su contrasea."})]})]})}),o.jsxs("div",{children:[o.jsxs("div",{className:"grid grid-cols-3 gap-3 items-end",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{htmlFor:"ciMain",className:"block text-sm font-medium text-lead-700",children:"Cdula (CI) *"}),o.jsx("input",{id:"ciMain",name:"ciMain",value:h.ciMain,onChange:N,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${m.ciMain?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"876543789",disabled:i})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ciExt",className:"block text-sm font-medium text-lead-700",children:"Ext (opcional)"}),o.jsx("input",{id:"ciExt",name:"ciExt",value:h.ciExt,onChange:N,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${m.ciExt?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"1B",disabled:i})]})]}),o.jsxs("div",{className:"mt-1 flex flex-col gap-1",children:[m.ciMain?o.jsx("p",{className:"text-xs text-red-600",children:m.ciMain}):null,m.ciExt?o.jsx("p",{className:"text-xs text-red-600",children:m.ciExt}):null]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"names",className:"block text-sm font-medium text-lead-700",children:"Nombres *"}),o.jsx("input",{id:"names",name:"names",value:h.names,onChange:N,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${m.names?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"JUAN CARLOS",disabled:i}),m.names?o.jsx("p",{className:"mt-1 text-xs text-red-600",children:m.names}):null]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-lead-700",children:"Primer Apellido *"}),o.jsx("input",{id:"lastName",name:"lastName",value:h.lastName,onChange:N,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${m.lastName?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"PEREZ",disabled:i}),m.lastName?o.jsx("p",{className:"mt-1 text-xs text-red-600",children:m.lastName}):null]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"secondLastName",className:"block text-sm font-medium text-lead-700",children:"Segundo Apellido *"}),o.jsx("input",{id:"secondLastName",name:"secondLastName",value:h.secondLastName,onChange:N,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${m.secondLastName?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"FERNANDEZ",disabled:i}),m.secondLastName?o.jsx("p",{className:"mt-1 text-xs text-red-600",children:m.secondLastName}):null]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-lead-700",children:["Correo electrnico ",t==="create"?"*":""]}),o.jsx("input",{id:"email",name:"email",type:"email",value:h.email,onChange:N,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${m.email?"border-red-500":"border-lead-300 bg-white"}`,placeholder:"usuario@ejemplo.com",disabled:i}),m.email?o.jsx("p",{className:"mt-1 text-xs text-red-600",children:m.email}):null,t==="create"&&o.jsx("p",{className:"mt-1 text-xs text-lead-500",children:"Las credenciales de acceso se enviarn a este correo"})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"branchId",className:"block text-sm font-medium text-lead-700",children:"Sucursal *"}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{id:"branchId",name:"branchId",value:h.branchId,onChange:N,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 appearance-none ${m.branchId?"border-red-500":"border-lead-300 bg-white"} ${a?"opacity-50":""}`,disabled:i||a,children:[o.jsx("option",{value:"",children:a?"Cargando sucursales...":"Seleccionar sucursal"}),s.map(D=>o.jsx("option",{value:String(D.id),children:D.name},D.id))]}),o.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 mt-1",children:a?o.jsxs("svg",{className:"h-4 w-4 animate-spin text-lead-400",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):o.jsx("svg",{className:"h-4 w-4 text-lead-400",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),m.branchId?o.jsx("p",{className:"mt-1 text-xs text-red-600",children:m.branchId}):null,!a&&s.length===0&&o.jsx("p",{className:"mt-1 text-xs text-yellow-600",children:"No hay sucursales disponibles"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-lead-700",children:"Rol *"}),o.jsx("select",{id:"role",name:"role",value:h.role,onChange:N,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${m.role?"border-red-500":"border-lead-300 bg-white"}`,disabled:i,children:y.map(D=>o.jsx("option",{value:D.value,children:D.label},D.value))}),m.role?o.jsx("p",{className:"mt-1 text-xs text-red-600",children:m.role}):null]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",onClick:c,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors",disabled:i,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded-lg bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-60 transition-all",disabled:i,children:C})]})]})]})}):null},pL=({branches:e,onEdit:t,onDelete:n,busyBranchId:i=null})=>{const s=e.length===0,a=c=>i!=null&&i===c;return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:s?o.jsx("tr",{children:o.jsx("td",{className:"px-4 py-6 text-center text-sm text-lead-600",colSpan:2,children:"No hay sucursales para mostrar."})}):e.map(c=>o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 text-lead-600",children:c.name}),o.jsx("td",{className:"px-4 py-3 text-center align-middle",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>t(c),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",disabled:a(c.id),children:"Editar"}),o.jsx("button",{type:"button",onClick:()=>n(c),className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",disabled:a(c.id),children:"Eliminar"})]})})]},c.id))})]})})},mL=({open:e,mode:t,initialData:n,submitting:i,onClose:s,onSubmit:a})=>{const[c,u]=x.useState(""),[h,p]=x.useState("");x.useEffect(()=>{e&&(u(t==="edit"&&n?n.name:""),p(""))},[e,t,n]);const m=g=>{if(g.preventDefault(),!c.trim()){p("El nombre es requerido");return}a({name:c.trim()})};return e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-md overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t==="create"?"Nueva Sucursal":"Editar Sucursal"}),o.jsx("button",{onClick:s,className:"rounded-full p-1 text-brand-100 hover:text-white hover:bg-brand-700 transition-colors",disabled:i,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("form",{onSubmit:m,className:"space-y-5 px-6 py-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:"Nombre de la Sucursal *"}),o.jsx("input",{type:"text",id:"name",value:c,onChange:g=>{u(g.target.value),h&&p("")},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${h?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),h&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:h})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",className:"rounded bg-white px-4 py-2 text-sm font-medium text-lead-700 border border-lead-300 hover:bg-lead-100 transition-colors",onClick:s,disabled:i,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:i,children:i?"Guardando...":"Guardar"})]})]})]})}):null},gL=[{value:"all",label:"Todos"},{value:"propietario",label:"Propietarios"},{value:"administrador",label:"Administradores"},{value:"prevendedor",label:"Prevendedores"},{value:"transportista",label:"Transportistas"}],xL=()=>{var ra;const{users:e,isLoading:t,error:n,fetchUsers:i,createUser:s,updateUser:a,updateUserState:c,resetUserPassword:u,clearError:h}=i0(),{branches:p,branchMap:m,isLoading:g,error:b,fetchBranches:S,createBranch:w,updateBranch:k,updateBranchState:C}=yu(),_=Zn(),[y,N]=x.useState(!1),[E,P]=x.useState("create"),[M,I]=x.useState(null),[D,K]=x.useState(!1),[F,Z]=x.useState(!1),[W,ae]=x.useState(!1),[Y,re]=x.useState(null),[H,Q]=x.useState(!1),[O,G]=x.useState(!1),[U,$]=x.useState(null),[ne,X]=x.useState(null),[se,ee]=x.useState(""),[le,A]=x.useState("all"),[fe,_e]=x.useState("users"),[ve,Ie]=x.useState(!1),[Ve,Ue]=x.useState("create"),[Ct,te]=x.useState(null),[Ce,vn]=x.useState(!1),[yn,$n]=x.useState(!1),[Wn,_n]=x.useState(!1),[bn,wn]=x.useState(null),vr=x.useCallback(async()=>{await Promise.all([i(),S()])},[i,S]);x.useEffect(()=>{vr()},[vr]),x.useEffect(()=>{n&&(_.error(n.message),h())},[n,_,h]),x.useEffect(()=>{b&&_.error(`Error cargando sucursales: ${b.message}`)},[b,_]);const Ln=jt(),an=x.useMemo(()=>{const de=Array.isArray(e)?e.filter(Boolean):[],Se=se.trim().toLowerCase();return[...de.filter(St=>{const kn=Se.length===0||(St.userName??"").toLowerCase().includes(Se)||`${St.names??""} ${St.lastName??""}`.toLowerCase().includes(Se)||(St.secondLastName??"").toLowerCase().includes(Se),zt=le==="all"||St.role===le;return kn&&zt})].sort((St,kn)=>{const zt=(St.lastName||"").toLowerCase(),sa=(kn.lastName||"").toLowerCase();if(zt!==sa)return zt.localeCompare(sa);const Et=(St.secondLastName||"").toLowerCase(),he=(kn.secondLastName||"").toLowerCase();return Et!==he?Et.localeCompare(he):(St.names||"").toLowerCase().localeCompare((kn.names||"").toLowerCase())})},[le,se,e]),Wr=x.useMemo(()=>[...Array.isArray(p)?p.filter(Boolean):[]].sort((Se,At)=>(Se.name||"").localeCompare(At.name||"")),[p]),yr=x.useMemo(()=>{const de=Array.isArray(e)?e.filter(Boolean):[],Se=de.length,At=de.filter(zt=>zt.role==="administrador").length,St=de.filter(zt=>zt.role==="prevendedor").length,kn=de.filter(zt=>zt.role==="transportista").length;return{cards:[{label:"Total de usuarios",value:Se,accent:"from-brand-900 to-brand-600"},{label:"Admins",value:At,accent:"from-brand-500 to-brand-300"}],roleBreakdown:[{label:"Prevendedores",value:St},{label:"Transportistas",value:kn}]}},[e]),Us=()=>{P("create"),I(null),N(!0)},Vr=()=>{Ue("create"),te(null),Ie(!0)},Gr=de=>{P("edit"),I(de),N(!0)},Hs=de=>{Ue("edit"),te(de),Ie(!0)},qr=()=>{D||(N(!1),I(null))},_r=()=>{Ce||(Ie(!1),te(null))},Kr=async de=>{K(!0);try{E==="create"?await s({ci:de.ci,names:de.names,lastName:de.lastName,secondLastName:de.secondLastName??null,role:de.role,branchId:de.branchId,email:de.email})&&(_.success("Usuario creado correctamente. Las credenciales se enviarn por correo."),N(!1),I(null)):M&&await a(M.id,{ci:de.ci,names:de.names,lastName:de.lastName,secondLastName:de.secondLastName??null,role:de.role,branchId:de.branchId,email:de.email||void 0})&&(_.success("Usuario actualizado correctamente"),N(!1),I(null))}catch(Se){const At=Se instanceof Error?Se.message:"No se pudo guardar el usuario";_.error(At)}finally{K(!1)}},Zs=de=>{re(de),Z(!0)},Nn=de=>{wn(de),$n(!0)},$s=de=>{$(de),Q(!0)},pe=()=>{W||(Z(!1),re(null))},tt=()=>{Wn||($n(!1),wn(null))},Ot=async()=>{if(!(!Y||!Ln.user)){ae(!0),X(Y.id);try{await c(Y.id,!1,Ln.user.id)&&_.success(`Usuario "${Y.userName}" eliminado correctamente`),Z(!1),re(null)}catch(de){const Se=de instanceof Error?de.message:"Accin no completada";_.error(Se)}finally{ae(!1),X(null)}}},at=async()=>{if(bn){_n(!0);try{await C(bn.id,!1)&&_.success(`Sucursal "${bn.name}" eliminada correctamente`),$n(!1),wn(null)}catch(de){const Se=de instanceof Error?de.message:"Accin no completada";_.error(Se)}finally{_n(!1)}}},br=()=>{O||(Q(!1),$(null))},Ws=async()=>{if(U){G(!0),X(U.id);try{if(await u(U.id))_.success(`Contrasea reseteada para ${U.userName}`);else throw new Error("No se pudo resetear la contrasea");Q(!1),$(null)}catch(de){const Se=de instanceof Error?de.message:"No se pudo resetear la contrasea";_.error(Se)}finally{G(!1),X(null)}}},ll=async de=>{vn(!0);try{Ve==="create"?await w({name:de.name})&&(_.success("Sucursal creada correctamente"),Ie(!1)):Ct&&await k(Ct.id,{name:de.name})&&(_.success("Sucursal actualizada correctamente"),Ie(!1),te(null))}catch(Se){const At=Se instanceof Error?Se.message:"No se pudo guardar la sucursal";_.error(At)}finally{vn(!1)}};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),o.jsxs("div",{className:"relative space-y-10 px-6 py-8 lg:px-10 lg:py-12",children:[o.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),o.jsxs("div",{className:"grid gap-10 px-8 py-10 md:px-12 lg:grid-cols-[2fr,1.2fr]",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Panel de Usuarios"}),o.jsx("h2",{className:"text-3xl font-semibold leading-tight md:text-4xl",children:"Gestiona usuarios y accesos centralizados"}),o.jsxs("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:[o.jsx("div",{className:"flex flex-col gap-3 md:flex-row",children:o.jsx("input",{className:"input-plain flex-1",placeholder:"Buscar por nombre, rol o usuario",value:se,onChange:de=>ee(de.target.value)})}),o.jsx("div",{className:"flex flex-wrap gap-3",children:gL.map(de=>o.jsx("button",{type:"button",onClick:()=>A(de.value),className:`rounded-full px-4 py-2 text-sm font-semibold transition ${le===de.value?"bg-lead-50 text-brand-700 shadow-lg":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:de.label},de.value))})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-[2rem] bg-white/10 blur-xl"}),o.jsxs("div",{className:"relative space-y-5 rounded-[2rem] border border-white/20 bg-white/10 px-7 py-8 backdrop-blur",children:[o.jsx("div",{className:"grid grid-cols-2 gap-4",children:yr.cards.map(de=>o.jsxs("div",{className:`rounded-2xl bg-gradient-to-br ${de.accent} px-4 py-5 shadow-lg`,children:[o.jsx("p",{className:"text-xs uppercase tracking-wide text-white/80",children:de.label}),o.jsx("p",{className:"mt-2 text-3xl font-semibold text-white",children:de.value})]},de.label))}),o.jsxs("div",{className:"space-y-2 rounded-xl border border-white/20 bg-white/10 p-4 text-sm text-white/80",children:[o.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Roles operativos"}),yr.roleBreakdown.map(de=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:de.label}),o.jsx("span",{className:"font-semibold text-white",children:de.value})]},de.label))]})]})]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${fe==="users"?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>_e("users"),children:"Usuarios"}),o.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition shadow ${fe==="branches"?"bg-white text-brand-700 ring-2 ring-brand-200":"bg-white/70 text-lead-600 hover:bg-white"}`,onClick:()=>_e("branches"),children:"Sucursales"})]}),o.jsx("section",{className:"grid gap-8 xl:grid-cols-[1fr]",children:fe==="users"?o.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de usuarios"}),o.jsxs("p",{className:"text-sm text-lead-500",children:[an.length," usuario(s) coinciden con el filtro."]})]}),o.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",onClick:Us,children:"Crear usuario"})]}),t?o.jsx(xn,{}):o.jsx(uL,{users:an,branchMap:m,currentUserRole:((ra=Ln.user)==null?void 0:ra.role)||"",onEdit:Gr,onDeactivate:Zs,onResetPassword:$s,showResetButton:!0,busyUserId:ne})]}):o.jsxs("div",{className:"card shadow-xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-900",children:"Listado de sucursales"}),o.jsxs("p",{className:"text-sm text-lead-500",children:[p.length," sucursal(es) registradas."]})]}),o.jsx("button",{type:"button",className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2",onClick:Vr,children:"Crear sucursal"})]}),g?o.jsx(xn,{}):o.jsx(pL,{branches:Wr,onEdit:Hs,onDelete:Nn})]})})]})]}),o.jsx(fL,{open:y,mode:E,initialUser:M,submitting:D,branches:p,branchesLoading:g,onClose:qr,onSubmit:Kr}),o.jsx(mL,{open:ve,mode:Ve,initialData:Ct,submitting:Ce,onClose:_r,onSubmit:ll}),o.jsx(Vt,{open:F,title:"Eliminar usuario",confirmLabel:"Eliminar",onConfirm:Ot,onCancel:pe,disabled:W}),o.jsx(Vt,{open:H,title:"Resetear contrasea",description:U?`Quieres que resetees la contrase de "${U.userName}"`:"",confirmLabel:"Si",cancelLabel:"No",onConfirm:Ws,onCancel:br,disabled:O}),o.jsx(Vt,{open:yn,title:"Eliminar sucursal",confirmLabel:"Eliminar",onConfirm:at,onCancel:tt,disabled:Wn}),o.jsx($r,{toasts:_.toasts,onDismiss:_.dismissToast})]})},vL=()=>{var s,a;const{user:e}=jt(),{getBranchNameById:t,branches:n,fetchBranches:i}=yu();return pn.useEffect(()=>{(!n||n.length===0)&&i().catch(()=>{})},[n,i]),e?o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"rounded-xl overflow-hidden shadow-lg",children:[o.jsx("div",{className:"px-6 py-8 bg-gradient-to-br from-brand-900 via-accent-600 to-lead-700 text-white",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-white/10 text-3xl font-bold",children:e.names?e.names.charAt(0):"U"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm uppercase tracking-wider text-white/80",children:"Mi cuenta"}),o.jsxs("h3",{className:"text-2xl font-bold",children:[e.names," ",e.lastName]}),o.jsx("p",{className:"mt-1 text-sm text-white/80",children:(s=e.role)==null?void 0:s.replace(/_/g," ")})]})]})}),o.jsx("div",{className:"p-4 bg-white",children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"rounded-md border border-lead-100 p-3 text-center",children:[o.jsx("div",{className:"text-sm text-lead-500",children:"Sucursal"}),o.jsx("div",{className:"mt-1 font-semibold text-lead-800",children:t(e.branchId??null)||"-"})]}),o.jsxs("div",{className:"rounded-md border border-lead-100 p-3 text-center",children:[o.jsx("div",{className:"text-sm text-lead-500",children:"Cdula"}),o.jsx("div",{className:"mt-1 font-semibold text-lead-800",children:e.ci})]})]})})]})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"rounded-xl bg-white shadow-lg border border-lead-100 overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-6 border-b border-lead-100 bg-gradient-to-r from-blue-50 via-accent-50 to-gray-50",children:[o.jsx("h2",{className:"text-lg font-bold text-lead-900",children:"Detalles de la cuenta"}),o.jsx("p",{className:"text-sm text-lead-500",children:"Informacin personal visible en el sistema"})]}),o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"overflow-hidden rounded-md border border-lead-100",children:o.jsxs("table",{className:"w-full table-auto",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-blue-600",children:[o.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-white rounded-tl-md",children:"Detalle"}),o.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-white rounded-tr-md",children:"Valor"})]})}),o.jsxs("tbody",{className:"divide-y divide-lead-100",children:[o.jsxs("tr",{className:"bg-white",children:[o.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700 w-1/3",children:"Usuario"}),o.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.userName})]}),o.jsxs("tr",{className:"bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Nombres"}),o.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.names})]}),o.jsxs("tr",{className:"bg-white",children:[o.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Primer apellido"}),o.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.lastName})]}),o.jsxs("tr",{className:"bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Segundo apellido"}),o.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.secondLastName??"-"})]}),o.jsxs("tr",{className:"bg-white",children:[o.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Cdula (CI)"}),o.jsx("td",{className:"px-6 py-4 text-lead-600",children:e.ci})]}),o.jsxs("tr",{className:"bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Rol"}),o.jsx("td",{className:"px-6 py-4 text-lead-600",children:(a=e.role)==null?void 0:a.replace(/_/g," ")})]}),o.jsxs("tr",{className:"bg-white",children:[o.jsx("td",{className:"px-6 py-4 font-semibold text-lead-700",children:"Sucursal"}),o.jsx("td",{className:"px-6 py-4 text-lead-600",children:t(e.branchId??null)||"-"})]})]})]})})})]})})]})}):o.jsx("div",{className:"p-6",children:"No se encontr el usuario."})};var pd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(bx,function(n){var i="1.9.4";function s(r){var l,d,f,v;for(d=1,f=arguments.length;d<f;d++){v=arguments[d];for(l in v)r[l]=v[l]}return r}var a=Object.create||function(){function r(){}return function(l){return r.prototype=l,new r}}();function c(r,l){var d=Array.prototype.slice;if(r.bind)return r.bind.apply(r,d.call(arguments,1));var f=d.call(arguments,2);return function(){return r.apply(l,f.length?f.concat(d.call(arguments)):arguments)}}var u=0;function h(r){return"_leaflet_id"in r||(r._leaflet_id=++u),r._leaflet_id}function p(r,l,d){var f,v,j,T;return T=function(){f=!1,v&&(j.apply(d,v),v=!1)},j=function(){f?v=arguments:(r.apply(d,arguments),setTimeout(T,l),f=!0)},j}function m(r,l,d){var f=l[1],v=l[0],j=f-v;return r===f&&d?r:((r-v)%j+j)%j+v}function g(){return!1}function b(r,l){if(l===!1)return r;var d=Math.pow(10,l===void 0?6:l);return Math.round(r*d)/d}function S(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function w(r){return S(r).split(/\s+/)}function k(r,l){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var d in l)r.options[d]=l[d];return r.options}function C(r,l,d){var f=[];for(var v in r)f.push(encodeURIComponent(d?v.toUpperCase():v)+"="+encodeURIComponent(r[v]));return(!l||l.indexOf("?")===-1?"?":"&")+f.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function y(r,l){return r.replace(_,function(d,f){var v=l[f];if(v===void 0)throw new Error("No value provided for variable "+d);return typeof v=="function"&&(v=v(l)),v})}var N=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function E(r,l){for(var d=0;d<r.length;d++)if(r[d]===l)return d;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var I=0;function D(r){var l=+new Date,d=Math.max(0,16-(l-I));return I=l+d,window.setTimeout(r,d)}var K=window.requestAnimationFrame||M("RequestAnimationFrame")||D,F=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function Z(r,l,d){if(d&&K===D)r.call(l);else return K.call(window,c(r,l))}function W(r){r&&F.call(window,r)}var ae={__proto__:null,extend:s,create:a,bind:c,get lastId(){return u},stamp:h,throttle:p,wrapNum:m,falseFn:g,formatNum:b,trim:S,splitWords:w,setOptions:k,getParamString:C,template:y,isArray:N,indexOf:E,emptyImageUrl:P,requestFn:K,cancelFn:F,requestAnimFrame:Z,cancelAnimFrame:W};function Y(){}Y.extend=function(r){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,f=a(d);f.constructor=l,l.prototype=f;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return r.statics&&s(l,r.statics),r.includes&&(re(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=d.options?a(d.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,T=f._initHooks.length;j<T;j++)f._initHooks[j].call(this)}},l},Y.include=function(r){var l=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=l,this.mergeOptions(r.options)),this},Y.mergeOptions=function(r){return s(this.prototype.options,r),this},Y.addInitHook=function(r){var l=Array.prototype.slice.call(arguments,1),d=typeof r=="function"?r:function(){this[r].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function re(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=N(r)?r:[r];for(var l=0;l<r.length;l++)r[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(r,l,d){if(typeof r=="object")for(var f in r)this._on(f,r[f],l);else{r=w(r);for(var v=0,j=r.length;v<j;v++)this._on(r[v],l,d)}return this},off:function(r,l,d){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],l);else{r=w(r);for(var v=arguments.length===1,j=0,T=r.length;j<T;j++)v?this._off(r[j]):this._off(r[j],l,d)}return this},_on:function(r,l,d,f){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(r,l,d)===!1){d===this&&(d=void 0);var v={fn:l,ctx:d};f&&(v.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(v)}},_off:function(r,l,d){var f,v,j;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(v=0,j=f.length;v<j;v++)f[v].fn=g;delete this._events[r];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var T=this._listens(r,l,d);if(T!==!1){var R=f[T];this._firingCount&&(R.fn=g,this._events[r]=f=f.slice()),f.splice(T,1)}}},fire:function(r,l,d){if(!this.listens(r,d))return this;var f=s({},l,{type:r,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[r];if(v){this._firingCount=this._firingCount+1||1;for(var j=0,T=v.length;j<T;j++){var R=v[j],z=R.fn;R.once&&this.off(r,z,R.ctx),z.call(R.ctx||this,f)}this._firingCount--}}return d&&this._propagateEvent(f),this},listens:function(r,l,d,f){typeof r!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(f=!!l,v=void 0,d=void 0);var j=this._events&&this._events[r];if(j&&j.length&&this._listens(r,v,d)!==!1)return!0;if(f){for(var T in this._eventParents)if(this._eventParents[T].listens(r,l,d,f))return!0}return!1},_listens:function(r,l,d){if(!this._events)return!1;var f=this._events[r]||[];if(!l)return!!f.length;d===this&&(d=void 0);for(var v=0,j=f.length;v<j;v++)if(f[v].fn===l&&f[v].ctx===d)return v;return!1},once:function(r,l,d){if(typeof r=="object")for(var f in r)this._on(f,r[f],l,!0);else{r=w(r);for(var v=0,j=r.length;v<j;v++)this._on(r[v],l,d,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[h(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[h(r)],this},_propagateEvent:function(r){for(var l in this._eventParents)this._eventParents[l].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var Q=Y.extend(H);function O(r,l,d){this.x=d?Math.round(r):r,this.y=d?Math.round(l):l}var G=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(r){return this.clone()._add(U(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(U(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new O(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new O(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(r){r=U(r);var l=r.x-this.x,d=r.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(r){return r=U(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=U(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function U(r,l,d){return r instanceof O?r:N(r)?new O(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new O(r.x,r.y):new O(r,l,d)}function $(r,l){if(r)for(var d=l?[r,l]:r,f=0,v=d.length;f<v;f++)this.extend(d[f])}$.prototype={extend:function(r){var l,d;if(!r)return this;if(r instanceof O||typeof r[0]=="number"||"x"in r)l=d=U(r);else if(r=ne(r),l=r.min,d=r.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(r){return U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return U(this.min.x,this.max.y)},getTopRight:function(){return U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var l,d;return typeof r[0]=="number"||r instanceof O?r=U(r):r=ne(r),r instanceof $?(l=r.min,d=r.max):l=d=r,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(r){r=ne(r);var l=this.min,d=this.max,f=r.min,v=r.max,j=v.x>=l.x&&f.x<=d.x,T=v.y>=l.y&&f.y<=d.y;return j&&T},overlaps:function(r){r=ne(r);var l=this.min,d=this.max,f=r.min,v=r.max,j=v.x>l.x&&f.x<d.x,T=v.y>l.y&&f.y<d.y;return j&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var l=this.min,d=this.max,f=Math.abs(l.x-d.x)*r,v=Math.abs(l.y-d.y)*r;return ne(U(l.x-f,l.y-v),U(d.x+f,d.y+v))},equals:function(r){return r?(r=ne(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ne(r,l){return!r||r instanceof $?r:new $(r,l)}function X(r,l){if(r)for(var d=l?[r,l]:r,f=0,v=d.length;f<v;f++)this.extend(d[f])}X.prototype={extend:function(r){var l=this._southWest,d=this._northEast,f,v;if(r instanceof ee)f=r,v=r;else if(r instanceof X){if(f=r._southWest,v=r._northEast,!f||!v)return this}else return r?this.extend(le(r)||se(r)):this;return!l&&!d?(this._southWest=new ee(f.lat,f.lng),this._northEast=new ee(v.lat,v.lng)):(l.lat=Math.min(f.lat,l.lat),l.lng=Math.min(f.lng,l.lng),d.lat=Math.max(v.lat,d.lat),d.lng=Math.max(v.lng,d.lng)),this},pad:function(r){var l=this._southWest,d=this._northEast,f=Math.abs(l.lat-d.lat)*r,v=Math.abs(l.lng-d.lng)*r;return new X(new ee(l.lat-f,l.lng-v),new ee(d.lat+f,d.lng+v))},getCenter:function(){return new ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ee||"lat"in r?r=le(r):r=se(r);var l=this._southWest,d=this._northEast,f,v;return r instanceof X?(f=r.getSouthWest(),v=r.getNorthEast()):f=v=r,f.lat>=l.lat&&v.lat<=d.lat&&f.lng>=l.lng&&v.lng<=d.lng},intersects:function(r){r=se(r);var l=this._southWest,d=this._northEast,f=r.getSouthWest(),v=r.getNorthEast(),j=v.lat>=l.lat&&f.lat<=d.lat,T=v.lng>=l.lng&&f.lng<=d.lng;return j&&T},overlaps:function(r){r=se(r);var l=this._southWest,d=this._northEast,f=r.getSouthWest(),v=r.getNorthEast(),j=v.lat>l.lat&&f.lat<d.lat,T=v.lng>l.lng&&f.lng<d.lng;return j&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,l){return r?(r=se(r),this._southWest.equals(r.getSouthWest(),l)&&this._northEast.equals(r.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(r,l){return r instanceof X?r:new X(r,l)}function ee(r,l,d){if(isNaN(r)||isNaN(l))throw new Error("Invalid LatLng object: ("+r+", "+l+")");this.lat=+r,this.lng=+l,d!==void 0&&(this.alt=+d)}ee.prototype={equals:function(r,l){if(!r)return!1;r=le(r);var d=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return d<=(l===void 0?1e-9:l)},toString:function(r){return"LatLng("+b(this.lat,r)+", "+b(this.lng,r)+")"},distanceTo:function(r){return fe.distance(this,le(r))},wrap:function(){return fe.wrapLatLng(this)},toBounds:function(r){var l=180*r/40075017,d=l/Math.cos(Math.PI/180*this.lat);return se([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new ee(this.lat,this.lng,this.alt)}};function le(r,l,d){return r instanceof ee?r:N(r)&&typeof r[0]!="object"?r.length===3?new ee(r[0],r[1],r[2]):r.length===2?new ee(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ee(r.lat,"lng"in r?r.lng:r.lon,r.alt):l===void 0?null:new ee(r,l,d)}var A={latLngToPoint:function(r,l){var d=this.projection.project(r),f=this.scale(l);return this.transformation._transform(d,f)},pointToLatLng:function(r,l){var d=this.scale(l),f=this.transformation.untransform(r,d);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(r),f=this.transformation.transform(l.min,d),v=this.transformation.transform(l.max,d);return new $(f,v)},infinite:!1,wrapLatLng:function(r){var l=this.wrapLng?m(r.lng,this.wrapLng,!0):r.lng,d=this.wrapLat?m(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new ee(d,l,f)},wrapLatLngBounds:function(r){var l=r.getCenter(),d=this.wrapLatLng(l),f=l.lat-d.lat,v=l.lng-d.lng;if(f===0&&v===0)return r;var j=r.getSouthWest(),T=r.getNorthEast(),R=new ee(j.lat-f,j.lng-v),z=new ee(T.lat-f,T.lng-v);return new X(R,z)}},fe=s({},A,{wrapLng:[-180,180],R:6371e3,distance:function(r,l){var d=Math.PI/180,f=r.lat*d,v=l.lat*d,j=Math.sin((l.lat-r.lat)*d/2),T=Math.sin((l.lng-r.lng)*d/2),R=j*j+Math.cos(f)*Math.cos(v)*T*T,z=2*Math.atan2(Math.sqrt(R),Math.sqrt(1-R));return this.R*z}}),_e=6378137,ve={R:_e,MAX_LATITUDE:85.0511287798,project:function(r){var l=Math.PI/180,d=this.MAX_LATITUDE,f=Math.max(Math.min(d,r.lat),-d),v=Math.sin(f*l);return new O(this.R*r.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(r){var l=180/Math.PI;return new ee((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*l,r.x*l/this.R)},bounds:function(){var r=_e*Math.PI;return new $([-r,-r],[r,r])}()};function Ie(r,l,d,f){if(N(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=l,this._c=d,this._d=f}Ie.prototype={transform:function(r,l){return this._transform(r.clone(),l)},_transform:function(r,l){return l=l||1,r.x=l*(this._a*r.x+this._b),r.y=l*(this._c*r.y+this._d),r},untransform:function(r,l){return l=l||1,new O((r.x/l-this._b)/this._a,(r.y/l-this._d)/this._c)}};function Ve(r,l,d,f){return new Ie(r,l,d,f)}var Ue=s({},fe,{code:"EPSG:3857",projection:ve,transformation:function(){var r=.5/(Math.PI*ve.R);return Ve(r,.5,-r,.5)}()}),Ct=s({},Ue,{code:"EPSG:900913"});function te(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Ce(r,l){var d="",f,v,j,T,R,z;for(f=0,j=r.length;f<j;f++){for(R=r[f],v=0,T=R.length;v<T;v++)z=R[v],d+=(v?"L":"M")+z.x+" "+z.y;d+=l?he.svg?"z":"x":""}return d||"M0 0"}var vn=document.documentElement.style,yn="ActiveXObject"in window,$n=yn&&!document.addEventListener,Wn="msLaunchUri"in navigator&&!("documentMode"in document),_n=Et("webkit"),bn=Et("android"),wn=Et("android 2")||Et("android 3"),vr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ln=bn&&Et("Google")&&vr<537&&!("AudioNode"in window),an=!!window.opera,Wr=!Wn&&Et("chrome"),yr=Et("gecko")&&!_n&&!an&&!yn,Us=!Wr&&Et("safari"),Vr=Et("phantom"),Gr="OTransition"in vn,Hs=navigator.platform.indexOf("Win")===0,qr=yn&&"transition"in vn,_r="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wn,Kr="MozPerspective"in vn,Zs=!window.L_DISABLE_3D&&(qr||_r||Kr)&&!Gr&&!Vr,Nn=typeof orientation<"u"||Et("mobile"),$s=Nn&&_n,pe=Nn&&_r,tt=!window.PointerEvent&&window.MSPointerEvent,Ot=!!(window.PointerEvent||tt),at="ontouchstart"in window||!!window.TouchEvent,br=!window.L_NO_TOUCH&&(at||Ot),Ws=Nn&&an,ll=Nn&&yr,ra=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,de=function(){var r=!1;try{var l=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return r}(),Se=function(){return!!document.createElement("canvas").getContext}(),At=!!(document.createElementNS&&te("svg").createSVGRect),St=!!At&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),kn=!At&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var l=r.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),zt=navigator.platform.indexOf("Mac")===0,sa=navigator.platform.indexOf("Linux")===0;function Et(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var he={ie:yn,ielt9:$n,edge:Wn,webkit:_n,android:bn,android23:wn,androidStock:Ln,opera:an,chrome:Wr,gecko:yr,safari:Us,phantom:Vr,opera12:Gr,win:Hs,ie3d:qr,webkit3d:_r,gecko3d:Kr,any3d:Zs,mobile:Nn,mobileWebkit:$s,mobileWebkit3d:pe,msPointer:tt,pointer:Ot,touch:br,touchNative:at,mobileOpera:Ws,mobileGecko:ll,retina:ra,passiveEvents:de,canvas:Se,svg:At,vml:kn,inlineSvg:St,mac:zt,linux:sa},_u=he.msPointer?"MSPointerDown":"pointerdown",bu=he.msPointer?"MSPointerMove":"pointermove",wu=he.msPointer?"MSPointerUp":"pointerup",Lu=he.msPointer?"MSPointerCancel":"pointercancel",cl={touchstart:_u,touchmove:bu,touchend:wu,touchcancel:Lu},Nu={touchstart:v0,touchmove:ia,touchend:ia,touchcancel:ia},Qr={},ku=!1;function f0(r,l,d){return l==="touchstart"&&x0(),Nu[l]?(d=Nu[l].bind(this,d),r.addEventListener(cl[l],d,!1),d):(console.warn("wrong event specified:",l),g)}function p0(r,l,d){if(!cl[l]){console.warn("wrong event specified:",l);return}r.removeEventListener(cl[l],d,!1)}function m0(r){Qr[r.pointerId]=r}function g0(r){Qr[r.pointerId]&&(Qr[r.pointerId]=r)}function ju(r){delete Qr[r.pointerId]}function x0(){ku||(document.addEventListener(_u,m0,!0),document.addEventListener(bu,g0,!0),document.addEventListener(wu,ju,!0),document.addEventListener(Lu,ju,!0),ku=!0)}function ia(r,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Qr)l.touches.push(Qr[d]);l.changedTouches=[l],r(l)}}function v0(r,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&nt(l),ia(r,l)}function y0(r){var l={},d,f;for(f in r)d=r[f],l[f]=d&&d.bind?d.bind(r):d;return r=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var _0=200;function b0(r,l){r.addEventListener("dblclick",l);var d=0,f;function v(j){if(j.detail!==1){f=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var T=Tu(j);if(!(T.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!T.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var R=Date.now();R-d<=_0?(f++,f===2&&l(y0(j))):f=1,d=R}}}return r.addEventListener("click",v),{dblclick:l,simDblclick:v}}function w0(r,l){r.removeEventListener("dblclick",l.dblclick),r.removeEventListener("click",l.simDblclick)}var dl=la(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Vs=la(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Cu=Vs==="webkitTransition"||Vs==="OTransition"?Vs+"End":"transitionend";function Su(r){return typeof r=="string"?document.getElementById(r):r}function Gs(r,l){var d=r.style[l]||r.currentStyle&&r.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);d=f?f[l]:null}return d==="auto"?null:d}function ke(r,l,d){var f=document.createElement(r);return f.className=l||"",d&&d.appendChild(f),f}function Oe(r){var l=r.parentNode;l&&l.removeChild(r)}function aa(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Yr(r){var l=r.parentNode;l&&l.lastChild!==r&&l.appendChild(r)}function Xr(r){var l=r.parentNode;l&&l.firstChild!==r&&l.insertBefore(r,l.firstChild)}function ul(r,l){if(r.classList!==void 0)return r.classList.contains(l);var d=oa(r);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function ye(r,l){if(r.classList!==void 0)for(var d=w(l),f=0,v=d.length;f<v;f++)r.classList.add(d[f]);else if(!ul(r,l)){var j=oa(r);hl(r,(j?j+" ":"")+l)}}function $e(r,l){r.classList!==void 0?r.classList.remove(l):hl(r,S((" "+oa(r)+" ").replace(" "+l+" "," ")))}function hl(r,l){r.className.baseVal===void 0?r.className=l:r.className.baseVal=l}function oa(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Bt(r,l){"opacity"in r.style?r.style.opacity=l:"filter"in r.style&&L0(r,l)}function L0(r,l){var d=!1,f="DXImageTransform.Microsoft.Alpha";try{d=r.filters.item(f)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):r.style.filter+=" progid:"+f+"(opacity="+l+")"}function la(r){for(var l=document.documentElement.style,d=0;d<r.length;d++)if(r[d]in l)return r[d];return!1}function wr(r,l,d){var f=l||new O(0,0);r.style[dl]=(he.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(d?" scale("+d+")":"")}function Ge(r,l){r._leaflet_pos=l,he.any3d?wr(r,l):(r.style.left=l.x+"px",r.style.top=l.y+"px")}function Lr(r){return r._leaflet_pos||new O(0,0)}var qs,Ks,fl;if("onselectstart"in document)qs=function(){ge(window,"selectstart",nt)},Ks=function(){Ee(window,"selectstart",nt)};else{var Qs=la(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qs=function(){if(Qs){var r=document.documentElement.style;fl=r[Qs],r[Qs]="none"}},Ks=function(){Qs&&(document.documentElement.style[Qs]=fl,fl=void 0)}}function pl(){ge(window,"dragstart",nt)}function ml(){Ee(window,"dragstart",nt)}var ca,gl;function xl(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(da(),ca=r,gl=r.style.outlineStyle,r.style.outlineStyle="none",ge(window,"keydown",da))}function da(){ca&&(ca.style.outlineStyle=gl,ca=void 0,gl=void 0,Ee(window,"keydown",da))}function Eu(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function vl(r){var l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}var N0={__proto__:null,TRANSFORM:dl,TRANSITION:Vs,TRANSITION_END:Cu,get:Su,getStyle:Gs,create:ke,remove:Oe,empty:aa,toFront:Yr,toBack:Xr,hasClass:ul,addClass:ye,removeClass:$e,setClass:hl,getClass:oa,setOpacity:Bt,testProp:la,setTransform:wr,setPosition:Ge,getPosition:Lr,get disableTextSelection(){return qs},get enableTextSelection(){return Ks},disableImageDrag:pl,enableImageDrag:ml,preventOutline:xl,restoreOutline:da,getSizedParentNode:Eu,getScale:vl};function ge(r,l,d,f){if(l&&typeof l=="object")for(var v in l)_l(r,v,l[v],d);else{l=w(l);for(var j=0,T=l.length;j<T;j++)_l(r,l[j],d,f)}return this}var on="_leaflet_events";function Ee(r,l,d,f){if(arguments.length===1)Pu(r),delete r[on];else if(l&&typeof l=="object")for(var v in l)bl(r,v,l[v],d);else if(l=w(l),arguments.length===2)Pu(r,function(R){return E(l,R)!==-1});else for(var j=0,T=l.length;j<T;j++)bl(r,l[j],d,f);return this}function Pu(r,l){for(var d in r[on]){var f=d.split(/\d/)[0];(!l||l(f))&&bl(r,f,null,null,d)}}var yl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function _l(r,l,d,f){var v=l+h(d)+(f?"_"+h(f):"");if(r[on]&&r[on][v])return this;var j=function(R){return d.call(f||r,R||window.event)},T=j;!he.touchNative&&he.pointer&&l.indexOf("touch")===0?j=f0(r,l,j):he.touch&&l==="dblclick"?j=b0(r,j):"addEventListener"in r?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?r.addEventListener(yl[l]||l,j,he.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(j=function(R){R=R||window.event,Ll(r,R)&&T(R)},r.addEventListener(yl[l],j,!1)):r.addEventListener(l,T,!1):r.attachEvent("on"+l,j),r[on]=r[on]||{},r[on][v]=j}function bl(r,l,d,f,v){v=v||l+h(d)+(f?"_"+h(f):"");var j=r[on]&&r[on][v];if(!j)return this;!he.touchNative&&he.pointer&&l.indexOf("touch")===0?p0(r,l,j):he.touch&&l==="dblclick"?w0(r,j):"removeEventListener"in r?r.removeEventListener(yl[l]||l,j,!1):r.detachEvent("on"+l,j),r[on][v]=null}function Nr(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function wl(r){return _l(r,"wheel",Nr),this}function Ys(r){return ge(r,"mousedown touchstart dblclick contextmenu",Nr),r._leaflet_disable_click=!0,this}function nt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function kr(r){return nt(r),Nr(r),this}function Tu(r){if(r.composedPath)return r.composedPath();for(var l=[],d=r.target;d;)l.push(d),d=d.parentNode;return l}function Mu(r,l){if(!l)return new O(r.clientX,r.clientY);var d=vl(l),f=d.boundingClientRect;return new O((r.clientX-f.left)/d.x-l.clientLeft,(r.clientY-f.top)/d.y-l.clientTop)}var k0=he.linux&&he.chrome?window.devicePixelRatio:he.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Iu(r){return he.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/k0:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Ll(r,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==r;)d=d.parentNode}catch{return!1}return d!==r}var j0={__proto__:null,on:ge,off:Ee,stopPropagation:Nr,disableScrollPropagation:wl,disableClickPropagation:Ys,preventDefault:nt,stop:kr,getPropagationPath:Tu,getMousePosition:Mu,getWheelDelta:Iu,isExternalTarget:Ll,addListener:ge,removeListener:Ee},Ru=Q.extend({run:function(r,l,d,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Lr(r),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Z(this._animate,this),this._step()},_step:function(r){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),r):(this._runFrame(1),this._complete())},_runFrame:function(r,l){var d=this._startPos.add(this._offset.multiplyBy(r));l&&d._round(),Ge(this._el,d),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Le=Q.extend({options:{crs:Ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(le(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Vs&&he.any3d&&!he.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ge(this._proxy,Cu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),r=this._limitCenter(le(r),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=s({animate:d.animate},d.zoom),d.pan=s({animate:d.animate,duration:d.duration},d.pan));var f=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,l,d.zoom):this._tryAnimatedPan(r,d.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(r,l){return this._loaded?this.setView(this.getCenter(),r,{zoom:l}):(this._zoom=r,this)},zoomIn:function(r,l){return r=r||(he.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,l)},zoomOut:function(r,l){return r=r||(he.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,l)},setZoomAround:function(r,l,d){var f=this.getZoomScale(l),v=this.getSize().divideBy(2),j=r instanceof O?r:this.latLngToContainerPoint(r),T=j.subtract(v).multiplyBy(1-1/f),R=this.containerPointToLatLng(v.add(T));return this.setView(R,l,{zoom:d})},_getBoundsCenterZoom:function(r,l){l=l||{},r=r.getBounds?r.getBounds():se(r);var d=U(l.paddingTopLeft||l.padding||[0,0]),f=U(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(r,!1,d.add(f));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:r.getCenter(),zoom:v};var j=f.subtract(d).divideBy(2),T=this.project(r.getSouthWest(),v),R=this.project(r.getNorthEast(),v),z=this.unproject(T.add(R).divideBy(2).add(j),v);return{center:z,zoom:v}},fitBounds:function(r,l){if(r=se(r),!r.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(r,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,l){return this.setView(r,this._zoom,{pan:l})},panBy:function(r,l){if(r=U(r).round(),l=l||{},!r.x&&!r.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ru,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ye(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,l,d){if(d=d||{},d.animate===!1||!he.any3d)return this.setView(r,l,d);this._stop();var f=this.project(this.getCenter()),v=this.project(r),j=this.getSize(),T=this._zoom;r=le(r),l=l===void 0?T:l;var R=Math.max(j.x,j.y),z=R*this.getZoomScale(T,l),V=v.distanceTo(f)||1,oe=1.42,me=oe*oe;function be(qe){var wa=qe?-1:1,px=qe?z:R,mx=z*z-R*R+wa*me*me*V*V,gx=2*px*me*V,Rl=mx/gx,ph=Math.sqrt(Rl*Rl+1)-Rl,xx=ph<1e-9?-18:Math.log(ph);return xx}function ht(qe){return(Math.exp(qe)-Math.exp(-qe))/2}function Xe(qe){return(Math.exp(qe)+Math.exp(-qe))/2}function Ut(qe){return ht(qe)/Xe(qe)}var vt=be(0);function ss(qe){return R*(Xe(vt)/Xe(vt+oe*qe))}function dx(qe){return R*(Xe(vt)*Ut(vt+oe*qe)-ht(vt))/me}function ux(qe){return 1-Math.pow(1-qe,1.5)}var hx=Date.now(),hh=(be(1)-vt)/oe,fx=d.duration?1e3*d.duration:1e3*hh*.8;function fh(){var qe=(Date.now()-hx)/fx,wa=ux(qe)*hh;qe<=1?(this._flyToFrame=Z(fh,this),this._move(this.unproject(f.add(v.subtract(f).multiplyBy(dx(wa)/V)),T),this.getScaleZoom(R/ss(wa),T),{flyTo:!0})):this._move(r,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),fh.call(this),this},flyToBounds:function(r,l){var d=this._getBoundsCenterZoom(r,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(r){return r=se(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var l=this.options.minZoom;return this.options.minZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var l=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,l){this._enforcingBounds=!0;var d=this.getCenter(),f=this._limitCenter(d,this._zoom,se(r));return d.equals(f)||this.panTo(f,l),this._enforcingBounds=!1,this},panInside:function(r,l){l=l||{};var d=U(l.paddingTopLeft||l.padding||[0,0]),f=U(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),j=this.project(r),T=this.getPixelBounds(),R=ne([T.min.add(d),T.max.subtract(f)]),z=R.getSize();if(!R.contains(j)){this._enforcingBounds=!0;var V=j.subtract(R.getCenter()),oe=R.extend(j).getSize().subtract(z);v.x+=V.x<0?-oe.x:oe.x,v.y+=V.y<0?-oe.y:oe.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),f=l.divideBy(2).round(),v=d.divideBy(2).round(),j=f.subtract(v);return!j.x&&!j.y?this:(r.animate&&r.pan?this.panBy(j):(r.pan&&this._rawPanBy(j),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=c(this._handleGeolocationResponse,this),d=c(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,r):navigator.geolocation.getCurrentPosition(l,d,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var l=r.code,d=r.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var l=r.coords.latitude,d=r.coords.longitude,f=new ee(l,d),v=f.toBounds(r.coords.accuracy*2),j=this._locateOptions;if(j.setView){var T=this.getBoundsZoom(v);this.setView(f,j.maxZoom?Math.min(T,j.maxZoom):T)}var R={latlng:f,bounds:v,timestamp:r.timestamp};for(var z in r.coords)typeof r.coords[z]=="number"&&(R[z]=r.coords[z]);this.fire("locationfound",R)}},addHandler:function(r,l){if(!l)return this;var d=this[r]=new l(this);return this._handlers.push(d),this.options[r]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Oe(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,l){var d="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=ke("div",d,l||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),l=this.unproject(r.getBottomLeft()),d=this.unproject(r.getTopRight());return new X(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,l,d){r=se(r),d=U(d||[0,0]);var f=this.getZoom()||0,v=this.getMinZoom(),j=this.getMaxZoom(),T=r.getNorthWest(),R=r.getSouthEast(),z=this.getSize().subtract(d),V=ne(this.project(R,f),this.project(T,f)).getSize(),oe=he.any3d?this.options.zoomSnap:1,me=z.x/V.x,be=z.y/V.y,ht=l?Math.max(me,be):Math.min(me,be);return f=this.getScaleZoom(ht,f),oe&&(f=Math.round(f/(oe/100))*(oe/100),f=l?Math.ceil(f/oe)*oe:Math.floor(f/oe)*oe),Math.max(v,Math.min(j,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,l){var d=this._getTopLeftPoint(r,l);return new $(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(r)/d.scale(l)},getScaleZoom:function(r,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var f=d.zoom(r*d.scale(l));return isNaN(f)?1/0:f},project:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(le(r),l)},unproject:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(U(r),l)},layerPointToLatLng:function(r){var l=U(r).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(r){var l=this.project(le(r))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(le(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(se(r))},distance:function(r,l){return this.options.crs.distance(le(r),le(l))},containerPointToLayerPoint:function(r){return U(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return U(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var l=this.containerPointToLayerPoint(U(r));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(le(r)))},mouseEventToContainerPoint:function(r){return Mu(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var l=this._container=Su(r);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ge(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&he.any3d,ye(r,"leaflet-container"+(he.touch?" leaflet-touch":"")+(he.retina?" leaflet-retina":"")+(he.ielt9?" leaflet-oldie":"")+(he.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Gs(r,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ge(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ye(r.markerPane,"leaflet-zoom-hide"),ye(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,l,d){Ge(this._mapPane,new O(0,0));var f=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,d)._move(r,l)._moveEnd(v),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,l){return r&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(r,l,d,f){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?d&&d.pinch&&this.fire("zoom",d):((v||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Ge(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[h(this._container)]=this;var l=r?Ee:ge;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),he.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=Z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,l){for(var d=[],f,v=l==="mouseout"||l==="mouseover",j=r.target||r.srcElement,T=!1;j;){if(f=this._targets[h(j)],f&&(l==="click"||l==="preclick")&&this._draggableMoved(f)){T=!0;break}if(f&&f.listens(l,!0)&&(v&&!Ll(j,r)||(d.push(f),v))||j===this._container)break;j=j.parentNode}return!d.length&&!T&&!v&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var l=r.target||r.srcElement;if(!(!this._loaded||l._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(l))){var d=r.type;d==="mousedown"&&xl(l),this._fireDOMEvent(r,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,l,d){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,d)}var v=this._findEventTargets(r,l);if(d){for(var j=[],T=0;T<d.length;T++)d[T].listens(l,!0)&&j.push(d[T]);v=j.concat(v)}if(v.length){l==="contextmenu"&&nt(r);var R=v[0],z={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var V=R.getLatLng&&(!R._radius||R._radius<=10);z.containerPoint=V?this.latLngToContainerPoint(R.getLatLng()):this.mouseEventToContainerPoint(r),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=V?R.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(T=0;T<v.length;T++)if(v[T].fire(l,z,!0),z.originalEvent._stopped||v[T].options.bubblingMouseEvents===!1&&E(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,l=this._handlers.length;r<l;r++)this._handlers[r].disable()},whenReady:function(r,l){return this._loaded?r.call(l||this,{target:this}):this.on("load",r,l),this},_getMapPanePos:function(){return Lr(this._mapPane)||new O(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,l){var d=r&&l!==void 0?this._getNewPixelOrigin(r,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,l){var d=this.getSize()._divideBy(2);return this.project(r,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,l,d){var f=this._getNewPixelOrigin(d,l);return this.project(r,l)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,l,d){var f=this._getNewPixelOrigin(d,l);return ne([this.project(r.getSouthWest(),l)._subtract(f),this.project(r.getNorthWest(),l)._subtract(f),this.project(r.getSouthEast(),l)._subtract(f),this.project(r.getNorthEast(),l)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,l,d){if(!d)return r;var f=this.project(r,l),v=this.getSize().divideBy(2),j=new $(f.subtract(v),f.add(v)),T=this._getBoundsOffset(j,d,l);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?r:this.unproject(f.add(T),l)},_limitOffset:function(r,l){if(!l)return r;var d=this.getPixelBounds(),f=new $(d.min.add(r),d.max.add(r));return r.add(this._getBoundsOffset(f,l))},_getBoundsOffset:function(r,l,d){var f=ne(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),v=f.min.subtract(r.min),j=f.max.subtract(r.max),T=this._rebound(v.x,-j.x),R=this._rebound(v.y,-j.y);return new O(T,R)},_rebound:function(r,l){return r+l>0?Math.round(r-l)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(l))},_limitZoom:function(r){var l=this.getMinZoom(),d=this.getMaxZoom(),f=he.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(l,Math.min(d,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,l){var d=this._getCenterOffset(r)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var r=this._proxy=ke("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(l){var d=dl,f=this._proxy.style[d];wr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),f===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),l=this.getZoom();wr(this._proxy,this.project(r,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(l),v=this._getCenterOffset(r)._divideBy(1-1/f);return d.animate!==!0&&!this.getSize().contains(v)?!1:(Z(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(r,l,!0)},this),!0)},_animateZoom:function(r,l,d,f){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=l,ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:l,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function C0(r,l){return new Le(r,l)}var Kt=Y.extend({options:{position:"topright"},initialize:function(r){k(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var l=this._map;return l&&l.removeControl(this),this.options.position=r,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var l=this._container=this.onAdd(r),d=this.getPosition(),f=r._controlCorners[d];return ye(l,"leaflet-control"),d.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Xs=function(r){return new Kt(r)};Le.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},l="leaflet-",d=this._controlContainer=ke("div",l+"control-container",this._container);function f(v,j){var T=l+v+" "+l+j;r[v+j]=ke("div",T,d)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Oe(this._controlCorners[r]);Oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Du=Kt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,l,d,f){return d<f?-1:f<d?1:0}},initialize:function(r,l,d){k(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in l)this._addLayer(l[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Kt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,l){return this._addLayer(r,l),this._map?this._update():this},addOverlay:function(r,l){return this._addLayer(r,l,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(r));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):$e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",l=this._container=ke("div",r),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ys(l),wl(l);var f=this._section=ke("section",r+"-list");d&&(this._map.on("click",this.collapse,this),ge(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=ke("a",r+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),ge(v,{keydown:function(j){j.keyCode===13&&this._expandSafely()},click:function(j){nt(j),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=ke("div",r+"-base",f),this._separator=ke("div",r+"-separator",f),this._overlaysList=ke("div",r+"-overlays",f),l.appendChild(f)},_getLayer:function(r){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===r)return this._layers[l]},_addLayer:function(r,l,d){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(c(function(f,v){return this.options.sortFunction(f.layer,v.layer,f.name,v.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;aa(this._baseLayersList),aa(this._overlaysList),this._layerControlInputs=[];var r,l,d,f,v=0;for(d=0;d<this._layers.length;d++)f=this._layers[d],this._addItem(f),l=l||f.overlay,r=r||!f.overlay,v+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&v>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=l&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var l=this._getLayer(h(r.target)),d=l.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(r,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(l?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=d,f.firstChild},_addItem:function(r){var l=document.createElement("label"),d=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=d):f=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(f),f.layerId=h(r.layer),ge(f,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+r.name;var j=document.createElement("span");l.appendChild(j),j.appendChild(f),j.appendChild(v);var T=r.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,l,d,f=[],v=[];this._handlingClick=!0;for(var j=r.length-1;j>=0;j--)l=r[j],d=this._getLayer(l.layerId).layer,l.checked?f.push(d):l.checked||v.push(d);for(j=0;j<v.length;j++)this._map.hasLayer(v[j])&&this._map.removeLayer(v[j]);for(j=0;j<f.length;j++)this._map.hasLayer(f[j])||this._map.addLayer(f[j]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,l,d,f=this._map.getZoom(),v=r.length-1;v>=0;v--)l=r[v],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&f<d.options.minZoom||d.options.maxZoom!==void 0&&f>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ge(r,"click",nt),this.expand();var l=this;setTimeout(function(){Ee(r,"click",nt),l._preventClick=!1})}}),S0=function(r,l,d){return new Du(r,l,d)},Nl=Kt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var l="leaflet-control-zoom",d=ke("div",l+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,l,d,f,v){var j=ke("a",d,f);return j.innerHTML=r,j.href="#",j.title=l,j.setAttribute("role","button"),j.setAttribute("aria-label",l),Ys(j),ge(j,"click",kr),ge(j,"click",v,this),ge(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var r=this._map,l="leaflet-disabled";$e(this._zoomInButton,l),$e(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(ye(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(ye(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Le.mergeOptions({zoomControl:!0}),Le.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Nl,this.addControl(this.zoomControl))});var E0=function(r){return new Nl(r)},Ou=Kt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var l="leaflet-control-scale",d=ke("div",l),f=this.options;return this._addScales(f,l+"-line",d),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),d},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,l,d){r.metric&&(this._mScale=ke("div",l,d)),r.imperial&&(this._iScale=ke("div",l,d))},_update:function(){var r=this._map,l=r.getSize().y/2,d=r.distance(r.containerPointToLatLng([0,l]),r.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var l=this._getRoundNum(r),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/r)},_updateImperial:function(r){var l=r*3.2808399,d,f,v;l>5280?(d=l/5280,f=this._getRoundNum(d),this._updateScale(this._iScale,f+" mi",f/d)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(r,l,d){r.style.width=Math.round(this.options.maxWidth*d)+"px",r.innerHTML=l},_getRoundNum:function(r){var l=Math.pow(10,(Math.floor(r)+"").length-1),d=r/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),P0=function(r){return new Ou(r)},T0='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',kl=Kt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(he.inlineSvg?T0+" ":"")+"Leaflet</a>"},initialize:function(r){k(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=ke("div","leaflet-control-attribution"),Ys(this._container);for(var l in r._layers)r._layers[l].getAttribution&&this.addAttribution(r._layers[l].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var l in this._attributions)this._attributions[l]&&r.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),r.length&&d.push(r.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Le.mergeOptions({attributionControl:!0}),Le.addInitHook(function(){this.options.attributionControl&&new kl().addTo(this)});var M0=function(r){return new kl(r)};Kt.Layers=Du,Kt.Zoom=Nl,Kt.Scale=Ou,Kt.Attribution=kl,Xs.layers=S0,Xs.zoom=E0,Xs.scale=P0,Xs.attribution=M0;var ln=Y.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ln.addTo=function(r,l){return r.addHandler(l,this),this};var I0={Events:H},Au=he.touch?"touchstart mousedown":"mousedown",Vn=Q.extend({options:{clickTolerance:3},initialize:function(r,l,d,f){k(this,f),this._element=r,this._dragStartTarget=l||r,this._preventOutline=d},enable:function(){this._enabled||(ge(this._dragStartTarget,Au,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vn._dragging===this&&this.finishDrag(!0),Ee(this._dragStartTarget,Au,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!ul(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Vn._dragging===this&&this.finishDrag();return}if(!(Vn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Vn._dragging=this,this._preventOutline&&xl(this._element),pl(),qs(),!this._moving)){this.fire("down");var l=r.touches?r.touches[0]:r,d=Eu(this._element);this._startPoint=new O(l.clientX,l.clientY),this._startPos=Lr(this._element),this._parentScale=vl(d);var f=r.type==="mousedown";ge(document,f?"mousemove":"touchmove",this._onMove,this),ge(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var l=r.touches&&r.touches.length===1?r.touches[0]:r,d=new O(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,nt(r),this._moved||(this.fire("dragstart"),this._moved=!0,ye(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Ge(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){$e(document.body,"leaflet-dragging"),this._lastTarget&&($e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ee(document,"mousemove touchmove",this._onMove,this),Ee(document,"mouseup touchend touchcancel",this._onUp,this),ml(),Ks();var l=this._moved&&this._moving;this._moving=!1,Vn._dragging=!1,l&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function zu(r,l,d){var f,v=[1,4,2,8],j,T,R,z,V,oe,me,be;for(j=0,oe=r.length;j<oe;j++)r[j]._code=jr(r[j],l);for(R=0;R<4;R++){for(me=v[R],f=[],j=0,oe=r.length,T=oe-1;j<oe;T=j++)z=r[j],V=r[T],z._code&me?V._code&me||(be=ua(V,z,me,l,d),be._code=jr(be,l),f.push(be)):(V._code&me&&(be=ua(V,z,me,l,d),be._code=jr(be,l),f.push(be)),f.push(z));r=f}return r}function Bu(r,l){var d,f,v,j,T,R,z,V,oe;if(!r||r.length===0)throw new Error("latlngs not passed");Ft(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var me=le([0,0]),be=se(r),ht=be.getNorthWest().distanceTo(be.getSouthWest())*be.getNorthEast().distanceTo(be.getNorthWest());ht<1700&&(me=jl(r));var Xe=r.length,Ut=[];for(d=0;d<Xe;d++){var vt=le(r[d]);Ut.push(l.project(le([vt.lat-me.lat,vt.lng-me.lng])))}for(R=z=V=0,d=0,f=Xe-1;d<Xe;f=d++)v=Ut[d],j=Ut[f],T=v.y*j.x-j.y*v.x,z+=(v.x+j.x)*T,V+=(v.y+j.y)*T,R+=T*3;R===0?oe=Ut[0]:oe=[z/R,V/R];var ss=l.unproject(U(oe));return le([ss.lat+me.lat,ss.lng+me.lng])}function jl(r){for(var l=0,d=0,f=0,v=0;v<r.length;v++){var j=le(r[v]);l+=j.lat,d+=j.lng,f++}return le([l/f,d/f])}var R0={__proto__:null,clipPolygon:zu,polygonCenter:Bu,centroid:jl};function Fu(r,l){if(!l||!r.length)return r.slice();var d=l*l;return r=A0(r,d),r=O0(r,d),r}function Uu(r,l,d){return Math.sqrt(Js(r,l,d,!0))}function D0(r,l,d){return Js(r,l,d)}function O0(r,l){var d=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,v=new f(d);v[0]=v[d-1]=1,Cl(r,v,l,0,d-1);var j,T=[];for(j=0;j<d;j++)v[j]&&T.push(r[j]);return T}function Cl(r,l,d,f,v){var j=0,T,R,z;for(R=f+1;R<=v-1;R++)z=Js(r[R],r[f],r[v],!0),z>j&&(T=R,j=z);j>d&&(l[T]=1,Cl(r,l,d,f,T),Cl(r,l,d,T,v))}function A0(r,l){for(var d=[r[0]],f=1,v=0,j=r.length;f<j;f++)z0(r[f],r[v])>l&&(d.push(r[f]),v=f);return v<j-1&&d.push(r[j-1]),d}var Hu;function Zu(r,l,d,f,v){var j=f?Hu:jr(r,d),T=jr(l,d),R,z,V;for(Hu=T;;){if(!(j|T))return[r,l];if(j&T)return!1;R=j||T,z=ua(r,l,R,d,v),V=jr(z,d),R===j?(r=z,j=V):(l=z,T=V)}}function ua(r,l,d,f,v){var j=l.x-r.x,T=l.y-r.y,R=f.min,z=f.max,V,oe;return d&8?(V=r.x+j*(z.y-r.y)/T,oe=z.y):d&4?(V=r.x+j*(R.y-r.y)/T,oe=R.y):d&2?(V=z.x,oe=r.y+T*(z.x-r.x)/j):d&1&&(V=R.x,oe=r.y+T*(R.x-r.x)/j),new O(V,oe,v)}function jr(r,l){var d=0;return r.x<l.min.x?d|=1:r.x>l.max.x&&(d|=2),r.y<l.min.y?d|=4:r.y>l.max.y&&(d|=8),d}function z0(r,l){var d=l.x-r.x,f=l.y-r.y;return d*d+f*f}function Js(r,l,d,f){var v=l.x,j=l.y,T=d.x-v,R=d.y-j,z=T*T+R*R,V;return z>0&&(V=((r.x-v)*T+(r.y-j)*R)/z,V>1?(v=d.x,j=d.y):V>0&&(v+=T*V,j+=R*V)),T=r.x-v,R=r.y-j,f?T*T+R*R:new O(v,j)}function Ft(r){return!N(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function $u(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ft(r)}function Wu(r,l){var d,f,v,j,T,R,z,V;if(!r||r.length===0)throw new Error("latlngs not passed");Ft(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var oe=le([0,0]),me=se(r),be=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());be<1700&&(oe=jl(r));var ht=r.length,Xe=[];for(d=0;d<ht;d++){var Ut=le(r[d]);Xe.push(l.project(le([Ut.lat-oe.lat,Ut.lng-oe.lng])))}for(d=0,f=0;d<ht-1;d++)f+=Xe[d].distanceTo(Xe[d+1])/2;if(f===0)V=Xe[0];else for(d=0,j=0;d<ht-1;d++)if(T=Xe[d],R=Xe[d+1],v=T.distanceTo(R),j+=v,j>f){z=(j-f)/v,V=[R.x-z*(R.x-T.x),R.y-z*(R.y-T.y)];break}var vt=l.unproject(U(V));return le([vt.lat+oe.lat,vt.lng+oe.lng])}var B0={__proto__:null,simplify:Fu,pointToSegmentDistance:Uu,closestPointOnSegment:D0,clipSegment:Zu,_getEdgeIntersection:ua,_getBitCode:jr,_sqClosestPointOnSegment:Js,isFlat:Ft,_flat:$u,polylineCenter:Wu},Sl={project:function(r){return new O(r.lng,r.lat)},unproject:function(r){return new ee(r.y,r.x)},bounds:new $([-180,-90],[180,90])},El={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var l=Math.PI/180,d=this.R,f=r.lat*l,v=this.R_MINOR/d,j=Math.sqrt(1-v*v),T=j*Math.sin(f),R=Math.tan(Math.PI/4-f/2)/Math.pow((1-T)/(1+T),j/2);return f=-d*Math.log(Math.max(R,1e-10)),new O(r.lng*l*d,f)},unproject:function(r){for(var l=180/Math.PI,d=this.R,f=this.R_MINOR/d,v=Math.sqrt(1-f*f),j=Math.exp(-r.y/d),T=Math.PI/2-2*Math.atan(j),R=0,z=.1,V;R<15&&Math.abs(z)>1e-7;R++)V=v*Math.sin(T),V=Math.pow((1-V)/(1+V),v/2),z=Math.PI/2-2*Math.atan(j*V)-T,T+=z;return new ee(T*l,r.x*l/d)}},F0={__proto__:null,LonLat:Sl,Mercator:El,SphericalMercator:ve},U0=s({},fe,{code:"EPSG:3395",projection:El,transformation:function(){var r=.5/(Math.PI*El.R);return Ve(r,.5,-r,.5)}()}),Vu=s({},fe,{code:"EPSG:4326",projection:Sl,transformation:Ve(1/180,1,-1/180,.5)}),H0=s({},A,{projection:Sl,transformation:Ve(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,l){var d=l.lng-r.lng,f=l.lat-r.lat;return Math.sqrt(d*d+f*f)},infinite:!0});A.Earth=fe,A.EPSG3395=U0,A.EPSG3857=Ue,A.EPSG900913=Ct,A.EPSG4326=Vu,A.Simple=H0;var Qt=Q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[h(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[h(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var l=r.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Le.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(r);return this._layers[l]?this:(this._layers[l]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var l=h(r);return this._layers[l]?(this._loaded&&r.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return h(r)in this._layers},eachLayer:function(r,l){for(var d in this._layers)r.call(l,this._layers[d]);return this},_addLayers:function(r){r=r?N(r)?r:[r]:[];for(var l=0,d=r.length;l<d;l++)this.addLayer(r[l])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[h(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var l=h(r);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,l=-1/0,d=this._getZoomSpan();for(var f in this._zoomBoundLayers){var v=this._zoomBoundLayers[f].options;r=v.minZoom===void 0?r:Math.min(r,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=r===1/0?void 0:r,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Jr=Qt.extend({initialize:function(r,l){k(this,l),this._layers={};var d,f;if(r)for(d=0,f=r.length;d<f;d++)this.addLayer(r[d])},addLayer:function(r){var l=this.getLayerId(r);return this._layers[l]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var l=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(r){var l=typeof r=="number"?r:this.getLayerId(r);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var l=Array.prototype.slice.call(arguments,1),d,f;for(d in this._layers)f=this._layers[d],f[r]&&f[r].apply(f,l);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,l){for(var d in this._layers)r.call(l,this._layers[d]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return h(r)}}),Z0=function(r,l){return new Jr(r,l)},jn=Jr.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Jr.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Jr.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new X;for(var l in this._layers){var d=this._layers[l];r.extend(d.getBounds?d.getBounds():d.getLatLng())}return r}}),$0=function(r,l){return new jn(r,l)},es=Y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){k(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,l){var d=this._getIconUrl(r);if(!d){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,l){var d=this.options,f=d[l+"Size"];typeof f=="number"&&(f=[f,f]);var v=U(f),j=U(l==="shadow"&&d.shadowAnchor||d.iconAnchor||v&&v.divideBy(2,!0));r.className="leaflet-marker-"+l+" "+(d.className||""),j&&(r.style.marginLeft=-j.x+"px",r.style.marginTop=-j.y+"px"),v&&(r.style.width=v.x+"px",r.style.height=v.y+"px")},_createImg:function(r,l){return l=l||document.createElement("img"),l.src=r,l},_getIconUrl:function(r){return he.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function W0(r){return new es(r)}var ei=es.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof ei.imagePath!="string"&&(ei.imagePath=this._detectIconPath()),(this.options.imagePath||ei.imagePath)+es.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var l=function(d,f,v){var j=f.exec(d);return j&&j[v]};return r=l(r,/^url\((['"])?(.+)\1\)$/,2),r&&l(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=ke("div","leaflet-default-icon-path",document.body),l=Gs(r,"background-image")||Gs(r,"backgroundImage");if(document.body.removeChild(r),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Gu=ln.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Vn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ye(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var l=this._marker,d=l._map,f=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,j=Lr(l._icon),T=d.getPixelBounds(),R=d.getPixelOrigin(),z=ne(T.min._subtract(R).add(v),T.max._subtract(R).subtract(v));if(!z.contains(j)){var V=U((Math.max(z.max.x,j.x)-z.max.x)/(T.max.x-z.max.x)-(Math.min(z.min.x,j.x)-z.min.x)/(T.min.x-z.min.x),(Math.max(z.max.y,j.y)-z.max.y)/(T.max.y-z.max.y)-(Math.min(z.min.y,j.y)-z.min.y)/(T.min.y-z.min.y)).multiplyBy(f);d.panBy(V,{animate:!1}),this._draggable._newPos._add(V),this._draggable._startPos._add(V),Ge(l._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=Z(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=Z(this._adjustPan.bind(this,r)))},_onDrag:function(r){var l=this._marker,d=l._shadow,f=Lr(l._icon),v=l._map.layerPointToLatLng(f);d&&Ge(d,f),l._latlng=v,r.latlng=v,r.oldLatLng=this._oldLatLng,l.fire("move",r).fire("drag",r)},_onDragEnd:function(r){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),ha=Qt.extend({options:{icon:new ei,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,l){k(this,l),this._latlng=le(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var l=this._latlng;return this._latlng=le(r),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=r.icon.createIcon(this._icon),f=!1;d!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(d.title=r.title),d.tagName==="IMG"&&(d.alt=r.alt||"")),ye(d,l),r.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(d,"focus",this._panOnFocus,this);var v=r.icon.createShadow(this._shadow),j=!1;v!==this._shadow&&(this._removeShadow(),j=!0),v&&(ye(v,l),v.alt=""),this._shadow=v,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&j&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(this._icon,"focus",this._panOnFocus,this),Oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Oe(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Ge(this._icon,r),this._shadow&&Ge(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gu)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gu(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Bt(this._icon,r),this._shadow&&Bt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var l=this.options.icon.options,d=l.iconSize?U(l.iconSize):U(0,0),f=l.iconAnchor?U(l.iconAnchor):U(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:d.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function V0(r,l){return new ha(r,l)}var Gn=Qt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return k(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fa=Gn.extend({options:{fill:!0,radius:10},initialize:function(r,l){k(this,l),this._latlng=le(r),this._radius=this.options.radius},setLatLng:function(r){var l=this._latlng;return this._latlng=le(r),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var l=r&&r.radius||this._radius;return Gn.prototype.setStyle.call(this,r),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,l=this._radiusY||r,d=this._clickTolerance(),f=[r+d,l+d];this._pxBounds=new $(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function G0(r,l){return new fa(r,l)}var Pl=fa.extend({initialize:function(r,l,d){if(typeof l=="number"&&(l=s({},d,{radius:l})),k(this,l),this._latlng=le(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new X(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Gn.prototype.setStyle,_project:function(){var r=this._latlng.lng,l=this._latlng.lat,d=this._map,f=d.options.crs;if(f.distance===fe.distance){var v=Math.PI/180,j=this._mRadius/fe.R/v,T=d.project([l+j,r]),R=d.project([l-j,r]),z=T.add(R).divideBy(2),V=d.unproject(z).lat,oe=Math.acos((Math.cos(j*v)-Math.sin(l*v)*Math.sin(V*v))/(Math.cos(l*v)*Math.cos(V*v)))/v;(isNaN(oe)||oe===0)&&(oe=j/Math.cos(Math.PI/180*l)),this._point=z.subtract(d.getPixelOrigin()),this._radius=isNaN(oe)?0:z.x-d.project([V,r-oe]).x,this._radiusY=z.y-T.y}else{var me=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(me).x}this._updateBounds()}});function q0(r,l,d){return new Pl(r,l,d)}var Cn=Gn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,l){k(this,l),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var l=1/0,d=null,f=Js,v,j,T=0,R=this._parts.length;T<R;T++)for(var z=this._parts[T],V=1,oe=z.length;V<oe;V++){v=z[V-1],j=z[V];var me=f(r,v,j,!0);me<l&&(l=me,d=f(r,v,j))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,l){return l=l||this._defaultShape(),r=le(r),l.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new X,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Ft(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var l=[],d=Ft(r),f=0,v=r.length;f<v;f++)d?(l[f]=le(r[f]),this._bounds.extend(l[f])):l[f]=this._convertLatLngs(r[f]);return l},_project:function(){var r=new $;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),l=new O(r,r);this._rawPxBounds&&(this._pxBounds=new $([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(r,l,d){var f=r[0]instanceof ee,v=r.length,j,T;if(f){for(T=[],j=0;j<v;j++)T[j]=this._map.latLngToLayerPoint(r[j]),d.extend(T[j]);l.push(T)}else for(j=0;j<v;j++)this._projectLatlngs(r[j],l,d)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,f,v,j,T,R,z;for(d=0,v=0,j=this._rings.length;d<j;d++)for(z=this._rings[d],f=0,T=z.length;f<T-1;f++)R=Zu(z[f],z[f+1],r,f,!0),R&&(l[v]=l[v]||[],l[v].push(R[0]),(R[1]!==z[f+1]||f===T-2)&&(l[v].push(R[1]),v++))}},_simplifyPoints:function(){for(var r=this._parts,l=this.options.smoothFactor,d=0,f=r.length;d<f;d++)r[d]=Fu(r[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,l){var d,f,v,j,T,R,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(d=0,j=this._parts.length;d<j;d++)for(R=this._parts[d],f=0,T=R.length,v=T-1;f<T;v=f++)if(!(!l&&f===0)&&Uu(r,R[v],R[f])<=z)return!0;return!1}});function K0(r,l){return new Cn(r,l)}Cn._flat=$u;var ts=Cn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var l=Cn.prototype._convertLatLngs.call(this,r),d=l.length;return d>=2&&l[0]instanceof ee&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(r){Cn.prototype._setLatLngs.call(this,r),Ft(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ft(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,l=this.options.weight,d=new O(l,l);if(r=new $(r.min.subtract(d),r.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,v=this._rings.length,j;f<v;f++)j=zu(this._rings[f],r,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var l=!1,d,f,v,j,T,R,z,V;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(j=0,z=this._parts.length;j<z;j++)for(d=this._parts[j],T=0,V=d.length,R=V-1;T<V;R=T++)f=d[T],v=d[R],f.y>r.y!=v.y>r.y&&r.x<(v.x-f.x)*(r.y-f.y)/(v.y-f.y)+f.x&&(l=!l);return l||Cn.prototype._containsPoint.call(this,r,!0)}});function Q0(r,l){return new ts(r,l)}var Sn=jn.extend({initialize:function(r,l){k(this,l),this._layers={},r&&this.addData(r)},addData:function(r){var l=N(r)?r:r.features,d,f,v;if(l){for(d=0,f=l.length;d<f;d++)v=l[d],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var j=this.options;if(j.filter&&!j.filter(r))return this;var T=pa(r,j);return T?(T.feature=xa(r),T.defaultOptions=T.options,this.resetStyle(T),j.onEachFeature&&j.onEachFeature(r,T),this.addLayer(T)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(l){this._setLayerStyle(l,r)},this)},_setLayerStyle:function(r,l){r.setStyle&&(typeof l=="function"&&(l=l(r.feature)),r.setStyle(l))}});function pa(r,l){var d=r.type==="Feature"?r.geometry:r,f=d?d.coordinates:null,v=[],j=l&&l.pointToLayer,T=l&&l.coordsToLatLng||Tl,R,z,V,oe;if(!f&&!d)return null;switch(d.type){case"Point":return R=T(f),qu(j,r,R,l);case"MultiPoint":for(V=0,oe=f.length;V<oe;V++)R=T(f[V]),v.push(qu(j,r,R,l));return new jn(v);case"LineString":case"MultiLineString":return z=ma(f,d.type==="LineString"?0:1,T),new Cn(z,l);case"Polygon":case"MultiPolygon":return z=ma(f,d.type==="Polygon"?1:2,T),new ts(z,l);case"GeometryCollection":for(V=0,oe=d.geometries.length;V<oe;V++){var me=pa({geometry:d.geometries[V],type:"Feature",properties:r.properties},l);me&&v.push(me)}return new jn(v);case"FeatureCollection":for(V=0,oe=d.features.length;V<oe;V++){var be=pa(d.features[V],l);be&&v.push(be)}return new jn(v);default:throw new Error("Invalid GeoJSON object.")}}function qu(r,l,d,f){return r?r(l,d):new ha(d,f&&f.markersInheritOptions&&f)}function Tl(r){return new ee(r[1],r[0],r[2])}function ma(r,l,d){for(var f=[],v=0,j=r.length,T;v<j;v++)T=l?ma(r[v],l-1,d):(d||Tl)(r[v]),f.push(T);return f}function Ml(r,l){return r=le(r),r.alt!==void 0?[b(r.lng,l),b(r.lat,l),b(r.alt,l)]:[b(r.lng,l),b(r.lat,l)]}function ga(r,l,d,f){for(var v=[],j=0,T=r.length;j<T;j++)v.push(l?ga(r[j],Ft(r[j])?0:l-1,d,f):Ml(r[j],f));return!l&&d&&v.length>0&&v.push(v[0].slice()),v}function ns(r,l){return r.feature?s({},r.feature,{geometry:l}):xa(l)}function xa(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Il={toGeoJSON:function(r){return ns(this,{type:"Point",coordinates:Ml(this.getLatLng(),r)})}};ha.include(Il),Pl.include(Il),fa.include(Il),Cn.include({toGeoJSON:function(r){var l=!Ft(this._latlngs),d=ga(this._latlngs,l?1:0,!1,r);return ns(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ts.include({toGeoJSON:function(r){var l=!Ft(this._latlngs),d=l&&!Ft(this._latlngs[0]),f=ga(this._latlngs,d?2:l?1:0,!0,r);return l||(f=[f]),ns(this,{type:(d?"Multi":"")+"Polygon",coordinates:f})}}),Jr.include({toMultiPoint:function(r){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(r).geometry.coordinates)}),ns(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(r){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(r);var d=l==="GeometryCollection",f=[];return this.eachLayer(function(v){if(v.toGeoJSON){var j=v.toGeoJSON(r);if(d)f.push(j.geometry);else{var T=xa(j);T.type==="FeatureCollection"?f.push.apply(f,T.features):f.push(T)}}}),d?ns(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Ku(r,l){return new Sn(r,l)}var Y0=Ku,va=Qt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,l,d){this._url=r,this._bounds=se(l),k(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Yr(this._image),this},bringToBack:function(){return this._map&&Xr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=se(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",l=this._image=r?this._url:ke("img");if(ye(l,"leaflet-image-layer"),this._zoomAnimated&&ye(l,"leaflet-zoom-animated"),this.options.className&&ye(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=c(this.fire,this,"load"),l.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(r){var l=this._map.getZoomScale(r.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;wr(this._image,d,l)},_reset:function(){var r=this._image,l=new $(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Ge(r,l.min),r.style.width=d.x+"px",r.style.height=d.y+"px"},_updateOpacity:function(){Bt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),X0=function(r,l,d){return new va(r,l,d)},Qu=va.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",l=this._image=r?this._url:ke("video");if(ye(l,"leaflet-image-layer"),this._zoomAnimated&&ye(l,"leaflet-zoom-animated"),this.options.className&&ye(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=c(this.fire,this,"load"),r){for(var d=l.getElementsByTagName("source"),f=[],v=0;v<d.length;v++)f.push(d[v].src);this._url=d.length>0?f:[l.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var T=ke("source");T.src=this._url[j],l.appendChild(T)}}});function J0(r,l,d){return new Qu(r,l,d)}var Yu=va.extend({_initImage:function(){var r=this._image=this._url;ye(r,"leaflet-image-layer"),this._zoomAnimated&&ye(r,"leaflet-zoom-animated"),this.options.className&&ye(r,this.options.className),r.onselectstart=g,r.onmousemove=g}});function ex(r,l,d){return new Yu(r,l,d)}var cn=Qt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,l){r&&(r instanceof ee||N(r))?(this._latlng=le(r),k(this,l)):(k(this,r),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Bt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Bt(this._container,1),this.bringToFront(),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Bt(this._container,0),this._removeTimeout=setTimeout(c(Oe,void 0,this._container),200)):Oe(this._container),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=le(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yr(this._container),this},bringToBack:function(){return this._map&&Xr(this._container),this},_prepareOpen:function(r){var l=this._source;if(!l._map)return!1;if(l instanceof jn){l=null;var d=this._source._layers;for(var f in d)if(d[f]._map){l=d[f];break}if(!l)return!1;this._source=l}if(!r)if(l.getCenter)r=l.getCenter();else if(l.getLatLng)r=l.getLatLng();else if(l.getBounds)r=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")r.innerHTML=l;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),l=U(this.options.offset),d=this._getAnchor();this._zoomAnimated?Ge(this._container,r.add(d)):l=l.add(r).add(d);var f=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=f+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Le.include({_initOverlay:function(r,l,d,f){var v=l;return v instanceof r||(v=new r(f).setContent(l)),d&&v.setLatLng(d),v}}),Qt.include({_initOverlay:function(r,l,d,f){var v=d;return v instanceof r?(k(v,f),v._source=this):(v=l&&!f?l:new r(f,this),v.setContent(d)),v}});var ya=cn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,cn.prototype.openOn.call(this,r)},onAdd:function(r){cn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gn||this._source.on("preclick",Nr))},onRemove:function(r){cn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gn||this._source.off("preclick",Nr))},getEvents:function(){var r=cn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",l=this._container=ke("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=ke("div",r+"-content-wrapper",l);if(this._contentNode=ke("div",r+"-content",d),Ys(l),wl(this._contentNode),ge(l,"contextmenu",Nr),this._tipContainer=ke("div",r+"-tip-container",l),this._tip=ke("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=ke("a",r+"-close-button",l);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ge(f,"click",function(v){nt(v),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,l=r.style;l.width="",l.whiteSpace="nowrap";var d=r.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var f=r.offsetHeight,v=this.options.maxHeight,j="leaflet-popup-scrolled";v&&f>v?(l.height=v+"px",ye(r,j)):$e(r,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),d=this._getAnchor();Ge(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,l=parseInt(Gs(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,f=this._containerWidth,v=new O(this._containerLeft,-d-this._containerBottom);v._add(Lr(this._container));var j=r.layerPointToContainerPoint(v),T=U(this.options.autoPanPadding),R=U(this.options.autoPanPaddingTopLeft||T),z=U(this.options.autoPanPaddingBottomRight||T),V=r.getSize(),oe=0,me=0;j.x+f+z.x>V.x&&(oe=j.x+f-V.x+z.x),j.x-oe-R.x<0&&(oe=j.x-R.x),j.y+d+z.y>V.y&&(me=j.y+d-V.y+z.y),j.y-me-R.y<0&&(me=j.y-R.y),(oe||me)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([oe,me]))}},_getAnchor:function(){return U(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),tx=function(r,l){return new ya(r,l)};Le.mergeOptions({closePopupOnClick:!0}),Le.include({openPopup:function(r,l,d){return this._initOverlay(ya,r,l,d).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Qt.include({bindPopup:function(r,l){return this._popup=this._initOverlay(ya,this._popup,r,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof jn||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){kr(r);var l=r.layer||r.target;if(this._popup._source===l&&!(l instanceof Gn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=l,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var _a=cn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){cn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){cn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=cn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",l=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ke("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var l,d,f=this._map,v=this._container,j=f.latLngToContainerPoint(f.getCenter()),T=f.layerPointToContainerPoint(r),R=this.options.direction,z=v.offsetWidth,V=v.offsetHeight,oe=U(this.options.offset),me=this._getAnchor();R==="top"?(l=z/2,d=V):R==="bottom"?(l=z/2,d=0):R==="center"?(l=z/2,d=V/2):R==="right"?(l=0,d=V/2):R==="left"?(l=z,d=V/2):T.x<j.x?(R="right",l=0,d=V/2):(R="left",l=z+(oe.x+me.x)*2,d=V/2),r=r.subtract(U(l,d,!0)).add(oe).add(me),$e(v,"leaflet-tooltip-right"),$e(v,"leaflet-tooltip-left"),$e(v,"leaflet-tooltip-top"),$e(v,"leaflet-tooltip-bottom"),ye(v,"leaflet-tooltip-"+R),Ge(v,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Bt(this._container,r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(l)},_getAnchor:function(){return U(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),nx=function(r,l){return new _a(r,l)};Le.include({openTooltip:function(r,l,d){return this._initOverlay(_a,r,l,d).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Qt.include({bindTooltip:function(r,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(_a,this._tooltip,r,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var l=r?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof jn||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&(ge(l,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ge(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var l=r.latlng,d,f;this._tooltip.options.sticky&&r.originalEvent&&(d=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(l)}});var Xu=es.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var l=r&&r.tagName==="DIV"?r:document.createElement("div"),d=this.options;if(d.html instanceof Element?(aa(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var f=U(d.bgPos);l.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function rx(r){return new Xu(r)}es.Default=ei;var ti=Qt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:he.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){k(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Oe(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof O?r:new O(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var l=this.getPane().children,d=-r(-1/0,1/0),f=0,v=l.length,j;f<v;f++)j=l[f].style.zIndex,l[f]!==this._container&&j&&(d=r(d,+j));isFinite(d)&&(this.options.zIndex=d+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!he.ielt9){Bt(this._container,this.options.opacity);var r=+new Date,l=!1,d=!1;for(var f in this._tiles){var v=this._tiles[f];if(!(!v.current||!v.loaded)){var j=Math.min(1,(r-v.loaded)/200);Bt(v.el,j),j<1?l=!0:(v.active?d=!0:this._onOpaqueTile(v),v.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(W(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=ke("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,l=this.options.maxZoom;if(r!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===r?(this._levels[d].el.style.zIndex=l-Math.abs(r-d),this._onUpdateLevel(d)):(Oe(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var f=this._levels[r],v=this._map;return f||(f=this._levels[r]={},f.el=ke("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=l,f.origin=v.project(v.unproject(v.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,v.getCenter(),v.getZoom()),g(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var r,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)l=this._tiles[r],l.retain=l.current;for(r in this._tiles)if(l=this._tiles[r],l.current&&!l.active){var f=l.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var l in this._tiles)this._tiles[l].coords.z===r&&this._removeTile(l)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Oe(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,l,d,f){var v=Math.floor(r/2),j=Math.floor(l/2),T=d-1,R=new O(+v,+j);R.z=+T;var z=this._tileCoordsToKey(R),V=this._tiles[z];return V&&V.active?(V.retain=!0,!0):(V&&V.loaded&&(V.retain=!0),T>f?this._retainParent(v,j,T,f):!1)},_retainChildren:function(r,l,d,f){for(var v=2*r;v<2*r+2;v++)for(var j=2*l;j<2*l+2;j++){var T=new O(v,j);T.z=d+1;var R=this._tileCoordsToKey(T),z=this._tiles[R];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);d+1<f&&this._retainChildren(v,j,d+1,f)}},_resetView:function(r){var l=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var l=this.options;return l.minNativeZoom!==void 0&&r<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<r?l.maxNativeZoom:r},_setView:function(r,l,d,f){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var j=this.options.updateWhenZooming&&v!==this._tileZoom;(!f||j)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(r),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(r,l)},_setZoomTransforms:function(r,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],r,l)},_setZoomTransform:function(r,l,d){var f=this._map.getZoomScale(d,r.zoom),v=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(l,d)).round();he.any3d?wr(r.el,v,f):Ge(r.el,v)},_resetGrid:function(){var r=this._map,l=r.options.crs,d=this._tileSize=this.getTileSize(),f=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,l.wrapLng[0]],f).x/d.x),Math.ceil(r.project([0,l.wrapLng[1]],f).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([l.wrapLat[0],0],f).y/d.x),Math.ceil(r.project([l.wrapLat[1],0],f).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),f=l.getZoomScale(d,this._tileZoom),v=l.project(r,this._tileZoom).floor(),j=l.getSize().divideBy(f*2);return new $(v.subtract(j),v.add(j))},_update:function(r){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(r===void 0&&(r=l.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),v=this._pxBoundsToTileRange(f),j=v.getCenter(),T=[],R=this.options.keepBuffer,z=new $(v.getBottomLeft().subtract([R,-R]),v.getTopRight().add([R,-R]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var V in this._tiles){var oe=this._tiles[V].coords;(oe.z!==this._tileZoom||!z.contains(new O(oe.x,oe.y)))&&(this._tiles[V].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(r,d);return}for(var me=v.min.y;me<=v.max.y;me++)for(var be=v.min.x;be<=v.max.x;be++){var ht=new O(be,me);if(ht.z=this._tileZoom,!!this._isValidTile(ht)){var Xe=this._tiles[this._tileCoordsToKey(ht)];Xe?Xe.current=!0:T.push(ht)}}if(T.sort(function(vt,ss){return vt.distanceTo(j)-ss.distanceTo(j)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ut=document.createDocumentFragment();for(be=0;be<T.length;be++)this._addTile(T[be],Ut);this._level.el.appendChild(Ut)}}}},_isValidTile:function(r){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(r.x<d.min.x||r.x>d.max.x)||!l.wrapLat&&(r.y<d.min.y||r.y>d.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return se(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var l=this._map,d=this.getTileSize(),f=r.scaleBy(d),v=f.add(d),j=l.unproject(f,r.z),T=l.unproject(v,r.z);return[j,T]},_tileCoordsToBounds:function(r){var l=this._tileCoordsToNwSe(r),d=new X(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var l=r.split(":"),d=new O(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(r){var l=this._tiles[r];l&&(Oe(l.el),delete this._tiles[r],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){ye(r,"leaflet-tile");var l=this.getTileSize();r.style.width=l.x+"px",r.style.height=l.y+"px",r.onselectstart=g,r.onmousemove=g,he.ielt9&&this.options.opacity<1&&Bt(r,this.options.opacity)},_addTile:function(r,l){var d=this._getTilePos(r),f=this._tileCoordsToKey(r),v=this.createTile(this._wrapCoords(r),c(this._tileReady,this,r));this._initTile(v),this.createTile.length<2&&Z(c(this._tileReady,this,r,null,v)),Ge(v,d),this._tiles[f]={el:v,coords:r,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:r})},_tileReady:function(r,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:r});var f=this._tileCoordsToKey(r);d=this._tiles[f],d&&(d.loaded=+new Date,this._map._fadeAnimated?(Bt(d.el,0),W(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(ye(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),he.ielt9||!this._map._fadeAnimated?Z(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var l=new O(this._wrapX?m(r.x,this._wrapX):r.x,this._wrapY?m(r.y,this._wrapY):r.y);return l.z=r.z,l},_pxBoundsToTileRange:function(r){var l=this.getTileSize();return new $(r.min.unscaleBy(l).floor(),r.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function sx(r){return new ti(r)}var rs=ti.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,l){this._url=r,l=k(this,l),l.detectRetina&&he.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,l){return this._url===r&&l===void 0&&(l=!0),this._url=r,l||this.redraw(),this},createTile:function(r,l){var d=document.createElement("img");return ge(d,"load",c(this._tileOnLoad,this,l,d)),ge(d,"error",c(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(r),d},getTileUrl:function(r){var l={r:he.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-r.y;this.options.tms&&(l.y=d),l["-y"]=d}return y(this._url,s(l,this.options))},_tileOnLoad:function(r,l){he.ielt9?setTimeout(c(r,this,null,l),0):r(null,l)},_tileOnError:function(r,l,d){var f=this.options.errorTileUrl;f&&l.getAttribute("src")!==f&&(l.src=f),r(d,l)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,f=this.options.zoomOffset;return d&&(r=l-r),r+f},_getSubdomain:function(r){var l=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var r,l;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(l=this._tiles[r].el,l.onload=g,l.onerror=g,!l.complete)){l.src=P;var d=this._tiles[r].coords;Oe(l),delete this._tiles[r],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(r){var l=this._tiles[r];if(l)return l.el.setAttribute("src",P),ti.prototype._removeTile.call(this,r)},_tileReady:function(r,l,d){if(!(!this._map||d&&d.getAttribute("src")===P))return ti.prototype._tileReady.call(this,r,l,d)}});function Ju(r,l){return new rs(r,l)}var eh=rs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,l){this._url=r;var d=s({},this.defaultWmsParams);for(var f in l)f in this.options||(d[f]=l[f]);l=k(this,l);var v=l.detectRetina&&he.retina?2:1,j=this.getTileSize();d.width=j.x*v,d.height=j.y*v,this.wmsParams=d},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,rs.prototype.onAdd.call(this,r)},getTileUrl:function(r){var l=this._tileCoordsToNwSe(r),d=this._crs,f=ne(d.project(l[0]),d.project(l[1])),v=f.min,j=f.max,T=(this._wmsVersion>=1.3&&this._crs===Vu?[v.y,v.x,j.y,j.x]:[v.x,v.y,j.x,j.y]).join(","),R=rs.prototype.getTileUrl.call(this,r);return R+C(this.wmsParams,R,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(r,l){return s(this.wmsParams,r),l||this.redraw(),this}});function ix(r,l){return new eh(r,l)}rs.WMS=eh,Ju.wms=ix;var En=Qt.extend({options:{padding:.1},initialize:function(r){k(this,r),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,l){var d=this._map.getZoomScale(l,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),j=f.multiplyBy(-d).add(v).subtract(this._map._getNewPixelOrigin(r,l));he.any3d?wr(this._container,j,d):Ge(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-r)).round();this._bounds=new $(d,d.add(l.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),th=En.extend({options:{tolerance:0},getEvents:function(){var r=En.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){En.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ge(r,"mousemove",this._onMouseMove,this),ge(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ge(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,Oe(this._container),Ee(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var l in this._layers)r=this._layers[l],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){En.prototype._update.call(this);var r=this._bounds,l=this._container,d=r.getSize(),f=he.retina?2:1;Ge(l,r.min),l.width=f*d.x,l.height=f*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",he.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){En.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[h(r)]=r;var l=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var l=r._order,d=l.next,f=l.prev;d?d.prev=f:this._drawLast=f,f?f.next=d:this._drawFirst=d,delete r._order,delete this._layers[h(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var l=r.options.dashArray.split(/[, ]+/),d=[],f,v;for(v=0;v<l.length;v++){if(f=Number(l[v]),isNaN(f))return;d.push(f)}r.options._dashArray=d}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||Z(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var l=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $,this._redrawBounds.extend(r._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(r._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var l=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!l||r._pxBounds&&r._pxBounds.intersects(l))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,l){if(this._drawing){var d,f,v,j,T=r._parts,R=T.length,z=this._ctx;if(R){for(z.beginPath(),d=0;d<R;d++){for(f=0,v=T[d].length;f<v;f++)j=T[d][f],z[f?"lineTo":"moveTo"](j.x,j.y);l&&z.closePath()}this._fillStroke(z,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var l=r._point,d=this._ctx,f=Math.max(Math.round(r._radius),1),v=(Math.max(Math.round(r._radiusY),1)||f)/f;v!==1&&(d.save(),d.scale(1,v)),d.beginPath(),d.arc(l.x,l.y/v,f,0,Math.PI*2,!1),v!==1&&d.restore(),this._fillStroke(d,r)}},_fillStroke:function(r,l){var d=l.options;d.fill&&(r.globalAlpha=d.fillOpacity,r.fillStyle=d.fillColor||d.color,r.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(r.setLineDash&&r.setLineDash(l.options&&l.options._dashArray||[]),r.globalAlpha=d.opacity,r.lineWidth=d.weight,r.strokeStyle=d.color,r.lineCap=d.lineCap,r.lineJoin=d.lineJoin,r.stroke())},_onClick:function(r){for(var l=this._map.mouseEventToLayerPoint(r),d,f,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(d))&&(f=d);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,l)}},_handleMouseOut:function(r){var l=this._hoveredLayer;l&&($e(this._container,"leaflet-interactive"),this._fireEvent([l],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,l){if(!this._mouseHoverThrottled){for(var d,f,v=this._drawFirst;v;v=v.next)d=v.layer,d.options.interactive&&d._containsPoint(l)&&(f=d);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(ye(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,l,d){this._map._fireDOMEvent(l,d||l.type,r)},_bringToFront:function(r){var l=r._order;if(l){var d=l.next,f=l.prev;if(d)d.prev=f;else return;f?f.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(r)}},_bringToBack:function(r){var l=r._order;if(l){var d=l.next,f=l.prev;if(f)f.next=d;else return;d?d.prev=f:f&&(this._drawLast=f),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(r)}}});function nh(r){return he.canvas?new th(r):null}var ni=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ax={_initContainer:function(){this._container=ke("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(En.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var l=r._container=ni("shape");ye(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",r._path=ni("path"),l.appendChild(r._path),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){var l=r._container;this._container.appendChild(l),r.options.interactive&&r.addInteractiveTarget(l)},_removePath:function(r){var l=r._container;Oe(l),r.removeInteractiveTarget(l),delete this._layers[h(r)]},_updateStyle:function(r){var l=r._stroke,d=r._fill,f=r.options,v=r._container;v.stroked=!!f.stroke,v.filled=!!f.fill,f.stroke?(l||(l=r._stroke=ni("stroke")),v.appendChild(l),l.weight=f.weight+"px",l.color=f.color,l.opacity=f.opacity,f.dashArray?l.dashStyle=N(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=f.lineCap.replace("butt","flat"),l.joinstyle=f.lineJoin):l&&(v.removeChild(l),r._stroke=null),f.fill?(d||(d=r._fill=ni("fill")),v.appendChild(d),d.color=f.fillColor||f.color,d.opacity=f.fillOpacity):d&&(v.removeChild(d),r._fill=null)},_updateCircle:function(r){var l=r._point.round(),d=Math.round(r._radius),f=Math.round(r._radiusY||d);this._setPath(r,r._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+f+" 0,"+65535*360)},_setPath:function(r,l){r._path.v=l},_bringToFront:function(r){Yr(r._container)},_bringToBack:function(r){Xr(r._container)}},ba=he.vml?ni:te,ri=En.extend({_initContainer:function(){this._container=ba("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ba("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Oe(this._container),Ee(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){En.prototype._update.call(this);var r=this._bounds,l=r.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Ge(d,r.min),d.setAttribute("viewBox",[r.min.x,r.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(r){var l=r._path=ba("path");r.options.className&&ye(l,r.options.className),r.options.interactive&&ye(l,"leaflet-interactive"),this._updateStyle(r),this._layers[h(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Oe(r._path),r.removeInteractiveTarget(r._path),delete this._layers[h(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var l=r._path,d=r.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(r,l){this._setPath(r,Ce(r._parts,l))},_updateCircle:function(r){var l=r._point,d=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||d,v="a"+d+","+f+" 0 1,0 ",j=r._empty()?"M0 0":"M"+(l.x-d)+","+l.y+v+d*2+",0 "+v+-d*2+",0 ";this._setPath(r,j)},_setPath:function(r,l){r._path.setAttribute("d",l)},_bringToFront:function(r){Yr(r._path)},_bringToBack:function(r){Xr(r._path)}});he.vml&&ri.include(ax);function rh(r){return he.svg||he.vml?new ri(r):null}Le.include({getRenderer:function(r){var l=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var l=this._paneRenderers[r];return l===void 0&&(l=this._createRenderer({pane:r}),this._paneRenderers[r]=l),l},_createRenderer:function(r){return this.options.preferCanvas&&nh(r)||rh(r)}});var sh=ts.extend({initialize:function(r,l){ts.prototype.initialize.call(this,this._boundsToLatLngs(r),l)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=se(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function ox(r,l){return new sh(r,l)}ri.create=ba,ri.pointsToPath=Ce,Sn.geometryToLayer=pa,Sn.coordsToLatLng=Tl,Sn.coordsToLatLngs=ma,Sn.latLngToCoords=Ml,Sn.latLngsToCoords=ga,Sn.getFeature=ns,Sn.asFeature=xa,Le.mergeOptions({boxZoom:!0});var ih=ln.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qs(),pl(),this._startPoint=this._map.mouseEventToContainerPoint(r),ge(document,{contextmenu:kr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=ke("div","leaflet-zoom-box",this._container),ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var l=new $(this._point,this._startPoint),d=l.getSize();Ge(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Oe(this._box),$e(this._container,"leaflet-crosshair")),Ks(),ml(),Ee(document,{contextmenu:kr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var l=new X(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Le.addInitHook("addHandler","boxZoom",ih),Le.mergeOptions({doubleClickZoom:!0});var ah=ln.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var l=this._map,d=l.getZoom(),f=l.options.zoomDelta,v=r.originalEvent.shiftKey?d-f:d+f;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(r.containerPoint,v)}});Le.addInitHook("addHandler","doubleClickZoom",ah),Le.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var oh=ln.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Vn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$e(this._map._container,"leaflet-grab"),$e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=se(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,l){return r-(r-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;r.x<l.min.x&&(r.x=this._viscousLimit(r.x,l.min.x)),r.y<l.min.y&&(r.y=this._viscousLimit(r.y,l.min.y)),r.x>l.max.x&&(r.x=this._viscousLimit(r.x,l.max.x)),r.y>l.max.y&&(r.y=this._viscousLimit(r.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,l=Math.round(r/2),d=this._initialWorldOffset,f=this._draggable._newPos.x,v=(f-l+d)%r+l-d,j=(f+l+d)%r-l-d,T=Math.abs(v+d)<Math.abs(j+d)?v:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(r){var l=this._map,d=l.options,f=!d.inertia||r.noInertia||this._times.length<2;if(l.fire("dragend",r),f)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,T=d.easeLinearity,R=v.multiplyBy(T/j),z=R.distanceTo([0,0]),V=Math.min(d.inertiaMaxSpeed,z),oe=R.multiplyBy(V/z),me=V/(d.inertiaDeceleration*T),be=oe.multiplyBy(-me/2).round();!be.x&&!be.y?l.fire("moveend"):(be=l._limitOffset(be,l.options.maxBounds),Z(function(){l.panBy(be,{duration:me,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});Le.addInitHook("addHandler","dragging",oh),Le.mergeOptions({keyboard:!0,keyboardPanDelta:80});var lh=ln.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ge(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ee(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,l=document.documentElement,d=r.scrollTop||l.scrollTop,f=r.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(f,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var l=this._panKeys={},d=this.keyCodes,f,v;for(f=0,v=d.left.length;f<v;f++)l[d.left[f]]=[-1*r,0];for(f=0,v=d.right.length;f<v;f++)l[d.right[f]]=[r,0];for(f=0,v=d.down.length;f<v;f++)l[d.down[f]]=[0,r];for(f=0,v=d.up.length;f<v;f++)l[d.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var l=this._zoomKeys={},d=this.keyCodes,f,v;for(f=0,v=d.zoomIn.length;f<v;f++)l[d.zoomIn[f]]=r;for(f=0,v=d.zoomOut.length;f<v;f++)l[d.zoomOut[f]]=-r},_addHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var l=r.keyCode,d=this._map,f;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(f=this._panKeys[l],r.shiftKey&&(f=U(f).multiplyBy(3)),d.options.maxBounds&&(f=d._limitOffset(U(f),d.options.maxBounds)),d.options.worldCopyJump){var v=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(f)));d.panTo(v)}else d.panBy(f)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;kr(r)}}});Le.addInitHook("addHandler","keyboard",lh),Le.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ch=ln.extend({addHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var l=Iu(r),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),f),kr(r)},_performZoom:function(){var r=this._map,l=r.getZoom(),d=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,j=d?Math.ceil(v/d)*d:v,T=r._limitZoom(l+(this._delta>0?j:-j))-l;this._delta=0,this._startTime=null,T&&(r.options.scrollWheelZoom==="center"?r.setZoom(l+T):r.setZoomAround(this._lastMousePos,l+T))}});Le.addInitHook("addHandler","scrollWheelZoom",ch);var lx=600;Le.mergeOptions({tapHold:he.touchNative&&he.safari&&he.mobile,tapTolerance:15});var dh=ln.extend({addHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var l=r.touches[0];this._startPos=this._newPos=new O(l.clientX,l.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(ge(document,"touchend",nt),ge(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),lx),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Ee(document,"touchend",nt),Ee(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)},_onMove:function(r){var l=r.touches[0];this._newPos=new O(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,l){var d=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Le.addInitHook("addHandler","tapHold",dh),Le.mergeOptions({touchZoom:he.touch,bounceAtZoomLimits:!0});var uh=ln.extend({addHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var l=this._map;if(!(!r.touches||r.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(r.touches[0]),f=l.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(f)._divideBy(2))),this._startDist=d.distanceTo(f),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),nt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(r.touches[0]),f=l.mouseEventToContainerPoint(r.touches[1]),v=d.distanceTo(f)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var j=d._add(f)._divideBy(2)._subtract(this._centerPoint);if(v===1&&j.x===0&&j.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var T=c(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Z(T,this,!0),nt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Le.addInitHook("addHandler","touchZoom",uh),Le.BoxZoom=ih,Le.DoubleClickZoom=ah,Le.Drag=oh,Le.Keyboard=lh,Le.ScrollWheelZoom=ch,Le.TapHold=dh,Le.TouchZoom=uh,n.Bounds=$,n.Browser=he,n.CRS=A,n.Canvas=th,n.Circle=Pl,n.CircleMarker=fa,n.Class=Y,n.Control=Kt,n.DivIcon=Xu,n.DivOverlay=cn,n.DomEvent=j0,n.DomUtil=N0,n.Draggable=Vn,n.Evented=Q,n.FeatureGroup=jn,n.GeoJSON=Sn,n.GridLayer=ti,n.Handler=ln,n.Icon=es,n.ImageOverlay=va,n.LatLng=ee,n.LatLngBounds=X,n.Layer=Qt,n.LayerGroup=Jr,n.LineUtil=B0,n.Map=Le,n.Marker=ha,n.Mixin=I0,n.Path=Gn,n.Point=O,n.PolyUtil=R0,n.Polygon=ts,n.Polyline=Cn,n.Popup=ya,n.PosAnimation=Ru,n.Projection=F0,n.Rectangle=sh,n.Renderer=En,n.SVG=ri,n.SVGOverlay=Yu,n.TileLayer=rs,n.Tooltip=_a,n.Transformation=Ie,n.Util=ae,n.VideoOverlay=Qu,n.bind=c,n.bounds=ne,n.canvas=nh,n.circle=q0,n.circleMarker=G0,n.control=Xs,n.divIcon=rx,n.extend=s,n.featureGroup=$0,n.geoJSON=Ku,n.geoJson=Y0,n.gridLayer=sx,n.icon=W0,n.imageOverlay=X0,n.latLng=le,n.latLngBounds=se,n.layerGroup=Z0,n.map=C0,n.marker=V0,n.point=U,n.polygon=Q0,n.polyline=K0,n.popup=tx,n.rectangle=ox,n.setOptions=k,n.stamp=h,n.svg=rh,n.svgOverlay=ex,n.tileLayer=Ju,n.tooltip=nx,n.transformation=Ve,n.version=i,n.videoOverlay=J0;var cx=window.L;n.noConflict=function(){return window.L=cx,this},window.L=n})})(pd,pd.exports);var yL=pd.exports;const Re=ap(yL);(function(e,t,n){function i(s,a){for(;(s=s.parentElement)&&!s.classList.contains(a););return s}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(s,a){this._map=s,this._container=s._container,this._overlayPane=s._panes.overlayPane,this._popupPane=s._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(L.DomUtil.disableTextSelection(),s.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(s){L.setOptions(this,s)},_fireCreatedEvent:function(s){this._map.fire(L.Draw.Event.CREATED,{layer:s,layerType:this.type})},_cancelDrawing:function(s){s.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(s,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var s=this._markers.pop(),a=this._poly,c=a.getLatLngs(),u=c.splice(-1,1)[0];this._poly.setLatLngs(c),this._markerGroup.removeLayer(s),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(u,!1)}},addVertex:function(s){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(s))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(s)),this._poly.addLatLng(s),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(s,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var s=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(s[s.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent),c=this._map.layerPointToLatLng(a);this._currentLatLng=c,this._updateTooltip(c),this._updateGuide(a),this._mouseMarker.setLatLng(c),L.DomEvent.preventDefault(s.originalEvent)},_vertexChanged:function(s,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(s,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(s){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(s),this._clickHandled=!0,this._disableNewMarkers();var a=s.originalEvent,c=a.clientX,u=a.clientY;this._startPoint.call(this,c,u)}},_startPoint:function(s,a){this._mouseDownOrigin=L.point(s,a)},_onMouseUp:function(s){var a=s.originalEvent,c=a.clientX,u=a.clientY;this._endPoint.call(this,c,u,s),this._clickHandled=null},_endPoint:function(s,a,c){if(this._mouseDownOrigin){var u=L.point(s,a).distanceTo(this._mouseDownOrigin),h=this._calculateFinishDistance(c.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(c.latlng),this._finishShape()):h<10&&L.Browser.touch?this._finishShape():Math.abs(u)<9*(e.devicePixelRatio||1)&&this.addVertex(c.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(s){var a,c,u=s.originalEvent;!u.touches||!u.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=u.touches[0].clientX,c=u.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,c),this._endPoint.call(this,a,c,s),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(s){var a;if(this._markers.length>0){var c;if(this.type===L.Draw.Polyline.TYPE)c=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;c=this._markers[0]}var u=this._map.latLngToContainerPoint(c.getLatLng()),h=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),p=this._map.latLngToContainerPoint(h.getLatLng());a=u.distanceTo(p)}else a=1/0;return a},_updateFinishHandler:function(){var s=this._markers.length;s>1&&this._markers[s-1].on("click",this._finishShape,this),s>2&&this._markers[s-2].off("click",this._finishShape,this)},_createMarker:function(s){var a=new L.Marker(s,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(s){var a=this._markers?this._markers.length:0;a>0&&(s=s||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),s))},_updateTooltip:function(s){var a=this._getTooltipText();s&&this._tooltip.updatePosition(s),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(s,a){var c,u,h,p=Math.floor(Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))),m=this.options.guidelineDistance,g=this.options.maxGuideLineLength,b=p>g?p-g:m;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));b<p;b+=this.options.guidelineDistance)c=b/p,u={x:Math.floor(s.x*(1-c)+c*a.x),y:Math.floor(s.y*(1-c)+c*a.y)},h=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),h.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(h,u)},_updateGuideColor:function(s){if(this._guidesContainer)for(var a=0,c=this._guidesContainer.childNodes.length;a<c;a++)this._guidesContainer.childNodes[a].style.backgroundColor=s},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var s,a,c=this.options.showLength;return this._markers.length===0?s={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=c?this._getMeasurementString():"",s=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),s},_updateRunningMeasure:function(s,a){var c,u,h=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(c=h-(a?2:1),u=L.GeometryUtil.isVersion07x()?s.distanceTo(this._markers[c].getLatLng())*(this.options.factor||1):this._map.distance(s,this._markers[c].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=u*(a?1:-1))},_getMeasurementString:function(){var s,a=this._currentLatLng,c=this._markers[this._markers.length-1].getLatLng();return s=L.GeometryUtil.isVersion07x()?c&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(c)*(this.options.factor||1):this._measurementRunningTotal||0:c&&a?this._measurementRunningTotal+this._map.distance(a,c)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(s,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var s=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(s,a){L.Draw.Polyline.prototype.initialize.call(this,s,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var s=this._markers.length;s===1&&this._markers[0].on("click",this._finishShape,this),s>2&&(this._markers[s-1].on("dblclick",this._finishShape,this),s>3&&this._markers[s-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var s,a;return this._markers.length===0?s=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(s=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(s=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:s,subtext:a}},_getMeasurementString:function(){var s=this._area,a="";return s||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),s&&(a+="<br>"+L.GeometryUtil.readableArea(s,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(s,a){var c;!this.options.allowIntersection&&this.options.showArea&&(c=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(c)),L.Draw.Polyline.prototype._vertexChanged.call(this,s,a)},_cleanUpShape:function(){var s=this._markers.length;s>0&&(this._markers[0].off("click",this._finishShape,this),s>2&&this._markers[s-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(s,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(s){this._isDrawing=!0,this._startLatLng=s.latlng,L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(s.originalEvent)},_onMouseMove:function(s){var a=s.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(s,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(s){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!i(s.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(s){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,s)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,s),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_getTooltipText:function(){var s,a,c,u=L.Draw.SimpleShape.prototype._getTooltipText.call(this),h=this._shape,p=this.options.showArea;return h&&(s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(s),c=p?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:u.text,subtext:c}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(s,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(s){var a=s.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(s){return new L.Marker(s,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(s){this._onMouseMove(s),this._onClick()},_fireCreatedEvent:function(){var s=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(s,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,s,a)},_fireCreatedEvent:function(){var s=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,s)},_createMarker:function(s){return new L.CircleMarker(s,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(s,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,s,a)},_drawShape:function(s){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(s);else var a=this._map.distance(this._startLatLng,s);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var s=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,s)},_onMouseMove:function(s){var a,c=s.latlng,u=this.options.showRadius,h=this.options.metric;if(this._tooltip.updatePosition(c),this._isDrawing){this._drawShape(c),a=this._shape.getRadius().toFixed(1);var p="";u&&(p=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,h,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:p})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(s,a){this._marker=s,L.setOptions(this,a)},addHooks:function(){var s=this._marker;s.dragging.enable(),s.on("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},removeHooks:function(){var s=this._marker;s.dragging.disable(),s.off("dragend",this._onDragEnd,s),this._toggleMarkerHighlight()},_onDragEnd:function(s){var a=s.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var s=this._marker._icon;s&&(s.style.display="none",L.DomUtil.hasClass(s,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,-4)):(L.DomUtil.addClass(s,"leaflet-edit-marker-selected"),this._offsetMarker(s,4)),s.style.display="")},_offsetMarker:function(s,a){var c=parseInt(s.style.marginTop,10)-a,u=parseInt(s.style.marginLeft,10)-a;s.style.marginTop=c+"px",s.style.marginLeft=u+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(s){this.latlngs=[s._latlngs],s._holes&&(this.latlngs=this.latlngs.concat(s._holes)),this._poly=s,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(s){for(var a=0;a<this._verticesHandlers.length;a++)s(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(s){s.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(s){s.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(s){s.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var s=0;s<this.latlngs.length;s++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[s],this._poly.options.poly))},_updateLatLngs:function(s){this.latlngs=[s.layer._latlngs],s.layer._holes&&(this.latlngs=this.latlngs.concat(s.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(s,a,c){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=s,c&&c.drawError&&(c.drawError=L.Util.extend({},this.options.drawError,c.drawError)),this._latlngs=a,L.setOptions(this,c)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var s=this._poly,a=s._path;s instanceof L.Polygon||(s.options.fill=!1,s.options.editing&&(s.options.editing.fill=!1)),a&&s.options.editing&&s.options.editing.className&&(s.options.original.className&&s.options.original.className.split(" ").forEach(function(c){L.DomUtil.removeClass(a,c)}),s.options.editing.className.split(" ").forEach(function(c){L.DomUtil.addClass(a,c)})),s.setStyle(s.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var s=this._poly,a=s._path;a&&s.options.editing&&s.options.editing.className&&(s.options.editing.className.split(" ").forEach(function(c){L.DomUtil.removeClass(a,c)}),s.options.original.className&&s.options.original.className.split(" ").forEach(function(c){L.DomUtil.addClass(a,c)})),s.setStyle(s.options.original),s._map&&(s._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var s,a,c,u,h=this._defaultShape();for(s=0,c=h.length;s<c;s++)u=this._createMarker(h[s],s),u.on("click",this._onMarkerClick,this),u.on("contextmenu",this._onContextMenu,this),this._markers.push(u);var p,m;for(s=0,a=c-1;s<c;a=s++)(s!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(p=this._markers[a],m=this._markers[s],this._createMiddleMarker(p,m),this._updatePrevNext(p,m))},_createMarker:function(s,a){var c=new L.Marker.Touch(s,{draggable:!0,icon:this.options.icon});return c._origLatLng=s,c._index=a,c.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(c),c},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var s=this._defaultShape(),a=[].splice.apply(s,arguments);return this._poly._convertLatLngs(s,!0),this._poly.redraw(),a},_removeMarker:function(s){var a=s._index;this._markerGroup.removeLayer(s),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(s){var a=s.target,c=this._poly,u=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),c.options.poly){var h=c._map._editTooltip;if(!c.options.poly.allowIntersection&&c.intersects()){L.extend(a._origLatLng,u),a.setLatLng(u);var p=c.options.color;c.setStyle({color:this.options.drawError.color}),h&&h.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){c.setStyle({color:p}),h&&h.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var m=this._poly.getLatLngs();this._poly._convertLatLngs(m,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(s){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,c=s.target;this._defaultShape().length<a||(this._removeMarker(c),this._updatePrevNext(c._prev,c._next),c._middleLeft&&this._markerGroup.removeLayer(c._middleLeft),c._middleRight&&this._markerGroup.removeLayer(c._middleRight),c._prev&&c._next?this._createMiddleMarker(c._prev,c._next):c._prev?c._next||(c._prev._middleRight=null):c._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(s){var a=s.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),c=this._map.layerPointToLatLng(a),u=s.target;L.extend(u._origLatLng,c),u._middleLeft&&u._middleLeft.setLatLng(this._getMiddleLatLng(u._prev,u)),u._middleRight&&u._middleRight.setLatLng(this._getMiddleLatLng(u,u._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(s,a){this._markerGroup.eachLayer(function(c){c._index>s&&(c._index+=a)})},_createMiddleMarker:function(s,a){var c,u,h,p=this._getMiddleLatLng(s,a),m=this._createMarker(p);m.setOpacity(.6),s._middleRight=a._middleLeft=m,u=function(){m.off("touchmove",u,this);var g=a._index;m._index=g,m.off("click",c,this).on("click",this._onMarkerClick,this),p.lat=m.getLatLng().lat,p.lng=m.getLatLng().lng,this._spliceLatLngs(g,0,p),this._markers.splice(g,0,m),m.setOpacity(1),this._updateIndexes(g,1),a._index++,this._updatePrevNext(s,m),this._updatePrevNext(m,a),this._poly.fire("editstart")},h=function(){m.off("dragstart",u,this),m.off("dragend",h,this),m.off("touchmove",u,this),this._createMiddleMarker(s,m),this._createMiddleMarker(m,a)},c=function(){u.call(this),h.call(this),this._fireEdit()},m.on("click",c,this).on("dragstart",u,this).on("dragend",h,this).on("touchmove",u,this),this._markerGroup.addLayer(m)},_updatePrevNext:function(s,a){s&&(s._next=a),a&&(a._prev=s)},_getMiddleLatLng:function(s,a){var c=this._poly._map,u=c.project(s.getLatLng()),h=c.project(a.getLatLng());return c.unproject(u._add(h)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(s,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=s,L.Util.setOptions(this,a)},addHooks:function(){var s=this._shape;this._shape._map&&(this._map=this._shape._map,s.setStyle(s.options.editing),s._map&&(this._map=s._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var s=this._shape;if(s.setStyle(s.options.original),s._map){this._unbindMarker(this._moveMarker);for(var a=0,c=this._resizeMarkers.length;a<c;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(s,a){var c=new L.Marker.Touch(s,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(c),this._markerGroup.addLayer(c),c},_bindMarker:function(s){s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(s){s.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(s){s.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(s){var a=s.target,c=a.getLatLng();a===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(s){s.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(s){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s),typeof this._getCorners=="function"){var a=this._getCorners(),c=s.target,u=c._cornerIndex;c.setOpacity(0),this._oppositeCorner=a[(u+2)%4],this._toggleCornerMarkers(0,u)}this._shape.fire("editstart")},_onTouchMove:function(s){var a=this._map.mouseEventToLayerPoint(s.originalEvent.touches[0]),c=this._map.layerPointToLatLng(a);return s.target===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),!1},_onTouchEnd:function(s){s.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getBounds(),a=s.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var s=this._getCorners();this._resizeMarkers=[];for(var a=0,c=s.length;a<c;a++)this._resizeMarkers.push(this._createMarker(s[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(s){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,s);var a=this._getCorners(),c=s.target,u=c._cornerIndex;this._oppositeCorner=a[(u+2)%4],this._toggleCornerMarkers(0,u)},_onMarkerDragEnd:function(s){var a,c,u=s.target;u===this._moveMarker&&(a=this._shape.getBounds(),c=a.getCenter(),u.setLatLng(c)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,s)},_move:function(s){for(var a,c=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),u=this._shape.getBounds(),h=u.getCenter(),p=[],m=0,g=c.length;m<g;m++)a=[c[m].lat-h.lat,c[m].lng-h.lng],p.push([s.lat+a[0],s.lng+a[1]]);this._shape.setLatLngs(p),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(s){var a;this._shape.setBounds(L.latLngBounds(s,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var s=this._shape.getBounds();return[s.getNorthWest(),s.getNorthEast(),s.getSouthEast(),s.getSouthWest()]},_toggleCornerMarkers:function(s){for(var a=0,c=this._resizeMarkers.length;a<c;a++)this._resizeMarkers[a].setOpacity(s)},_repositionCornerMarkers:function(){for(var s=this._getCorners(),a=0,c=this._resizeMarkers.length;a<c;a++)this._resizeMarkers[a].setLatLng(s[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var s=this._shape.getLatLng();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(s){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(s);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(s),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var s=this._shape.getLatLng(),a=this._getResizeMarkerPoint(s);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(s){var a=this._shape._radius*Math.cos(Math.PI/4),c=this._map.project(s);return this._map.unproject([c.x+a,c.y-a])},_resize:function(s){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(s):radius=this._map.distance(a,s),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(s,a){var c={};if(s.touches!==void 0){if(!s.touches.length)return;c=s.touches[0]}else if(s.pointerType!=="touch"||(c=s,!this._filterClick(s)))return;var u=this._map.mouseEventToContainerPoint(c),h=this._map.mouseEventToLayerPoint(c),p=this._map.layerPointToLatLng(h);this._map.fire(a,{latlng:p,layerPoint:h,containerPoint:u,pageX:c.pageX,pageY:c.pageY,originalEvent:s})},_filterClick:function(s){var a=s.timeStamp||s.originalEvent.timeStamp,c=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return c&&c>100&&c<500||s.target._simulatedClick&&!s._simulated?(L.DomEvent.stop(s),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(s){this._map._loaded&&this._touchEvent(s,"touchstart")},_onTouchEnd:function(s){this._map._loaded&&this._touchEvent(s,"touchend")},_onTouchCancel:function(s){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(s,a)}},_onTouchLeave:function(s){this._map._loaded&&this._touchEvent(s,"touchleave")},_onTouchMove:function(s){this._map._loaded&&this._touchEvent(s,"touchmove")},_detectIE:function(){var s=e.navigator.userAgent,a=s.indexOf("MSIE ");if(a>0)return parseInt(s.substring(a+5,s.indexOf(".",a)),10);if(s.indexOf("Trident/")>0){var c=s.indexOf("rv:");return parseInt(s.substring(c+3,s.indexOf(".",c)),10)}var u=s.indexOf("Edge/");return u>0&&parseInt(s.substring(u+5,s.indexOf(".",u)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var s=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(s,"leaflet-clickable"),L.DomEvent.on(s,"click",this._onMouseClick,this),L.DomEvent.on(s,"keypress",this._onKeyPress,this);for(var c=0;c<a.length;c++)L.DomEvent.on(s,a[c],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var s=e.navigator.userAgent,a=s.indexOf("MSIE ");if(a>0)return parseInt(s.substring(a+5,s.indexOf(".",a)),10);if(s.indexOf("Trident/")>0){var c=s.indexOf("rv:");return parseInt(s.substring(c+3,s.indexOf(".",c)),10)}var u=s.indexOf("Edge/");return u>0&&parseInt(s.substring(u+5,s.indexOf(".",u)),10)}}),L.LatLngUtil={cloneLatLngs:function(s){for(var a=[],c=0,u=s.length;c<u;c++)Array.isArray(s[c])?a.push(L.LatLngUtil.cloneLatLngs(s[c])):a.push(this.cloneLatLng(s[c]));return a},cloneLatLng:function(s){return L.latLng(s.lat,s.lng)}},function(){var s={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var c,u,h=a.length,p=0,m=Math.PI/180;if(h>2){for(var g=0;g<h;g++)c=a[g],u=a[(g+1)%h],p+=(u.lng-c.lng)*m*(2+Math.sin(c.lat*m)+Math.sin(u.lat*m));p=6378137*p*6378137/2}return Math.abs(p)},formattedNumber:function(a,c){var u=parseFloat(a).toFixed(c),h=L.drawLocal.format&&L.drawLocal.format.numeric,p=h&&h.delimiters,m=p&&p.thousands,g=p&&p.decimal;if(m||g){var b=u.split(".");u=m?b[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m):b[0],g=g||".",b.length>1&&(u=u+g+b[1])}return u},readableArea:function(a,c,m){var h,p,m=L.Util.extend({},s,m);return c?(p=["ha","m"],type=typeof c,type==="string"?p=[c]:type!=="boolean"&&(p=c),h=a>=1e6&&p.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,m.km)+" km":a>=1e4&&p.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,m.ha)+" ha":L.GeometryUtil.formattedNumber(a,m.m)+" m"):(a/=.836127,h=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,m.mi)+" mi":a>=4840?L.GeometryUtil.formattedNumber(a/4840,m.ac)+" acres":L.GeometryUtil.formattedNumber(a,m.yd)+" yd"),h},readableDistance:function(a,c,u,h,g){var m,g=L.Util.extend({},s,g);switch(c?typeof c=="string"?c:"metric":u?"feet":h?"nauticalMile":"yards"){case"metric":m=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,g.km)+" km":L.GeometryUtil.formattedNumber(a,g.m)+" m";break;case"feet":a*=3.28083,m=L.GeometryUtil.formattedNumber(a,g.ft)+" ft";break;case"nauticalMile":a*=.53996,m=L.GeometryUtil.formattedNumber(a/1e3,g.nm)+" nm";break;case"yards":default:a*=1.09361,m=a>1760?L.GeometryUtil.formattedNumber(a/1760,g.mi)+" miles":L.GeometryUtil.formattedNumber(a,g.yd)+" yd"}return m},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(s,a,c,u){return this._checkCounterclockwise(s,c,u)!==this._checkCounterclockwise(a,c,u)&&this._checkCounterclockwise(s,a,c)!==this._checkCounterclockwise(s,a,u)},_checkCounterclockwise:function(s,a,c){return(c.y-s.y)*(a.x-s.x)>(a.y-s.y)*(c.x-s.x)}}),L.Polyline.include({intersects:function(){var s,a,c,u=this._getProjectedPoints(),h=u?u.length:0;if(this._tooFewPointsForIntersection())return!1;for(s=h-1;s>=3;s--)if(a=u[s-1],c=u[s],this._lineSegmentsIntersectsRange(a,c,s-2))return!0;return!1},newLatLngIntersects:function(s,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(s),a)},newPointIntersects:function(s,a){var c=this._getProjectedPoints(),u=c?c.length:0,h=c?c[u-1]:null,p=u-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(h,s,p,a?1:0)},_tooFewPointsForIntersection:function(s){var a=this._getProjectedPoints(),c=a?a.length:0;return c+=s||0,!a||c<=3},_lineSegmentsIntersectsRange:function(s,a,c,u){var h,p,m=this._getProjectedPoints();u=u||0;for(var g=c;g>u;g--)if(h=m[g-1],p=m[g],L.LineUtil.segmentsIntersect(s,a,h,p))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var s=[],a=this._defaultShape(),c=0;c<a.length;c++)s.push(this._map.latLngToLayerPoint(a[c]));return s}}),L.Polygon.include({intersects:function(){var s,a,c,u,h=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(s=h.length,a=h[0],c=h[s-1],u=s-2,this._lineSegmentsIntersectsRange(c,a,u,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(s){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,s);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(s){var a,c=L.DomUtil.create("div","leaflet-draw"),u=!1;for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&(a=this._toolbars[h].addToolbar(s))&&(u||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),u=!0),c.appendChild(a));return c},onRemove:function(){for(var s in this._toolbars)this._toolbars.hasOwnProperty(s)&&this._toolbars[s].removeToolbar()},setDrawingOptions:function(s){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(s)},_toolbarEnabled:function(s){var a=s.target;for(var c in this._toolbars)this._toolbars[c]!==a&&this._toolbars[c].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(s){L.setOptions(this,s),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(s){var a,c=L.DomUtil.create("div","leaflet-draw-section"),u=0,h=this._toolbarClass||"",p=this.getModeHandlers(s);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=s,a=0;a<p.length;a++)p[a].enabled&&this._initModeHandler(p[a].handler,this._toolbarContainer,u++,h,p[a].title);if(u)return this._lastButtonIndex=--u,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),c.appendChild(this._toolbarContainer),c.appendChild(this._actionsContainer),c},removeToolbar:function(){for(var s in this._modes)this._modes.hasOwnProperty(s)&&(this._disposeButton(this._modes[s].button,this._modes[s].handler.enable,this._modes[s].handler),this._modes[s].handler.disable(),this._modes[s].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,c=this._actionButtons.length;a<c;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(s,a,c,u,h){var p=s.type;this._modes[p]={},this._modes[p].handler=s,this._modes[p].button=this._createButton({type:p,title:h,className:u+"-"+p,container:a,callback:this._modes[p].handler.enable,context:this._modes[p].handler}),this._modes[p].buttonIndex=c,this._modes[p].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(s){var a=L.DomUtil.create("a",s.className||"",s.container),c=L.DomUtil.create("span","sr-only",s.container);a.href="#",a.appendChild(c),s.title&&(a.title=s.title,c.innerHTML=s.title),s.text&&(a.innerHTML=s.text,c.innerHTML=s.text);var u=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,u,s.callback,s.context),a},_disposeButton:function(s,a){var c=this._detectIOS()?"touchstart":"click";L.DomEvent.off(s,"click",L.DomEvent.stopPropagation).off(s,"mousedown",L.DomEvent.stopPropagation).off(s,"dblclick",L.DomEvent.stopPropagation).off(s,"touchstart",L.DomEvent.stopPropagation).off(s,"click",L.DomEvent.preventDefault).off(s,c,a)},_handlerActivated:function(s){this.disable(),this._activeMode=this._modes[s.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(s){var a,c,u,h,p=this._actionsContainer,m=this.getActions(s),g=m.length;for(c=0,u=this._actionButtons.length;c<u;c++)this._disposeButton(this._actionButtons[c].button,this._actionButtons[c].callback);for(this._actionButtons=[];p.firstChild;)p.removeChild(p.firstChild);for(var b=0;b<g;b++)"enabled"in m[b]&&!m[b].enabled||(a=L.DomUtil.create("li","",p),h=this._createButton({title:m[b].title,text:m[b].text,container:a,callback:m[b].callback,context:m[b].context}),this._actionButtons.push({button:h,callback:m[b].callback}))},_showActionsToolbar:function(){var s=this._activeMode.buttonIndex,a=this._lastButtonIndex,c=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=c+"px",s===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),s===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(s){this._map=s,this._popupPane=s._panes.popupPane,this._visible=!1,this._container=s.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(s){return this._container?(s.subtext=s.subtext||"",s.subtext.length!==0||this._singleLineLabel?s.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(s.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+s.subtext+"</span><br />":"")+"<span>"+s.text+"</span>",s.text||s.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(s){var a=this._map.latLngToLayerPoint(s),c=this._container;return this._container&&(this._visible&&(c.style.visibility="inherit"),L.DomUtil.setPosition(c,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(s){for(var a in this.options)this.options.hasOwnProperty(a)&&s[a]&&(s[a]=L.extend({},this.options[a],s[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,s)},getModeHandlers:function(s){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(s,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(s,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(s,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(s,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(s,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(s,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(s){return[{enabled:s.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:s.completeShape,context:s},{enabled:s.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:s.deleteLastVertex,context:s},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(s){L.setOptions(this,s);for(var a in this._modes)this._modes.hasOwnProperty(a)&&s.hasOwnProperty(a)&&this._modes[a].handler.setOptions(s[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(s){s.edit&&(s.edit.selectedPathOptions===void 0&&(s.edit.selectedPathOptions=this.options.edit.selectedPathOptions),s.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,s.edit.selectedPathOptions)),s.remove&&(s.remove=L.extend({},this.options.remove,s.remove)),s.poly&&(s.poly=L.extend({},this.options.poly,s.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,s),this._selectedFeatureCount=0},getModeHandlers:function(s){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(s,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(s,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(s){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return s.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(s){var a=L.Toolbar.prototype.addToolbar.call(this,s);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var s,a=this.options.featureGroup,c=a.getLayers().length!==0;this.options.edit&&(s=this._modes[L.EditToolbar.Edit.TYPE].button,c?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(s=this._modes[L.EditToolbar.Delete.TYPE].button,c?L.DomUtil.removeClass(s,"leaflet-disabled"):L.DomUtil.addClass(s,"leaflet-disabled"),s.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(s,a){if(L.Handler.prototype.initialize.call(this,s),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),s._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(s){this._revertLayer(s)},this)},save:function(){var s=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(s.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:s})},_backupLayer:function(s){var a=L.Util.stamp(s);this._uneditedLayerProps[a]||(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(s.getLatLngs())}:s instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng()),radius:s.getRadius()}:(s instanceof L.Marker||s instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(s.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(s){var a=L.Util.stamp(s);s.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(s instanceof L.Polyline||s instanceof L.Polygon||s instanceof L.Rectangle?s.setLatLngs(this._uneditedLayerProps[a].latlngs):s instanceof L.Circle?(s.setLatLng(this._uneditedLayerProps[a].latlng),s.setRadius(this._uneditedLayerProps[a].radius)):(s instanceof L.Marker||s instanceof L.CircleMarker)&&s.setLatLng(this._uneditedLayerProps[a].latlng),s.fire("revert-edited",{layer:s}))},_enableLayerEdit:function(s){var a,c,u=s.layer||s.target||s;this._backupLayer(u),this.options.poly&&(c=L.Util.extend({},this.options.poly),u.options.poly=c),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=u.options.color,a.fillColor=u.options.fillColor),u.options.original=L.extend({},u.options),u.options.editing=a),u instanceof L.Marker?(u.editing&&u.editing.enable(),u.dragging.enable(),u.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):u.editing.enable()},_disableLayerEdit:function(s){var a=s.layer||s.target||s;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_onMarkerDragEnd:function(s){var a=s.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(s){var a=s.originalEvent.changedTouches[0],c=this._map.mouseEventToLayerPoint(a),u=this._map.layerPointToLatLng(c);s.target.setLatLng(u)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(s,a){if(L.Handler.prototype.initialize.call(this,s),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var s=this._map;s&&(s.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(s){this._deletableLayers.addLayer(s),s.fire("revert-deleted",{layer:s})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(s){this._removeLayer({layer:s})},this),this.save()},_enableLayerDelete:function(s){(s.layer||s.target||s).on("click",this._removeLayer,this)},_disableLayerDelete:function(s){var a=s.layer||s.target||s;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(s){var a=s.layer||s.target||s;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(s){this._tooltip.updatePosition(s.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);function _L(e){return{x:e.lng,y:e.lat}}function Wi(e){return e.map(_L)}function md(e,t){if(t.length<3)return!1;let n=!1;const i=t.length;for(let s=0,a=i-1;s<i;a=s++){const c=t[s].x,u=t[s].y,h=t[a].x,p=t[a].y;u>e.y!=p>e.y&&e.x<(h-c)*(e.y-u)/(p-u)+c&&(n=!n)}return n}function Ua(e,t,n){const i=(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y);return Math.abs(i)<1e-10?0:i>0?1:2}function Ha(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function o0(e,t){const{p1:n,p2:i}=e,{p1:s,p2:a}=t,c=Ua(n,i,s),u=Ua(n,i,a),h=Ua(s,a,n),p=Ua(s,a,i);return!!(c!==u&&h!==p||c===0&&Ha(n,s,i)||u===0&&Ha(n,a,i)||h===0&&Ha(s,n,a)||p===0&&Ha(s,i,a))}function bL(e,t){if(e.length<3||t.length<3)return!1;for(const n of e)if(md(n,t))return!0;for(const n of t)if(md(n,e))return!0;for(let n=0;n<e.length;n++){const i={p1:e[n],p2:e[(n+1)%e.length]};for(let s=0;s<t.length;s++){const a={p1:t[s],p2:t[(s+1)%t.length]};if(o0(i,a))return!0}}return!1}function l0(e,t){return bL(Wi(e),Wi(t))}function c0(e,t){const n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function wL(e,t){const{p1:n,p2:i}=t,s=i.x-n.x,a=i.y-n.y,c=s*s+a*a;if(c===0)return n;let u=((e.x-n.x)*s+(e.y-n.y)*a)/c;return u=Math.max(0,Math.min(1,u)),{x:n.x+u*s,y:n.y+u*a}}function d0(e,t){if(t.length<2)return e;let n=t[0],i=1/0;for(let s=0;s<t.length;s++){const a={p1:t[s],p2:t[(s+1)%t.length]},c=wL(e,a),u=c0(e,c);u<i&&(i=u,n=c)}return n}function LL(e){if(e.length<3)return!1;for(let t=0;t<e.length;t++){const n={p1:e[t],p2:e[(t+1)%e.length]};for(let i=t+2;i<e.length;i++){if(t===0&&i===e.length-1)continue;const s={p1:e[i],p2:e[(i+1)%e.length]};if(o0(n,s))return!1}}return!0}function rp(e){return LL(Wi(e))}delete Re.Icon.Default.prototype._getIconUrl;Re.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const NL=5e-4,kL=5e-5;function jL(e,t,n=NL){const i={x:e.lng,y:e.lat};let s=null,a=1/0;for(const c of t){const u=Wi(c),h=d0(i,u),p=c0(i,h);p<n&&p<a&&(a=p,s=h)}return s?{lat:s.y,lng:s.x}:e}function CL(e,t,n=kL){const i={x:e.lng,y:e.lat};for(const s of t){const a=Wi(s);if(md(i,a)){const c=d0(i,a),u=a.reduce((b,S)=>b+S.x,0)/a.length,h=a.reduce((b,S)=>b+S.y,0)/a.length;let p=c.x-u,m=c.y-h;const g=Math.sqrt(p*p+m*m);return g>0&&(p/=g,m/=g),{lat:c.y+m*n,lng:c.x+p*n}}}return e}function sp(e,t,n){return e.length<3?e:e.map(i=>{let s=jL(i,t);return s=CL(s,t),s})}const u0=({areas:e=[],selectedAreaId:t,editMode:n=!1,initialPolygon:i,onPolygonChange:s,onAreaClick:a,onAreaEdit:c,onAreaDelete:u,center:h=[-17.3935,-66.157],zoom:p=12,height:m="500px",editingAreaId:g,enableSnapToEdge:b=!0,onOverlapError:S,onOverlapResolved:w})=>{const k=x.useRef(null),C=x.useRef(null),_=x.useRef(null),y=x.useRef(null),N=x.useRef(null),[E,P]=x.useState(!1),[M,I]=x.useState(!1),D=x.useCallback(()=>e.filter(H=>H.id!==g&&H.area&&H.area.length>=3).map(H=>H.area).filter(H=>H!==void 0),[e,g]),K=x.useCallback(H=>{if(H.length<3)return!1;for(const Q of e)if(!(g&&Q.id===g)&&!(!Q.area||Q.area.length<3)&&l0(H,Q.area))return P(!0),S==null||S(Q.name),!0;return P(!1),w==null||w(),!1},[e,g,S,w]),F=x.useRef(s);F.current=s;const Z=x.useRef(K);Z.current=K;const W=x.useRef(b);W.current=b;const ae=x.useRef(D);ae.current=D;const Y=x.useRef(S);Y.current=S;const re=x.useRef(w);return re.current=w,x.useEffect(()=>{if(!k.current||C.current)return;const H=Re.map(k.current,{zoomControl:!0,scrollWheelZoom:!0}).setView(h,p);return n?H.zoomControl.setPosition("bottomright"):H.zoomControl.setPosition("topleft"),Re.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:19}).addTo(H),_.current=new Re.FeatureGroup().addTo(H),y.current=new Re.FeatureGroup().addTo(H),C.current=H,()=>{H.remove(),C.current=null}},[]),x.useEffect(()=>{const H=C.current;H&&(n?H.zoomControl.setPosition("bottomright"):H.zoomControl.setPosition("topleft"))},[n]),x.useEffect(()=>{const H=C.current,Q=y.current;if(!(!H||!Q)&&(N.current&&(H.removeControl(N.current),N.current=null),n)){const O=new Re.Control.Draw({position:"topright",draw:{polygon:{allowIntersection:!0,showArea:!0,showLength:!0,metric:!0,drawError:{color:"#e1e1e1",message:"<strong>Error!</strong>"},shapeOptions:{color:"#3B82F6",fillColor:"#3B82F6",fillOpacity:.2,weight:2},guidelineDistance:10,repeatMode:!1},polyline:!1,rectangle:!1,circle:!1,circlemarker:!1,marker:!1},edit:{featureGroup:Q,remove:!0}});H.addControl(O),N.current=O;const G=ne=>{var fe,_e;const X=ne;Q.clearLayers();const se=X.layer.getLatLngs()[0],ee=se.map(ve=>[ve.lat,ve.lng]);let le=Df(ee);if(!rp(le)){I(!0);const ve=Re.polygon(se,{color:"#EF4444",fillColor:"#EF4444",fillOpacity:.3,dashArray:"5, 5"});Q.addLayer(ve),(fe=F.current)==null||fe.call(F,null);return}if(I(!1),W.current){le=sp(le,ae.current());const ve=as(le),Ie=Re.polygon(ve,{color:"#3B82F6",fillColor:"#3B82F6",fillOpacity:.3,weight:2});Q.addLayer(Ie)}else Q.addLayer(X.layer);const A=Z.current(le);Q.eachLayer(ve=>{ve instanceof Re.Polygon&&(A?ve.setStyle({color:"#EF4444",fillColor:"#EF4444"}):ve.setStyle({color:"#3B82F6",fillColor:"#3B82F6"}))}),(_e=F.current)==null||_e.call(F,le)},U=ne=>{ne.layers.eachLayer(se=>{var _e,ve;const le=se.getLatLngs()[0].map(Ie=>[Ie.lat,Ie.lng]);let A=Df(le);if(!rp(A)){I(!0),se.setStyle({color:"#EF4444",fillColor:"#EF4444",dashArray:"5, 5"}),(_e=F.current)==null||_e.call(F,null);return}if(I(!1),W.current){A=sp(A,ae.current());const Ie=as(A);se.setLatLngs(Ie)}Z.current(A)?se.setStyle({color:"#EF4444",fillColor:"#EF4444",dashArray:void 0}):se.setStyle({color:"#3B82F6",fillColor:"#3B82F6",dashArray:void 0}),(ve=F.current)==null||ve.call(F,A)})},$=()=>{var ne,X;P(!1),I(!1),(ne=re.current)==null||ne.call(re),(X=F.current)==null||X.call(F,null)};return H.on(Re.Draw.Event.CREATED,G),H.on(Re.Draw.Event.EDITED,U),H.on(Re.Draw.Event.DELETED,$),()=>{H.off(Re.Draw.Event.CREATED,G),H.off(Re.Draw.Event.EDITED,U),H.off(Re.Draw.Event.DELETED,$)}}},[n]),x.useEffect(()=>{const H=y.current,Q=C.current;if(!(!H||!n)&&(H.clearLayers(),i&&i.length>=3)){const O=as(i),G=K(i),U=Re.polygon(O,{color:G?"#EF4444":"#3B82F6",fillColor:G?"#EF4444":"#3B82F6",fillOpacity:.3,weight:2});H.addLayer(U),Q==null||Q.fitBounds(U.getBounds(),{padding:[50,50]})}},[i,n,K]),x.useEffect(()=>{const H=_.current,Q=C.current;if(!H||!Q||(H.clearLayers(),!e||e.length===0))return;if((n?e.filter(G=>G.id!==g):e).forEach(G=>{var le;if(!G.area||G.area.length<3)return;const U=as(G.area),$=t===G.id,ne=Pg(G.id||0),X=n?.25:$?.6:.45,se=n?.5:$?1:.8,ee=Re.polygon(U,{color:$?"#000000":ne,fillColor:ne,fillOpacity:X,weight:$?3:2,opacity:se});if((!n||G.id!==g)&&ee.bindTooltip(G.name,{permanent:!n,direction:"center",className:"area-label"}),!n){if(c||u){const A=document.createElement("div");A.className="area-popup-content",A.innerHTML=`
            <div style="padding: 8px; min-width: 150px;">
              <h4 style="margin: 0 0 8px 0; font-weight: bold; font-size: 14px; color: #1f2937;">${G.name}</h4>
              <p style="margin: 0 0 12px 0; font-size: 12px; color: #6b7280;">${((le=G.area)==null?void 0:le.length)||0} puntos</p>
              <div style="display: flex; gap: 8px;">
                ${c?`<button id="edit-area-${G.id}" style="flex: 1; padding: 6px 12px; background: #3B82F6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500;"> Editar</button>`:""}
                ${u?`<button id="delete-area-${G.id}" style="flex: 1; padding: 6px 12px; background: #EF4444; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 500;"> Eliminar</button>`:""}
              </div>
            </div>
          `,ee.bindPopup(A,{closeButton:!0,className:"area-popup"}),ee.on("popupopen",()=>{const fe=document.getElementById(`edit-area-${G.id}`),_e=document.getElementById(`delete-area-${G.id}`);fe&&c&&(fe.onclick=()=>{ee.closePopup(),c(G)}),_e&&u&&(_e.onclick=()=>{ee.closePopup(),u(G)})})}ee.on("click",()=>{a==null||a(G)}),ee.on("mouseover",()=>{$||ee.setStyle({fillOpacity:.65,weight:3})}),ee.on("mouseout",()=>{$||ee.setStyle({fillOpacity:.45,weight:2})})}H.addLayer(ee)}),!n&&e.length>0&&!t)try{Q.fitBounds(H.getBounds(),{padding:[50,50]})}catch{}},[e,t,n,g,a]),x.useEffect(()=>{const H=C.current;if(!H||!t||n)return;const Q=e.find(U=>U.id===t);if(!Q||!Q.area||Q.area.length<3)return;const O=as(Q.area),G=Re.polygon(O);H.fitBounds(G.getBounds(),{padding:[100,100]})},[t,e,n]),o.jsxs("div",{className:"relative",children:[o.jsx("div",{ref:k,style:{height:m,width:"100%"},className:"rounded-xl overflow-hidden border border-gray-200 shadow-sm"}),n&&o.jsxs("div",{className:"absolute top-3 left-3 z-[1000] flex flex-col gap-2",children:[o.jsxs("div",{className:"bg-blue-600 text-white px-3 py-1.5 rounded-lg shadow-lg text-sm font-medium flex items-center gap-2",children:[o.jsx("span",{className:"animate-pulse",children:""}),"Modo Edicin"]}),E&&o.jsx("div",{className:"bg-red-600 text-white px-3 py-1.5 rounded-lg shadow-lg text-xs animate-pulse",children:" Solapamiento detectado"}),M&&o.jsx("div",{className:"bg-red-600 text-white px-3 py-1.5 rounded-lg shadow-lg text-xs animate-pulse",children:" Polgono invlido (se cruza)"})]})]})},SL=({areas:e,loading:t=!1,selectedAreaId:n,onSelect:i,onEdit:s,onDelete:a})=>{const c=u=>{var h;return((h=u.area)==null?void 0:h.length)||0};return t?o.jsxs("div",{className:"bg-lead-50 rounded-xl shadow-sm border border-lead-200 overflow-hidden",children:[o.jsx("div",{className:"px-4 py-3 border-b border-lead-200 bg-lead-100",children:o.jsx("h3",{className:"text-sm font-semibold text-lead-700",children:"Lista de Zonas"})}),o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-accent-500 mx-auto"}),o.jsx("p",{className:"mt-3 text-sm text-lead-500",children:"Cargando reas..."})]})]}):e.length===0?o.jsxs("div",{className:"bg-lead-50 rounded-xl shadow-sm border border-lead-200 overflow-hidden",children:[o.jsx("div",{className:"px-4 py-3 border-b border-lead-200 bg-lead-100",children:o.jsx("h3",{className:"text-sm font-semibold text-lead-700",children:"Lista de Zonas"})}),o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-lead-100 rounded-full flex items-center justify-center mb-4",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("p",{className:"text-lead-600 font-medium",children:"No hay reas registradas"}),o.jsx("p",{className:"text-sm text-lead-400 mt-1",children:"Crea tu primera zona de cobertura"})]})]}):o.jsxs("div",{className:"bg-lead-50 rounded-xl shadow-sm border border-lead-200 overflow-hidden",children:[o.jsxs("div",{className:"px-4 py-3 border-b border-lead-200 bg-lead-100 flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-lead-700",children:"Lista de Zonas"}),o.jsx("span",{className:"text-xs bg-accent-100 text-accent-700 px-2 py-1 rounded-full font-medium",children:e.length})]}),o.jsx("div",{className:`divide-y divide-lead-100 ${e.length>=4?"max-h-[250px] overflow-y-auto":""}`,children:e.map(u=>{const h=n===u.id,p=Pg(u.id||0);return o.jsx("div",{onClick:()=>i==null?void 0:i(u),className:`p-3 transition-all cursor-pointer ${h?"bg-accent-50 border-l-4 border-l-accent-500":"hover:bg-lead-100 border-l-4 border-l-transparent"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-4 h-4 rounded-sm shrink-0 shadow-sm",style:{backgroundColor:p}}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:`font-medium text-sm truncate ${h?"text-accent-700":"text-lead-800"}`,children:u.name}),o.jsxs("p",{className:"text-xs text-lead-400",children:[c(u)," puntos"]})]}),o.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[o.jsx("button",{onClick:m=>{m.stopPropagation(),s==null||s(u)},title:"Editar",className:"p-1.5 rounded-lg hover:bg-blue-100 text-blue-500 hover:text-blue-600 transition-colors",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("button",{onClick:m=>{m.stopPropagation(),a==null||a(u)},title:"Eliminar",className:"p-1.5 rounded-lg hover:bg-red-100 text-red-500 hover:text-red-600 transition-colors",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},u.id)})})]})},EL=({open:e,mode:t,initialData:n,submitting:i=!1,existingAreas:s=[],onClose:a,onSubmit:c})=>{const[u,h]=x.useState(""),[p,m]=x.useState(null),[g,b]=x.useState({}),[S,w]=x.useState(null);x.useEffect(()=>{e&&(t==="edit"&&n?(h(n.name),m(n.area||null)):(h(""),m(null)),b({}),w(null))},[e,t,n]);const k=x.useCallback(E=>{m(E),E&&E.length>=3&&b(P=>({...P,polygon:void 0}))},[]),C=x.useCallback(E=>{w(`El polgono se solapa con "${E}"`)},[]),_=x.useCallback(()=>{w(null)},[]),y=()=>{const E={};return u.trim()?u.trim().length<2&&(E.name="El nombre debe tener al menos 2 caracteres"):E.name="El nombre es obligatorio",p?fb(p)||(E.polygon="El polgono debe tener al menos 3 puntos"):E.polygon="Debes dibujar un polgono en el mapa",S&&(E.polygon=S),b(E),Object.keys(E).length===0},N=E=>{E.preventDefault(),!(!y()||!p)&&c({name:u.trim(),area:p})};return x.useEffect(()=>{const E=P=>{P.key==="Escape"&&e&&!i&&a()};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[e,i,a]),e?o.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},children:[o.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:i?void 0:a}),o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",style:{zIndex:1e5},children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-brand-50 to-white",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-brand-100 rounded-xl",children:o.jsx("svg",{className:"w-6 h-6 text-brand-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t==="create"?" Nueva rea Geogrfica":" Editar rea"}),o.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Dibuja un polgono con los puntos que necesites"})]})]}),o.jsx("button",{type:"button",onClick:a,disabled:i,className:"p-2 rounded-full hover:bg-gray-100 transition-colors group",title:"Cerrar (Esc)",children:o.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("form",{onSubmit:N,className:"flex-1 overflow-y-auto",children:[o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"max-w-xl",children:[o.jsxs("label",{htmlFor:"area-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:[" Nombre del rea ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{id:"area-name",type:"text",value:u,onChange:E=>{h(E.target.value),g.name&&E.target.value.trim()&&b(P=>({...P,name:void 0}))},placeholder:"Ej: Zona Centro, rea Industrial Norte, Barrio Sur...",className:`w-full px-4 py-3 rounded-xl border-2 ${g.name?"border-red-400 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-200 focus:ring-brand-500 focus:border-brand-500"} focus:outline-none focus:ring-2 transition-all`,disabled:i,autoFocus:!0}),g.name&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1.5",children:[o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),g.name]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" Polgono del rea ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-4",children:[o.jsx(u0,{editMode:!0,areas:s,editingAreaId:n==null?void 0:n.id,initialPolygon:p,onPolygonChange:k,onOverlapError:C,onOverlapResolved:_,enableSnapToEdge:!0,height:"450px"}),o.jsxs("div",{className:"space-y-2",children:[g.polygon&&o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg text-sm text-red-700 border border-red-200",children:[o.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsx("span",{className:"font-medium",children:g.polygon})]}),S&&!g.polygon&&o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 rounded-lg text-sm text-amber-700 border border-amber-200",children:[o.jsx("svg",{className:"w-5 h-5 flex-shrink-0 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("span",{className:"font-medium",children:[" ",S," - Ajusta el polgono"]})]}),p&&p.length>=3&&!g.polygon&&!S&&o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg text-sm text-green-700 border border-green-200",children:[o.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),o.jsxs("span",{className:"font-medium",children:[" Polgono vlido con ",p.length," puntos"]})]})]})]})]})]}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between gap-4",children:o.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[o.jsx("button",{type:"button",onClick:a,disabled:i,className:"px-5 py-2.5 rounded-xl border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-100 hover:border-gray-400 transition-all disabled:opacity-50",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:i||!!S,className:`px-6 py-2.5 rounded-xl font-medium transition-all flex items-center gap-2 ${i||S?"bg-gray-400 text-white cursor-not-allowed":"bg-brand-600 text-white hover:bg-brand-700 shadow-lg shadow-brand-500/30 hover:shadow-brand-500/40"}`,children:i?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),t==="create"?"Crear rea":"Guardar Cambios"]})})]})})]})]})]}):null},h0=()=>{const[e,t]=x.useState([]),[n,i]=x.useState({}),[s,a]=x.useState(!1),c=x.useCallback(async()=>{a(!0);try{const h=await ie.areas.getAllCached();t(h),i(cd(h))}catch(h){console.error("Error cargando reas",h)}finally{a(!1)}},[]),u=x.useCallback(async()=>{a(!0);try{const h=await ie.areas.getAllFresh();t(h),i(cd(h))}catch(h){console.error("Error recargando reas",h)}finally{a(!1)}},[]);return x.useEffect(()=>{c()},[c]),{areas:e,areaMap:n,isLoading:s,fetchAreas:c,refreshAreas:u}};function PL(){const[e,t]=x.useState([]),[n,i]=x.useState(null),[s,a]=x.useState(!1),[c,u]=x.useState(null),h=x.useCallback(async()=>{a(!0),u(null);try{const k=await ie.areas.getAllFresh();t(k)}catch(k){u(ue(k))}finally{a(!1)}},[]),p=x.useCallback(k=>{i(k)},[]),m=x.useCallback(async(k,C)=>{a(!0),u(null);try{const _=await ie.areas.create(k,C);return t(y=>[...y,_]),_}catch(_){return u(ue(_)),null}finally{a(!1)}},[]),g=x.useCallback(async(k,C,_)=>{a(!0),u(null);try{const y=await ie.areas.update(k,{name:C,area:_});return t(N=>N.map(E=>E.id===k?y:E)),i(N=>(N==null?void 0:N.id)===k?y:N),y}catch(y){return u(ue(y)),null}finally{a(!1)}},[]),b=x.useCallback(async k=>{a(!0),u(null);try{return await ie.areas.delete(k),t(C=>C.filter(_=>_.id!==k)),i(C=>(C==null?void 0:C.id)===k?null:C),!0}catch(C){return u(ue(C)),!1}finally{a(!1)}},[]),S=x.useCallback(()=>u(null),[]),w=x.useCallback((k,C)=>{if(k.length<3)return{overlaps:!1};for(const _ of e)if(!(C&&_.id===C)&&!(!_.area||_.area.length<3)&&l0(k,_.area))return{overlaps:!0,overlappingAreaName:_.name};return{overlaps:!1}},[e]);return x.useEffect(()=>{h()},[h]),{areas:e,selectedArea:n,loading:s,error:c,fetchAreas:h,selectArea:p,createArea:m,updateArea:g,deleteArea:b,clearError:S,checkOverlap:w}}const TL=()=>{const{areas:e,loading:t,error:n,createArea:i,updateArea:s,deleteArea:a,clearError:c}=PL(),u=Zn(),[h,p]=x.useState(!1),[m,g]=x.useState("create"),[b,S]=x.useState(null),[w,k]=x.useState(!1),[C,_]=x.useState(null),[y,N]=x.useState(null),[E,P]=x.useState(""),M=()=>{g("create"),S(null),p(!0)},I=re=>{g("edit"),S(re),p(!0)},D=re=>{_(re.id!=null&&re.id===C?null:re.id??null)},K=re=>{N(re)},F=async()=>{if(!(!y||!y.id))try{await a(y.id),N(null),C===y.id&&_(null),u.success("rea eliminada correctamente")}catch{u.error("Error al eliminar el rea")}},Z=async re=>{k(!0);try{m==="create"?(await i(re.name,re.area),u.success("rea creada correctamente")):b&&b.id&&(await s(b.id,re.name,re.area),u.success("rea actualizada correctamente")),p(!1)}catch{u.error("Error al guardar el rea")}finally{k(!1)}},W=e.find(re=>re.id===C),ae=e.reduce((re,H)=>{var Q;return re+(((Q=H.area)==null?void 0:Q.length)||0)},0),Y=pn.useMemo(()=>{const re=E.trim().toLowerCase();let H=[...e];return re&&(H=H.filter(Q=>(Q.name||"").toLowerCase().includes(re))),H.sort((Q,O)=>(Q.name||"").localeCompare(O.name||""))},[e,E]);return o.jsxs("div",{className:"relative overflow-hidden min-h-screen bg-gray-50/50",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.08),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.05),transparent_55%)] pointer-events-none"}),o.jsxs("div",{className:"relative space-y-8 px-6 py-8 lg:px-10 lg:py-12",children:[o.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),o.jsxs("div",{className:"relative z-10 grid gap-8 px-8 py-10 lg:grid-cols-[1.2fr,1fr] xl:grid-cols-[1.5fr,1fr] items-start",children:[o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70 mb-2",children:"Gestin de Territorio"}),o.jsx("h1",{className:"text-3xl font-bold leading-tight md:text-4xl mb-4",children:"reas Geogrficas"}),o.jsx("p",{className:"text-white/80 text-lg max-w-xl",children:"Define y gestiona las zonas de cobertura para tus prevendedores y rutas de distribucin."})]}),o.jsx("div",{className:"flex flex-wrap gap-4",children:o.jsxs("button",{onClick:M,className:"btn-primary bg-accent-500 hover:bg-accent-600 border-transparent text-white shadow-md flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nueva rea"]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-md",children:[o.jsxs("div",{className:"rounded-2xl bg-white/10 border border-white/20 px-5 py-4 backdrop-blur-sm",children:[o.jsx("p",{className:"text-xs uppercase tracking-wide text-white/70",children:"Total reas"}),o.jsx("p",{className:"mt-1 text-3xl font-bold text-white",children:e.length})]}),o.jsxs("div",{className:"rounded-2xl bg-white/10 border border-white/20 px-5 py-4 backdrop-blur-sm",children:[o.jsx("p",{className:"text-xs uppercase tracking-wide text-white/70",children:"Puntos Totales"}),o.jsx("p",{className:"mt-1 text-3xl font-bold text-white",children:ae})]})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-emerald-500/30 blur-xl rounded-full transform translate-y-4"}),o.jsx("div",{className:"relative bg-gradient-to-br from-emerald-600 to-emerald-500 rounded-2xl shadow-xl overflow-hidden border border-emerald-400/30 p-1",children:o.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-xl overflow-hidden h-full",children:[o.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50/50",children:o.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-lg border border-gray-300 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:"Buscar reas por nombre...",value:E,onChange:re=>P(re.target.value)})}),o.jsx(SL,{areas:Y,loading:t,selectedAreaId:C,onSelect:D,onEdit:I,onDelete:K})]})})]})]})]}),n&&o.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3 animate-fade-in",children:[o.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5 shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error"}),o.jsx("p",{className:"text-sm text-red-700 mt-1",children:n})]}),o.jsx("button",{onClick:c,className:"text-red-600 hover:text-red-800",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("section",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx("span",{children:""})," Mapa de Cobertura"]}),W&&o.jsxs("span",{className:"text-sm bg-brand-100 text-brand-700 px-3 py-1 rounded-full font-medium border border-brand-200",children:[" ",W.name]})]}),o.jsx(u0,{areas:Y,selectedAreaId:C,onAreaClick:re=>D(re),onAreaEdit:I,onAreaDelete:K,height:"650px"})]})]}),o.jsx(EL,{open:h,mode:m,initialData:b,submitting:w,existingAreas:e,onClose:()=>p(!1),onSubmit:Z}),y&&o.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},children:[o.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>N(null)}),o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",style:{zIndex:1e5},children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Eliminar rea"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Esta accin no se puede deshacer"})]})]}),o.jsxs("p",{className:"text-gray-700 mb-6",children:["Ests seguro que deseas eliminar el rea"," ",o.jsxs("strong",{children:['"',y.name,'"']}),"?"]}),o.jsxs("div",{className:"flex items-center justify-end gap-3",children:[o.jsx("button",{onClick:()=>N(null),className:"px-4 py-2 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-100 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:F,className:"px-4 py-2 rounded-xl bg-red-600 text-white font-medium hover:bg-red-700 transition-colors",children:"S, Eliminar"})]})]})]}),o.jsx($r,{toasts:u.toasts,onDismiss:u.dismissToast})]})},ML=()=>{var b,S,w;const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),c=jt(),u=x.useCallback(()=>a(null),[]),h=x.useCallback(async()=>{i(!0),a(null);try{const k=await ie.businesses.listAll();t(k||[])}catch(k){a(ue(k))}finally{i(!1)}},[]),p=x.useCallback(async k=>{var C;i(!0),a(null);try{const _=await ie.businesses.create(k,((C=c.user)==null?void 0:C.id)??null);return t(y=>[_,...y]),_}catch(_){return a(ue(_)),null}finally{i(!1)}},[(b=c.user)==null?void 0:b.id]),m=x.useCallback(async(k,C)=>{var _;i(!0),a(null);try{const y=await ie.businesses.update(k,C,((_=c.user)==null?void 0:_.id)??null);return y&&t(N=>N.map(E=>E.id===k?y:E)),y}catch(y){return a(ue(y)),null}finally{i(!1)}},[(S=c.user)==null?void 0:S.id]),g=x.useCallback(async k=>{var C;i(!0),a(null);try{const _=await ie.businesses.softDelete(k,((C=c.user)==null?void 0:C.id)??null);return _&&t(y=>y.map(N=>N.id===k?{...N,isActive:!N.isActive}:N)),_}catch(_){return a(ue(_)),!1}finally{i(!1)}},[(w=c.user)==null?void 0:w.id]);return{businesses:e,isLoading:n,error:s,fetchBusinesses:h,createBusiness:p,updateBusiness:m,softDeleteBusiness:g,clearError:u}},IL=()=>{const[e,t]=x.useState([]),[n,i]=x.useState(!1),[s,a]=x.useState(null),[c,u]=x.useState(0),[h,p]=x.useState(1),m=x.useMemo(()=>new Map(e.map(y=>[y.id,y])),[e]),g=x.useCallback(y=>{if(y==null)return"Sin cliente";const N=m.get(y);return N?`${N.name} ${N.lastName}`:"Desconocido"},[m]),b=x.useCallback(()=>a(null),[]),S=x.useCallback(async()=>{i(!0),a(null);try{const y=await ie.clients.listPaginated();t(y),u(y.length),p(1)}catch(y){a({message:ue(y),code:"FETCH_ERROR"})}finally{i(!1)}},[]),w=x.useCallback(async y=>{i(!0),a(null);try{const N=await ie.clients.create(y);return t(E=>[...E,N]),u(E=>E+1),N}catch(N){return a({message:ue(N),code:"CREATE_ERROR"}),null}finally{i(!1)}},[]),k=x.useCallback(async(y,N)=>{i(!0),a(null);try{const E=await ie.clients.update(y,N);return t(P=>P.map(M=>M.id===y?E:M)),E}catch(E){return a({message:ue(E),code:"UPDATE_ERROR"}),null}finally{i(!1)}},[]),C=x.useCallback(async y=>{a(null);try{return await ie.clients.softDelete(y),t(N=>N.filter(E=>E.id!==y)),u(N=>N-1),!0}catch(N){return a({message:ue(N),code:"DELETE_ERROR"}),!1}},[]),_=x.useCallback(async y=>{try{return await ie.clients.search(y)}catch(N){return console.error("Error buscando clientes:",ue(N)),[]}},[]);return{clients:e,clientMap:m,total:c,currentPage:h,isLoading:n,error:s,fetchClients:S,createClient:w,updateClient:k,deleteClient:C,searchClients:_,getClientName:g,clearError:b}},RL=({business:e,clients:t,businessTypes:n,areas:i,onClose:s,onSave:a,saving:c})=>{const u=!!(e!=null&&e.id),[h,p]=x.useState(""),[m,g]=x.useState(""),[b,S]=x.useState(""),[w,k]=x.useState(""),[C,_]=x.useState(""),[y,N]=x.useState(""),[E,P]=x.useState(""),[M,I]=x.useState(""),[D,K]=x.useState(!0),[F,Z]=x.useState(null),[W,ae]=x.useState({}),[Y,re]=x.useState(""),[H,Q]=x.useState([]),[O,G]=x.useState(!1),[U,$]=x.useState(!1),[ne,X]=x.useState(null),se=x.useRef(null),ee=x.useRef(null),le=x.useCallback(async te=>{if(!te.trim()){Q([]);return}G(!0);try{const Ce=await ie.clients.search({search:te,limit:10});Q(Ce)}catch(Ce){console.error("Error searching clients:",Ce),Q([])}finally{G(!1)}},[]),A=te=>{re(te),$(!0),ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{le(te)},300)},fe=te=>{X(te),k(te.id),re(Ct(te)),$(!1),Q([]),W.clientId&&ae(Ce=>({...Ce,clientId:""}))};x.useEffect(()=>{const te=Ce=>{se.current&&!se.current.contains(Ce.target)&&$(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[]),x.useEffect(()=>{if(e){if(p(e.name??""),g(e.nit??""),S(e.address??""),k(e.clientId??""),_(e.businessTypeId??""),N(e.areaId??""),K(e.isActive??!0),e.position?(P(String(e.position.lat??"")),I(String(e.position.lng??""))):(P(""),I("")),Z(null),e.clientId&&t.length>0){const te=t.find(Ce=>Ce.id===e.clientId);te&&(X(te),re(Ct(te)))}}else p(""),g(""),S(""),k(""),_(""),N(""),P(""),I(""),K(!0),Z(null),X(null),re("");ae({})},[e,t]);const _e=()=>{const te={};return h.trim()||(te.name="El nombre es obligatorio"),w||(te.clientId="Seleccione un cliente"),C||(te.businessTypeId="Seleccione tipo de negocio"),ae(te),Object.keys(te).length===0},ve=te=>{const Ce=te.target.files&&te.target.files[0];Ce&&Z(Ce)},Ie=te=>{if(te.preventDefault(),!_e())return;const Ce={name:h.trim(),nit:m.trim()||null,address:b.trim()||null,client_id:w?Number(w):void 0,business_type_id:C?Number(C):void 0,area_id:y?Number(y):null,position:E&&M?{lat:Number(E),lng:Number(M)}:null,is_active:D};F&&(Ce.imageFile=F),u&&e&&(Ce.id=e.id),a(Ce)},Ve=u?"Editar Negocio":"Nuevo Negocio",Ue=u?"Guardar cambios":"Crear negocio",Ct=te=>`${te.lastName} ${te.secondLastName} ${te.name}`.trim();return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-lg overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:Ve}),o.jsx("button",{type:"button",onClick:s,className:"text-brand-100 hover:text-white transition-colors",disabled:c,children:""})]}),o.jsxs("form",{onSubmit:Ie,className:"space-y-5 px-6 py-6",children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700",children:"Nombre *"}),o.jsx("input",{value:h,onChange:te=>p(te.target.value),className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm ${W.name?"border-red-500":"border-lead-300 bg-white"}`,disabled:c}),W.name&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:W.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700",children:"NIT"}),o.jsx("input",{value:m,onChange:te=>g(te.target.value),className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm",disabled:c})]}),o.jsxs("div",{ref:se,className:"relative",children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700",children:"Dueo (Cliente) *"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("input",{type:"text",value:Y,onChange:te=>A(te.target.value),onFocus:()=>Y&&$(!0),placeholder:"Buscar cliente por apellidos y nombres...",className:`block w-full rounded-lg border px-3 py-2 text-sm pr-10 ${W.clientId?"border-red-500":"border-lead-300 bg-white"}`,disabled:c}),O&&o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:o.jsxs("svg",{className:"animate-spin h-4 w-4 text-brand-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),ne&&!O&&o.jsx("button",{type:"button",onClick:()=>{X(null),k(""),re(""),Q([])},className:"absolute right-3 top-1/2 -translate-y-1/2 text-lead-400 hover:text-lead-600",children:o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),U&&H.length>0&&o.jsx("div",{className:"absolute z-50 mt-1 w-full bg-white border border-lead-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:H.map(te=>o.jsxs("button",{type:"button",onClick:()=>fe(te),className:"w-full px-4 py-2 text-left text-sm hover:bg-brand-50 focus:bg-brand-50 focus:outline-none border-b border-lead-100 last:border-b-0",children:[o.jsx("span",{className:"font-medium text-lead-900",children:Ct(te)}),te.ci&&o.jsxs("span",{className:"text-lead-500 ml-2",children:[" CI: ",te.ci]}),te.phone&&o.jsxs("span",{className:"text-lead-500 ml-2",children:[" Tel: ",te.phone]})]},te.id))}),U&&Y.trim()&&!O&&H.length===0&&o.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-lead-200 rounded-lg shadow-lg p-4 text-sm text-lead-500 text-center",children:['No se encontraron clientes con "',Y,'"']}),W.clientId&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:W.clientId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700",children:"Tipo de negocio *"}),o.jsxs("select",{value:C,onChange:te=>{_(te.target.value?Number(te.target.value):""),W.businessTypeId&&ae(Ce=>({...Ce,businessTypeId:""}))},className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm ${W.businessTypeId?"border-red-500":"border-lead-300 bg-white"}`,disabled:c,children:[o.jsx("option",{value:"",children:"Seleccione..."}),n.map(te=>o.jsx("option",{value:te.id,children:te.name},te.id))]}),W.businessTypeId&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:W.businessTypeId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700",children:"rea"}),o.jsxs("select",{value:y,onChange:te=>N(te.target.value?Number(te.target.value):""),className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm",disabled:c,children:[o.jsx("option",{value:"",children:"Sin asignar"}),i.map(te=>o.jsx("option",{value:te.id,children:te.name},te.id))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700",children:"Direccin"}),o.jsx("textarea",{value:b,onChange:te=>S(te.target.value),rows:2,className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm",disabled:c})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700",children:"Latitud"}),o.jsx("input",{type:"number",step:"any",value:E,onChange:te=>P(te.target.value),placeholder:"-17.393",className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm",disabled:c})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700",children:"Longitud"}),o.jsx("input",{type:"number",step:"any",value:M,onChange:te=>I(te.target.value),placeholder:"-66.157",className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm",disabled:c})]}),u&&o.jsx("div",{className:"md:col-span-2",children:o.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-lead-700",children:[o.jsx("input",{type:"checkbox",checked:D,onChange:te=>K(te.target.checked),className:"rounded border-lead-300 text-brand-600 focus:ring-brand-500",disabled:c}),"Negocio activo"]})}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-lead-700",children:"Imagen"}),o.jsx("input",{type:"file",accept:"image/*",onChange:ve,className:`mt-1 block w-full text-sm text-lead-500\r
                  file:mr-4 file:py-2 file:px-4\r
                  file:rounded-lg file:border-0\r
                  file:text-sm file:font-semibold\r
                  file:bg-brand-50 file:text-brand-700\r
                  hover:file:bg-brand-100`,disabled:c}),(e==null?void 0:e.pathImage)&&!F&&o.jsx("p",{className:"mt-1 text-xs text-lead-500",children:"Imagen actual guardada. Suba una nueva para reemplazarla."})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-lead-100",children:[o.jsx("button",{type:"button",onClick:s,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors",disabled:c,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded-lg bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 disabled:opacity-60",disabled:c,children:c?"Guardando...":Ue})]})]})]})})},DL=({businesses:e,clients:t,businessTypes:n,areas:i,onEdit:s,onToggleActive:a,onRemove:c,onView:u,onChangeArea:h,busyId:p})=>{const m=pn.useMemo(()=>{const S={};return t.forEach(w=>{S[w.id]=`${w.lastName} ${w.secondLastName} ${w.name}`.trim()}),S},[t]),g=pn.useMemo(()=>{const S={};return n.forEach(w=>{S[w.id]=w.name}),S},[n]),b=pn.useMemo(()=>{const S={};return i.forEach(w=>{w.id!==void 0&&(S[w.id]=w.name)}),S},[i]);return o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Cliente (Dueo)"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Tipo"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"rea"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"NIT"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Direccin"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Estado"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:e.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"px-4 py-6 text-center text-sm text-lead-600",children:"No hay negocios registrados"})}):e.map(S=>o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:S.name}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:m[S.clientId]||`Cliente ${S.clientId}`}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:g[S.businessTypeId]||`Tipo ${S.businessTypeId}`}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:h?o.jsxs("select",{className:"rounded border border-lead-200 bg-white px-2 py-1 text-sm",value:S.areaId??"",onChange:w=>{const k=w.target.value===""?null:Number(w.target.value);h(S.id,k)},disabled:p===S.id,children:[o.jsx("option",{value:"",children:"-"}),i.map(w=>o.jsx("option",{value:w.id,children:w.name},w.id))]}):S.areaId?b[S.areaId]||`rea ${S.areaId}`:"-"}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:S.nit||"-"}),o.jsx("td",{className:"px-4 py-3 text-lead-600 max-w-xs truncate",children:S.address||"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${S.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:S.isActive?"Activo":"Inactivo"})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u&&o.jsx("button",{className:"rounded bg-blue-100 px-3 py-1.5 font-medium text-blue-700 transition hover:bg-blue-200 disabled:opacity-50",onClick:()=>u(S),children:"Ver"}),o.jsx("button",{className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200 disabled:opacity-50",onClick:()=>s(S),disabled:p===S.id,children:"Editar"}),o.jsx("button",{className:"rounded bg-accent-100 px-3 py-1.5 font-medium text-accent-700 transition hover:bg-accent-200 disabled:opacity-50",onClick:()=>a(S),disabled:p===S.id,children:S.isActive?"Desactivar":"Activar"}),o.jsx("button",{className:"rounded bg-red-100 px-3 py-1.5 font-medium text-red-700 transition hover:bg-red-200 disabled:opacity-50",onClick:()=>c(S),disabled:p===S.id,children:"Eliminar"})]})})]},S.id))})]})})},OL=({clientTypes:e,onSubmit:t,onCancel:n,isSubmitting:i=!1,initialData:s})=>{const[a,c]=x.useState({name:"",lastName:"",secondLastName:"",phone:"",ci:"",ciExt:"",clientTypeId:""}),[u,h]=x.useState({});x.useEffect(()=>{s&&c({name:s.name||"",lastName:s.lastName||"",secondLastName:s.secondLastName||"",phone:s.phone||"",ci:s.ci||"",ciExt:s.ciExt||"",clientTypeId:s.clientTypeId||""})},[s]);const p=b=>{const{name:S,value:w}=b.target,C=["name","lastName","secondLastName"].includes(S)?w.toUpperCase():w;c(_=>({..._,[S]:C})),u[S]&&h(_=>({..._,[S]:""}))},m=()=>{const b={};return a.name.trim()||(b.name="El nombre es obligatorio"),a.lastName.trim()||(b.lastName="El apellido paterno es obligatorio"),a.secondLastName.trim()||(b.secondLastName="El apellido materno es obligatorio"),a.phone.trim()||(b.phone="El telfono es obligatorio"),a.clientTypeId||(b.clientTypeId="Seleccione un tipo de cliente"),h(b),Object.keys(b).length===0},g=async b=>{if(b.preventDefault(),!m())return;const S={name:a.name.trim(),lastName:a.lastName.trim(),secondLastName:a.secondLastName.trim(),phone:a.phone.trim(),clientTypeId:Number(a.clientTypeId),ci:a.ci.trim()||null,ciExt:a.ciExt.trim()||null};if(s){const w={...S,id:s.id};await t(w)}else await t(S)};return o.jsxs("form",{onSubmit:g,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-lead-700",children:["Nombre ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:p,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${u.name?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),u.name&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.name})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"lastName",className:"block text-sm font-medium text-lead-700",children:["Apellido paterno ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"lastName",name:"lastName",value:a.lastName,onChange:p,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${u.lastName?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),u.lastName&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.lastName})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"secondLastName",className:"block text-sm font-medium text-lead-700",children:["Apellido materno ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"secondLastName",name:"secondLastName",value:a.secondLastName,onChange:p,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${u.secondLastName?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),u.secondLastName&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.secondLastName})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-lead-700",children:["Telfono ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"phone",name:"phone",value:a.phone,onChange:p,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${u.phone?"border-red-500":"border-lead-300 bg-white"}`,disabled:i}),u.phone&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.phone})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ci",className:"block text-sm font-medium text-lead-700",children:"CI (opcional)"}),o.jsx("input",{type:"text",id:"ci",name:"ci",value:a.ci,onChange:p,className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:i})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"ciExt",className:"block text-sm font-medium text-lead-700",children:"Extensin CI (opcional)"}),o.jsx("input",{type:"text",id:"ciExt",name:"ciExt",value:a.ciExt,onChange:p,className:"mt-1 block w-full rounded-lg border-lead-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",disabled:i})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"clientTypeId",className:"block text-sm font-medium text-lead-700",children:["Tipo de cliente ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{id:"clientTypeId",name:"clientTypeId",value:a.clientTypeId,onChange:p,className:`mt-1 block w-full rounded-lg border px-3 py-2 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500 ${u.clientTypeId?"border-red-500":"border-lead-300 bg-white"}`,disabled:i,children:[o.jsx("option",{value:"",children:"Seleccione..."}),e.map(b=>o.jsx("option",{value:b.id,children:b.name},b.id))]}),u.clientTypeId&&o.jsx("p",{className:"mt-1 text-xs text-red-600",children:u.clientTypeId})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 border-t border-lead-100 pt-4",children:[o.jsx("button",{type:"button",onClick:n,className:"rounded-lg border border-lead-300 px-4 py-2 text-sm font-medium text-lead-700 hover:bg-lead-100 transition-colors",disabled:i,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"rounded-lg bg-accent-500 px-4 py-2 text-sm font-medium text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 disabled:opacity-60 transition-all",disabled:i,children:i?"Guardando...":s?"Actualizar cliente":"Crear cliente"})]})]})},AL=[{id:1,label:"Regular"},{id:2,label:"Minorista"},{id:3,label:"Mayorista"}];function zL(e){if(!e)return"Desconocido";const t=AL.find(n=>n.id===e);return t?t.label:`Tipo ${e}`}const BL=({client:e,onClose:t})=>e?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden bg-black/60 backdrop-blur-sm p-4 md:p-0",children:o.jsxs("div",{className:"relative w-full max-w-lg transform rounded-3xl bg-white shadow-2xl transition-all",children:[o.jsxs("div",{className:"relative h-32 w-full overflow-hidden rounded-t-3xl bg-gradient-to-r from-brand-600 to-brand-500",children:[o.jsx("button",{onClick:t,className:"absolute right-4 top-4 z-10 rounded-full bg-black/20 p-2 text-white hover:bg-black/40 transition-colors",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("div",{className:"flex h-full w-full items-center justify-center",children:o.jsx("div",{className:"text-5xl font-bold text-white/80",children:(e.lastName||e.name||"").charAt(0).toUpperCase()})})]}),o.jsxs("div",{className:"px-8 pb-8 pt-6",children:[o.jsxs("div",{className:"mb-6 text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:`${e.lastName||""} ${e.secondLastName||""} ${e.name}`.trim()}),o.jsx("div",{className:"mt-3 flex items-center justify-center gap-2",children:o.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800",children:zL(e.clientTypeId)})})]}),o.jsxs("div",{className:"space-y-4 rounded-2xl bg-gray-50 p-5",children:[o.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500",children:"Informacion de Contacto"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Telefono"}),o.jsx("p",{className:"font-medium text-gray-900",children:e.phone||"No registrado"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1 rounded-lg bg-white p-2 text-brand-500 shadow-sm",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"CI"}),o.jsx("p",{className:"font-medium text-gray-900",children:e.ci?`${e.ci}${e.ciExt?" "+e.ciExt:""}`:"No registrada"})]})]})]})]})]})]})}):null,FL=({business:e,clients:t,businessTypes:n,areaMap:i,onClose:s})=>{if(!e)return null;const a="http://localhost:3000",c=t.find(h=>h.id===e.clientId)||null,u=n.find(h=>h.id===e.businessTypeId)||null;return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto overflow-x-hidden bg-black/60 backdrop-blur-sm p-4 md:p-0",children:o.jsxs("div",{className:"relative w-full max-w-3xl transform rounded-3xl bg-white shadow-2xl transition-all",children:[o.jsxs("div",{className:"relative h-56 w-full overflow-hidden rounded-t-3xl bg-gray-100",children:[o.jsx("button",{onClick:s,className:"absolute right-4 top-4 z-10 rounded-full bg-black/20 p-2 text-white hover:bg-black/40 transition-colors",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.pathImage?o.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-100",children:o.jsx("img",{src:`${a}${e.pathImage}`,alt:e.name,className:"max-h-full max-w-full object-contain",onError:h=>{h.target.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}})}):o.jsx("div",{className:"flex h-full w-full items-center justify-center bg-brand-100",children:o.jsx("div",{className:"mx-auto w-full max-w-2xl rounded-lg bg-white/80 p-6 text-center",children:o.jsx("div",{className:"text-5xl font-bold text-brand-600",children:(e.name||"").charAt(0)})})})]}),o.jsxs("div",{className:"px-8 pb-8 pt-8",children:[o.jsxs("div",{className:"mb-2 text-center",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:e.name}),o.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[o.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800",children:u?u.name:`Tipo ${e.businessTypeId}`}),o.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Activo":"Inactivo"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-4 rounded-2xl bg-gray-50 p-5",children:[o.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500",children:"Informacin"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"NIT:"})," ",e.nit||"No registrado"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Direccin:"})," ",e.address||"No registrada"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Posicin:"})," ",e.position?`Lat ${e.position.lat}, Lng ${e.position.lng}`:"No registrada"]})]})]}),o.jsxs("div",{className:"space-y-4 rounded-2xl bg-gray-50 p-5",children:[o.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500",children:"Propietario"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("p",{className:"text-sm",children:[o.jsx("span",{className:"font-medium",children:"Cliente:"})," ",c?`${c.lastName||""} ${c.secondLastName||""} ${c.name}`.trim():`Cliente ${e.clientId}`]}),o.jsxs("p",{className:"text-sm",children:[o.jsx("span",{className:"font-medium",children:"Telfono:"})," ",c&&c.phone?o.jsx("a",{className:"text-brand-600 font-medium",href:`tel:${c.phone}`,children:c.phone}):"-"]}),o.jsxs("p",{className:"text-sm",children:[o.jsx("span",{className:"font-medium",children:"CI:"})," ",c&&c.ci?`${c.ci}${c.ciExt?" "+c.ciExt:""}`:"-"]}),o.jsxs("p",{className:"text-sm",children:[o.jsx("span",{className:"font-medium",children:"rea:"})," ",e.areaId?pb(i,e.areaId):"Sin asignar"]})]})]})]})]})]})})},ip=()=>{const e=Zn(),{businesses:t,isLoading:n,error:i,fetchBusinesses:s,createBusiness:a,updateBusiness:c,softDeleteBusiness:u,clearError:h}=ML(),{clients:p,isLoading:m,error:g,fetchClients:b,createClient:S,updateClient:w,deleteClient:k,clearError:C}=IL(),{areas:_,areaMap:y,fetchAreas:N}=h0(),[E,P]=x.useState([]),[M,I]=x.useState(!1),[D,K]=x.useState([]),[F,Z]=x.useState(!1),[W,ae]=x.useState("clients"),[Y,re]=x.useState(1),H=10,[Q,O]=x.useState(""),[G,U]=x.useState(null),[$,ne]=x.useState(!1),[X,se]=x.useState(null),[ee,le]=x.useState(null),[A,fe]=x.useState(null),[_e,ve]=x.useState(null),[Ie,Ve]=x.useState(!1),[Ue,Ct]=x.useState(null),[te,Ce]=x.useState(!1),[vn,yn]=x.useState(null),$n=x.useCallback(async()=>{I(!0);try{const pe=await J.get("/business-types");P(pe.data||[])}catch(pe){console.warn("No se pudieron cargar tipos de negocio",pe)}finally{I(!1)}},[]),Wn=x.useCallback(async()=>{Z(!0);try{const pe=await J.get("/client-types");K(pe.data||[])}catch(pe){console.warn("No se pudieron cargar tipos de cliente",pe)}finally{Z(!1)}},[]);x.useEffect(()=>{b(),s(),N(),$n(),Wn()},[b,s,N,$n,Wn]),x.useEffect(()=>{i&&(e.error(i),h())},[i,h]),x.useEffect(()=>{g&&(e.error(g.message),C())},[g,C]),x.useEffect(()=>re(1),[Q,W]);const _n=x.useMemo(()=>{const tt=Q.trim().toLowerCase().split(/\s+/).filter(at=>at.length>0);return(p||[]).filter(at=>{if(tt.length===0)return!0;const br=`${at.lastName||""} ${at.secondLastName||""} ${at.name} ${at.ci||""} ${at.phone}`.toLowerCase();return tt.every(Ws=>br.includes(Ws))}).sort((at,br)=>(at.lastName||"").localeCompare(br.lastName||""))},[p,Q]),bn=x.useMemo(()=>{const pe=Q.trim().toLowerCase();return(t||[]).filter(Ot=>pe?(Ot.name||"").toLowerCase().includes(pe)||(Ot.nit||"").toLowerCase().includes(pe)||(Ot.address||"").toLowerCase().includes(pe):!0).sort((Ot,at)=>(Ot.name||"").localeCompare(at.name||""))},[t,Q]),wn=W==="clients"?_n:bn,vr=wn.length,Ln=Math.max(1,Math.ceil(vr/H)),an=wn.slice((Y-1)*H,Y*H),Wr=async pe=>{Ce(!0);try{"id"in pe&&pe.id?await w(pe.id,pe)?(e.success("Cliente actualizado"),ve(null),b()):e.error("No se pudo actualizar"):await S(pe)?(e.success("Cliente creado"),Ve(!1),b()):e.error("No se pudo crear")}finally{Ce(!1)}},yr=async()=>{if(!Ue)return;await k(Ue.id)?e.success("Cliente eliminado"):e.error("No se pudo eliminar"),Ct(null)},Us=async pe=>{pe.id?await c(pe.id,pe)?(e.success("Negocio actualizado"),U(null)):e.error("No se pudo actualizar"):await a(pe)?(e.success("Negocio creado"),ne(!1)):e.error("No se pudo crear")},Vr=async()=>{if(!X)return;await c(X.id,{is_active:!X.isActive})?(e.success(X.isActive?"Negocio desactivado":"Negocio activado"),s()):e.error("No se pudo cambiar el estado"),se(null)},Gr=async()=>{if(!ee)return;await u(ee.id)?(e.success("Negocio eliminado"),s()):e.error("No se pudo eliminar"),le(null)},Hs=async(pe,tt)=>{await c(pe,{area_id:tt})?(e.success("rea actualizada"),s()):e.error("No se pudo actualizar el rea")},qr=x.useMemo(()=>{const pe={};return D.forEach(tt=>{pe[tt.id]=tt.name}),pe},[D]),_r=pe=>qr[pe]||`Tipo ${pe}`,Kr=W==="clients"&&(m||F)||W==="businesses"&&(n||M),Zs=()=>W==="clients"?_n.length:bn.length,Nn=()=>{W==="clients"?Ve(!0):ne(!0)},$s=()=>W==="clients"?"Nuevo cliente":"Nuevo negocio";return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative overflow-hidden min-h-screen",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.12),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.08),transparent_55%)]"}),o.jsxs("div",{className:"relative space-y-8 px-6 py-8 lg:px-10 lg:py-12",children:[o.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),o.jsxs("div",{className:"px-8 py-10 md:px-12",children:[o.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70",children:"Panel de Gestin"}),o.jsx("h2",{className:"mt-2 text-3xl font-semibold leading-tight md:text-4xl",children:"Clientes y Negocios"}),o.jsx("p",{className:"mt-2 text-white/80",children:"Administra tu cartera de clientes y sus negocios asociados"}),o.jsx("div",{className:"mt-6 max-w-3xl",children:o.jsx("div",{className:"space-y-3 rounded-2xl bg-white/10 p-4 backdrop-blur border border-white/10",children:o.jsx("div",{className:"flex flex-col gap-3 md:flex-row",children:o.jsx("input",{className:"input-plain flex-1",placeholder:"Buscar por apellidos y nombres, CI o telfono...",value:Q,onChange:pe=>O(pe.target.value)})})})})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",className:`rounded-full px-8 py-3 text-sm font-semibold transition-all shadow-md ${W==="clients"?"bg-white text-brand-700 ring-2 ring-brand-300":"bg-white/80 text-lead-600 hover:bg-white hover:shadow-lg"}`,onClick:()=>ae("clients"),children:"Clientes"}),o.jsx("button",{type:"button",className:`rounded-full px-8 py-3 text-sm font-semibold transition-all shadow-md ${W==="businesses"?"bg-white text-brand-700 ring-2 ring-brand-300":"bg-white/80 text-lead-600 hover:bg-white hover:shadow-lg"}`,onClick:()=>ae("businesses"),children:"Negocios"})]}),o.jsxs("section",{className:"rounded-2xl bg-white p-6 shadow-xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b border-lead-100 pb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-brand-900",children:W==="clients"?"Listado de Clientes":"Listado de Negocios"}),o.jsxs("p",{className:"text-sm text-lead-500",children:[Zs()," registro(s)  Pgina ",Y," de ",Ln]})]}),o.jsxs("button",{type:"button",className:"rounded-lg bg-accent-500 px-5 py-2.5 text-sm font-semibold text-white shadow-md hover:bg-accent-600 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 transition-all flex items-center gap-2",onClick:Nn,children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),$s()]})]}),Kr?o.jsx(xn,{}):o.jsxs(o.Fragment,{children:[W==="clients"&&o.jsx("div",{className:"overflow-x-auto rounded-lg border border-lead-200 bg-lead-50 shadow-lg",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-brand-600 text-xs uppercase tracking-wider text-white",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Nombre completo"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Telfono"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"CI"}),o.jsx("th",{className:"px-4 py-4 text-left font-semibold",children:"Tipo de cliente"}),o.jsx("th",{className:"w-40 px-4 py-4 text-center align-middle font-semibold",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-lead-200",children:an.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-sm text-lead-600",children:"No hay clientes registrados"})}):an.map(pe=>o.jsxs("tr",{className:"transition-colors hover:bg-white",children:[o.jsx("td",{className:"px-4 py-3 font-medium text-brand-900",children:`${pe.lastName||""} ${pe.secondLastName||""} ${pe.name}`.trim()}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:pe.phone}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:pe.ci||"-"}),o.jsx("td",{className:"px-4 py-3 text-lead-600",children:_r(pe.clientTypeId)}),o.jsx("td",{className:"px-4 py-3 text-center align-middle",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{onClick:()=>yn(pe),className:"rounded bg-blue-100 px-3 py-1.5 font-medium text-blue-700 transition hover:bg-blue-200",title:"Ver",children:"Ver"}),o.jsx("button",{onClick:()=>ve(pe),className:"rounded bg-brand-100 px-3 py-1.5 font-medium text-brand-700 transition hover:bg-brand-200",title:"Editar",children:"Editar"}),o.jsx("button",{onClick:()=>Ct(pe),className:"rounded bg-red-100 px-3 py-1.5 font-medium text-red-700 transition hover:bg-red-200",title:"Eliminar",children:"Eliminar"})]})})]},pe.id))})]})}),W==="businesses"&&o.jsx(DL,{businesses:an,clients:p,businessTypes:E,areas:_,onEdit:U,onToggleActive:se,onRemove:le,onView:fe,onChangeArea:Hs}),Ln>0&&o.jsx(xr,{currentPage:Y,totalPages:Ln,totalItems:vr,itemsPerPage:H,onPageChange:re,isLoading:W==="clients"?m:n})]})]})]})]}),(Ie||_e)&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-lead-900/60 backdrop-blur-sm overflow-y-auto",children:o.jsxs("div",{className:"mx-4 my-10 w-full max-w-2xl overflow-hidden rounded-xl bg-lead-50 shadow-2xl ring-1 ring-black/5",children:[o.jsxs("div",{className:"flex items-center justify-between bg-brand-600 px-6 py-4 text-white",children:[o.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:_e?"Editar Cliente":"Nuevo Cliente"}),o.jsx("button",{type:"button",onClick:()=>{Ve(!1),ve(null)},className:"text-brand-100 hover:text-white transition-colors",disabled:te,children:""})]}),o.jsx("div",{className:"px-6 py-6",children:o.jsx(OL,{clientTypes:D,onSubmit:Wr,onCancel:()=>{Ve(!1),ve(null)},isSubmitting:te,initialData:_e||void 0})})]})}),($||G)&&o.jsx(RL,{business:G,clients:p,businessTypes:E,areas:_,onClose:()=>{ne(!1),U(null)},onSave:Us,saving:n}),Ue&&o.jsx(Vt,{open:!!Ue,title:"Eliminar cliente",description:`Confirmas eliminar al cliente "${`${Ue.lastName||""} ${Ue.secondLastName||""} ${Ue.name}`.trim()}"? Esta accin no se puede deshacer.`,confirmLabel:"Eliminar",onConfirm:yr,onCancel:()=>Ct(null)}),X&&o.jsx(Vt,{open:!!X,title:`${X.isActive?"Desactivar":"Activar"} negocio`,description:`Confirmas ${X.isActive?"desactivar":"activar"} el negocio "${X.name}"? ${X.isActive?"El negocio se marcar como inactivo pero seguir visible en el sistema.":"El negocio se marcar como activo nuevamente."}`,confirmLabel:X.isActive?"Desactivar":"Activar",onConfirm:Vr,onCancel:()=>se(null)}),ee&&o.jsx(Vt,{open:!!ee,title:"Eliminar negocio",description:`Confirmas eliminar el negocio "${ee.name}"? Esta accin lo eliminar del sistema.`,confirmLabel:"Eliminar",onConfirm:Gr,onCancel:()=>le(null)}),vn&&o.jsx(BL,{client:vn,onClose:()=>yn(null)}),A&&o.jsx(FL,{business:A,clients:p,businessTypes:E,areaMap:y,onClose:()=>fe(null)}),o.jsx($r,{toasts:e.toasts,onDismiss:e.dismissToast})]})},UL=()=>{const[e,t]=x.useState(!1),[n,i]=x.useState(null),s=x.useCallback(()=>i(null),[]),a=x.useCallback(async c=>{t(!0),i(null);try{return await ie.routes.create(c)}catch(u){return i({message:ue(u),code:"CREATE_ERROR"}),null}finally{t(!1)}},[]);return{isLoading:e,error:n,createRoute:a,clearError:s}};delete Re.Icon.Default.prototype._getIconUrl;Re.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const HL=({area:e,height:t="300px"})=>{const n=x.useRef(null),i=x.useRef(null),s=x.useRef(null);return x.useEffect(()=>{if(!n.current||i.current)return;const a=Re.map(n.current,{zoomControl:!1,scrollWheelZoom:!1,dragging:!1,doubleClickZoom:!1,boxZoom:!1}).setView([0,0],13);return Re.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(a),i.current=a,()=>{a.remove(),i.current=null}},[]),x.useEffect(()=>{const a=i.current;if(!a||!e.area||e.area.length<3)return;s.current&&s.current.remove();const c=as(e.area),u=Re.polygon(c,{color:"#0f766e",fillColor:"#14b8a6",fillOpacity:.4,weight:2}).addTo(a);s.current=u,a.fitBounds(u.getBounds(),{padding:[20,20]})},[e]),!e.area||e.area.length===0?o.jsx("div",{style:{height:t},className:"flex items-center justify-center rounded-lg border border-gray-200 bg-gray-50",children:o.jsx("p",{className:"text-gray-500",children:"rea sin geometra definida"})}):o.jsx("div",{ref:n,style:{height:t,width:"100%"},className:"rounded-lg overflow-hidden border border-gray-200 shadow-sm relative z-0"})},ZL=({open:e,onClose:t,onSubmit:n,users:i,areas:s,isSubmitting:a=!1})=>{var y,N,E;const[c,u]=x.useState(""),[h,p]=x.useState(""),[m,g]=x.useState(""),[b,S]=x.useState({}),w=x.useMemo(()=>i.filter(P=>P.role==="prevendedor"),[i]),k=x.useMemo(()=>h&&s.find(P=>P.id===h)||null,[s,h]);x.useEffect(()=>{e&&(u(""),p(""),g(""),S({}))},[e]),x.useEffect(()=>{const P=M=>{M.key==="Escape"&&e&&!a&&t()};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[e,a,t]);const C=()=>{const P={};return c||(P.user="Selecciona un prevendedor"),h||(P.area="Selecciona un rea"),m||(P.date="Selecciona una fecha"),S(P),Object.keys(P).length===0},_=async P=>{P.preventDefault(),C()&&await n({assignedIdUser:c,assignedIdArea:h,assignedDate:new Date(m).toISOString()})};return e?o.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},children:[o.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:a?void 0:t}),o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",style:{zIndex:1e5},children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-brand-50 to-white",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-brand-100 rounded-xl",children:o.jsx("svg",{className:"w-6 h-6 text-brand-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Generar Ruta para Prevendedor"}),o.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Asigna un rea y fecha a un prevendedor"})]})]})}),o.jsxs("form",{onSubmit:_,className:"flex-1 overflow-y-auto",children:[o.jsxs("div",{className:"p-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" Vendedor/Distribuidor ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:c,onChange:P=>{u(P.target.value?Number(P.target.value):""),b.user&&S(M=>({...M,user:void 0}))},className:`w-full px-4 py-3 rounded-xl border-2 ${b.user?"border-red-400 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-200 focus:ring-brand-500 focus:border-brand-500"} focus:outline-none focus:ring-2 transition-all`,disabled:a,children:[o.jsx("option",{value:"",children:"Seleccionar prevendedor..."}),w.map(P=>o.jsxs("option",{value:P.id,children:[P.names," ",P.lastName," - ",P.userName]},P.id))]}),b.user&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1.5",children:[o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),b.user]}),w.length===0&&o.jsx("p",{className:"mt-2 text-sm text-amber-600",children:" No hay prevendedores disponibles"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" rea a Designar ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:h,onChange:P=>{p(P.target.value?Number(P.target.value):""),b.area&&S(M=>({...M,area:void 0}))},className:`w-full px-4 py-3 rounded-xl border-2 ${b.area?"border-red-400 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-200 focus:ring-brand-500 focus:border-brand-500"} focus:outline-none focus:ring-2 transition-all`,disabled:a,children:[o.jsx("option",{value:"",children:"Seleccionar rea..."}),s.map(P=>o.jsxs("option",{value:P.id,children:[P.name," (ID: ",P.id,")"]},P.id))]}),b.area&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1.5",children:[o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),b.area]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" Fecha Designada ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",value:m,onChange:P=>{g(P.target.value),b.date&&S(M=>({...M,date:void 0}))},min:new Date().toISOString().split("T")[0],className:`w-full px-4 py-3 rounded-xl border-2 ${b.date?"border-red-400 focus:ring-red-500 focus:border-red-500 bg-red-50":"border-gray-200 focus:ring-brand-500 focus:border-brand-500"} focus:outline-none focus:ring-2 transition-all`,disabled:a}),b.date&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1.5",children:[o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),b.date]})]}),(c||h||m)&&o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Resumen"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[c&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Prevendedor:"}),o.jsx("span",{className:"font-medium text-gray-800",children:((y=w.find(P=>P.id===c))==null?void 0:y.names)||"-"})]}),h&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"rea:"}),o.jsx("span",{className:"font-medium text-gray-800",children:((N=s.find(P=>P.id===h))==null?void 0:N.name)||"-"})]}),m&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Fecha:"}),o.jsx("span",{className:"font-medium text-gray-800",children:new Date(m+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:" Vista Previa del rea"}),k?o.jsx(HL,{area:k,height:"350px"}):o.jsx("div",{className:"h-[350px] bg-gray-100 rounded-xl border-2 border-dashed border-gray-300 flex items-center justify-center",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),o.jsx("p",{className:"font-medium",children:"Selecciona un rea"}),o.jsx("p",{className:"text-sm mt-1",children:"El mapa se mostrar aqu"})]})}),k&&o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-sm text-blue-700 border border-blue-100",children:[o.jsxs("p",{className:"font-medium",children:[" ",k.name]}),o.jsxs("p",{className:"text-blue-600 mt-1",children:[((E=k.area)==null?void 0:E.length)||0," puntos en el polgono"]})]})]})]}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:t,disabled:a,className:"px-5 py-2.5 rounded-xl border-2 border-gray-300 text-gray-700 font-medium hover:bg-gray-100 hover:border-gray-400 transition-all disabled:opacity-50",children:"Cerrar"}),o.jsx("button",{type:"submit",disabled:a,className:`px-6 py-2.5 rounded-xl font-medium transition-all flex items-center gap-2 ${a?"bg-gray-400 text-white cursor-not-allowed":"bg-brand-600 text-white hover:bg-brand-700 shadow-lg shadow-brand-500/30 hover:shadow-brand-500/40"}`,children:a?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generando..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generar Ruta"]})})]})]})]})]}):null},$L=()=>{const{error:e,createRoute:t,clearError:n}=UL(),{users:i,fetchUsers:s}=i0(),{areas:a,fetchAreas:c}=h0(),u=Zn(),[h,p]=x.useState(!1),[m,g]=x.useState(!1),[b,S]=x.useState(null),w=x.useCallback(async()=>{await Promise.all([s(),c()])},[s,c]);x.useEffect(()=>{w()},[w]),x.useEffect(()=>{e&&(u.error(e.message),n())},[e,u,n]);const k=async y=>{g(!0);try{if(await t({assignedIdUser:y.assignedIdUser,assignedIdArea:y.assignedIdArea,assignedDate:y.assignedDate})){u.success("Ruta generada exitosamente!");const E=i.find(I=>I.id===y.assignedIdUser),P=a.find(I=>I.id===y.assignedIdArea),M=E?`${E.lastName}${E.secondLastName?` ${E.secondLastName}`:""}, ${E.names}`:`Usuario #${y.assignedIdUser}`;S({userStr:M,areaStr:P?P.name:`rea #${y.assignedIdArea}`,date:(y.assignedIdArea,y.assignedDate)}),p(!1)}}catch{u.error("Error al generar la ruta")}finally{g(!1)}},C=x.useMemo(()=>[...i].sort((y,N)=>{const E=(y.lastName||"").toLowerCase(),P=(N.lastName||"").toLowerCase();if(E!==P)return E.localeCompare(P);const M=(y.secondLastName||"").toLowerCase(),I=(N.secondLastName||"").toLowerCase();return M!==I?M.localeCompare(I):(y.names||"").toLowerCase().localeCompare((N.names||"").toLowerCase())}),[i]),_=x.useMemo(()=>[...a].sort((y,N)=>(y.name||"").localeCompare(N.name||"")),[a]);return o.jsxs("div",{className:"relative overflow-hidden min-h-screen bg-gray-50/50",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(17,93,216,0.08),transparent_60%),radial-gradient(circle_at_80%_0%,rgba(255,100,27,0.05),transparent_55%)] pointer-events-none"}),o.jsxs("div",{className:"relative space-y-8 px-6 py-8 lg:px-10 lg:py-12",children:[o.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] bg-gradient-to-r from-brand-900 via-brand-700 to-brand-500 text-white shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none",style:{backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 45%)"}}),o.jsx("div",{className:"relative z-10 px-8 py-10",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs uppercase tracking-[0.45em] text-white/70 mb-2",children:"Gestin de Distribucin"}),o.jsx("h1",{className:"text-3xl font-bold leading-tight md:text-4xl",children:"Rutas de Prevendedores"}),o.jsx("p",{className:"text-white/80 text-lg mt-2 max-w-xl",children:"Asigna reas geogrficas a tus prevendedores para optimizar la cobertura de ventas."})]}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("div",{className:"rounded-2xl bg-white/10 border border-white/20 px-5 py-3 backdrop-blur-sm",children:[o.jsx("p",{className:"text-xs uppercase tracking-wide text-white/70",children:"Prevendedores Activos"}),o.jsx("p",{className:"mt-1 text-2xl font-bold text-white",children:i.filter(y=>y.role==="prevendedor").length})]}),o.jsxs("div",{className:"rounded-2xl bg-white/10 border border-white/20 px-5 py-3 backdrop-blur-sm",children:[o.jsx("p",{className:"text-xs uppercase tracking-wide text-white/70",children:"reas Disponibles"}),o.jsx("p",{className:"mt-1 text-2xl font-bold text-white",children:a.length})]})]})]}),o.jsx("div",{children:o.jsx("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-6 py-3 bg-white text-brand-700 rounded-xl hover:bg-brand-50 transition-colors shadow-lg font-bold transform hover:scale-105 duration-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})]})})]}),b&&o.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-2xl p-6 flex items-start gap-4 shadow-sm animate-fade-in",children:[o.jsx("div",{className:"bg-emerald-100 p-3 rounded-full",children:o.jsx("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-emerald-800",children:"ltima Ruta Generada"}),o.jsxs("p",{className:"text-emerald-700 mt-1",children:["Has asignado al prevendedor ",o.jsx("strong",{children:b.userStr})," el rea ",o.jsx("strong",{children:b.areaStr})," para el da ",o.jsx("strong",{children:new Date(b.date).toLocaleDateString()}),"."]})]})]}),o.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Cmo funciona?"}),o.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:'El sistema permite asignar vendedores ("prevendedores") a reas geogrficas especficas para fechas determinadas. Esto ayuda a organizar el trabajo de campo y asegurar que todas las zonas sean cubiertas eficientemente.'}),o.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-500"}),"Selecciona un prevendedor de la lista."]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-500"}),"Elige el rea geogrfica correspondiente."]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-500"}),"Establece la fecha de visita."]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Gestin de reas"}),o.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:'Recuerda que para asignar rutas, primero debes tener reas definidas en el sistema. Puedes gestionar las reas desde la seccin de "reas".'}),o.jsx("div",{className:"mt-6",children:o.jsxs("a",{href:"/areas",className:"text-brand-600 font-medium text-sm hover:underline flex items-center gap-1",children:["Ir a gestin de reas",o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})]})]}),o.jsx(ZL,{open:h,onClose:()=>p(!1),onSubmit:k,users:C,areas:_,isSubmitting:m}),o.jsx($r,{toasts:u.toasts,onDismiss:u.dismissToast})]})},WL=()=>o.jsx(I1,{children:o.jsx(Sg,{})}),VL=()=>o.jsxs(F_,{children:[o.jsx(ft,{path:"/login",element:o.jsx(R1,{})}),o.jsx(ft,{element:o.jsx(C1,{}),children:o.jsxs(ft,{element:o.jsx(WL,{}),children:[o.jsx(ft,{path:"/",element:o.jsx(ad,{to:"/users",replace:!0})}),o.jsx(ft,{path:"/products",element:o.jsx(J1,{})}),o.jsx(ft,{path:"/suppliers",element:o.jsx(sL,{})}),o.jsx(ft,{path:"/inventory",element:o.jsx(lL,{})}),o.jsx(ft,{path:"/users",element:o.jsx(xL,{})}),o.jsx(ft,{path:"/profile",element:o.jsx(vL,{})}),o.jsx(ft,{path:"/clients",element:o.jsx(ip,{})}),o.jsx(ft,{path:"/businesses",element:o.jsx(ip,{})}),o.jsx(ft,{path:"/areas",element:o.jsx(TL,{})}),o.jsx(ft,{path:"/routes",element:o.jsx($L,{})})]})}),o.jsx(ft,{path:"*",element:o.jsx(ad,{to:"/users",replace:!0})})]}),GL=()=>o.jsx(q_,{children:o.jsx(j1,{children:o.jsx(VL,{})})});uc.createRoot(document.getElementById("root")).render(o.jsx(pn.StrictMode,{children:o.jsx(GL,{})}));
